<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RapidAssess: Unintentional Weight Loss - Clinical Decision Support</title>
    <style>
        :root {
            --red-50: #FEF2F2;
            --red-100: #FEE2E2;
            --red-200: #FECACA;
            --red-500: #EF4444;
            --red-600: #DC2626;
            --red-700: #B91C1C;
            --green-50: #F0FDF4;
            --green-100: #DCFCE7;
            --green-200: #BBF7D0;
            --green-500: #22C55E;
            --green-600: #16A34A;
            --green-700: #15803D;
            --blue-50: #EFF6FF;
            --blue-100: #DBEAFE;
            --blue-200: #BFDBFE;
            --blue-500: #3B82F6;
            --blue-600: #2563EB;
            --blue-700: #1D4ED8;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.5;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-700) 100%);
            color: white;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--blue-500);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-icon svg {
            width: 28px;
            height: 28px;
            color: white;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.025em;
        }

        .logo-text p {
            font-size: 0.875rem;
            color: var(--gray-300);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            background: var(--green-500);
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .status-indicator.warning {
            background: var(--red-500);
            animation: pulse-warning 2s infinite;
        }

        @keyframes pulse-warning {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
        }

        .reset-btn {
            background: var(--gray-600);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reset-btn:hover {
            background: var(--gray-500);
            transform: translateY(-1px);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 1.5rem;
        }

        /* Main Content Area */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Section Styling */
        .section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-500);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--gray-200);
        }

        .card-header.blue {
            background: var(--blue-50);
            border-bottom-color: var(--blue-200);
        }

        .card-header.red {
            background: var(--red-50);
            border-bottom-color: var(--red-200);
        }

        .card-header.green {
            background: var(--green-50);
            border-bottom-color: var(--green-200);
        }

        .card-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-header.blue .card-title { color: var(--blue-700); }
        .card-header.red .card-title { color: var(--red-700); }
        .card-header.green .card-title { color: var(--green-700); }

        .card-body {
            padding: 1.5rem;
        }

        /* Grid Layouts */
        .two-column {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        /* Calculator Section */
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            align-items: end;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .input-group label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-600);
        }

        .input-group input {
            padding: 0.75rem;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--blue-500);
            box-shadow: 0 0 0 3px var(--blue-100);
        }

        .result-box {
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-weight: 700;
        }

        .result-box.significant {
            background: var(--red-100);
            color: var(--red-700);
            border: 2px solid var(--red-300);
        }

        .result-box.normal {
            background: var(--green-100);
            color: var(--green-700);
            border: 2px solid var(--green-300);
        }

        /* Red Flag Items */
        .red-flag-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--gray-50);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .red-flag-item:hover {
            background: var(--gray-100);
        }

        .red-flag-item.checked {
            background: var(--red-100);
            border-color: var(--red-300);
        }

        .red-flag-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--gray-300);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .red-flag-item.checked .red-flag-checkbox {
            background: var(--red-500);
            border-color: var(--red-500);
        }

        .red-flag-checkbox svg {
            width: 16px;
            height: 16px;
            color: white;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .red-flag-item.checked .red-flag-checkbox svg {
            opacity: 1;
        }

        .red-flag-text {
            font-weight: 600;
            color: var(--gray-700);
        }

        .red-flag-item.checked .red-flag-text {
            color: var(--red-700);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .data-table th {
            background: var(--gray-100);
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 700;
            color: var(--gray-700);
            border-bottom: 2px solid var(--gray-200);
        }

        .data-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .data-table tr:hover {
            background: var(--gray-50);
        }

        .priority-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .priority-badge.critical {
            background: var(--red-100);
            color: var(--red-700);
        }

        .priority-badge.high {
            background: var(--orange-100);
            color: var(--orange-700);
        }

        .priority-badge.routine {
            background: var(--blue-100);
            color: var(--blue-700);
        }

        /* Mnemonic Cards */
        .mnemonic-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
        }

        .mnemonic-card {
            background: var(--blue-50);
            border: 2px solid var(--blue-200);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mnemonic-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--blue-400);
        }

        .mnemonic-letter {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--blue-600);
            margin-bottom: 0.25rem;
        }

        .mnemonic-meaning {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-600);
        }

        .mnemonic-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gray-800);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
            z-index: 10;
        }

        .mnemonic-card:hover .mnemonic-tooltip {
            opacity: 1;
        }

        /* Accordion */
        .accordion-item {
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            overflow: hidden;
        }

        .accordion-item:last-child {
            margin-bottom: 0;
        }

        .accordion-header {
            padding: 1rem 1.5rem;
            background: var(--gray-50);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .accordion-header:hover {
            background: var(--gray-100);
        }

        .accordion-title {
            font-weight: 700;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-item.open .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-item.open .accordion-content {
            max-height: 1000px;
        }

        .accordion-body {
            padding: 1.5rem;
            border-top: 1px solid var(--gray-200);
        }

        /* Checklist Items */
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.5rem 0;
        }

        .checklist-bullet {
            width: 8px;
            height: 8px;
            background: var(--blue-500);
            border-radius: 50%;
            margin-top: 0.5rem;
            flex-shrink: 0;
        }

        .checklist-text {
            font-size: 0.875rem;
            color: var(--gray-700);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        /* Action Panel */
        .action-panel {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        .action-header {
            padding: 1rem 1.5rem;
            background: var(--blue-600);
            color: white;
        }

        .action-header h3 {
            font-size: 1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-body {
            padding: 1rem;
        }

        .action-btn {
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: 2px solid;
        }

        .action-btn:last-child {
            margin-bottom: 0;
        }

        .action-btn.emergency {
            background: var(--red-500);
            color: white;
            border-color: var(--red-500);
        }

        .action-btn.emergency:hover {
            background: var(--red-600);
        }

        .action-btn.urgent {
            background: var(--orange-100);
            color: var(--orange-700);
            border-color: var(--orange-300);
        }

        .action-btn.urgent:hover {
            background: var(--orange-200);
        }

        .action-btn.routine {
            background: var(--blue-50);
            color: var(--blue-700);
            border-color: var(--blue-300);
        }

        .action-btn.routine:hover {
            background: var(--blue-100);
        }

        /* Quick Reference */
        .quick-ref {
            background: var(--gray-800);
            border-radius: 12px;
            padding: 1.5rem;
            color: white;
        }

        .quick-ref h4 {
            font-size: 0.875rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-ref-item {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--gray-700);
            font-size: 0.875rem;
        }

        .quick-ref-item:last-child {
            border-bottom: none;
        }

        .quick-ref-label {
            color: var(--gray-400);
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .quick-ref-value {
            font-weight: 600;
        }

        /* Sticky Alerts */
        .sticky-alert {
            position: fixed;
            top: 100px;
            right: 1.5rem;
            width: 380px;
            background: var(--red-500);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sticky-alert.show {
            transform: translateX(0);
        }

        .sticky-alert-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .sticky-alert-icon svg {
            width: 24px;
            height: 24px;
            color: var(--red-500);
        }

        .sticky-alert-text h4 {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .sticky-alert-text p {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* Icon sizes */
        .icon-sm {
            width: 18px;
            height: 18px;
        }

        .icon-md {
            width: 24px;
            height: 24px;
        }

        .icon-lg {
            width: 32px;
            height: 32px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
                display: grid;
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .two-column, .three-column {
                grid-template-columns: 1fr;
            }

            .calculator-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .mnemonic-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .sidebar {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .sticky-alert {
                width: calc(100% - 3rem);
                left: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }

            .mnemonic-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scale-in {
            animation: scaleIn 0.2s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-100);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-400);
        }

        /* Print styles */
        @media print {
            .header, .sidebar, .sticky-alert, .reset-btn {
                display: none;
            }

            .container {
                grid-template-columns: 1fr;
            }

            .card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--gray-300);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>RapidAssess</h1>
                    <p>Unintentional Weight Loss - Clinical Decision Support</p>
                </div>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <div class="status-dot"></div>
                <span>Assessment Ready</span>
            </div>
            <button class="reset-btn" onclick="resetForm()">
                <svg class="icon-sm" style="display:inline;margin-right:0.5rem" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                Reset
            </button>
        </div>
    </header>

    <!-- Sticky Alert Banner -->
    <div class="sticky-alert" id="stickyAlert">
        <div class="sticky-alert-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
        </div>
        <div class="sticky-alert-text">
            <h4>Red Flag Detected</h4>
            <p>Review emergency conditions immediately</p>
        </div>
    </div>

    <div class="container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Calculator Section -->
            <div class="card fade-in">
                <div class="card-header blue">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />
                        </svg>
                        Weight Loss Calculator
                    </h2>
                </div>
                <div class="card-body">
                    <div class="calculator-grid">
                        <div class="input-group">
                            <label>Current Weight (kg)</label>
                            <input type="number" id="currentWeight" placeholder="70" oninput="calculateWeightLoss()">
                        </div>
                        <div class="input-group">
                            <label>Previous Weight (kg)</label>
                            <input type="number" id="previousWeight" placeholder="80" oninput="calculateWeightLoss()">
                        </div>
                        <div class="input-group">
                            <label>Usual Weight (kg)</label>
                            <input type="number" id="usualWeight" placeholder="75" oninput="calculateWeightLoss()">
                        </div>
                        <div class="result-box" id="resultBox">
                            <span id="resultText">Enter weights above</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Red Flags Section -->
            <div class="card fade-in" style="animation-delay: 0.1s;">
                <div class="card-header red">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        Emergency Red Flags
                    </h2>
                    <span class="priority-badge critical" id="redFlagCount">0 Selected</span>
                </div>
                <div class="card-body">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'hemoptysis')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Hemoptysis</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'fever')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">High Fever (>39Â°C)</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'hypotension')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Severe Hypotension</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'altered')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Altered Mental Status</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'suicide')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Suicidal Ideation</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'tachyarrhythmia')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Tachyarrhythmia</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'dehydration')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Severe Dehydration</span>
                        </div>
                        <div class="red-flag-item" onclick="toggleRedFlag(this, 'chest pain')">
                            <div class="red-flag-checkbox">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <span class="red-flag-text">Acute Chest Pain</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Two Column: Differential & Workup -->
            <div class="two-column">
                <!-- Differential Diagnosis -->
                <div class="card fade-in" style="animation-delay: 0.2s;">
                    <div class="card-header green">
                        <h2 class="card-title">
                            <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                            </svg>
                            MEALS ON WHEELS
                        </h2>
                    </div>
                    <div class="card-body">
                        <p style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: 1rem;">Hover over letters for differential diagnosis</p>
                        <div class="mnemonic-grid">
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">M</div>
                                <div class="mnemonic-meaning">Malignancy</div>
                                <div class="mnemonic-tooltip">Cancer (GI, lung, lymphoma, pancreatic, esophageal, hepatoma)</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">E</div>
                                <div class="mnemonic-meaning">Endocrine</div>
                                <div class="mnemonic-tooltip">Hyperthyroidism, diabetes, adrenal insufficiency</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">A</div>
                                <div class="mnemonic-meaning">Anorexia/Alcohol</div>
                                <div class="mnemonic-tooltip">Eating disorders, substance misuse, alcohol</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">L</div>
                                <div class="mnemonic-meaning">Late life</div>
                                <div class="mnemonic-tooltip">Dementia, Parkinson's, cardiac cachexia</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">S</div>
                                <div class="mnemonic-meaning">Social</div>
                                <div class="mnemonic-tooltip">Poverty, isolation, abuse, inadequate food access</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">O</div>
                                <div class="mnemonic-meaning">Other GI</div>
                                <div class="mnemonic-tooltip">Malabsorption, IBD, celiac, pancreatic insufficiency</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">N</div>
                                <div class="mnemonic-meaning">Neuro</div>
                                <div class="mnemonic-tooltip">Stroke, ALS, MS, dysphagia</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">W</div>
                                <div class="mnemonic-meaning">Workup</div>
                                <div class="mnemonic-tooltip">Medication effects (SSRIs, metformin, topiramate)</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">H</div>
                                <div class="mnemonic-meaning">Heart/Lung</div>
                                <div class="mnemonic-tooltip">CHF, COPD, TB, endocarditis</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">E</div>
                                <div class="mnemonic-meaning">Elevated</div>
                                <div class="mnemonic-tooltip">Infection, inflammation, ESR/CRP elevation</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">E</div>
                                <div class="mnemonic-meaning">Renal</div>
                                <div class="mnemonic-tooltip">Chronic kidney disease, renal failure</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">L</div>
                                <div class="mnemonic-meaning">Sarcopenia</div>
                                <div class="mnemonic-tooltip">Age-related muscle loss</div>
                            </div>
                            <div class="mnemonic-card" style="position: relative;">
                                <div class="mnemonic-letter">S</div>
                                <div class="mnemonic-meaning">Systemic</div>
                                <div class="mnemonic-tooltip">SLE, vasculitis, sarcoidosis</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Initial Workup -->
                <div class="card fade-in" style="animation-delay: 0.3s;">
                    <div class="card-header blue">
                        <h2 class="card-title">
                            <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                            </svg>
                            Initial Laboratory Workup
                        </h2>
                    </div>
                    <div class="card-body" style="padding: 1rem;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Test</th>
                                    <th>Rationale</th>
                                    <th>Priority</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>FBC</strong></td>
                                    <td>Anemia, infection, malignancy</td>
                                    <td><span class="priority-badge critical">Critical</span></td>
                                </tr>
                                <tr>
                                    <td><strong>U&E</strong></td>
                                    <td>Electrolytes, renal function</td>
                                    <td><span class="priority-badge critical">Critical</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Glucose</strong></td>
                                    <td>Diabetes, DKA screening</td>
                                    <td><span class="priority-badge critical">Critical</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Calcium</strong></td>
                                    <td>Hypercalcemia (malignancy)</td>
                                    <td><span class="priority-badge critical">Critical</span></td>
                                </tr>
                                <tr>
                                    <td><strong>LFTs</strong></td>
                                    <td>Liver disease, obstruction</td>
                                    <td><span class="priority-badge critical">Critical</span></td>
                                </tr>
                                <tr>
                                    <td><strong>TSH</strong></td>
                                    <td>Thyroid dysfunction</td>
                                    <td><span class="priority-badge routine">Routine</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Albumin</strong></td>
                                    <td>Nutritional status, inflammation</td>
                                    <td><span class="priority-badge routine">Routine</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Urinalysis</strong></td>
                                    <td>Infection, renal disease</td>
                                    <td><span class="priority-badge routine">Routine</span></td>
                                </tr>
                                <tr>
                                    <td><strong>FIT Test</strong></td>
                                    <td>Colorectal cancer screening</td>
                                    <td><span class="priority-badge high">High</span></td>
                                </tr>
                                <tr>
                                    <td><strong>ESR/CRP</strong></td>
                                    <td>Inflammation, infection, malignancy</td>
                                    <td><span class="priority-badge routine">Routine</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- History Taking Accordion -->
            <div class="card fade-in" style="animation-delay: 0.4s;">
                <div class="card-header blue">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                        </svg>
                        History Taking Checklist
                    </h2>
                </div>
                <div class="card-body" style="padding: 1rem;">
                    <div class="two-column">
                        <div>
                            <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--blue-700); margin-bottom: 0.75rem;">Symptoms Review</h4>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Fever, chills, night sweats (infection, lymphoma)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Dysphagia, odynophagia (esophageal cancer)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Dyspepsia, abdominal pain (GI malignancy, PUD)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Change in bowel habits, rectal bleeding (colorectal cancer)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Cough, hemoptysis (TB, lung cancer)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Polyuria, polydipsia (diabetes)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Palpitations, heat intolerance (hyperthyroidism)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet"></div>
                                <span class="checklist-text">Weakness, fatigue (adrenal insufficiency)</span>
                            </div>
                        </div>
                        <div>
                            <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--blue-700); margin-bottom: 0.75rem;">Red Flag Symptoms</h4>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                <span class="checklist-text">Unintentional weight loss >5% in 6-12 months</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                <span class="checklist-text">Anorexia (80% have identifiable cause)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                <span class="checklist-text">Diarrhea, steatorrhea (malabsorption)</span>
                            </div>
                            <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--blue-700); margin: 1rem 0 0.75rem;">Risk Factors</h4>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                <span class="checklist-text">Smoking history (lung, head & neck, bladder cancer)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                <span class="checklist-text">Alcohol use (head & neck, esophageal cancer)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                <span class="checklist-text">Medication review (SSRIs, metformin, topiramate)</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                <span class="checklist-text">Social circumstances, access to food</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Physical Exam Accordion -->
            <div class="card fade-in" style="animation-delay: 0.5s;">
                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <span class="accordion-title">
                            <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            Physical Examination Findings
                        </span>
                        <svg class="accordion-icon icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <div class="three-column">
                                <div>
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem;">Critical Findings</h4>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                        <span class="checklist-text">Lymphadenopathy (malignancy, infection)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                        <span class="checklist-text">Hepatomegaly, splenomegaly (malignancy)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                        <span class="checklist-text">Abdominal mass (malignancy)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                        <span class="checklist-text">Digital clubbing (malignancy, IBD)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--red-500);"></div>
                                        <span class="checklist-text">Jaundice (hepatoma, biliary obstruction)</span>
                                    </div>
                                </div>
                                <div>
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--orange-700); margin-bottom: 0.75rem;">Systemic Findings</h4>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                        <span class="checklist-text">Fever (infection, malignancy, TB)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                        <span class="checklist-text">Tachycardia (hyperthyroidism, hypermetabolism)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                        <span class="checklist-text">Orthostatic hypotension (adrenal insufficiency)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                        <span class="checklist-text">Hypothermia (severe illness, hypothyroidism)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--orange-500);"></div>
                                        <span class="checklist-text">Rash (vasculitis, SLE, infections)</span>
                                    </div>
                                </div>
                                <div>
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--blue-700); margin-bottom: 0.75rem;">Organ-Specific</h4>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--blue-500);"></div>
                                        <span class="checklist-text">Goiter (thyroid disease)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--blue-500);"></div>
                                        <span class="checklist-text">Signs of heart failure (cardiac cachexia)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--blue-500);"></div>
                                        <span class="checklist-text">Lung crackles (COPD, ILD, infection)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--blue-500);"></div>
                                        <span class="checklist-text">Thyroid bruits (hyperthyroidism)</span>
                                    </div>
                                    <div class="checklist-item">
                                        <div class="checklist-bullet" style="background: var(--blue-500);"></div>
                                        <span class="checklist-text">Hyperpigmentation (Addison's)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Emergency Conditions -->
            <div class="card fade-in" style="animation-delay: 0.6s;">
                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <span class="accordion-title">
                            <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                            Emergency Conditions Requiring Immediate Action
                        </span>
                        <svg class="accordion-icon icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <div class="three-column">
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        Adrenal Crisis
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">Sudden hypotension, reduced organ perfusion, abdominal pain</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> Immediate IV fluids + IV hydrocortisone/dexamethasone</p>
                                </div>
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        Thyroid Storm
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">Fever, altered mental status, tachyarrhythmia, cardiac dysfunction</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> ICU care, beta-blockers, glucocorticoids, antithyroid drugs</p>
                                </div>
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        DKA/HHS
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">Polyuria, polydipsia, altered mental status, dehydration</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> Hospital admission, fluid resuscitation, insulin therapy</p>
                                </div>
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        Severe Eating Disorder
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">Severely low BMI, bradycardia, hypothermia, hypotension</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> Monitor for re-feeding syndrome, cardiac monitoring</p>
                                </div>
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        Suicidal Ideation
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">Associated with depression, bipolar, anorexia nervosa</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> Psychiatric emergency assessment, safety planning</p>
                                </div>
                                <div style="background: var(--red-50); border: 2px solid var(--red-200); border-radius: 10px; padding: 1rem;">
                                    <h4 style="font-size: 0.875rem; font-weight: 700; color: var(--red-700); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                        </svg>
                                        Life-Threatening Infection
                                    </h4>
                                    <p style="font-size: 0.75rem; color: var(--gray-600); margin-bottom: 0.5rem;">TB, endocarditis, advanced HIV with OIs</p>
                                    <p style="font-size: 0.75rem; color: var(--gray-600);"><strong>Action:</strong> Urgent infection workup, source control</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Imaging & Next Steps -->
            <div class="card fade-in" style="animation-delay: 0.7s;">
                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <span class="accordion-title">
                            <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            Imaging & Further Investigation
                        </span>
                        <svg class="accordion-icon icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content">
                        <div class="accordion-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Investigation</th>
                                        <th>Indications</th>
                                        <th>Findings</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Chest X-ray</strong></td>
                                        <td>Routine if no obvious cause; cough, dyspnea</td>
                                        <td>Lung mass, lymphadenopathy, TB, granulomas</td>
                                    </tr>
                                    <tr>
                                        <td><strong>CT Chest/Abdomen/Pelvis</strong></td>
                                        <td>Negative initial workup, concern for malignancy</td>
                                        <td>28-33% yield for highly suspicious findings</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Upper GI Endoscopy</strong></td>
                                        <td>Dysphagia, dyspepsia, anemia, FIT positive</td>
                                        <td>Gastric, esophageal cancer, peptic ulcer</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Colonoscopy</strong></td>
                                        <td>Rectal bleeding, anemia, FIT positive, change in stool caliber</td>
                                        <td>Colorectal cancer, IBD</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Abdominal Ultrasound</strong></td>
                                        <td>Jaundice, RUQ pain, abnormal LFTs</td>
                                        <td>Hepatoma, pancreatic mass, biliary dilation</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Echocardiogram</strong></td>
                                        <td>Known heart failure, murmur, endocarditis risk</td>
                                        <td>Valve lesions, cardiac function, vegetations</td>
                                    </tr>
                                    <tr>
                                        <td><strong>HIV Serology</strong></td>
                                        <td>Risk factors present</td>
                                        <td>HIV infection, low CD4, OIs</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Action Panel -->
            <div class="action-panel fade-in" style="animation-delay: 0.2s;">
                <div class="action-header">
                    <h3>
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                        </svg>
                        Recommended Actions
                    </h3>
                </div>
                <div class="action-body">
                    <button class="action-btn emergency" onclick="handleEmergency()">
                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        Admit to Hospital
                    </button>
                    <button class="action-btn urgent" onclick="handleUrgentReferral()">
                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        Urgent 2WW Referral
                    </button>
                    <button class="action-btn routine" onclick="handleOutpatientWorkup()">
                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        Outpatient Workup
                    </button>
                    <button class="action-btn routine" onclick="handleFollowUp()">
                        <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        2-Week Follow-up
                    </button>
                </div>
            </div>

            <!-- Quick Reference -->
            <div class="quick-ref fade-in" style="animation-delay: 0.3s;">
                <h4>
                    <svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Quick Reference
                </h4>
                <div class="quick-ref-item">
                    <div class="quick-ref-label">Definition</div>
                    <div class="quick-ref-value">â¥5% weight loss over 6-12 months</div>
                </div>
                <div class="quick-ref-item">
                    <div class="quick-ref-label">Top 3 Causes</div>
                    <div class="quick-ref-value">Malignancy, GI disease, Psychiatric</div>
                </div>
                <div class="quick-ref-item">
                    <div class="quick-ref-label">Initial Labs</div>
                    <div class="quick-ref-value">FBC, U&E, Glucose, Ca, LFTs</div>
                </div>
                <div class="quick-ref-item">
                    <div class="quick-ref-label">Cancer Risk</div>
                    <div class="quick-ref-value">Increases with age, male sex</div>
                </div>
                <div class="quick-ref-item">
                    <div class="quick-ref-label">Undiagnosed</div>
                    <div class="quick-ref-value">11-28% remain undiagnosed after workup</div>
                </div>
            </div>

            <!-- Age-Specific Considerations -->
            <div class="card fade-in" style="animation-delay: 0.4s;">
                <div class="card-header green">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        Age Considerations
                    </h2>
                </div>
                <div class="card-body" style="padding: 1rem;">
                    <div style="margin-bottom: 1rem;">
                        <h4 style="font-size: 0.75rem; font-weight: 700; color: var(--blue-700); margin-bottom: 0.5rem;">Younger Patients (<50)</h4>
                        <p style="font-size: 0.75rem; color: var(--gray-600);">Consider: Psychiatric, GI (IBD, celiac), hematologic malignancy, eating disorders, MS, ALS</p>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <h4 style="font-size: 0.75rem; font-weight: 700; color: var(--orange-700); margin-bottom: 0.5rem;">Older Patients (>65)</h4>
                        <p style="font-size: 0.75rem; color: var(--gray-600);">Consider: Malignancy, cardiovascular disease, dementia, Parkinson's, cardiac cachexia, COPD</p>
                    </div>
                    <div style="background: var(--gray-100); padding: 0.75rem; border-radius: 8px;">
                        <p style="font-size: 0.75rem; font-weight: 600; color: var(--gray-700);">Prevalence: 15-20% in elderly; up to 60% in nursing homes</p>
                    </div>
                </div>
            </div>

            <!-- Common Cancers -->
            <div class="card fade-in" style="animation-delay: 0.5s;">
                <div class="card-header red">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        Common Malignancies
                    </h2>
                </div>
                <div class="card-body" style="padding: 1rem;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Gastric cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Colorectal cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Esophageal cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Pancreatic cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Lung cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Lymphoma</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Prostate cancer</div>
                        <div style="background: var(--red-50); padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; color: var(--red-700);">Ovarian cancer</div>
                    </div>
                </div>
            </div>

            <!-- Medications Causing Weight Loss -->
            <div class="card fade-in" style="animation-delay: 0.6s;">
                <div class="card-header blue">
                    <h2 class="card-title">
                        <svg class="icon-md" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                        </svg>
                        Medications to Review
                    </h2>
                </div>
                <div class="card-body" style="padding: 1rem;">
                    <div style="display: grid; gap: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--orange-500); border-radius: 50%;"></span>
                            <strong>Anticonvulsants:</strong> Topiramate, Zonisamide
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--orange-500); border-radius: 50%;"></span>
                            <strong>Antidepressants:</strong> SSRIs, Bupropion
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--orange-500); border-radius: 50%;"></span>
                            <strong>Diabetes meds:</strong> Metformin, GLP-1 agonists, SGLT2 inhibitors
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--orange-500); border-radius: 50%;"></span>
                            <strong>Other:</strong> Antibiotics (diarrhea), Donepezil, Stimulants
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--red-500); border-radius: 50%;"></span>
                            <strong>Misused:</strong> Laxatives, diuretics, thyroid hormone
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem;">
                            <span style="width: 8px; height: 8px; background: var(--green-500); border-radius: 50%;"></span>
                            <strong>Withdrawal:</strong> Pancreatic enzymes, Mirtazapine
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let redFlagCount = 0;
        let checkedRedFlags = new Set();

        // Weight loss calculator
        function calculateWeightLoss() {
            const currentWeight = parseFloat(document.getElementById('currentWeight').value);
            const previousWeight = parseFloat(document.getElementById('previousWeight').value);
            const usualWeight = parseFloat(document.getElementById('usualWeight').value);
            const resultBox = document.getElementById('resultBox');
            const resultText = document.getElementById('resultText');

            // Use previous weight if usual weight not available
            const baseline = usualWeight || previousWeight;

            if (currentWeight && baseline && baseline > 0) {
                const percentLoss = ((baseline - currentWeight) / baseline) * 100;
                const isSignificant = percentLoss >= 5;

                resultBox.className = 'result-box ' + (isSignificant ? 'significant' : 'normal');
                resultText.innerHTML = `
                    <div style="font-size: 1.5rem;">${percentLoss.toFixed(1)}%</div>
                    <div style="font-size: 0.875rem;">${isSignificant ? 'â ï¸ Significant Loss' : 'Within normal range'}</div>
                `;

                // Auto-check significant red flag if weight loss is significant
                if (isSignificant) {
                    // Optional: visual feedback that this is a red flag
                }
            } else {
                resultBox.className = 'result-box';
                resultText.textContent = 'Enter weights above';
            }
        }

        // Toggle red flag
        function toggleRedFlag(element, flag) {
            element.classList.toggle('checked');

            if (checkedRedFlags.has(flag)) {
                checkedRedFlags.delete(flag);
                redFlagCount--;
            } else {
                checkedRedFlags.add(flag);
                redFlagCount++;
            }

            updateStatusIndicator();
        }

        // Update status indicator
        function updateStatusIndicator() {
            const indicator = document.getElementById('statusIndicator');
            const countBadge = document.getElementById('redFlagCount');
            const stickyAlert = document.getElementById('stickyAlert');

            countBadge.textContent = redFlagCount + ' Selected';

            if (redFlagCount > 0) {
                indicator.classList.add('warning');
                indicator.innerHTML = `
                    <div class="status-dot"></div>
                    <span>Red Flag${redFlagCount > 1 ? 's' : ''} Detected</span>
                `;
                stickyAlert.classList.add('show');
            } else {
                indicator.classList.remove('warning');
                indicator.innerHTML = `
                    <div class="status-dot"></div>
                    <span>Assessment Ready</span>
                `;
                stickyAlert.classList.remove('show');
            }
        }

        // Toggle accordion
        function toggleAccordion(header) {
            const item = header.parentElement;
            item.classList.toggle('open');
        }

        // Action handlers
        function handleEmergency() {
            alert('â ï¸ IMMEDIATE ACTION REQUIRED\n\nRed flags detected. Consider:\nâ¢ Admit to hospital\nâ¢ Emergency investigations\nâ¢ Specialist consultation\n\nEnsure patient stability and monitor vitals.');
        }

        function handleUrgentReferral() {
            alert('ð¨ URGENT REFERRAL\n\nConsider 2-week wait (2WW) referral for suspected cancer:\n\nâ¢ FIT positive\nâ¢ Age >50 with unexplained weight loss\nâ¢ Age >40 with weight loss + abdominal pain\nâ¢ Rectal bleeding + weight loss <50 years\n\nRefer via suspected cancer pathway.');
        }

        function handleOutpatientWorkup() {
            alert('ð OUTPATIENT WORKUP RECOMMENDED\n\nOrder the following initial tests:\n\nâ FBC, U&E, Glucose, Calcium, LFTs\nâ TSH\nâ Urinalysis\nâ FIT test if indicated\nâ Consider ESR/CRP\n\nThen arrange follow-up in 1-2 weeks.');
        }

        function handleFollowUp() {
            alert('ð FOLLOW-UP ARRANGED\n\nSchedule review in 2 weeks to:\n\nâ¢ Review investigation results\nâ¢ Reassess symptoms\nâ¢ Consider further imaging if needed\nâ¢ Monitor weight trends\n\nAdvise patient to return if symptoms worsen.');
        }

        // Reset form
        function resetForm() {
            // Reset calculator
            document.getElementById('currentWeight').value = '';
            document.getElementById('previousWeight').value = '';
            document.getElementById('usualWeight').value = '';
            document.getElementById('resultBox').className = 'result-box';
            document.getElementById('resultText').textContent = 'Enter weights above';

            // Reset red flags
            document.querySelectorAll('.red-flag-item').forEach(item => {
                item.classList.remove('checked');
            });
            checkedRedFlags.clear();
            redFlagCount = 0;
            updateStatusIndicator();

            // Reset accordions
            document.querySelectorAll('.accordion-item').forEach(item => {
                item.classList.remove('open');
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Add subtle entrance animations
            document.querySelectorAll('.card, .quick-ref').forEach((el, index) => {
                el.style.animationDelay = (index * 0.1) + 's';
            });
        });
    </script>
</body>
</html>