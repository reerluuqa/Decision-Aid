<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lower GI Cancer: Recognition & Referral Tool</title>
    <style>
        :root {
            /* Clinical Color Palette */
            --color-red: #e63946;
            --color-red-bg: #ffe5e6;
            --color-green: #2a9d8f;
            --color-green-bg: #e0f2f1;
            --color-blue: #457b9d;
            --color-blue-bg: #e3f2fd;
            --color-neutral: #f1faee;
            --color-dark: #1d3557;
            --color-text: #333;
            --shadow-card: 0 4px 6px rgba(0,0,0,0.05);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.1);
            --radius: 8px;
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: #f4f6f8;
            color: var(--color-text);
            line-height: 1.5;
            padding-bottom: 40px;
        }

        /* --- Header --- */
        header {
            background-color: var(--color-dark);
            color: white;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .brand h1 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .brand span {
            font-size: 0.85rem;
            opacity: 0.8;
            display: block;
        }

        .meta-info {
            font-size: 0.8rem;
            background: rgba(255,255,255,0.1);
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* --- Main Layout --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- Quick Decision Tool (Hero) --- */
        .decision-engine {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-card);
            margin-bottom: 25px;
            border-left: 5px solid var(--color-blue);
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 20px;
            align-items: center;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--color-dark);
        }

        .input-group select, .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .action-box {
            padding: 15px;
            border-radius: var(--radius);
            font-weight: bold;
            min-width: 250px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 80px;
        }

        .status-pending {
            background: #eee;
            color: #777;
        }

        .status-urgent {
            background: var(--color-red-bg);
            color: var(--color-red);
            border: 2px solid var(--color-red);
        }

        .status-test {
            background: var(--color-blue-bg);
            color: var(--color-blue);
            border: 2px solid var(--color-blue);
        }

        /* --- Dashboard Grid --- */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        /* --- Cards --- */
        .card {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-card);
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-dark);
        }

        .icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            fill: currentColor;
        }

        /* --- Visual Cues & Badges --- */
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .badge-red { background: var(--color-red); color: white; }
        .badge-green { background: var(--color-green); color: white; }
        .badge-blue { background: var(--color-blue); color: white; }

        .alert-banner {
            background: var(--color-red-bg);
            color: var(--color-red);
            padding: 10px;
            border-radius: 4px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- Tables --- */
        .clinical-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .clinical-table th {
            text-align: left;
            padding: 8px;
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .clinical-table td {
            padding: 10px 8px;
            border-top: 1px solid #eee;
        }

        .clinical-table tr:hover {
            background-color: #fafafa;
        }

        /* --- FIT Section Specifics --- */
        .fit-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .fit-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid var(--color-blue);
            font-size: 0.9rem;
        }
        
        .fit-item.highlight {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        /* --- Timeline --- */
        .timeline {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-top: 15px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 0;
        }

        .timeline-step {
            position: relative;
            z-index: 1;
            text-align: center;
            background: white;
            padding: 0 5px;
        }

        .step-dot {
            width: 24px;
            height: 24px;
            background: var(--color-blue);
            border-radius: 50%;
            margin: 0 auto 5px;
            border: 2px solid white;
        }

        .step-text {
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* --- Footer/Disclaimer --- */
        footer {
            text-align: center;
            font-size: 0.8rem;
            color: #777;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }

        /* --- Search/Filter --- */
        .search-bar {
            margin-bottom: 20px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 15px;
            padding-left: 40px;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .decision-engine {
                grid-template-columns: 1fr;
            }
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <h1>Lower GI Cancer Reference</h1>
        <span>Recognition & Referral (NICE 2025)</span>
    </div>
    <div class="meta-info">
        Last Revised: Aug 2025
    </div>
</header>

<main class="container">

    <!-- Quick Search -->
    <div class="search-bar">
        <span class="search-icon">üîç</span>
        <input type="text" id="globalSearch" class="search-input" placeholder="Search symptoms, tests, or actions (e.g., 'bleeding', 'fit', 'mass')...">
    </div>

    <!-- Interactive Decision Engine -->
    <section class="decision-engine animate-in">
        <div class="input-group">
            <label for="symptomSelect">Primary Symptom / Finding</label>
            <select id="symptomSelect">
                <option value="">-- Select Symptom --</option>
                <optgroup label="Red Flags">
                    <option value="rectal_mass">Rectal Mass</option>
                    <option value="abdominal_mass">Abdominal Mass</option>
                    <option value="anal_mass_ulcer">Anal Mass / Ulceration</option>
                    <option value="occult_blood">Occult Blood in Faeces</option>
                </optgroup>
                <optgroup label="Common Presentations">
                    <option value="change_bowel">Change in Bowel Habit</option>
                    <option value="rectal_bleeding_50">Rectal Bleeding (Age 50+)</option>
                    <option value="rectal_bleeding_50_risk">Rectal Bleeding (<50 with pain/weight loss)</option>
                    <option value="abdominal_pain_50">Abdominal Pain (Age 50+)</option>
                    <option value="abdominal_pain_40_loss">Abdominal Pain + Weight Loss (Age 40+)</option>
                    <option value="weight_loss">Unexplained Weight Loss</option>
                    <option value="appetite_loss">Unexplained Appetite Loss</option>
                    <option value="anaemia_id">Iron-Deficiency Anaemia (Any age)</option>
                    <option value="anaemia_60">Anaemia (Age 60+, even non-ID)</option>
                </optgroup>
            </select>
        </div>
        <div class="input-group" id="ageGroupContainer" style="display:none;">
            <label for="ageInput">Patient Age</label>
            <input type="number" id="ageInput" placeholder="e.g. 55">
        </div>
        <div id="actionResult" class="action-box status-pending">
            Select symptoms to see recommendation
        </div>
    </section>

    <!-- Main Dashboard -->
    <div class="dashboard">

        <!-- Card 1: Immediate Referrals (Red Flags) -->
        <article class="card animate-in" style="animation-delay: 0.1s;">
            <div class="card-header">
                <svg class="icon" style="color: var(--color-red)" viewBox="0 0 24 24"><path d="M12 2L1 21h22M12 6l7.53 13H4.47M11 10v4h2v-4m-2 6v2h2v-2"/></svg>
                <span class="card-title">Immediate / Suspected Pathway</span>
            </div>
            <div class="alert-banner">
                <span>‚ö†Ô∏è High Risk: Refer directly</span>
            </div>
            <table class="clinical-table">
                <thead>
                    <tr>
                        <th>Sign</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Rectal Mass</strong></td>
                        <td><span class="badge badge-red">Suspected Cancer Pathway</span></td>
                    </tr>
                    <tr>
                        <td><strong>Anal Mass / Ulcer</strong></td>
                        <td><span class="badge badge-red">Suspected Cancer Pathway</span></td>
                    </tr>
                    <tr>
                        <td><strong>Occult Blood</strong></td>
                        <td><span class="badge badge-red">Suspected Cancer Pathway</span></td>
                    </tr>
                    <tr>
                        <td><strong>FIT ‚â• 10 ¬µg/g</strong></td>
                        <td><span class="badge badge-red">Suspected Cancer Pathway</span></td>
                    </tr>
                    <tr>
                        <td><strong>Appetite Loss (Unexplained)</strong></td>
                        <td><span class="badge badge-red">Urgent Investigation</span></td>
                    </tr>
                    <tr>
                        <td><strong>Weight Loss (Unexplained)</strong></td>
                        <td><span class="badge badge-red">Urgent Investigation</span></td>
                    </tr>
                </tbody>
            </table>
            <p style="font-size:0.8rem; margin-top:10px; color:#666;">*Suspected Cancer Pathway = Diagnosis or ruling out within 28 days.</p>
        </article>

        <!-- Card 2: FIT Criteria (The Testing Zone) -->
        <article class="card animate-in" style="animation-delay: 0.2s;">
            <div class="card-header">
                <svg class="icon" style="color: var(--color-blue)" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-1c0-2.33 4.67-3.5 7-3.5s7 1.17 7 3.5v1z"/></svg>
                <span class="card-title">When to Offer FIT Test</span>
            </div>
            <p style="font-size:0.9rem; margin-bottom:10px; color:#555;">Do not test Rectal Mass or Anal Mass. Offer FIT (Quantitative) for:</p>
            
            <div class="fit-grid">
                <div class="fit-item">
                    <strong>Abdominal Mass</strong>
                </div>
                <div class="fit-item">
                    <strong>Change in Bowel Habit</strong>
                </div>
                <div class="fit-item">
                    <strong>Iron-Deficiency Anaemia</strong>
                </div>
                <div class="fit-item">
                    <strong>Age 40+</strong><br>
                    <small>With Weight loss + Abdo Pain</small>
                </div>
                <div class="fit-item highlight">
                    <strong>Age 50+</strong><br>
                    <small>With Rectal Bleeding OR Abdo Pain OR Weight Loss</small>
                </div>
                <div class="fit-item highlight">
                    <strong>Age 60+</strong><br>
                    <small>Any Anaemia (even non-ID)</small>
                </div>
                <div class="fit-item" style="grid-column: span 2;">
                    <strong>Age &lt;50</strong><br>
                    <small>Rectal Bleeding + Unexplained Abdo Pain OR Weight Loss</small>
                </div>
            </div>

            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px; font-size: 0.85rem;">
                <strong>Note:</strong> Offer FIT even if previous NHS bowel screen was negative.
            </div>
        </article>

        <!-- Card 3: Safety Netting & Timelines -->
        <article class="card animate-in" style="animation-delay: 0.3s;">
            <div class="card-header">
                <svg class="icon" style="color: var(--color-green)" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                <span class="card-title">Process & Safety Netting</span>
            </div>

            <h4 style="font-size:0.9rem; color:var(--color-dark);">Referral Timelines</h4>
            <div class="timeline">
                <div class="timeline-step">
                    <div class="step-dot" style="background:var(--color-red)"></div>
                    <div class="step-text">Immediate<br>(Hours)</div>
                </div>
                <div class="timeline-step">
                    <div class="step-dot" style="background:orange"></div>
                    <div class="step-text">Very Urgent<br>(48h)</div>
                </div>
                <div class="timeline-step">
                    <div class="step-dot" style="background:var(--color-blue)"></div>
                    <div class="step-text">Urgent<br>(2 wks)</div>
                </div>
                <div class="timeline-step">
                    <div class="step-dot" style="background:green"></div>
                    <div class="step-text">Cancer Path<br>(28 days)</div>
                </div>
            </div>

            <hr style="border:0; border-top:1px solid #eee; margin: 15px 0;">

            <h4 style="font-size:0.9rem; color:var(--color-dark);">Safety Netting</h4>
            <ul style="padding-left: 20px; font-size: 0.85rem; color: #555; margin-top: 5px;">
                <li>Planned review or patient-initiated review if symptoms persist/worsen.</li>
                <li>Ensure safety netting if FIT < 10 but clinical concern remains.</li>
                <li>Beware false-negative Chest X-rays or Occult Blood tests.</li>
                <li>Discuss: Information source, Who to contact if appointment missed.</li>
            </ul>
        </article>

        <!-- Card 4: Prognosis & Stats -->
        <article class="card animate-in" style="animation-delay: 0.4s;">
            <div class="card-header">
                <svg class="icon" style="color: #666" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                <span class="card-title">Background & Prognosis</span>
            </div>
            <div style="display: flex; justify-content: space-around; text-align: center;">
                <div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--color-blue);">~40k</div>
                    <div style="font-size: 0.75rem; color: #666;">New Colorectal<br>Cancers/yr (UK)</div>
                </div>
                <div>
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--color-blue);">~1k</div>
                    <div style="font-size: 0.75rem; color: #666;">New Anal<br>Cancers/yr (UK)</div>
                </div>
            </div>
            <hr style="border:0; border-top:1px solid #eee; margin: 15px 0;">
            <div style="background: var(--color-green-bg); padding: 10px; border-radius: 4px;">
                <strong>5-Year Survival:</strong> Approx 60% for both Colorectal and Anal cancers (includes screen detected).
            </div>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #666;">
                <strong>GP Stats:</strong> A full-time GP diagnoses ~1 colorectal cancer/year. Anal cancer diagnosis is rare (1-2/career).
            </p>
        </article>

    </div>
</main>

<footer>
    <p>Source: NICE Guideline [Suspected cancer: recognition and referral]. Aug 2025 Review.</p>
    <p>For use by healthcare professionals. Clinical judgement supersedes this tool.</p>
</footer>

<script>
    // Data Structure for Decision Logic based on NICE text
    const criteria = {
        rectal_mass: {
            action: "Consider Suspected Cancer Pathway Referral",
            colorClass: "status-urgent",
            details: "Rectal Mass present."
        },
        abdominal_mass: {
            action: "Offer FIT first",
            colorClass: "status-test",
            details: "Offer FIT (Quantitative)."
        },
        anal_mass_ulcer: {
            action: "Consider Suspected Cancer Pathway Referral",
            colorClass: "status-urgent",
            details: "Unexplained anal mass or ulceration."
        },
        occult_blood: {
            action: "Suspected Cancer Pathway Referral",
            colorClass: "status-urgent",
            details: "Occult blood found in faeces."
        },
        change_bowel: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Change in bowel habit."
        },
        rectal_bleeding_50: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Rectal bleeding in age 50+."
        },
        rectal_bleeding_50_risk: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Rectal bleeding (<50) with unexplained pain or weight loss."
        },
        abdominal_pain_50: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Unexplained abdominal pain in age 50+."
        },
        abdominal_pain_40_loss: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Unexplained abdominal pain with weight loss in age 40+."
        },
        weight_loss: {
            action: "Urgent Investigation",
            colorClass: "status-urgent",
            details: "Unexplained weight loss requires assessment for other symptoms."
        },
        appetite_loss: {
            action: "Urgent Investigation",
            colorClass: "status-urgent",
            details: "Unexplained appetite loss requires assessment for other symptoms."
        },
        anaemia_id: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Iron-deficiency anaemia."
        },
        anaemia_60: {
            action: "Offer FIT",
            colorClass: "status-test",
            details: "Anaemia (60+), even if not iron-deficiency."
        }
    };

    const symptomSelect = document.getElementById('symptomSelect');
    const ageGroupContainer = document.getElementById('ageGroupContainer');
    const ageInput = document.getElementById('ageInput');
    const actionResult = document.getElementById('actionResult');
    const globalSearch = document.getElementById('globalSearch');

    // Logic for Decision Engine
    symptomSelect.addEventListener('change', function() {
        const value = this.value;
        const result = criteria[value];

        if (!result) {
            resetActionBox();
            return;
        }

        // Logic check for weight loss age differentiation
        // Note: The text says "Weight loss (unexplained) and aged 50 years and over -> Offer FIT"
        // But also "Weight loss (unexplained) -> Offer urgent investigation"
        // The table says: "Weight loss (unexplained)" -> "Offer urgent investigation".
        // However, it also lists "Weight loss (unexplained) and aged 50 years and over -> Colorectal -> Offer FIT".
        // This implies a specific pathway for Colorectal vs General Cancer.
        // I will default to the specific row in the table provided in the text.
        
        if (value === 'weight_loss') {
             // Special handling: Check if they are 50+ for specific colorectal path
             ageGroupContainer.style.display = 'block';
             ageInput.focus();
             updateResult(result.action, result.colorClass, result.details + " (If age 50+, also consider FIT)");
        } else {
            ageGroupContainer.style.display = 'none';
            ageInput.value = '';
            updateResult(result.action, result.colorClass, result.details);
        }
    });

    ageInput.addEventListener('input', function() {
        const value = this.value;
        const symptom = symptomSelect.value;
        
        if (symptom === 'weight_loss' && value && parseInt(value) >= 50) {
             updateResult("Offer FIT", "status-test", "Weight loss + Age 50+ specific pathway for colorectal.");
        } else if (symptom === 'weight_loss') {
             updateResult("Urgent Investigation", "status-urgent", "Unexplained Weight Loss (General Cancer Check).");
        }
    });

    function updateResult(action, colorClass, details) {
        actionResult.className = `action-box ${colorClass}`;
        actionResult.innerHTML = `
            <div style="font-size:1.1rem; margin-bottom:5px;">${action}</div>
            <div style="font-weight:normal; font-size:0.9rem;">${details}</div>
        `;
    }

    function resetActionBox() {
        actionResult.className = 'action-box status-pending';
        actionResult.innerText = "Select symptoms to see recommendation";
        ageGroupContainer.style.display = 'none';
    }

    // Search Functionality
    globalSearch.addEventListener('keyup', function() {
        const term = this.value.toLowerCase();
        const cards = document.querySelectorAll('.card, .decision-engine');
        
        // Very basic scan of text content
        cards.forEach(card => {
            const text = card.innerText.toLowerCase();
            if(text.includes(term)) {
                card.style.display = '';
                // Highlight matches logic could go here, but keeping it simple for performance
            } else {
                // Hide if not header/main container (we want to keep headers visible usually, 
                // but here let's hide cards that don't match)
                if (card.classList.contains('card')) {
                    card.style.display = 'none';
                }
            }
        });
        
        // Reset if empty
        if (term === '') {
            cards.forEach(card => card.style.display = '');
        }
    });

</script>

</body>
</html>