<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urological Cancers - Recognition & Referral Algorithm</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --assessment-color: #4361ee;
            --diagnosis-color: #7209b7;
            --treatment-color: #2a9d8f;
            --followup-color: #4cc9f0;
            --urgent-color: #f94144;
            --caution-color: #f8961e;
            --stable-color: #43aa8b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fc 0%, #eef2f7 100%);
            color: #2b2d42;
            line-height: 1.6;
            min-height: 100vh;
        }

        .main-container {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-section {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            border-left: 6px solid var(--assessment-color);
        }

        .card {
            border: none;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
            background: white;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .assessment-card .card-header {
            background: linear-gradient(135deg, var(--assessment-color), #4895ef);
        }

        .diagnosis-card .card-header {
            background: linear-gradient(135deg, var(--diagnosis-color), #b5179e);
        }

        .treatment-card .card-header {
            background: linear-gradient(135deg, var(--treatment-color), #1d3557);
        }

        .followup-card .card-header {
            background: linear-gradient(135deg, var(--followup-color), #3a86ff);
        }

        .card-header h3 {
            margin: 0;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-header i {
            font-size: 1.5rem;
            color: white;
        }

        .card-body {
            padding: 1.5rem;
            background: white;
        }

        .card-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .card-content.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .severity-badge {
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .badge-urgent {
            background: linear-gradient(135deg, var(--urgent-color), #ef476f);
            color: white;
        }

        .badge-caution {
            background: linear-gradient(135deg, var(--caution-color), #f9844a);
            color: white;
        }

        .badge-stable {
            background: linear-gradient(135deg, var(--stable-color), #4d908e);
            color: white;
        }

        .progress-sidebar {
            position: sticky;
            top: 2rem;
            height: fit-content;
            background: white;
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6c757d;
            font-weight: 500;
        }

        .progress-item:hover {
            background: rgba(67, 97, 238, 0.05);
            color: var(--assessment-color);
        }

        .progress-item.active {
            background: linear-gradient(135deg, var(--assessment-color), #4895ef);
            color: white;
            box-shadow: 0 4px 10px rgba(67, 97, 238, 0.2);
        }

        .progress-item.completed {
            background: rgba(67, 97, 238, 0.1);
            color: var(--assessment-color);
        }

        .progress-item i {
            font-size: 1.25rem;
            width: 24px;
            text-align: center;
        }

        .symptom-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 1.5rem 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .symptom-table th {
            background: linear-gradient(135deg, var(--diagnosis-color), #b5179e);
            color: white;
            padding: 1rem;
            font-weight: 600;
            text-align: left;
        }

        .symptom-table td {
            padding: 1rem;
            border-bottom: 1px solid #edf2f7;
            background: white;
        }

        .symptom-table tr:last-child td {
            border-bottom: none;
        }

        .symptom-table tr:hover td {
            background: rgba(67, 97, 238, 0.02);
        }

        .cancer-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 12px;
            background: white;
            border-left: 4px solid var(--diagnosis-color);
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }

        .cancer-section h5 {
            color: var(--diagnosis-color);
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cancer-section ul {
            padding-left: 1.5rem;
        }

        .cancer-section li {
            margin-bottom: 0.5rem;
            position: relative;
        }

        .cancer-section li::before {
            content: "•";
            color: var(--diagnosis-color);
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .collapse-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem;
            transition: transform 0.3s ease;
        }

        .collapse-btn.collapsed {
            transform: rotate(-90deg);
        }

        .alert-info {
            background: linear-gradient(135deg, #e3f2fd, #d1e8ff);
            border: 1px solid #bbdefb;
            border-radius: 12px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            color: #0d47a1;
        }

        .alert-warning {
            background: linear-gradient(135deg, #fff3cd, #ffe69c);
            border: 1px solid #ffeeba;
            border-radius: 12px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            color: #856404;
        }

        .btn-print {
            background: linear-gradient(135deg, var(--treatment-color), #1d3557);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(29, 53, 87, 0.2);
        }

        .btn-print:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(29, 53, 87, 0.3);
        }

        .step-number {
            background: rgba(255,255,255,0.2);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
        }

        .progress-line {
            width: 2px;
            height: 20px;
            background: #e9ecef;
            margin: 0.25rem 0 0.25rem 15px;
        }

        .progress-line.completed {
            background: var(--assessment-color);
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }
            
            .header-section {
                padding: 1.5rem;
            }
            
            .card-header h3 {
                font-size: 1.1rem;
            }
            
            .progress-sidebar {
                position: relative;
                top: 0;
                margin-bottom: 2rem;
            }
            
            .symptom-table {
                font-size: 0.875rem;
            }
            
            .symptom-table th,
            .symptom-table td {
                padding: 0.75rem;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .header-section h1 {
            color: #2b2d42;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-section p {
            color: #6c757d;
            margin-bottom: 0;
        }

        .card-header h3 i {
            color: white;
            opacity: 0.9;
        }

        .badge-urgent i,
        .badge-caution i,
        .badge-stable i {
            color: white;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-9">
                <div class="main-container">
                    <div class="header-section">
                        <h1><i class="fas fa-search"></i> Urological Cancers - Recognition & Referral</h1>
                        <p class="text-muted mb-0">Based on NICE CKS Guidelines (August 2025)</p>
                    </div>

                    <!-- Assessment Section -->
                    <div class="card assessment-card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <h3>
                                <span class="step-number">1</span>
                                <i class="fas fa-user-md"></i> Assessment
                            </h3>
                            <button class="collapse-btn">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="card-content">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i> Primary care assessment for suspected urological cancers
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-procedures"></i> Prostate Cancer Assessment</h5>
                                    <ul>
                                        <li>Lower urinary tract symptoms (LUTS): nocturia, frequency, hesitancy, urgency, retention</li>
                                        <li>Erectile dysfunction</li>
                                        <li>Visible haematuria</li>
                                        <li>Digital rectal examination (DRE) findings</li>
                                        <li>Family history of prostate cancer</li>
                                        <li>Ethnicity (higher risk in Black men)</li>
                                    </ul>
                                    <span class="severity-badge badge-caution">
                                        <i class="fas fa-exclamation-triangle"></i> Consider PSA test if symptomatic
                                    </span>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-bladder"></i> Bladder Cancer Assessment</h5>
                                    <ul>
                                        <li>Visible haematuria (most common)</li>
                                        <li>Dysuria and urinary frequency (especially persistent)</li>
                                        <li>Recurrent or persistent UTIs (age 60+)</li>
                                        <li>Non-visible haematuria with dysuria (age 60+)</li>
                                        <li>Smoking history (major risk factor)</li>
                                        <li>Occupational chemical exposure</li>
                                    </ul>
                                    <span class="severity-badge badge-urgent">
                                        <i class="fas fa-ambulance"></i> Visible haematuria = urgent referral
                                    </span>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-kidneys"></i> Renal Cancer Assessment</h5>
                                    <ul>
                                        <li>Visible haematuria</li>
                                        <li>Loin/flank pain</li>
                                        <li>Palpable mass in flank</li>
                                        <li>Recurrent UTIs</li>
                                        <li>Weight loss/anorexia</li>
                                        <li>Smoking history</li>
                                        <li>Hypertension risk</li>
                                    </ul>
                                    <span class="severity-badge badge-urgent">
                                        <i class="fas fa-ambulance"></i> Visible haematuria = urgent referral
                                    </span>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-male"></i> Testicular Cancer Assessment</h5>
                                    <ul>
                                        <li>Testicular enlargement or change in shape/texture</li>
                                        <li>Usually painless lump</li>
                                        <li>Testicular pain or discomfort</li>
                                        <li>Gynecomastia (hormonal effects)</li>
                                        <li>Back pain (metastatic disease)</li>
                                    </ul>
                                    <span class="severity-badge badge-caution">
                                        <i class="fas fa-exclamation-triangle"></i> Most common cancer in men 16-24 years
                                    </span>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-user-injured"></i> Penile Cancer Assessment</h5>
                                    <ul>
                                        <li>Penile lesion (ulcerated or mass)</li>
                                        <li>Symptoms affecting foreskin or glans</li>
                                        <li>Persistent despite STI treatment</li>
                                        <li>Phimosis or paraphimosis</li>
                                        <li>Bleeding or discharge</li>
                                    </ul>
                                    <span class="severity-badge badge-caution">
                                        <i class="fas fa-exclamation-triangle"></i> Rare but serious - exclude STIs first
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Diagnosis Section -->
                    <div class="card diagnosis-card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <h3>
                                <span class="step-number">2</span>
                                <i class="fas fa-microscope"></i> Diagnosis & Investigation
                            </h3>
                            <button class="collapse-btn">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="card-content">
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-circle"></i> <strong>Key Principle:</strong> Most diagnoses require secondary care investigations
                                </div>

                                <table class="symptom-table">
                                    <thead>
                                        <tr>
                                            <th>Symptom/Sign</th>
                                            <th>Possible Cancer</th>
                                            <th>Recommended Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Prostate feels malignant on DRE</td>
                                            <td>Prostate</td>
                                            <td><span class="severity-badge badge-urgent">Urgent referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>PSA above age-specific range</td>
                                            <td>Prostate</td>
                                            <td><span class="severity-badge badge-urgent">Urgent referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>Visible haematuria (age ≥45)</td>
                                            <td>Bladder/Renal</td>
                                            <td><span class="severity-badge badge-urgent">Urgent referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>Non-visible haematuria + dysuria (age ≥60)</td>
                                            <td>Bladder</td>
                                            <td><span class="severity-badge badge-urgent">Urgent referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>Recurrent UTI (age ≥60)</td>
                                            <td>Bladder</td>
                                            <td><span class="severity-badge badge-caution">Consider referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>Testicular enlargement/change</td>
                                            <td>Testicular</td>
                                            <td><span class="severity-badge badge-caution">Consider urgent referral</span></td>
                                        </tr>
                                        <tr>
                                            <td>Persistent testicular symptoms</td>
                                            <td>Testicular</td>
                                            <td><span class="severity-badge badge-stable">Direct access ultrasound</span></td>
                                        </tr>
                                        <tr>
                                            <td>Penile lesion after STI treatment</td>
                                            <td>Penile</td>
                                            <td><span class="severity-badge badge-caution">Consider urgent referral</span></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-vial"></i> Primary Care Investigations</h5>
                                    <ul>
                                        <li><strong>PSA testing:</strong> Age-specific reference ranges apply</li>
                                        <li><strong>Urinalysis:</strong> For haematuria detection</li>
                                        <li><strong>Blood tests:</strong> FBC (raised WCC), renal function</li>
                                        <li><strong>DRE:</strong> Only if PSA being checked</li>
                                        <li><strong>Ultrasound:</strong> Direct access for testicular symptoms</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-hospital"></i> Secondary Care Investigations</h5>
                                    <ul>
                                        <li><strong>Prostate:</strong> MRI, biopsy</li>
                                        <li><strong>Bladder:</strong> Ultrasound, cystoscopy with biopsy</li>
                                        <li><strong>Renal:</strong> Ultrasound, CT, biopsy</li>
                                        <li><strong>Testicular:</strong> Ultrasound, tumor markers, CT</li>
                                        <li><strong>Penile:</strong> Excision biopsy</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Treatment Section -->
                    <div class="card treatment-card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <h3>
                                <span class="step-number">3</span>
                                <i class="fas fa-ambulance"></i> Referral Pathways
                            </h3>
                            <button class="collapse-btn">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="card-content">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i> <strong>Referral Definitions:</strong>
                                    <ul class="mb-0 mt-2">
                                        <li><strong>Immediate:</strong> Admission within hours</li>
                                        <li><strong>Very urgent:</strong> Within 48 hours</li>
                                        <li><strong>Urgent (2-week):</strong> Suspected cancer pathway</li>
                                        <li><strong>Non-urgent:</strong> Routine timescales</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-procedures"></i> Prostate Cancer Referral</h5>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-urgent">
                                            <i class="fas fa-clock"></i> Urgent (2-week) referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Prostate feels malignant on DRE</li>
                                        <li>PSA above age-specific reference range</li>
                                    </ul>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-caution">
                                            <i class="fas fa-stethoscope"></i> Consider PSA/DRE if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Any LUTS symptoms</li>
                                        <li>Erectile dysfunction</li>
                                        <li>Visible haematuria</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-bladder"></i> Bladder Cancer Referral</h5>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-urgent">
                                            <i class="fas fa-clock"></i> Urgent (2-week) referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Age ≥45 with unexplained visible haematuria</li>
                                        <li>Age ≥45 with persistent/recurrent visible haematuria after UTI treatment</li>
                                        <li>Age ≥60 with unexplained non-visible haematuria + dysuria</li>
                                        <li>Age ≥60 with unexplained non-visible haematuria + raised WCC</li>
                                    </ul>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-caution">
                                            <i class="fas fa-calendar"></i> Non-urgent referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Age ≥60 with recurrent/persistent unexplained UTI</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-kidneys"></i> Renal Cancer Referral</h5>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-urgent">
                                            <i class="fas fa-clock"></i> Urgent (2-week) referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Age ≥45 with unexplained visible haematuria</li>
                                        <li>Age ≥45 with persistent/recurrent visible haematuria after UTI treatment</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-male"></i> Testicular Cancer Referral</h5>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-urgent">
                                            <i class="fas fa-clock"></i> Consider urgent (2-week) referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Non-painful enlargement or change in shape/texture of testis</li>
                                    </ul>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-stable">
                                            <i class="fas fa-ultrasound"></i> Direct access ultrasound if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Unexplained or persistent testicular symptoms</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-user-injured"></i> Penile Cancer Referral</h5>
                                    <div class="mb-3">
                                        <span class="severity-badge badge-urgent">
                                            <i class="fas fa-clock"></i> Consider urgent (2-week) referral if:
                                        </span>
                                    </div>
                                    <ul>
                                        <li>Penile mass or ulcerated lesion (STI excluded)</li>
                                        <li>Persistent penile lesion after STI treatment</li>
                                        <li>Unexplained or persistent symptoms affecting foreskin/glans</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-search-plus"></i> Diagnostic Process</h5>
                                    <ul>
                                        <li>Discuss with specialist if uncertainty about interpretation</li>
                                        <li>Include all relevant information in referral</li>
                                        <li>Make referral within 1 working day of decision</li>
                                        <li>Follow up patients who miss appointments</li>
                                        <li>Use local referral proformas if available</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Follow-up Section -->
                    <div class="card followup-card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <h3>
                                <span class="step-number">4</span>
                                <i class="fas fa-clipboard-check"></i> Patient Support & Safety Netting
                            </h3>
                            <button class="collapse-btn">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="card-content">
                                <div class="alert alert-info">
                                    <i class="fas fa-users"></i> <strong>Patient-Centered Care:</strong> Active involvement in decision-making
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-comments"></i> Information & Communication</h5>
                                    <ul>
                                        <li>Explain that referral is to cancer service</li>
                                        <li>Reassure most referrals do not result in cancer diagnosis</li>
                                        <li>Discuss alternative diagnoses</li>
                                        <li>Provide information on possible diagnoses (benign and malignant)</li>
                                        <li>Explain where referred to and waiting times</li>
                                        <li>Provide information on how to get help before appointment</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-question-circle"></i> What to Tell Patients</h5>
                                    <ul>
                                        <li>Where they are being referred to</li>
                                        <li>How long they will wait for appointment</li>
                                        <li>How to obtain further information</li>
                                        <li>What to expect from the service</li>
                                        <li>What tests may be carried out</li>
                                        <li>How long for diagnosis/results</li>
                                        <li>Whether they can take someone with them</li>
                                        <li>Who to contact if no appointment confirmation</li>
                                        <li>Other sources of support</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-shield-alt"></i> Safety Netting</h5>
                                    <p><strong>Safety netting involves:</strong></p>
                                    <ul>
                                        <li>Timely review and action after investigations</li>
                                        <li>Active monitoring of symptoms in low-risk patients</li>
                                        <li>Explaining which symptoms to look out for</li>
                                        <li>When to return for re-evaluation</li>
                                        <li>Providing written information when appropriate</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-calendar-alt"></i> Review Strategies</h5>
                                    <ul>
                                        <li>Review investigation results and act upon them</li>
                                        <li>Healthcare professional who ordered test takes responsibility</li>
                                        <li>Be aware of false-negative results</li>
                                        <li>Consider review for patients with increased risk symptoms</li>
                                        <li>Planned review within agreed timeframe, OR</li>
                                        <li>Patient-initiated review if symptoms develop/worsen</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-user-friends"></i> Supporting Vulnerable Patients</h5>
                                    <ul>
                                        <li>Assess need for continuing support while waiting</li>
                                        <li>Invite patient to contact healthcare professional with concerns</li>
                                        <li>Inform specialist of additional support needs (with patient agreement)</li>
                                        <li>For suspected cancer in children, discuss referral with parents/carers</li>
                                        <li>Consider cultural meanings associated with cancer</li>
                                        <li>Provide information in appropriate language/format</li>
                                    </ul>
                                </div>

                                <div class="cancer-section">
                                    <h5><i class="fas fa-phone"></i> Continuity of Care</h5>
                                    <ul>
                                        <li>Ensure maximum waiting period for non-urgent referrals</li>
                                        <li>Local arrangements to assess non-urgent referrals for urgency</li>
                                        <li>Follow up patients who miss appointments</li>
                                        <li>Participate in continuing education to improve diagnostic skills</li>
                                        <li>Communicate sense of urgency to secondary care when appropriate</li>
                                    </ul>
                                </div>

                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i> <strong>Key Messages:</strong>
                                    <ul class="mb-0 mt-2">
                                        <li>Early recognition improves outcomes</li>
                                        <li>Most suspected cancer referrals do not result in cancer diagnosis</li>
                                        <li>Clear communication reduces patient anxiety</li>
                                        <li>Robust safety netting prevents missed diagnoses</li>
                                        <li>Patient support throughout the pathway is essential</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button class="btn btn-print" onclick="window.print()">
                            <i class="fas fa-print"></i> Print Algorithm Summary
                        </button>
                    </div>
                </div>
            </div>

            <!-- Progress Sidebar -->
            <div class="col-lg-3">
                <div class="progress-sidebar">
                    <h5 class="mb-3"><i class="fas fa-tasks"></i> Algorithm Progress</h5>
                    <div id="progress-container">
                        <div class="progress-item active" onclick="scrollToCard(0)">
                            <i class="fas fa-user-md"></i>
                            <span>Assessment</span>
                        </div>
                        <div class="progress-line"></div>
                        <div class="progress-item" onclick="scrollToCard(1)">
                            <i class="fas fa-microscope"></i>
                            <span>Diagnosis</span>
                        </div>
                        <div class="progress-line"></div>
                        <div class="progress-item" onclick="scrollToCard(2)">
                            <i class="fas fa-ambulance"></i>
                            <span>Referral</span>
                        </div>
                        <div class="progress-line"></div>
                        <div class="progress-item" onclick="scrollToCard(3)">
                            <i class="fas fa-clipboard-check"></i>
                            <span>Follow-up</span>
                        </div>
                    </div>

                    <div class="mt-4">
                        <h6 class="text-muted mb-2">Quick Reference</h6>
                        <div class="d-flex flex-column gap-2">
                            <button class="btn btn-sm btn-outline-danger" onclick="showRedFlags()">
                                <i class="fas fa-flag"></i> Red Flags
                            </button>
                            <button class="btn btn-sm btn-outline-primary" onclick="showPSAInfo()">
                                <i class="fas fa-chart-line"></i> PSA Ranges
                            </button>
                            <button class="btn btn-sm btn-outline-warning" onclick="showReferralInfo()">
                                <i class="fas fa-phone"></i> Contact Info
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentStep = 0;
        const totalSteps = 4;
        const cards = document.querySelectorAll('.card');
        const progressItems = document.querySelectorAll('.progress-item');

        function toggleCard(header) {
            const content = header.nextElementSibling.querySelector('.card-content');
            const btn = header.querySelector('.collapse-btn');
            
            content.classList.toggle('show');
            btn.classList.toggle('collapsed');
            
            // Update progress
            updateProgress();
        }

        function updateProgress() {
            // Mark steps as completed if their cards are expanded
            cards.forEach((card, index) => {
                const content = card.querySelector('.card-content');
                const progressItem = progressItems[index];
                const progressLine = document.querySelectorAll('.progress-line')[index];
                
                if (content.classList.contains('show')) {
                    progressItem.classList.add('completed');
                    progressItem.classList.remove('active');
                    if (progressLine) progressLine.classList.add('completed');
                } else {
                    progressItem.classList.remove('completed');
                    if (progressLine) progressLine.classList.remove('completed');
                }
            });
            
            // Highlight current step
            const visibleCards = Array.from(cards).filter(card => 
                card.querySelector('.card-content').classList.contains('show')
            );
            
            if (visibleCards.length > 0) {
                const lastVisible = visibleCards[visibleCards.length - 1];
                const index = Array.from(cards).indexOf(lastVisible);
                progressItems[index].classList.add('active');
            }
        }

        function scrollToCard(index) {
            const card = cards[index];
            const header = card.querySelector('.card-header');
            const content = card.querySelector('.card-content');
            
            // Scroll to card
            card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Ensure card is open
            if (!content.classList.contains('show')) {
                toggleCard(header);
            }
        }

        function showRedFlags() {
            const redFlags = `
                <div class='severity-badge badge-urgent mb-2'><i class='fas fa-flag'></i> Urgent Red Flags</div>
                <ul>
                    <li>Visible haematuria (age ≥45)</li>
                    <li>Malignant feeling prostate on DRE</li>
                    <li>PSA above age-specific range</li>
                    <li>Non-painful testicular enlargement</li>
                    <li>Persistent penile lesion after STI treatment</li>
                </ul>
            `;
            showModal('Red Flags for Urological Cancer', redFlags);
        }

        function showPSAInfo() {
            const psaInfo = `
                <h6>Age-Specific PSA Reference Ranges</h6>
                <table class='symptom-table'>
                    <thead>
                        <tr>
                            <th>Age Range</th>
                            <th>Upper Normal Limit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>40-49 years</td><td>2.5 ng/mL</td></tr>
                        <tr><td>50-59 years</td><td>3.5 ng/mL</td></tr>
                        <tr><td>60-69 years</td><td>4.5 ng/mL</td></tr>
                        <tr><td>70+ years</td><td>6.5 ng/mL</td></tr>
                    </tbody>
                </table>
                <div class='alert alert-warning mt-2'>
                    <i class='fas fa-exclamation-triangle'></i> PSA levels above these ranges require urgent referral
                </div>
            `;
            showModal('PSA Reference Ranges', psaInfo);
        }

        function showReferralInfo() {
            const referralInfo = `
                <div class='severity-badge badge-urgent mb-2'><i class='fas fa-ambulance'></i> Urgent Referrals</div>
                <p><strong>Make referral within 1 working day of decision</strong></p>
                <ul>
                    <li>Use local referral proformas if available</li>
                    <li>Include all relevant clinical information</li>
                    <li>Specify if referral is urgent or non-urgent</li>
                    <li>Communicate concerns and sense of urgency</li>
                </ul>
                <div class='alert alert-info mt-2'>
                    <i class='fas fa-info-circle'></i> Discuss with specialist if uncertain about referral need
                </div>
            `;
            showModal('Referral Process', referralInfo);
        }

        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${title}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            ${content}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
            
            modal.addEventListener('hidden.bs.modal', function () {
                modal.remove();
            });
        }

        // Expand first card by default
        document.addEventListener('DOMContentLoaded', function() {
            const firstCardHeader = document.querySelector('.card-header');
            if (firstCardHeader) {
                toggleCard(firstCardHeader);
            }
            
            // Add smooth scrolling for all links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        });

        // Update progress on scroll
        window.addEventListener('scroll', function() {
            const scrollPosition = window.scrollY + 100;
            
            cards.forEach((card, index) => {
                const cardTop = card.offsetTop;
                const cardBottom = cardTop + card.offsetHeight;
                
                if (scrollPosition >= cardTop && scrollPosition <= cardBottom) {
                    progressItems.forEach(item => item.classList.remove('active'));
                    progressItems[index].classList.add('active');
                }
            });
        });

        // Print functionality
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
                e.preventDefault();
                currentStep = (currentStep + 1) % totalSteps;
                scrollToCard(currentStep);
            } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
                e.preventDefault();
                currentStep = (currentStep - 1 + totalSteps) % totalSteps;
                scrollToCard(currentStep);
            } else if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                const activeCard = cards[currentStep];
                const header = activeCard.querySelector('.card-header');
                toggleCard(header);
            }
        });
    </script>
</body>
</html>