<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blast Crisis Management Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }

        /* Progress Sidebar */
        .progress-sidebar {
            position: sticky;
            top: 20px;
            width: 250px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .progress-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .progress-step {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid #ddd;
        }

        .progress-step.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-left-color: #2c3e50;
            transform: translateX(5px);
        }

        .progress-step.completed {
            background: #e8f5e8;
            border-left-color: #27ae60;
        }

        .step-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: #ddd;
            color: white;
            font-size: 12px;
        }

        .progress-step.active .step-icon {
            background: rgba(255,255,255,0.2);
        }

        .progress-step.completed .step-icon {
            background: #27ae60;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .algorithm-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 6px solid;
        }

        .algorithm-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .card-assessment {
            border-left-color: #3498db;
        }

        .card-diagnosis {
            border-left-color: #e74c3c;
        }

        .card-treatment {
            border-left-color: #f39c12;
        }

        .card-followup {
            border-left-color: #27ae60;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: white;
        }

        .assessment-icon { background: linear-gradient(135deg, #3498db, #2980b9); }
        .diagnosis-icon { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .treatment-icon { background: linear-gradient(135deg, #f39c12, #e67e22); }
        .followup-icon { background: linear-gradient(135deg, #27ae60, #229954); }

        .card-title {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        .expand-icon {
            margin-left: auto;
            font-size: 18px;
            transition: transform 0.3s ease;
            color: #7f8c8d;
        }

        .expand-icon.expanded {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .card-content.expanded {
            max-height: 2000px;
        }

        .step-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #bdc3c7;
            transition: all 0.3s ease;
        }

        .step-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .step-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .severity-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 10px;
            text-transform: uppercase;
        }

        .badge-urgent {
            background: #e74c3c;
            color: white;
        }

        .badge-caution {
            background: #f39c12;
            color: white;
        }

        .badge-stable {
            background: #27ae60;
            color: white;
        }

        .step-description {
            color: #7f8c8d;
            line-height: 1.6;
        }

        .sub-steps {
            margin-top: 10px;
            padding-left: 20px;
        }

        .sub-step {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 5px;
            position: relative;
        }

        .sub-step::before {
            content: "‚Üí";
            position: absolute;
            left: -15px;
            color: #3498db;
        }

        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .progress-sidebar {
                position: relative;
                width: 100%;
                order: 2;
            }
            
            .main-content {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Sidebar -->
        <div class="progress-sidebar">
            <div class="progress-title">Algorithm Progress</div>
            <div class="progress-step active" data-step="assessment">
                <div class="step-icon">1</div>
                <span>Assessment</span>
            </div>
            <div class="progress-step" data-step="diagnosis">
                <div class="step-icon">2</div>
                <span>Diagnosis</span>
            </div>
            <div class="progress-step" data-step="treatment">
                <div class="step-icon">3</div>
                <span>Treatment</span>
            </div>
            <div class="progress-step" data-step="followup">
                <div class="step-icon">4</div>
                <span>Follow-up</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Assessment Card -->
            <div class="algorithm-card card-assessment" id="assessment">
                <div class="card-header" onclick="toggleCard('assessment')">
                    <div class="card-icon assessment-icon">üìã</div>
                    <div class="card-title">Initial Assessment</div>
                    <div class="expand-icon" id="assessment-icon">‚ñº</div>
                </div>
                <div class="card-content" id="assessment-content">
                    <div class="step-item">
                        <div class="step-title">
                            Clinical Presentation
                            <span class="severity-badge badge-caution">Caution</span>
                        </div>
                        <div class="step-description">
                            Evaluate for symptoms: fever, fatigue, malaise, weight loss, anemia, thrombocytopenia, or bleeding disorders.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Check for constitutional symptoms</div>
                            <div class="sub-step">Assess bleeding tendencies</div>
                            <div class="sub-step">Evaluate splenomegaly</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Laboratory Testing
                            <span class="severity-badge badge-urgent">Urgent</span>
                        </div>
                        <div class="step-description">
                            Order full blood count with differential. Look for cytopenias and presence of blast cells.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">WBC count may be elevated, normal, or low</div>
                            <div class="sub-step">Hemoglobin typically <70 g/L</div>
                            <div class="sub-step">Platelets usually <100√ó10‚Åπ/L</div>
                            <div class="sub-step">Presence of blast cells is key finding</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Risk Factors
                            <span class="severity-badge badge-caution">Caution</span>
                        </div>
                        <div class="step-description">
                            Identify history of CML, TKI resistance, or additional chromosomal abnormalities.
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="nextStep('diagnosis')">Proceed to Diagnosis ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="algorithm-card card-diagnosis" id="diagnosis">
                <div class="card-header" onclick="toggleCard('diagnosis')">
                    <div class="card-icon diagnosis-icon">üî¨</div>
                    <div class="card-title">Diagnostic Confirmation</div>
                    <div class="expand-icon" id="diagnosis-icon">‚ñº</div>
                </div>
                <div class="card-content" id="diagnosis-content">
                    <div class="step-item">
                        <div class="step-title">
                            Blast Cell Percentage
                            <span class="severity-badge badge-urgent">Critical</span>
                        </div>
                        <div class="step-description">
                            Diagnosis confirmed by ‚â•20% or ‚â•30% blast cells in peripheral blood and/or bone marrow, depending on criteria used.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">WHO criteria: ‚â•20% blasts</div>
                            <div class="sub-step">MDACC criteria: ‚â•30% blasts</div>
                            <div class="sub-step">Extramedullary proliferation also diagnostic</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Philadelphia Chromosome
                            <span class="severity-badge badge-urgent">Required</span>
                        </div>
                        <div class="step-description">
                            Confirm presence of BCR::ABL1 fusion gene through cytogenetic testing.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Bone marrow aspiration for karyotyping</div>
                            <div class="sub-step">qRT-PCR for BCR::ABL1 transcripts</div>
                            <div class="sub-step">FISH analysis if needed</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Blast Subtype Classification
                            <span class="severity-badge badge-caution">Important</span>
                        </div>
                        <div class="step-description">
                            Determine blast lineage: myeloid (70-80%), lymphoid (20-30%), or mixed lineage (rare).
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Flow cytometry for immunophenotyping</div>
                            <div class="sub-step">Myeloid: behaves like AML</div>
                            <div class="sub-step">Lymphoid: behaves like ALL, better prognosis</div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="previousStep('assessment')">‚Üê Back to Assessment</button>
                        <button class="btn btn-primary" onclick="nextStep('treatment')">Proceed to Treatment ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="algorithm-card card-treatment" id="treatment">
                <div class="card-header" onclick="toggleCard('treatment')">
                    <div class="card-icon treatment-icon">üíä</div>
                    <div class="card-title">Treatment Strategy</div>
                    <div class="expand-icon" id="treatment-icon">‚ñº</div>
                </div>
                <div class="card-content" id="treatment-content">
                    <div class="step-item">
                        <div class="step-title">
                            Initial Therapy
                            <span class="severity-badge badge-urgent">Immediate</span>
                        </div>
                        <div class="step-description">
                            Combine TKI therapy with induction chemotherapy based on blast phenotype.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Myeloid: TKI + AML-type chemotherapy (cytarabine + daunorubicin)</div>
                            <div class="sub-step">Lymphoid: TKI + ALL-type chemotherapy (hyper-CVAD)</div>
                            <div class="sub-step">Ponatinib preferred for T315I mutation</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Stem Cell Transplant
                            <span class="severity-badge badge-urgent">Curative</span>
                        </div>
                        <div class="step-description">
                            Allogeneic HSCT should be considered promptly if response achieved and suitable donor found.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Goal: achieve partial response or return to chronic phase</div>
                            <div class="sub-step">Transplant not recommended in frank blast phase</div>
                            <div class="sub-step">TKI maintenance post-transplant for ‚â•1 year</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Supportive Care
                            <span class="severity-badge badge-stable">Essential</span>
                        </div>
                        <div class="step-description">
                            Provide comprehensive supportive care throughout treatment.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Tumor lysis syndrome prophylaxis</div>
                            <div class="sub-step">Blood transfusions as needed</div>
                            <div class="sub-step">Infection prophylaxis</div>
                            <div class="sub-step">Growth factor support</div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="previousStep('diagnosis')">‚Üê Back to Diagnosis</button>
                        <button class="btn btn-primary" onclick="nextStep('followup')">Proceed to Follow-up ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="algorithm-card card-followup" id="followup">
                <div class="card-header" onclick="toggleCard('followup')">
                    <div class="card-icon followup-icon">üìà</div>
                    <div class="card-title">Monitoring & Follow-up</div>
                    <div class="expand-icon" id="followup-icon">‚ñº</div>
                </div>
                <div class="card-content" id="followup-content">
                    <div class="step-item">
                        <div class="step-title">
                            Response Monitoring
                            <span class="severity-badge badge-stable">Regular</span>
                        </div>
                        <div class="step-description">
                            Monitor treatment response through hematological, cytogenetic, and molecular assessments.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Weekly blood counts initially, then monthly</div>
                            <div class="sub-step">qRT-PCR every 3 months for BCR::ABL1 transcripts</div>
                            <div class="sub-step">Cytogenetics every 3-12 months</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Complication Surveillance
                            <span class="severity-badge badge-caution">Vigilant</span>
                        </div>
                        <div class="step-description">
                            Monitor for treatment-related complications and disease progression.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">TKI-related vascular events</div>
                            <div class="sub-step">Transplant-related GVHD</div>
                            <div class="sub-step">Infectious complications</div>
                            <div class="sub-step">Disease relapse</div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-title">
                            Prognosis
                            <span class="severity-badge badge-caution">Guarded</span>
                        </div>
                        <div class="step-description">
                            Overall prognosis remains poor, but varies by phenotype and treatment response.
                        </div>
                        <div class="sub-steps">
                            <div class="sub-step">Median survival: 12-24 months with modern therapy</div>
                            <div class="sub-step">Lymphoid phenotype: better prognosis</div>
                            <div class="sub-step">De novo blast crisis: better than progression from CML</div>
                            <div class="sub-step">HSCT improves long-term survival</div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="previousStep('treatment')">‚Üê Back to Treatment</button>
                        <button class="btn btn-primary" onclick="resetAlgorithm()">Reset Algorithm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Toggle card expansion
        function toggleCard(cardId) {
            const content = document.getElementById(cardId + '-content');
            const icon = document.getElementById(cardId + '-icon');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
                icon.classList.add('expanded');
            }
        }

        // Navigation functions
        function nextStep(stepName) {
            // Expand target card
            const targetContent = document.getElementById(stepName + '-content');
            const targetIcon = document.getElementById(stepName + '-icon');
            targetContent.classList.add('expanded');
            targetIcon.classList.add('expanded');
            
            // Update progress
            updateProgress(stepName);
            
            // Scroll to target
            document.getElementById(stepName).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function previousStep(stepName) {
            // Scroll to target
            document.getElementById(stepName).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            // Update progress
            updateProgress(stepName);
        }

        function updateProgress(currentStep) {
            const steps = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const currentIndex = steps.indexOf(currentStep);
            
            steps.forEach((step, index) => {
                const progressStep = document.querySelector(`[data-step="${step}"]`);
                progressStep.classList.remove('active', 'completed');
                
                if (index < currentIndex) {
                    progressStep.classList.add('completed');
                } else if (index === currentIndex) {
                    progressStep.classList.add('active');
                }
            });
        }

        function resetAlgorithm() {
            // Collapse all cards
            const contents = document.querySelectorAll('.card-content');
            const icons = document.querySelectorAll('.expand-icon');
            
            contents.forEach(content => content.classList.remove('expanded'));
            icons.forEach(icon => icon.classList.remove('expanded'));
            
            // Reset progress
            const progressSteps = document.querySelectorAll('.progress-step');
            progressSteps.forEach(step => step.classList.remove('active', 'completed'));
            progressSteps[0].classList.add('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Progress sidebar click handlers
        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = this.dataset.step;
                document.getElementById(targetStep).scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
                updateProgress(targetStep);
            });
        });

        // Initialize - expand first card
        document.addEventListener('DOMContentLoaded', function() {
            const firstContent = document.getElementById('assessment-content');
            const firstIcon = document.getElementById('assessment-icon');
            firstContent.classList.add('expanded');
            firstIcon.classList.add('expanded');
        });
    </script>
</body>
</html>