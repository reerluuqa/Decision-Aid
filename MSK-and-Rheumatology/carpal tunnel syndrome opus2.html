<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carpal Tunnel Syndrome - Clinical Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --assessment-color: #2563eb;
            --assessment-light: #dbeafe;
            --diagnosis-color: #7c3aed;
            --diagnosis-light: #ede9fe;
            --treatment-color: #059669;
            --treatment-light: #d1fae5;
            --followup-color: #ea580c;
            --followup-light: #ffedd5;
            --urgent-red: #dc2626;
            --caution-amber: #f59e0b;
            --stable-green: #10b981;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-light: #f8fafc;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .header-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
            position: relative;
            z-index: 1;
        }

        /* Main Layout */
        .main-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            gap: 2rem;
        }

        /* Sticky Sidebar */
        .sidebar {
            width: 280px;
            flex-shrink: 0;
            position: sticky;
            top: 2rem;
            height: fit-content;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .sidebar h3 {
            font-size: 1rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--bg-light);
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .progress-item:hover {
            transform: translateX(5px);
        }

        .progress-item.active {
            background: var(--bg-light);
            font-weight: 600;
        }

        .progress-item.completed .progress-icon {
            background: var(--stable-green);
            color: white;
        }

        .progress-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .progress-item[data-section="assessment"] .progress-icon {
            background: var(--assessment-light);
            color: var(--assessment-color);
        }

        .progress-item[data-section="diagnosis"] .progress-icon {
            background: var(--diagnosis-light);
            color: var(--diagnosis-color);
        }

        .progress-item[data-section="treatment"] .progress-icon {
            background: var(--treatment-light);
            color: var(--treatment-color);
        }

        .progress-item[data-section="followup"] .progress-icon {
            background: var(--followup-light);
            color: var(--followup-color);
        }

        .progress-line {
            position: absolute;
            left: 31px;
            top: 48px;
            width: 2px;
            height: calc(100% - 16px);
            background: #e5e7eb;
        }

        .progress-item:last-child .progress-line {
            display: none;
        }

        .progress-item.completed .progress-line {
            background: var(--stable-green);
        }

        /* Legend */
        .legend {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 2px solid var(--bg-light);
        }

        .legend h4 {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .legend-badge {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .legend-badge.urgent { background: var(--urgent-red); }
        .legend-badge.caution { background: var(--caution-amber); }
        .legend-badge.stable { background: var(--stable-green); }

        /* Content Area */
        .content {
            flex: 1;
            min-width: 0;
        }

        /* Cards */
        .algorithm-card {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .algorithm-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .card-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 1.5rem;
            right: 1.5rem;
            height: 1px;
            background: rgba(0,0,0,0.1);
        }

        .card-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 1rem;
            transition: all 0.3s ease;
        }

        .card-header:hover .card-icon {
            transform: scale(1.1);
        }

        .card-title-section {
            flex: 1;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .card-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .expand-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .algorithm-card.expanded .expand-icon {
            transform: rotate(180deg);
            background: var(--text-primary);
            color: white;
        }

        /* Card Colors */
        .card-assessment .card-header { border-left: 4px solid var(--assessment-color); }
        .card-assessment .card-icon { background: var(--assessment-light); color: var(--assessment-color); }
        .card-assessment .card-title { color: var(--assessment-color); }

        .card-diagnosis .card-header { border-left: 4px solid var(--diagnosis-color); }
        .card-diagnosis .card-icon { background: var(--diagnosis-light); color: var(--diagnosis-color); }
        .card-diagnosis .card-title { color: var(--diagnosis-color); }

        .card-treatment .card-header { border-left: 4px solid var(--treatment-color); }
        .card-treatment .card-icon { background: var(--treatment-light); color: var(--treatment-color); }
        .card-treatment .card-title { color: var(--treatment-color); }

        .card-followup .card-header { border-left: 4px solid var(--followup-color); }
        .card-followup .card-icon { background: var(--followup-light); color: var(--followup-color); }
        .card-followup .card-title { color: var(--followup-color); }

        /* Card Content */
        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .algorithm-card.expanded .card-content {
            max-height: 5000px;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Subsections */
        .subsection {
            margin-bottom: 1.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }

        .subsection:last-child {
            margin-bottom: 0;
        }

        .subsection-header {
            padding: 1rem 1.25rem;
            background: var(--bg-light);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .subsection-header:hover {
            background: #f1f5f9;
        }

        .subsection-icon {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            font-size: 0.9rem;
        }

        .subsection-title {
            flex: 1;
            font-weight: 600;
            font-size: 1rem;
        }

        .subsection-toggle {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            color: var(--text-secondary);
        }

        .subsection.expanded .subsection-toggle {
            transform: rotate(90deg);
        }

        .subsection-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .subsection.expanded .subsection-content {
            max-height: 2000px;
        }

        .subsection-body {
            padding: 1.25rem;
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .badge-urgent {
            background: #fef2f2;
            color: var(--urgent-red);
            border: 1px solid #fecaca;
        }

        .badge-caution {
            background: #fffbeb;
            color: var(--caution-amber);
            border: 1px solid #fde68a;
        }

        .badge-stable {
            background: #ecfdf5;
            color: var(--stable-green);
            border: 1px solid #a7f3d0;
        }

        .badge-icon {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.4rem;
        }

        .badge-urgent .badge-icon { background: var(--urgent-red); }
        .badge-caution .badge-icon { background: var(--caution-amber); }
        .badge-stable .badge-icon { background: var(--stable-green); }

        /* Lists */
        .item-list {
            list-style: none;
        }

        .item-list li {
            padding: 0.75rem 0;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: flex-start;
        }

        .item-list li:last-child {
            border-bottom: none;
        }

        .item-list li::before {
            content: '‚Üí';
            margin-right: 0.75rem;
            color: var(--text-secondary);
            flex-shrink: 0;
        }

        .nested-list {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nested-list li {
            padding: 0.4rem 0;
        }

        .nested-list li::before {
            content: '‚Ä¢';
        }

        /* Alert Boxes */
        .alert-box {
            padding: 1rem 1.25rem;
            border-radius: 10px;
            margin: 1rem 0;
            display: flex;
            align-items: flex-start;
        }

        .alert-box-icon {
            font-size: 1.25rem;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }

        .alert-urgent {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 1px solid #fecaca;
        }

        .alert-caution {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 1px solid #fde68a;
        }

        .alert-info {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 1px solid #93c5fd;
        }

        .alert-success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 1px solid #a7f3d0;
        }

        /* Decision Tree */
        .decision-tree {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .decision-node {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin: 0.75rem 0;
            border-left: 3px solid;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .decision-node:hover {
            transform: translateX(5px);
        }

        .decision-node.node-urgent { border-color: var(--urgent-red); }
        .decision-node.node-caution { border-color: var(--caution-amber); }
        .decision-node.node-stable { border-color: var(--stable-green); }

        .decision-node-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .decision-node-title {
            font-weight: 600;
        }

        /* Test Cards */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .test-card {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 1.25rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .test-card:hover {
            background: white;
            box-shadow: var(--shadow);
            transform: translateY(-3px);
        }

        .test-card-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .test-card-title::before {
            content: 'üî¨';
            margin-right: 0.5rem;
        }

        .test-card-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Treatment Options */
        .treatment-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.25rem;
            margin: 0.75rem 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .treatment-option:hover {
            border-color: var(--treatment-color);
            box-shadow: var(--shadow);
        }

        .treatment-option.selected {
            border-color: var(--treatment-color);
            background: var(--treatment-light);
        }

        .treatment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .treatment-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .treatment-details {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #e5e7eb;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Differential Diagnosis Table */
        .diff-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .diff-table th,
        .diff-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .diff-table th {
            background: var(--bg-light);
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            color: var(--text-secondary);
        }

        .diff-table tr:hover {
            background: #fafafa;
        }

        .diff-table td:first-child {
            font-weight: 500;
        }

        /* Referral Criteria */
        .referral-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .referral-card {
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }

        .referral-card:hover {
            transform: scale(1.02);
        }

        .referral-card.urgent {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid var(--urgent-red);
        }

        .referral-card.routine {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid var(--stable-green);
        }

        .referral-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .referral-card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            font-size: 1.2rem;
        }

        .referral-card.urgent .referral-card-icon {
            background: var(--urgent-red);
            color: white;
        }

        .referral-card.routine .referral-card-icon {
            background: var(--stable-green);
            color: white;
        }

        .referral-card-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-card {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            background: white;
            box-shadow: var(--shadow);
        }

        .info-card-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .info-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--assessment-color);
        }

        .info-card-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Print & Complete Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid var(--bg-light);
        }

        .btn {
            padding: 0.875rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--assessment-color) 0%, #1d4ed8 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        }

        .btn-secondary {
            background: var(--bg-light);
            color: var(--text-primary);
            border: 2px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: white;
            border-color: var(--assessment-color);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                position: relative;
                top: 0;
            }

            .progress-item .progress-line {
                display: none;
            }

            .sidebar .progress-item {
                display: inline-flex;
                margin-right: 0.5rem;
            }
        }

        @media (max-width: 640px) {
            .header h1 {
                font-size: 1.75rem;
            }

            .main-container {
                padding: 1rem;
            }

            .card-header {
                padding: 1rem;
            }

            .card-icon {
                width: 44px;
                height: 44px;
                font-size: 1.25rem;
            }

            .card-title {
                font-size: 1.1rem;
            }

            .referral-grid,
            .test-grid,
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .algorithm-card {
            animation: fadeInUp 0.5s ease forwards;
        }

        .algorithm-card:nth-child(1) { animation-delay: 0.1s; }
        .algorithm-card:nth-child(2) { animation-delay: 0.2s; }
        .algorithm-card:nth-child(3) { animation-delay: 0.3s; }
        .algorithm-card:nth-child(4) { animation-delay: 0.4s; }

        /* Scroll Progress Bar */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--assessment-color), var(--diagnosis-color), var(--treatment-color), var(--followup-color));
            z-index: 1000;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>
    <div class="scroll-progress" id="scrollProgress"></div>

    <header class="header">
        <h1>üñêÔ∏è Carpal Tunnel Syndrome</h1>
        <p>Clinical Management Algorithm for Primary Care</p>
        <div class="header-meta">
            <span>üìÖ Last revised: August 2022</span>
            <span>üë§ Age: 16+ years</span>
            <span>üè• Setting: Primary Care</span>
        </div>
    </header>

    <div class="main-container">
        <!-- Sticky Progress Sidebar -->
        <aside class="sidebar" id="sidebar">
            <h3>üìç Progress</h3>
            
            <div class="progress-item active" data-section="assessment" onclick="scrollToSection('assessment')">
                <div class="progress-icon">1</div>
                <span>Assessment</span>
                <div class="progress-line"></div>
            </div>
            
            <div class="progress-item" data-section="diagnosis" onclick="scrollToSection('diagnosis')">
                <div class="progress-icon">2</div>
                <span>Diagnosis</span>
                <div class="progress-line"></div>
            </div>
            
            <div class="progress-item" data-section="treatment" onclick="scrollToSection('treatment')">
                <div class="progress-icon">3</div>
                <span>Treatment</span>
                <div class="progress-line"></div>
            </div>
            
            <div class="progress-item" data-section="followup" onclick="scrollToSection('followup')">
                <div class="progress-icon">4</div>
                <span>Follow-up</span>
            </div>

            <div class="legend">
                <h4>Severity Key</h4>
                <div class="legend-item">
                    <div class="legend-badge urgent"></div>
                    <span>Urgent Referral</span>
                </div>
                <div class="legend-item">
                    <div class="legend-badge caution"></div>
                    <span>Caution Required</span>
                </div>
                <div class="legend-item">
                    <div class="legend-badge stable"></div>
                    <span>Stable / Routine</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Assessment Card -->
            <section class="algorithm-card card-assessment expanded" id="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">ü©∫</div>
                    <div class="card-title-section">
                        <h2 class="card-title">Assessment</h2>
                        <p class="card-subtitle">Clinical history and examination</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                
                <div class="card-content">
                    <div class="card-body">
                        <!-- Key Stats -->
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-icon">üë©</div>
                                <div class="info-card-value">3:1</div>
                                <div class="info-card-label">Female to Male Ratio</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">üìä</div>
                                <div class="info-card-value">45-64</div>
                                <div class="info-card-label">Peak Age Range</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">üìà</div>
                                <div class="info-card-value">2.7%</div>
                                <div class="info-card-label">Population Prevalence</div>
                            </div>
                        </div>

                        <!-- History -->
                        <div class="subsection expanded">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--assessment-light); color: var(--assessment-color);">üìã</div>
                                <span class="subsection-title">History Taking</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <p style="margin-bottom: 1rem; font-weight: 500;">Ask about onset, duration, site, severity, and impact of symptoms:</p>
                                    
                                    <ul class="item-list">
                                        <li>
                                            <div>
                                                <strong>Typical symptoms:</strong> Intermittent paraesthesia, numbness, burning or pain in median nerve distribution
                                                <ul class="nested-list">
                                                    <li>Thumb, index finger, middle finger, radial half of ring finger</li>
                                                    <li>May affect one or both hands</li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <strong>Timing:</strong> Often worse at night; can wake from sleep
                                                <span class="badge badge-stable" style="margin-left: 0.5rem;"><span class="badge-icon"></span>Characteristic</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <strong>Relieving factors:</strong> Changing hand posture, shaking wrist ('flick sign')
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <strong>Functional impact:</strong> Loss of grip strength, reduced dexterity (buttons, holding objects, opening jars)
                                            </div>
                                        </li>
                                    </ul>

                                    <div class="alert-box alert-caution">
                                        <span class="alert-box-icon">‚ö†Ô∏è</span>
                                        <div>
                                            <strong>Atypical presentations:</strong> Sensory changes in all fingers, or pain radiating to wrist, forearm, or shoulder
                                        </div>
                                    </div>

                                    <div class="alert-box alert-urgent">
                                        <span class="alert-box-icon">üö®</span>
                                        <div>
                                            <strong>Severe disease indicators:</strong>
                                            <span class="badge badge-urgent" style="margin-left: 0.5rem;"><span class="badge-icon"></span>Urgent</span>
                                            <ul class="nested-list" style="margin-top: 0.5rem;">
                                                <li>Persistent symptoms with constant sensory deficit</li>
                                                <li>Thenar muscle wasting and weakness</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Risk Factors -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--assessment-light); color: var(--assessment-color);">‚ö°</div>
                                <span class="subsection-title">Risk Factors</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="test-grid">
                                        <div class="test-card">
                                            <div class="test-card-title">üîß Occupational</div>
                                            <div class="test-card-desc">High hand/wrist repetition, assembly line work, vibrating tools, gardening</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">‚öñÔ∏è Obesity</div>
                                            <div class="test-card-desc">Increased carpal tunnel pressure associated with higher BMI</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">ü§∞ Pregnancy</div>
                                            <div class="test-card-desc">Fluid retention may cause transient CTS; often resolves postpartum</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">ü¶¥ Arthritis</div>
                                            <div class="test-card-desc">Osteoarthritis, rheumatoid arthritis, synovitis</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">ü¶ã Thyroid</div>
                                            <div class="test-card-desc">Hypothyroidism associated with CTS</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">ü©∏ Diabetes</div>
                                            <div class="test-card-desc">Diabetic neuropathy and metabolic factors</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Examination -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--assessment-light); color: var(--assessment-color);">üëã</div>
                                <span class="subsection-title">Physical Examination</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="alert-box alert-info">
                                        <span class="alert-box-icon">‚ÑπÔ∏è</span>
                                        <div>
                                            <strong>Examine the entire upper limb</strong> including neck, shoulder, elbow, and wrist to exclude alternative diagnoses
                                        </div>
                                    </div>

                                    <h4 style="margin: 1rem 0 0.75rem;">Signs (more likely with prolonged/severe symptoms):</h4>
                                    <ul class="item-list">
                                        <li>Trophic ulceration at digit tips (rare - indicates loss of protective sensation)</li>
                                        <li>Thenar eminence muscle wasting <span class="badge badge-urgent"><span class="badge-icon"></span>Severe</span></li>
                                        <li>Sensory loss in median nerve distribution</li>
                                        <li>Weakness of thumb abduction and opposition</li>
                                        <li>Reduced grip and pinch strength; impaired coordination</li>
                                    </ul>

                                    <h4 style="margin: 1.5rem 0 0.75rem;">Provocation Tests:</h4>
                                    <div class="test-grid">
                                        <div class="test-card">
                                            <div class="test-card-title">Phalen's Test</div>
                                            <div class="test-card-desc"><strong>Method:</strong> Flex wrist for 60 seconds<br><strong>Positive:</strong> Pain/paraesthesia in median nerve distribution</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">Tinel's Test</div>
                                            <div class="test-card-desc"><strong>Method:</strong> Tap lightly over median nerve at volar wrist<br><strong>Positive:</strong> Paraesthesia/pain in median distribution</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">Durkan's Test</div>
                                            <div class="test-card-desc"><strong>Method:</strong> Direct pressure over carpal ligament with thumbs<br><strong>Positive:</strong> Produces/worsens paraesthesia</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Investigations -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--assessment-light); color: var(--assessment-color);">üî¨</div>
                                <span class="subsection-title">Investigations</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="alert-box alert-success">
                                        <span class="alert-box-icon">‚úÖ</span>
                                        <div>
                                            <strong>Nerve conduction studies are NOT usually needed</strong> if there are typical symptoms of CTS
                                        </div>
                                    </div>

                                    <p style="margin: 1rem 0;"><strong>Consider referral for NCS if:</strong></p>
                                    <ul class="item-list">
                                        <li>Diagnosis is uncertain</li>
                                        <li>Referral for surgical management is being considered</li>
                                    </ul>

                                    <p style="margin: 1rem 0;"><strong>Consider additional investigations if specific underlying cause suspected:</strong></p>
                                    <ul class="item-list">
                                        <li>TFTs if hypothyroidism suspected</li>
                                        <li>HbA1c / glucose if diabetes suspected</li>
                                        <li>Inflammatory markers if inflammatory arthritis suspected</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Diagnosis Card -->
            <section class="algorithm-card card-diagnosis" id="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üîç</div>
                    <div class="card-title-section">
                        <h2 class="card-title">Diagnosis</h2>
                        <p class="card-subtitle">Clinical diagnosis and differential considerations</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                
                <div class="card-content">
                    <div class="card-body">
                        <!-- Diagnostic Criteria -->
                        <div class="subsection expanded">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--diagnosis-light); color: var(--diagnosis-color);">‚úì</div>
                                <span class="subsection-title">Clinical Diagnosis Criteria</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="decision-tree">
                                        <p style="font-weight: 600; margin-bottom: 1rem;">CTS is a clinical diagnosis based on:</p>
                                        
                                        <div class="decision-node node-stable">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">‚úÖ Characteristic History</span>
                                                <span class="badge badge-stable"><span class="badge-icon"></span>Essential</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary);">Intermittent paraesthesia in median nerve distribution, worse at night, relieved by shaking hand</p>
                                        </div>

                                        <div class="decision-node node-stable">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">‚úÖ Consistent Examination</span>
                                                <span class="badge badge-stable"><span class="badge-icon"></span>Supportive</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary);">Positive provocation tests (Phalen's, Tinel's, Durkan's); sensory/motor signs in severe cases</p>
                                        </div>

                                        <div class="decision-node node-caution">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">‚ö†Ô∏è Exclusion of Alternatives</span>
                                                <span class="badge badge-caution"><span class="badge-icon"></span>Important</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary);">No features suggesting cervical radiculopathy, peripheral neuropathy, or other causes</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Differential Diagnosis -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--diagnosis-light); color: var(--diagnosis-color);">üìä</div>
                                <span class="subsection-title">Differential Diagnosis</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <table class="diff-table">
                                        <thead>
                                            <tr>
                                                <th>Condition</th>
                                                <th>Key Distinguishing Features</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Cubital tunnel syndrome</td>
                                                <td>Paraesthesia of little finger & ulnar ring finger; weakness of hand muscles sparing thumb</td>
                                            </tr>
                                            <tr>
                                                <td>Cervical radiculopathy (C6/7)</td>
                                                <td>Neck pain radiating to arm; dermatomal distribution; neck movements worsen symptoms</td>
                                            </tr>
                                            <tr>
                                                <td>De Quervain's tenosynovitis</td>
                                                <td>Pain over radial styloid; positive Finkelstein's test; thumb involvement</td>
                                            </tr>
                                            <tr>
                                                <td>Osteoarthritis (thumb MCP)</td>
                                                <td>Pain with pinch-twist actions; positive grind test; stiffness</td>
                                            </tr>
                                            <tr>
                                                <td>Inflammatory arthritis</td>
                                                <td>Prolonged morning stiffness; joint swelling; systemic features</td>
                                            </tr>
                                            <tr>
                                                <td>Peripheral neuropathy</td>
                                                <td>Bilateral lower limb involvement; diabetes/B12 deficiency; glove distribution</td>
                                            </tr>
                                            <tr>
                                                <td>Thoracic outlet syndrome</td>
                                                <td>Shoulder/neck pain; vascular symptoms; provocative positioning</td>
                                            </tr>
                                            <tr>
                                                <td>Raynaud's phenomenon</td>
                                                <td>Color changes in fingers; triggered by cold; symmetrical</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="alert-box alert-urgent">
                                        <span class="alert-box-icon">üö®</span>
                                        <div>
                                            <strong>Red Flags - Consider urgent referral:</strong>
                                            <span class="badge badge-urgent" style="margin-left: 0.5rem;"><span class="badge-icon"></span>Urgent</span>
                                            <ul class="nested-list" style="margin-top: 0.5rem;">
                                                <li>Rapidly progressive symptoms with severe pain and swelling (? tumour)</li>
                                                <li>History of significant trauma (? fracture)</li>
                                                <li>Signs of motor neurone disease or multiple sclerosis</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Treatment Card -->
            <section class="algorithm-card card-treatment" id="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üíä</div>
                    <div class="card-title-section">
                        <h2 class="card-title">Treatment</h2>
                        <p class="card-subtitle">Conservative management and referral pathways</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                
                <div class="card-content">
                    <div class="card-body">
                        <!-- Patient Information -->
                        <div class="subsection expanded">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--treatment-light); color: var(--treatment-color);">üìñ</div>
                                <span class="subsection-title">Patient Information & Lifestyle Advice</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <p style="margin-bottom: 1rem;"><strong>Provide information from:</strong></p>
                                    <ul class="item-list">
                                        <li>British Society for Surgery of the Hand (BSSH) patient leaflet</li>
                                        <li>Royal College of Surgeons patient leaflet on Carpal Tunnel Release</li>
                                        <li>Versus Arthritis information leaflet</li>
                                        <li>NHS website information on CTS</li>
                                        <li>NHS England Decision Support Tool for shared decision making</li>
                                    </ul>

                                    <h4 style="margin: 1.5rem 0 0.75rem;">Lifestyle Advice:</h4>
                                    <div class="test-grid">
                                        <div class="test-card">
                                            <div class="test-card-title">üñêÔ∏è Activity Modification</div>
                                            <div class="test-card-desc">Avoid repetitive hand/wrist movements; take regular breaks from precipitating tasks</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">üíº Workplace Assessment</div>
                                            <div class="test-card-desc">Consider Occupational Health referral if work-based risk factors identified</div>
                                        </div>
                                        <div class="test-card">
                                            <div class="test-card-title">üöó Driving Safety</div>
                                            <div class="test-card-desc">Advise regarding driving restrictions, especially post-surgery</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Conservative Treatment -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--treatment-light); color: var(--treatment-color);">ü©π</div>
                                <span class="subsection-title">Conservative Treatment Options</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="alert-box alert-success">
                                        <span class="alert-box-icon">‚úÖ</span>
                                        <div>
                                            <strong>For mild to moderate symptoms:</strong> Offer a 6-week trial of conservative treatment
                                            <span class="badge badge-stable" style="margin-left: 0.5rem;"><span class="badge-icon"></span>First Line</span>
                                        </div>
                                    </div>

                                    <div class="treatment-option" onclick="this.classList.toggle('selected')">
                                        <div class="treatment-header">
                                            <span class="treatment-title">üñêÔ∏è Night Splint</span>
                                            <span class="badge badge-stable"><span class="badge-icon"></span>First Line</span>
                                        </div>
                                        <div class="treatment-details">
                                            <strong>Description:</strong> Wrist splint in neutral position worn at night<br>
                                            <strong>Access:</strong> May be fitted by local MSK service<br>
                                            <strong>Evidence:</strong> Cochrane review supports short-term symptom improvement
                                        </div>
                                    </div>

                                    <div class="treatment-option" onclick="this.classList.toggle('selected')">
                                        <div class="treatment-header">
                                            <span class="treatment-title">üíâ Corticosteroid Injection</span>
                                            <span class="badge badge-caution"><span class="badge-icon"></span>Consider</span>
                                        </div>
                                        <div class="treatment-details">
                                            <strong>Description:</strong> Single injection into carpal tunnel<br>
                                            <strong>Delivery:</strong> Primary care (if expertise available) or MSK service referral<br>
                                            <strong>Evidence:</strong> INSTINCTS trial - provides symptom relief; similar effectiveness to splinting at 6 weeks
                                        </div>
                                    </div>

                                    <div class="treatment-option" onclick="this.classList.toggle('selected')">
                                        <div class="treatment-header">
                                            <span class="treatment-title">ü§∏ Hand Exercises</span>
                                            <span class="badge badge-stable"><span class="badge-icon"></span>Adjunct</span>
                                        </div>
                                        <div class="treatment-details">
                                            <strong>Description:</strong> Hand exercises and median nerve mobilization techniques<br>
                                            <strong>Delivery:</strong> May be offered by local MSK service/physiotherapy<br>
                                            <strong>Evidence:</strong> Limited evidence; may be useful as adjunct therapy
                                        </div>
                                    </div>

                                    <div class="alert-box alert-info" style="margin-top: 1.5rem;">
                                        <span class="alert-box-icon">‚ÑπÔ∏è</span>
                                        <div>
                                            <strong>Optimize management of any underlying condition</strong> (diabetes, hypothyroidism, inflammatory arthritis, obesity)
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Referral Criteria -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--treatment-light); color: var(--treatment-color);">üè•</div>
                                <span class="subsection-title">Referral Criteria</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <p style="margin-bottom: 1rem;">Refer to appropriate specialist (MSK service, rheumatologist, orthopaedic/hand surgeon, neurologist) depending on local pathways:</p>

                                    <div class="referral-grid">
                                        <div class="referral-card urgent">
                                            <div class="referral-card-header">
                                                <div class="referral-card-icon">üö®</div>
                                                <div>
                                                    <div class="referral-card-title">Urgent Referral</div>
                                                    <span class="badge badge-urgent"><span class="badge-icon"></span>Priority</span>
                                                </div>
                                            </div>
                                            <ul class="item-list" style="margin-top: 0.5rem;">
                                                <li>Progressive symptoms</li>
                                                <li>Clinical features of severe disease (thenar wasting, constant sensory loss)</li>
                                                <li>Significant functional impairment</li>
                                                <li>Red flag features suggesting alternative pathology</li>
                                            </ul>
                                        </div>

                                        <div class="referral-card routine">
                                            <div class="referral-card-header">
                                                <div class="referral-card-icon">üìã</div>
                                                <div>
                                                    <div class="referral-card-title">Routine Referral</div>
                                                    <span class="badge badge-stable"><span class="badge-icon"></span>Standard</span>
                                                </div>
                                            </div>
                                            <ul class="item-list" style="margin-top: 0.5rem;">
                                                <li>Diagnosis unclear after initial assessment</li>
                                                <li>Persistent symptoms despite 6-week conservative treatment trial</li>
                                                <li>Recurrent symptoms following previous surgery</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Surgical Management -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--treatment-light); color: var(--treatment-color);">üî™</div>
                                <span class="subsection-title">Surgical Management</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="decision-tree">
                                        <div class="decision-node node-stable">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">Carpal Tunnel Decompression</span>
                                                <span class="badge badge-stable"><span class="badge-icon"></span>Definitive</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                                Open or endoscopic technique - similar outcomes in studies
                                            </p>
                                        </div>
                                    </div>

                                    <h4 style="margin: 1rem 0 0.75rem;">Evidence:</h4>
                                    <ul class="item-list">
                                        <li>AAOS guideline: Strong evidence of greater treatment benefit at 6 & 12 months vs splinting, NSAIDs, or single steroid injection</li>
                                    </ul>

                                    <h4 style="margin: 1rem 0 0.75rem;">Risks of Surgery:</h4>
                                    <div class="alert-box alert-caution">
                                        <span class="alert-box-icon">‚ö†Ô∏è</span>
                                        <div>
                                            <ul class="nested-list">
                                                <li>Sensitive scar</li>
                                                <li>Neurovascular damage</li>
                                                <li>Complex regional pain syndrome</li>
                                                <li>Recurrence: 0.3-12% (RCSEng data)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Follow-up Card -->
            <section class="algorithm-card card-followup" id="followup">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üìÖ</div>
                    <div class="card-title-section">
                        <h2 class="card-title">Follow-up</h2>
                        <p class="card-subtitle">Review schedule and prognosis</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                
                <div class="card-content">
                    <div class="card-body">
                        <!-- Review Schedule -->
                        <div class="subsection expanded">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--followup-light); color: var(--followup-color);">üóìÔ∏è</div>
                                <span class="subsection-title">Review Schedule</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="decision-tree">
                                        <div class="decision-node node-stable">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">6-Week Review</span>
                                                <span class="badge badge-stable"><span class="badge-icon"></span>Standard</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                                Review after conservative treatment trial if symptoms persist (based on clinical judgement)
                                            </p>
                                        </div>

                                        <div class="decision-node node-caution">
                                            <div class="decision-node-header">
                                                <span class="decision-node-title">Earlier Review</span>
                                                <span class="badge badge-caution"><span class="badge-icon"></span>If Needed</span>
                                            </div>
                                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                                If symptoms worsen or new clinical features develop
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Prognosis -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--followup-light); color: var(--followup-color);">üìà</div>
                                <span class="subsection-title">Prognosis</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <div class="info-card-icon">‚ú®</div>
                                            <div class="info-card-value">34%</div>
                                            <div class="info-card-label">Spontaneous resolution at 6 months</div>
                                        </div>
                                        <div class="info-card">
                                            <div class="info-card-icon">üìä</div>
                                            <div class="info-card-value">47.6%</div>
                                            <div class="info-card-label">Symptom resolution (2-year untreated)</div>
                                        </div>
                                        <div class="info-card">
                                            <div class="info-card-icon">‚ö°</div>
                                            <div class="info-card-value">23.4%</div>
                                            <div class="info-card-label">Worsening without treatment</div>
                                        </div>
                                    </div>

                                    <h4 style="margin: 1.5rem 0 0.75rem;">Prognostic Indicators:</h4>
                                    <div class="test-grid">
                                        <div class="test-card" style="border-left: 3px solid var(--stable-green);">
                                            <div class="test-card-title" style="color: var(--stable-green);">Good Prognosis</div>
                                            <div class="test-card-desc">
                                                ‚Ä¢ Short duration of symptoms<br>
                                                ‚Ä¢ Younger age<br>
                                                ‚Ä¢ CTS due to pregnancy
                                            </div>
                                        </div>
                                        <div class="test-card" style="border-left: 3px solid var(--urgent-red);">
                                            <div class="test-card-title" style="color: var(--urgent-red);">Poor Prognosis</div>
                                            <div class="test-card-desc">
                                                ‚Ä¢ Bilateral symptoms<br>
                                                ‚Ä¢ Positive Phalen's test<br>
                                                ‚Ä¢ Thenar wasting<br>
                                                ‚Ä¢ Constant sensory deficit
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Complications -->
                        <div class="subsection">
                            <div class="subsection-header" onclick="toggleSubsection(this)">
                                <div class="subsection-icon" style="background: var(--followup-light); color: var(--followup-color);">‚ö†Ô∏è</div>
                                <span class="subsection-title">Complications of Untreated CTS</span>
                                <div class="subsection-toggle">‚ñ∂</div>
                            </div>
                            <div class="subsection-content">
                                <div class="subsection-body">
                                    <ul class="item-list">
                                        <li>Impact on daily functioning and sleep due to pain, paraesthesia, weakness, and impaired dexterity</li>
                                        <li>Sustained high pressure on median nerve can lead to constant, severe symptoms with persistent sensory and motor deficits</li>
                                        <li>Irreversible thenar muscle wasting if severe disease left untreated</li>
                                    </ul>

                                    <div class="alert-box alert-urgent" style="margin-top: 1rem;">
                                        <span class="alert-box-icon">üö®</span>
                                        <div>
                                            <strong>Important:</strong> Early referral for progressive or severe symptoms may prevent permanent nerve damage
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="expandAll()">
                    üìÇ Expand All Sections
                </button>
                <button class="btn btn-secondary" onclick="collapseAll()">
                    üìÅ Collapse All
                </button>
                <button class="btn btn-secondary" onclick="window.print()">
                    üñ®Ô∏è Print Algorithm
                </button>
            </div>
        </main>
    </div>

    <script>
        // Toggle main card expansion
        function toggleCard(header) {
            const card = header.closest('.algorithm-card');
            card.classList.toggle('expanded');
            updateProgress();
        }

        // Toggle subsection expansion
        function toggleSubsection(header) {
            const subsection = header.closest('.subsection');
            subsection.classList.toggle('expanded');
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            const card = section.closest('.algorithm-card') || section;
            
            // Expand the card if collapsed
            if (!card.classList.contains('expanded')) {
                card.classList.add('expanded');
            }
            
            // Scroll to section
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            updateProgress();
        }

        // Update progress sidebar
        function updateProgress() {
            const sections = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const scrollPosition = window.scrollY + 200;
            
            let activeSection = 'assessment';
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section && section.offsetTop <= scrollPosition) {
                    activeSection = sectionId;
                }
            });

            // Update progress items
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active', 'completed');
            });

            const activeIndex = sections.indexOf(activeSection);
            sections.forEach((sectionId, index) => {
                const progressItem = document.querySelector(`.progress-item[data-section="${sectionId}"]`);
                if (index < activeIndex) {
                    progressItem.classList.add('completed');
                } else if (index === activeIndex) {
                    progressItem.classList.add('active');
                }
            });
        }

        // Scroll progress bar
        function updateScrollProgress() {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            document.getElementById('scrollProgress').style.width = scrollPercent + '%';
        }

        // Expand all sections
        function expandAll() {
            document.querySelectorAll('.algorithm-card').forEach(card => {
                card.classList.add('expanded');
            });
            document.querySelectorAll('.subsection').forEach(subsection => {
                subsection.classList.add('expanded');
            });
        }

        // Collapse all sections
        function collapseAll() {
            document.querySelectorAll('.algorithm-card').forEach(card => {
                card.classList.remove('expanded');
            });
            document.querySelectorAll('.subsection').forEach(subsection => {
                subsection.classList.remove('expanded');
            });
        }

        // Event listeners
        window.addEventListener('scroll', () => {
            updateProgress();
            updateScrollProgress();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateProgress();
            updateScrollProgress();
            
            // Add intersection observer for animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.algorithm-card').forEach(card => {
                observer.observe(card);
            });
        });
    </script>
</body>
</html>