<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baker's Cyst Clinical Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
        }

        /* Sticky Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #1a365d 0%, #2d3748 100%);
            padding: 30px 20px;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.15);
            z-index: 100;
            overflow-y: auto;
        }

        .sidebar h2 {
            color: #fff;
            font-size: 1.3rem;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar h2::before {
            content: "üìã";
            font-size: 1.5rem;
        }

        .progress-list {
            list-style: none;
        }

        .progress-item {
            position: relative;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .progress-item::before {
            content: "";
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .progress-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .progress-item.active {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            font-weight: 600;
        }

        .progress-item.active::before {
            background: #48bb78;
            box-shadow: 0 0 10px rgba(72, 187, 120, 0.5);
        }

        .progress-item.completed::before {
            background: #48bb78;
        }

        .progress-line {
            position: absolute;
            left: 25px;
            top: 45px;
            width: 2px;
            height: calc(100% - 45px);
            background: rgba(255, 255, 255, 0.2);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 40px;
            width: calc(100% - 280px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #1a365d;
            margin-bottom: 10px;
        }

        .header p {
            color: #4a5568;
            font-size: 1.1rem;
        }

        /* Cards */
        .card {
            background: #fff;
            border-radius: 16px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.4s ease;
            transform: translateY(0);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            padding: 25px 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .card-header:hover {
            filter: brightness(0.95);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.3);
        }

        .card-title h3 {
            font-size: 1.4rem;
            color: #fff;
            font-weight: 600;
        }

        .card-title p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-top: 3px;
        }

        .expand-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: #fff;
            font-size: 1.2rem;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s ease;
            background: #fff;
        }

        .card.expanded .card-content {
            max-height: 2000px;
            padding: 30px;
        }

        /* Card Colors */
        .card-assessment .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-diagnosis .card-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .card-treatment .card-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .card-followup .card-header {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-urgent {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: #fff;
            animation: pulse 2s infinite;
        }

        .badge-caution {
            background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
            color: #333;
        }

        .badge-stable {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: #fff;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 65, 108, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 65, 108, 0); }
        }

        /* Content Sections */
        .section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }

        .section:hover {
            background: #f1f5f9;
            transform: translateX(5px);
        }

        .section-assessment { border-color: #667eea; }
        .section-diagnosis { border-color: #f5576c; }
        .section-treatment { border-color: #4facfe; }
        .section-followup { border-color: #43e97b; }

        .section h4 {
            color: #1a365d;
            margin-bottom: 12px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section ul {
            margin-left: 25px;
            color: #4a5568;
            line-height: 1.8;
        }

        .section li {
            margin-bottom: 8px;
        }

        .section p {
            color: #4a5568;
            line-height: 1.7;
        }

        /* Alert Boxes */
        .alert-box {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .alert-urgent {
            background: linear-gradient(135deg, rgba(255, 65, 108, 0.1) 0%, rgba(255, 75, 43, 0.1) 100%);
            border: 1px solid #ff416c;
        }

        .alert-caution {
            background: linear-gradient(135deg, rgba(247, 151, 30, 0.1) 0%, rgba(255, 210, 0, 0.1) 100%);
            border: 1px solid #f7971e;
        }

        .alert-info {
            background: linear-gradient(135deg, rgba(79, 172, 254, 0.1) 0%, rgba(0, 242, 254, 0.1) 100%);
            border: 1px solid #4facfe;
        }

        .alert-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .alert-content h5 {
            font-size: 1rem;
            margin-bottom: 8px;
            color: #1a365d;
        }

        .alert-content p, .alert-content ul {
            color: #4a5568;
            font-size: 0.95rem;
        }

        /* Decision Tree */
        .decision-tree {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .decision-node {
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .decision-node:hover {
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.15);
        }

        .decision-node::before {
            content: "";
            position: absolute;
            left: 30px;
            top: -15px;
            width: 2px;
            height: 15px;
            background: #e2e8f0;
        }

        .decision-node:first-child::before {
            display: none;
        }

        .node-question {
            font-weight: 600;
            color: #1a365d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .node-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .node-option {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option-yes {
            background: rgba(67, 233, 123, 0.1);
        }

        .option-yes:hover {
            border-color: #43e97b;
            background: rgba(67, 233, 123, 0.2);
        }

        .option-no {
            background: rgba(245, 87, 108, 0.1);
        }

        .option-no:hover {
            border-color: #f5576c;
            background: rgba(245, 87, 108, 0.2);
        }

        .option-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-action {
            font-size: 0.9rem;
            color: #4a5568;
        }

        /* Checklist */
        .checklist {
            list-style: none;
            margin: 15px 0;
        }

        .checklist li {
            padding: 12px 15px;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checklist li:hover {
            background: #e2e8f0;
        }

        .checklist li.checked {
            background: rgba(67, 233, 123, 0.15);
        }

        .checkbox {
            width: 22px;
            height: 22px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checklist li.checked .checkbox {
            background: #43e97b;
            border-color: #43e97b;
            color: #fff;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            .main-content {
                margin-left: 240px;
                width: calc(100% - 240px);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            .sidebar.open {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                width: 100%;
                padding: 20px;
            }
            .menu-toggle {
                display: flex;
            }
        }

        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: #1a365d;
            border-radius: 12px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 200;
            color: #fff;
            font-size: 1.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: flex;
            }
        }

        /* Age Toggle */
        .age-toggle {
            display: flex;
            background: #e2e8f0;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .age-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #4a5568;
        }

        .age-btn.active {
            background: #fff;
            color: #1a365d;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .age-content {
            display: none;
        }

        .age-content.active {
            display: block;
        }

        /* Table */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .info-table th, .info-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .info-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #1a365d;
        }

        .info-table tr:hover td {
            background: #f8fafc;
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <div class="menu-toggle" onclick="toggleSidebar()">‚ò∞</div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <h2>Clinical Pathway</h2>
        <div style="position: relative;">
            <div class="progress-line"></div>
            <ul class="progress-list">
                <li class="progress-item active" onclick="scrollToCard('assessment')">
                    <span>üîç</span> Assessment
                </li>
                <li class="progress-item" onclick="scrollToCard('diagnosis')">
                    <span>ü©∫</span> Diagnosis
                </li>
                <li class="progress-item" onclick="scrollToCard('treatment')">
                    <span>üíä</span> Treatment
                </li>
                <li class="progress-item" onclick="scrollToCard('followup')">
                    <span>üìÖ</span> Follow-up
                </li>
            </ul>
        </div>
        
        <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px;">
            <h4 style="color: #fff; margin-bottom: 15px; font-size: 0.9rem;">Severity Key</h4>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <span class="badge badge-urgent">üö® Urgent Referral</span>
                <span class="badge badge-caution">‚ö†Ô∏è Caution</span>
                <span class="badge badge-stable">‚úì Stable</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="header">
            <h1>Baker's Cyst Management Algorithm</h1>
            <p>NICE Clinical Knowledge Summary - Primary Care Pathway</p>
        </header>

        <!-- Assessment Card -->
        <div class="card card-assessment" id="assessment">
            <div class="card-header" onclick="toggleCard(this)">
                <div class="card-title">
                    <div class="card-icon">üîç</div>
                    <div>
                        <h3>Step 1: Assessment</h3>
                        <p>History taking and clinical examination</p>
                    </div>
                </div>
                <div class="expand-icon">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="section section-assessment">
                    <h4>üìù History Taking</h4>
                    <ul class="checklist" id="history-checklist">
                        <li onclick="toggleCheck(this)">
                            <div class="checkbox"></div>
                            <span>Ask about swelling behind knee (may be only feature)</span>
                        </li>
                        <li onclick="toggleCheck(this)">
                            <div class="checkbox"></div>
                            <span>Enquire about pain characteristics and tightness</span>
                        </li>
                        <li onclick="toggleCheck(this)">
                            <div class="checkbox"></div>
                            <span>Assess symptom aggravation with walking</span>
                        </li>
                        <li onclick="toggleCheck(this)">
                            <div class="checkbox"></div>
                            <span>Screen for underlying causes (OA, meniscal tear)</span>
                        </li>
                        <li onclick="toggleCheck(this)">
                            <div class="checkbox"></div>
                            <span>Check for red flags and complications</span>
                        </li>
                    </ul>
                </div>

                <div class="alert-box alert-urgent">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-content">
                        <h5>Red Flags - Arrange Same-Day Assessment</h5>
                        <ul>
                            <li>Sudden increase in swelling or pain</li>
                            <li>Change in consistency of swelling</li>
                            <li>Neurovascular symptoms</li>
                            <li>Signs of DVT, compartment syndrome, or septic arthritis</li>
                        </ul>
                    </div>
                </div>

                <div class="section section-assessment">
                    <h4>üëê Physical Examination</h4>
                    <ul>
                        <li><strong>Inspect & Palpate:</strong> Check popliteal fossa with knee in full extension and various degrees of flexion</li>
                        <li><strong>Foucher's Sign:</strong> Cyst feels tense in extension, softens/disappears with flexion</li>
                        <li><strong>Typical Findings:</strong> Round, smooth, fluctuant bulge in medial popliteal fossa</li>
                        <li><strong>Range of Motion:</strong> May be restricted with larger cysts</li>
                        <li><strong>Ruptured Cyst:</strong> Calf pain (sometimes severe) and swelling</li>
                    </ul>
                </div>

                <div class="age-toggle">
                    <button class="age-btn active" onclick="switchAge('children', this)">Children</button>
                    <button class="age-btn" onclick="switchAge('adults', this)">Adults</button>
                </div>

                <div class="age-content active" id="children-content">
                    <div class="section section-assessment">
                        <h4>üë∂ Assessment in Children</h4>
                        <p>Primary cysts are most common (95%). Often found incidentally by child or parent.</p>
                        <div class="alert-box alert-info">
                            <div class="alert-icon">‚ÑπÔ∏è</div>
                            <div class="alert-content">
                                <h5>Required Investigation</h5>
                                <p><strong>Ultrasound scan is recommended</strong> in all children to confirm diagnosis and rule out serious conditions (popliteal artery aneurysm, soft tissue tumours, venous thrombosis).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="age-content" id="adults-content">
                    <div class="section section-assessment">
                        <h4>üßë Assessment in Adults</h4>
                        <p>Almost always secondary to underlying knee pathology (OA, meniscal tears, ACL damage).</p>
                        <table class="info-table">
                            <tr>
                                <th>Investigation</th>
                                <th>Purpose</th>
                            </tr>
                            <tr>
                                <td>Clinical assessment</td>
                                <td>May be sufficient for diagnosis</td>
                            </tr>
                            <tr>
                                <td>Ultrasound</td>
                                <td>Confirm diagnosis, evaluate complications, exclude DVT</td>
                            </tr>
                            <tr>
                                <td>Plain X-ray</td>
                                <td>Limited value; useful for underlying joint disease</td>
                            </tr>
                            <tr>
                                <td>MRI</td>
                                <td>Identify underlying conditions (meniscal tear)</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagnosis Card -->
        <div class="card card-diagnosis" id="diagnosis">
            <div class="card-header" onclick="toggleCard(this)">
                <div class="card-title">
                    <div class="card-icon">ü©∫</div>
                    <div>
                        <h3>Step 2: Diagnosis</h3>
                        <p>Confirming Baker's cyst and excluding differentials</p>
                    </div>
                </div>
                <div class="expand-icon">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="decision-tree">
                    <div class="decision-node">
                        <div class="node-question">‚ùì Are there red flags present?</div>
                        <div class="node-options">
                            <div class="node-option option-yes">
                                <div class="option-title">‚úì Yes</div>
                                <div class="option-action">
                                    <span class="badge badge-urgent">Urgent Referral</span>
                                    <p style="margin-top: 10px;">Same-day secondary care assessment required</p>
                                </div>
                            </div>
                            <div class="node-option option-no">
                                <div class="option-title">‚úó No</div>
                                <div class="option-action">Continue with differential diagnosis</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-node">
                        <div class="node-question">‚ùì Does presentation suggest DVT?</div>
                        <div class="node-options">
                            <div class="node-option option-yes">
                                <div class="option-title">‚úì High Suspicion</div>
                                <div class="option-action">
                                    <span class="badge badge-urgent">Urgent Referral</span>
                                    <p style="margin-top: 10px;">Ruptured cysts can mimic DVT (pseudo-thrombophlebitis syndrome)</p>
                                </div>
                            </div>
                            <div class="node-option option-no">
                                <div class="option-title">‚úó Low Suspicion</div>
                                <div class="option-action">
                                    <span class="badge badge-stable">Continue</span>
                                    <p style="margin-top: 10px;">Proceed to confirm Baker's cyst diagnosis</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section section-diagnosis" style="margin-top: 25px;">
                    <h4>üî¨ Differential Diagnoses</h4>
                    <table class="info-table">
                        <tr>
                            <th>Condition</th>
                            <th>Key Features</th>
                            <th>Severity</th>
                        </tr>
                        <tr>
                            <td>Deep Vein Thrombosis</td>
                            <td>Calf pain, swelling, warmth, Homans' sign</td>
                            <td><span class="badge badge-urgent">Urgent</span></td>
                        </tr>
                        <tr>
                            <td>Popliteal Artery Aneurysm</td>
                            <td>Pulsatile mass, limb ischaemia signs</td>
                            <td><span class="badge badge-urgent">Urgent</span></td>
                        </tr>
                        <tr>
                            <td>Malignant Tumour</td>
                            <td>Rapid growth, hard mass, constitutional symptoms</td>
                            <td><span class="badge badge-urgent">Urgent</span></td>
                        </tr>
                        <tr>
                            <td>Superficial Thrombophlebitis</td>
                            <td>Tender cord, linear erythema</td>
                            <td><span class="badge badge-caution">Caution</span></td>
                        </tr>
                        <tr>
                            <td>Meniscal Cyst</td>
                            <td>Joint line location, mechanical symptoms</td>
                            <td><span class="badge badge-stable">Stable</span></td>
                        </tr>
                        <tr>
                            <td>Lipoma / Ganglion</td>
                            <td>Non-fluctuant, no Foucher's sign</td>
                            <td><span class="badge badge-stable">Stable</span></td>
                        </tr>
                    </table>
                </div>

                <div class="alert-box alert-caution">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <h5>Diagnostic Considerations</h5>
                        <p><strong>In adults:</strong> Always investigate for underlying knee pathology. Baker's cysts are almost always secondary to conditions like osteoarthritis, meniscal tears, or ACL damage.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Treatment Card -->
        <div class="card card-treatment" id="treatment">
            <div class="card-header" onclick="toggleCard(this)">
                <div class="card-title">
                    <div class="card-icon">üíä</div>
                    <div>
                        <h3>Step 3: Treatment</h3>
                        <p>Primary care management and referral criteria</p>
                    </div>
                </div>
                <div class="expand-icon">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="age-toggle">
                    <button class="age-btn active" onclick="switchAge('children-tx', this)">Children</button>
                    <button class="age-btn" onclick="switchAge('adults-tx', this)">Adults</button>
                </div>

                <div class="age-content active" id="children-tx-content">
                    <div class="section section-treatment">
                        <h4>üë∂ Management in Children</h4>
                        
                        <div class="alert-box alert-urgent">
                            <div class="alert-icon">üö®</div>
                            <div class="alert-content">
                                <h5>Immediate Action Required</h5>
                                <p>Admit to paediatrics/A&E if red flags indicating serious alternative diagnosis (e.g., DVT)</p>
                            </div>
                        </div>

                        <h5 style="margin: 20px 0 15px; color: #1a365d;">Referral Considerations:</h5>
                        <table class="info-table">
                            <tr>
                                <th>Indication</th>
                                <th>Referral To</th>
                            </tr>
                            <tr>
                                <td>Symptomatic or very large cyst</td>
                                <td>Paediatric Orthopaedic Surgeon</td>
                            </tr>
                            <tr>
                                <td>Suspected underlying inflammatory disease</td>
                                <td>Paediatric Rheumatologist/Paediatrician</td>
                            </tr>
                            <tr>
                                <td>Unclear diagnosis</td>
                                <td>Paediatric Orthopaedic Surgeon/Paediatrician</td>
                            </tr>
                        </table>

                        <div class="alert-box alert-info" style="margin-top: 20px;">
                            <div class="alert-icon">‚úì</div>
                            <div class="alert-content">
                                <h5>Conservative Management</h5>
                                <p>If no underlying disease suspected and diagnosis confirmed on USS: <strong>Reassure that primary Baker's cysts usually resolve without treatment</strong> (may take a few years).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="age-content" id="adults-tx-content">
                    <div class="section section-treatment">
                        <h4>üßë Management in Adults</h4>

                        <div class="alert-box alert-urgent">
                            <div class="alert-icon">üö®</div>
                            <div class="alert-content">
                                <h5>Same-Day Secondary Care Assessment If:</h5>
                                <ul>
                                    <li>Red flags identified</li>
                                    <li>High suspicion of DVT or other serious diagnosis</li>
                                </ul>
                            </div>
                        </div>

                        <div class="decision-tree" style="margin-top: 20px;">
                            <div class="decision-node">
                                <div class="node-question">ü©∫ Is there underlying knee pathology?</div>
                                <div class="node-options">
                                    <div class="node-option option-yes">
                                        <div class="option-title">‚úì Yes (OA, RA, gout, etc.)</div>
                                        <div class="option-action">
                                            <span class="badge badge-caution">Treat Underlying Cause</span>
                                            <p style="margin-top: 10px;">Optimize management - cyst often resolves with treatment of underlying condition</p>
                                        </div>
                                    </div>
                                    <div class="node-option option-no">
                                        <div class="option-title">? Unknown</div>
                                        <div class="option-action">Investigate for underlying pathology (rare to have no cause in adults)</div>
                                    </div>
                                </div>
                            </div>

                            <div class="decision-node">
                                <div class="node-question">üíä Is the cyst symptomatic?</div>
                                <div class="node-options">
                                    <div class="node-option option-no">
                                        <div class="option-title">‚úó Asymptomatic</div>
                                        <div class="option-action">
                                            <span class="badge badge-stable">No Treatment Required</span>
                                            <p style="margin-top: 10px;">Reassure patient. Excision not recommended as cyst may resolve with treatment of underlying condition.</p>
                                        </div>
                                    </div>
                                    <div class="node-option option-yes">
                                        <div class="option-title">‚úì Symptomatic</div>
                                        <div class="option-action">Proceed to symptomatic treatment</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section section-treatment" style="margin-top: 25px;">
                            <h4>üíä Symptomatic Treatment Options</h4>
                            <ul>
                                <li><strong>Simple Analgesia:</strong> Paracetamol or Ibuprofen</li>
                                <li><strong>Physiotherapy:</strong> May help with associated symptoms</li>
                                <li><strong>‚ö†Ô∏è NOT recommended:</strong> Direct aspiration in primary care</li>
                            </ul>
                        </div>
                    </div>

                    <div class="section section-treatment">
                        <h4>üìã Referral Criteria</h4>
                        <p style="margin-bottom: 15px;">Consider referral to Rheumatologist or Orthopaedic Surgeon if:</p>
                        <ul class="checklist">
                            <li onclick="toggleCheck(this)">
                                <div class="checkbox"></div>
                                <span>Diagnosis of popliteal fossa swelling is unclear</span>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <div class="checkbox"></div>
                                <span>Symptoms troublesome despite conservative measures</span>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <div class="checkbox"></div>
                                <span>Cyst is very large</span>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <div class="checkbox"></div>
                                <span>Specialist treatment of underlying knee disease required</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="section section-treatment" style="margin-top: 25px;">
                    <h4>üè• Secondary Care Treatments</h4>
                    <table class="info-table">
                        <tr>
                            <th>Treatment</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>USS-guided aspiration & injection</td>
                            <td>Fluid aspiration, cyst wall fenestration, corticosteroid injection</td>
                        </tr>
                        <tr>
                            <td>Corticosteroid injections</td>
                            <td>Intracystic or intra-articular; short-term pain relief</td>
                        </tr>
                        <tr>
                            <td>Arthroscopy</td>
                            <td>Identify and treat underlying joint pathology</td>
                        </tr>
                        <tr>
                            <td>Surgical excision</td>
                            <td>Reserved for large symptomatic cysts; high recurrence rate</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- Follow-up Card -->
        <div class="card card-followup" id="followup">
            <div class="card-header" onclick="toggleCard(this)">
                <div class="card-title">
                    <div class="card-icon">üìÖ</div>
                    <div>
                        <h3>Step 4: Follow-up</h3>
                        <p>Monitoring, prognosis, and patient information</p>
                    </div>
                </div>
                <div class="expand-icon">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="section section-followup">
                    <h4>üìä Prognosis</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div style="background: #e6fffa; padding: 20px; border-radius: 12px;">
                            <h5 style="color: #234e52; margin-bottom: 10px;">üë∂ Children</h5>
                            <ul style="color: #285e61;">
                                <li>Many resolve spontaneously without intervention</li>
                                <li>Resolution may take a few years</li>
                                <li>If underlying joint disease present, cysts tend to resolve when condition improves</li>
                            </ul>
                            <span class="badge badge-stable" style="margin-top: 15px;">Generally Excellent</span>
                        </div>
                        <div style="background: #ebf8ff; padding: 20px; border-radius: 12px;">
                            <h5 style="color: #2a4365; margin-bottom: 10px;">üßë Adults</h5>
                            <ul style="color: #2c5282;">
                                <li>Spontaneous resolution common without treatment</li>
                                <li>Treatment of underlying knee condition often leads to regression</li>
                                <li>Severe OA = resolution may be unrealistic</li>
                                <li>Surgery has high recurrence rate</li>
                            </ul>
                            <span class="badge badge-caution" style="margin-top: 15px;">Depends on Underlying Cause</span>
                        </div>
                    </div>
                </div>

                <div class="section section-followup">
                    <h4>‚ö†Ô∏è Complications to Monitor</h4>
                    <table class="info-table">
                        <tr>
                            <th>Complication</th>
                            <th>Features</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td>Cyst rupture</td>
                            <td>Sudden worsening, calf pain, swelling, redness</td>
                            <td><span class="badge badge-urgent">Urgent assessment</span></td>
                        </tr>
                        <tr>
                            <td>DVT (from venous compression)</td>
                            <td>Leg swelling, pain, warmth</td>
                            <td><span class="badge badge-urgent">Same-day review</span></td>
                        </tr>
                        <tr>
                            <td>Compartment syndrome</td>
                            <td>Severe pain, paralysis, pulselessness</td>
                            <td><span class="badge badge-urgent">Emergency</span></td>
                        </tr>
                        <tr>
                            <td>Infection</td>
                            <td>Fever, increasing pain, erythema</td>
                            <td><span class="badge badge-urgent">Urgent review</span></td>
                        </tr>
                        <tr>
                            <td>Nerve entrapment</td>
                            <td>Neurological symptoms</td>
                            <td><span class="badge badge-caution">Review</span></td>
                        </tr>
                    </table>
                </div>

                <div class="section section-followup">
                    <h4>üìö Patient Information</h4>
                    <div class="alert-box alert-info">
                        <div class="alert-icon">‚ÑπÔ∏è</div>
                        <div class="alert-content">
                            <h5>Resources</h5>
                            <p style="margin-bottom: 10px;">Direct patients to:</p>
                            <ul>
                                <li><strong>NHS Website:</strong> "Baker's cyst" information page</li>
                                <li>Information about underlying condition (OA, RA, etc.)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="section section-followup">
                    <h4>üîÑ Follow-up Schedule</h4>
                    <table class="info-table">
                        <tr>
                            <th>Scenario</th>
                            <th>Follow-up</th>
                        </tr>
                        <tr>
                            <td>Asymptomatic, no underlying pathology</td>
                            <td><span class="badge badge-stable">As needed</span> - Patient-initiated</td>
                        </tr>
                        <tr>
                            <td>Conservative management initiated</td>
                            <td><span class="badge badge-stable">4-6 weeks</span> - Review response</td>
                        </tr>
                        <tr>
                            <td>Underlying condition being treated</td>
                            <td><span class="badge badge-caution">As per condition</span> - Monitor cyst alongside</td>
                        </tr>
                        <tr>
                            <td>Post-secondary care treatment</td>
                            <td><span class="badge badge-caution">Per specialist advice</span></td>
                        </tr>
                        <tr>
                            <td>New or worsening symptoms</td>
                            <td><span class="badge badge-urgent">Prompt review</span></td>
                        </tr>
                    </table>
                </div>

                <div class="alert-box alert-caution" style="margin-top: 20px;">
                    <div class="alert-icon">üìã</div>
                    <div class="alert-content">
                        <h5>Safety Netting Advice for Patients</h5>
                        <p>Advise patients to return or seek urgent care if they develop:</p>
                        <ul>
                            <li>Sudden increase in pain or swelling</li>
                            <li>Calf pain, swelling, or warmth (possible DVT or rupture)</li>
                            <li>Numbness, tingling, or weakness in the leg</li>
                            <li>Signs of infection (fever, increasing redness, heat)</li>
                            <li>Inability to weight-bear</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding: 30px; color: #718096; font-size: 0.9rem;">
            <p>Based on NICE Clinical Knowledge Summaries - Baker's Cyst</p>
            <p style="margin-top: 5px;">Last revised: June 2025</p>
        </footer>
    </main>

    <script>
        // Toggle card expansion
        function toggleCard(header) {
            const card = header.parentElement;
            card.classList.toggle('expanded');
            updateProgress();
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Scroll to card and expand it
        function scrollToCard(cardId) {
            const card = document.getElementById(cardId);
            if (card) {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    if (!card.classList.contains('expanded')) {
                        card.classList.add('expanded');
                    }
                    updateProgress();
                }, 500);
            }
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
            }
        }

        // Toggle checklist items
        function toggleCheck(item) {
            item.classList.toggle('checked');
            const checkbox = item.querySelector('.checkbox');
            if (item.classList.contains('checked')) {
                checkbox.innerHTML = '‚úì';
            } else {
                checkbox.innerHTML = '';
            }
        }

        // Switch age content
        function switchAge(age, btn) {
            // Get all sibling buttons
            const buttons = btn.parentElement.querySelectorAll('.age-btn');
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Get parent content container
            const container = btn.closest('.card-content');
            
            // Hide all age contents in this container
            const contents = container.querySelectorAll('.age-content');
            contents.forEach(c => c.classList.remove('active'));

            // Show selected content
            const targetContent = container.querySelector(`#${age}-content`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // Update progress sidebar
        function updateProgress() {
            const cards = document.querySelectorAll('.card');
            const progressItems = document.querySelectorAll('.progress-item');
            
            let activeFound = false;
            
            cards.forEach((card, index) => {
                const rect = card.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight / 2 && rect.bottom > 0;
                
                if (isVisible && !activeFound) {
                    progressItems.forEach(item => item.classList.remove('active'));
                    progressItems[index].classList.add('active');
                    activeFound = true;
                }
                
                if (card.classList.contains('expanded')) {
                    progressItems[index].classList.add('completed');
                }
            });
        }

        // Update progress on scroll
        window.addEventListener('scroll', updateProgress);

        // Initialize first card as expanded
        document.addEventListener('DOMContentLoaded', () => {
            const firstCard = document.querySelector('.card');
            if (firstCard) {
                firstCard.classList.add('expanded');
            }
            updateProgress();
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const menuToggle = document.querySelector('.menu-toggle');
                
                if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                    sidebar.classList.remove('open');
                }
            }
        });
    </script>
</body>
</html>