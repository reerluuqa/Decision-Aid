<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vitamin D Deficiency in Children – Interactive NICE CKS Algorithm (Jan 2022)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --blue: #2196F3;
            --purple: #7B1FA2;
            --green: #4CAF50;
            --orange: #FF9800;
            --cyan: #00ACC1;
            --red: #D32F2F;
            --amber: #FF8F00;
            --gray: #424242;
        }
        body {margin:0; font-family: 'Segoe UI', Arial, sans-serif; background:#f5f7fa; color:#333; line-height:1.5;}
        .container {display:flex; min-height:100vh;}
        
        /* Sticky Progress Sidebar */
        .sidebar {
            position:sticky; top:0; height:100vh; width:260px; background:var(--gray); color:white; padding:20px 0;
            box-shadow: 4px 0 20px rgba(0,0,0,0.15);
        }
        .sidebar h3 {margin:0 20px 30px; font-size:1.4rem; text-align:center;}
        .progress-list {list-style:none; padding:0; margin:0;}
        .progress-item {
            padding:16px 20px; cursor:pointer; transition:all 0.3s; position:relative; font-weight:500;
        }
        .progress-item::before {
            content:""; position:absolute; left:0; top:0; bottom:0; width:4px; background:transparent; transition:all 0.3s;
        }
        .progress-item.active, .progress-item:hover {
            background:rgba(255,255,255,0.15);
        }
        .progress-item.active::before {background:white;}
        .progress-item i {margin-right:10px; width:20px;}

        /* Main Content */
        .main {flex:1; padding:30px; max-width:900px; margin:0 auto;}
        .card {
            background:white; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.12);
            margin-bottom:30px; overflow:hidden; transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:hover {transform:translateY(-8px); box-shadow:0 20px 40px rgba(0,0,0,0.18);}
        .card-header {
            padding:20px 30px; color:white; font-size:1.35rem; font-weight:600; display:flex; align-items:center;
            cursor:pointer; transition:all 0.3s;
        }
        .card-header:hover {opacity:0.92;}
        .card-header i {margin-right:15px; font-size:1.6rem;}
        .card-body {padding:0 30px 30px; display:none;}
        .card.active .card-body {display:block; animation:fadeIn 0.6s;}
        .section {display:none;}
        .section.active {display:block;}

        /* Colours */
        #assessment .card-header {background:linear-gradient(135deg, var(--blue), #00BCD4);}
        #diagnosis .card-header {background:linear-gradient(135deg, var(--purple), #AB47BC);}
        #treatment .card-header {background:linear-gradient(135deg, var(--green), #66BB6A);}
        #followup .card-header {background:linear-gradient(135deg, var(--orange), #FFB74D);}
        #prevention .card-header {background:linear-gradient(135deg, var(--cyan), #26A69A);}

        /* Badges */
        .badge {display:inline-block; padding:6px 14px; border-radius:50px; font-weight:600; font-size:0.9rem; margin:8px 4px;}
        .badge-red {background:#D32F2F; color:white;}
        .badge-amber {background:#FF8F00; color:white;}
        .badge-green {background:#4CAF50; color:white;}

        /* Buttons */
        .btn {
            padding:12px 24px; border:none; border-radius:8px; font-weight:600; cursor:pointer; margin:10px 8px 10px 0;
            transition:all 0.3s; display:inline-block;
        }
        .btn-primary {background:var(--blue); color:white;}
        .btn-primary:hover {background:#1976D2; transform:translateY(-2px);}
        .btn-next {background:var(--green); color:white; font-size:1.1rem; padding:14px 30px;}

        ul.check {list-style:none; padding-left:0;}
        ul.check li {padding:6px 0;}
        ul.check li::before {content:"✓"; color:var(--green); font-weight:bold; margin-right:10px;}

        .highlight {background:#FFF3E0; padding:15px; border-left:5px solid var(--amber); border-radius:4px; margin:15px 0;}

        @keyframes fadeIn {from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);}}
    </style>
</head>
<body>

<div class="container">
    <!-- Sticky Sidebar -->
    <div class="sidebar">
        <h3><i class="fas fa-route"></i> Algorithm Progress</h3>
        <ul class="progress-list">
            <li class="progress-item active" data-section="assessment"><i class="fas fa-search"></i>1. Assessment</li>
            <li class="progress-item" data-section="diagnosis"><i class="fas fa-vial"></i>2. Diagnosis</li>
            <li class="progress-item" data-section="treatment"><i class="fas fa-prescription-bottle-alt"></i>3. Treatment</li>
            <li class="progress-item" data-section="followup"><i class="fas fa-calendar-check"></i>4. Follow-up</li>
            <li class="progress-item" data-section="prevention"><i class="fas fa-shield-alt"></i>5. Prevention</li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main">

        <h1 style="text-align:center; color:var(--gray); margin-bottom:30px;">
            Vitamin D Deficiency in Children (1 month – 18 years)<br>
            <small style="color:#666;">Interactive NICE CKS Algorithm – Last revised January 2022</small>
        </h1>

        <!-- 1. Assessment -->
        <div id="assessment" class="section active">
            <div class="card active">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-search"></i> 1. Assessment – When to suspect vitamin D deficiency
                </div>
                <div class="card-body">
                    <p><strong>Do NOT routinely test asymptomatic children.</strong></p>
                    
                    <p><strong>Suspect vitamin D deficiency and measure serum 25(OH)D if the child has:</strong></p>
                    <ul class="check">
                        <li>Musculoskeletal symptoms possibly due to vitamin D deficiency (bone pain, muscle weakness, abnormal gait)</li>
                        <li>Suspected rickets or osteomalacia</li>
                        <li>Persistent unexplained bone pain</li>
                        <li>Abnormal bone profile suggesting deficiency (low calcium/phosphate, raised ALP)</li>
                        <li>Radiological evidence of rickets, osteopenia or pathological fracture</li>
                        <li>Chronic disease increasing risk (malabsorption, liver/renal disease, obesity, drugs e.g. anticonvulsants)</li>
                        <li>Known bone disease requiring vitamin D correction before specific treatment</li>
                    </ul>

                    <div class="highlight">
                        <strong>High-risk groups (consider targeted testing even if minimally symptomatic):</strong><br>
                        Dark skin, limited sun exposure, exclusive breastfeeding >6 months, diet low in vitamin D, obesity, malabsorption.
                    </div>

                    <button class="btn btn-next" onclick="showSection('diagnosis')">
                        <i class="fas fa-arrow-right"></i> Proceed to Diagnosis & Testing
                    </button>
                </div>
            </div>
        </div>

        <!-- 2. Diagnosis -->
        <div id="diagnosis" class="section">
            <div class="card active">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-vial"></i> 2. Diagnosis – Test Results & Severity
                </div>
                <div class="card-body">
                    <p><strong>UK thresholds (SACN 2016):</strong></p>
                    <ul>
                        <li><strong><25 nmol/L</strong> – Vitamin D deficiency (increased risk of rickets/osteomalacia)</li>
                        <li><strong>25–50 nmol/L</strong> – Insufficient / inadequate</li>
                        <li><strong>>50 nmol/L</strong> – Sufficient for most</li>
                    </ul>

                    <p><strong>Select the child's results and clinical features:</strong></p>

                    <div style="background:#f9f9f9; padding:20px; border-radius:8px;">
                        <label><strong>Serum 25(OH)D level:</strong></label><br>
                        <select id="vitd-level" style="width:100%; padding:10px; margin:10px 0; font-size:1rem;">
                            <option value="deficient"><25 nmol/L – Deficient</option>
                            <option value="insufficient">25–50 nmol/L – Insufficient</option>
                            <option value="sufficient">>50 nmol/L – Sufficient</option>
                        </select><br>

                        <label><input type="checkbox" id="symptomatic"> Child has symptoms or needs rapid correction (e.g. bone pain, deformity, seizures)</label><br><br>

                        <label><strong>Red flag / specialist referral needed?</strong></label><br>
                        <label><input type="checkbox" id="rickets"> Clinical/imaging evidence of rickets</label><br>
                        <label><input type="checkbox" id="hypocalcaemia"> Hypocalcaemia (symptomatic or severe)</label><br>
                        <label><input type="checkbox" id="special"> Malabsorption, CKD stage 5, severe liver disease, granulomatous disease, renal stones, pregnancy</label><br>
                    </div>

                    <button class="btn btn-next" onclick="calculateTreatment()">
                        <i class="fas fa-calculator"></i> Generate Treatment Plan
                    </button>
                </div>
            </div>
        </div>

        <!-- 3. Treatment -->
        <div id="treatment" class="section">
            <div class="card active">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-prescription-bottle-alt"></i> 3. Treatment Plan
                </div>
                <div class="card-body" id="treatment-plan">
                    <!-- Generated dynamically by JavaScript -->
                    <p style="text-align:center; color:#666; font-style:italic;">
                        Click “Generate Treatment Plan” in the Diagnosis section to see recommendations here.
                    </p>
                </div>
            </div>
        </div>

        <!-- 4. Follow-up -->
        <div id="followup" class="section">
            <div class="card active">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-calendar-check"></i> 4. Follow-up
                </div>
                <div class="card-body">
                    <p><strong>If loading dose was given:</strong></p>
                    <ul class="check">
                        <li>Recheck 25(OH)D and bone profile <strong>3–6 months</strong> after completing loading dose</li>
                        <li>Target: >50 nmol/L and normal bone profile</li>
                        <li>If achieved → continue maintenance 400–600 IU daily long-term</li>
                        <li>If still <50 nmol/L or abnormal bone profile → check adherence, consider underlying cause, refer to paediatric endocrinologist/metabolic bone specialist</li>
                        <li>If hypercalcaemia → stop vitamin D (and calcium), urgent investigation</li>
                    </ul>

                    <p><strong>Routine monitoring is NOT required</strong> in children on maintenance treatment without symptoms.</p>

                    <button class="btn btn-primary" onclick="showSection('prevention')">Go to Prevention Advice</button>
                </div>
            </div>
        </div>

        <!-- 5. Prevention -->
        <div id="prevention" class="section">
            <div class="card active">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-shield-alt"></i> 5. Prevention – All Children (UK Recommendations)
                </div>
                <div class="card-body">
                    <p><strong>All children in the UK should receive vitamin D supplementation:</strong></p>
                    <ul class="check">
                        <li><strong>Birth to 1 year</strong>: 340–400 IU (8.5–10 micrograms) daily (including exclusively breastfed)</li>
                        <li><strong>1–4 years</strong>: 400 IU (10 micrograms) daily</li>
                        <li><strong>≥4 years and at high risk</strong>: consider 400–600 IU daily (especially limited sun exposure or dark skin)</li>
                        <li>Infants taking >500 mL formula daily do NOT need additional vitamin D</li>
                    </ul>

                    <div class="highlight">
                        Healthy Start vitamin drops are free for eligible families (contain 300–400 IU vitamin D).
                    </div>

                    <p><strong>Lifestyle advice for all:</strong></p>
                    <ul class="check">
                        <li>Safe sun exposure (short periods midday spring/summer, expose arms/face)</li>
                        <li>Dietary sources: oily fish, eggs, fortified foods</li>
                        <li>Avoid sunbeds and burning</li>
                    </ul>

                    <button class="btn btn-primary" onclick="location.reload()">Restart Algorithm</button>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
function toggleCard(header) {
    const card = header.parentElement;
    card.classList.toggle('active');
}

function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    
    document.querySelectorAll('.progress-item').forEach(p => p.classList.remove('active'));
    document.querySelector(`.progress-item[data-section="${id}"]`).classList.add('active');
    
    window.scrollTo({top: 0, behavior: 'smooth'});
}

function calculateTreatment() {
    const level = document.getElementById('vitd-level').value;
    const symptomatic = document.getElementById('symptomatic').checked;
    const rickets = document.getElementById('rickets').checked;
    const hypocalcaemia = document.getElementById('hypocalcaemia').checked;
    const special = document.getElementById('special').checked;

    let plan = '<h3>Treatment Recommendation</h3>';

    // Urgent referral
    if (rickets || hypocalcaemia) {
        plan += '<p><span class="badge badge-red">URGENT REFERRAL TO PAEDIATRICS</span></p>';
        plan += '<p>Do not start treatment without specialist advice.</p>';
    }
    // Caution – specialist advice
    else if (special) {
        plan += '<p><span class="badge badge-amber">SEEK SPECIALIST ADVICE BEFORE TREATMENT</span></p>';
        plan += '<p>High risk of toxicity or need alternative regimen (e.g. calcitriol in CKD).</p>';
    }
    // Sufficient
    else if (level === 'sufficient') {
        plan += '<p><span class="badge badge-green">Sufficient vitamin D level</span></p>';
        plan += '<p>Continue prevention dose or lifestyle measures.<br>If ongoing symptoms → consider alternative diagnosis.</p>';
    }
    // Insufficient or deficient – standard treatment
    else {
        plan += '<p><strong>Preferred preparation: Colecalciferol (vitamin D₃)</strong> (OTC or prescribed).</p>';

        if (level === 'deficient' && symptomatic) {
            plan += '<p><strong>Loading dose recommended (8–12 weeks):</strong></p><ul>';
            plan += '<li>1–5 months: 3,000 IU daily</li>';
            plan += '<li>6 months–11 years: 6,000 IU daily</li>';
            plan += '<li>12–18 years: 10,000 IU daily <em>or</em> single/total 300,000 IU if adherence concern</li></ul>';
            plan += '<p>Then continue maintenance.</p>';
        }

        plan += '<p><strong>Long-term maintenance (all children after loading or with insufficiency):</strong><br>';
        plan += '400–600 IU daily (buy OTC unless prescribed for osteoporosis/malabsorption)</p>';

        plan += '<p><strong>Calcium:</strong> Assess dietary intake. Aim >500 mg/day after 12 months. Supplement if inadequate.</p>';
        
        plan += '<div class="highlight">Give lifestyle advice: safe sun exposure, vitamin D-rich foods, continue supplementation long-term.</div>';
    }

    document.getElementById('treatment-plan').innerHTML = plan;
    showSection('treatment');
}

// Allow sidebar clicks
document.querySelectorAll('.progress-item').forEach(item => {
    item.addEventListener('click', () => {
        showSection(item.dataset.section);
    });
});
</script>

</body>
</html>