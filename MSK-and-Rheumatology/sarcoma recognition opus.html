<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bone and Soft Tissue Sarcoma - Recognition and Referral Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }

        /* Sticky Sidebar */
        .sidebar {
            position: sticky;
            top: 20px;
            width: 280px;
            height: fit-content;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .sidebar h3 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #eee;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            margin-bottom: 8px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .progress-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0;
            border-radius: 2px;
            transition: height 0.3s ease;
        }

        .progress-item:hover {
            background: #f8f9fa;
        }

        .progress-item.active {
            background: #f0f7ff;
        }

        .progress-item.active::before {
            height: 70%;
        }

        .progress-item.assessment::before { background: #3b82f6; }
        .progress-item.diagnosis::before { background: #8b5cf6; }
        .progress-item.treatment::before { background: #10b981; }
        .progress-item.followup::before { background: #f59e0b; }

        .progress-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .progress-item:hover .progress-icon {
            transform: scale(1.1);
        }

        .progress-item.assessment .progress-icon { background: #dbeafe; color: #3b82f6; }
        .progress-item.diagnosis .progress-icon { background: #ede9fe; color: #8b5cf6; }
        .progress-item.treatment .progress-icon { background: #d1fae5; color: #10b981; }
        .progress-item.followup .progress-icon { background: #fef3c7; color: #f59e0b; }

        .progress-text {
            font-weight: 500;
            font-size: 14px;
        }

        .progress-item.completed .progress-icon::after {
            content: '‚úì';
            position: absolute;
            right: -5px;
            top: -5px;
            background: #10b981;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            max-width: 900px;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .header h1 {
            font-size: 28px;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .header p {
            color: #64748b;
            font-size: 16px;
        }

        .badge-legend {
            display: flex;
            gap: 16px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-urgent {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .badge-caution {
            background: #fef3c7;
            color: #d97706;
            border: 1px solid #fde68a;
        }

        .badge-stable {
            background: #d1fae5;
            color: #059669;
            border: 1px solid #a7f3d0;
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .badge-urgent .badge-dot { background: #dc2626; }
        .badge-caution .badge-dot { background: #d97706; }
        .badge-stable .badge-dot { background: #059669; }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s ease;
        }

        .card-header:hover {
            filter: brightness(0.98);
        }

        .card-header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .card-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .card-title-group h2 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .card-title-group p {
            font-size: 14px;
            opacity: 0.8;
        }

        .expand-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            font-size: 14px;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s ease;
            background: white;
        }

        .card.expanded .card-content {
            max-height: 2000px;
            padding: 0 24px 24px;
        }

        .card-inner {
            padding-top: 16px;
            border-top: 1px solid #eee;
        }

        /* Card Themes */
        .card.assessment .card-header {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }
        .card.assessment .card-icon { background: rgba(255, 255, 255, 0.2); }

        .card.diagnosis .card-header {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
        }
        .card.diagnosis .card-icon { background: rgba(255, 255, 255, 0.2); }

        .card.treatment .card-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        .card.treatment .card-icon { background: rgba(255, 255, 255, 0.2); }

        .card.followup .card-header {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }
        .card.followup .card-icon { background: rgba(255, 255, 255, 0.2); }

        /* Content Sections */
        .section {
            margin-bottom: 24px;
        }

        .section:last-child {
            margin-bottom: 0;
        }

        .section h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .info-box {
            background: #f8fafc;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .info-box:hover {
            background: #f1f5f9;
        }

        .info-box.urgent {
            border-left-color: #dc2626;
            background: #fef2f2;
        }

        .info-box.caution {
            border-left-color: #d97706;
            background: #fffbeb;
        }

        .info-box.stable {
            border-left-color: #059669;
            background: #ecfdf5;
        }

        .info-box h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box p, .info-box ul {
            font-size: 14px;
            color: #475569;
            line-height: 1.6;
        }

        .info-box ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .info-box li {
            margin-bottom: 6px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 28px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-dot {
            position: absolute;
            left: -24px;
            top: 2px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: white;
            border: 3px solid #3b82f6;
        }

        .timeline-item.urgent .timeline-dot { border-color: #dc2626; }
        .timeline-item.caution .timeline-dot { border-color: #d97706; }
        .timeline-item.stable .timeline-dot { border-color: #059669; }

        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
            font-size: 14px;
        }

        .data-table th, .data-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #475569;
        }

        .data-table tr:hover td {
            background: #f8fafc;
        }

        /* Action Buttons */
        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .action-btn.secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .action-btn.secondary:hover {
            background: #e2e8f0;
        }

        .action-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                position: relative;
                top: 0;
                width: 100%;
            }

            .sidebar .progress-items {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
            }

            .progress-item {
                flex: 1;
                min-width: 140px;
            }
        }

        @media (max-width: 640px) {
            .header h1 {
                font-size: 22px;
            }

            .card-header {
                padding: 16px;
            }

            .card-icon {
                width: 44px;
                height: 44px;
                font-size: 20px;
            }

            .card-title-group h2 {
                font-size: 16px;
            }

            .badge-legend {
                flex-direction: column;
                gap: 8px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            animation: fadeIn 0.5s ease forwards;
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sticky Sidebar -->
        <aside class="sidebar">
            <h3>Progress Overview</h3>
            <div class="progress-items">
                <div class="progress-item assessment active" onclick="scrollToCard('assessment')">
                    <div class="progress-icon">üìã</div>
                    <span class="progress-text">Assessment</span>
                </div>
                <div class="progress-item diagnosis" onclick="scrollToCard('diagnosis')">
                    <div class="progress-icon">üî¨</div>
                    <span class="progress-text">Diagnosis</span>
                </div>
                <div class="progress-item treatment" onclick="scrollToCard('treatment')">
                    <div class="progress-icon">üíä</div>
                    <span class="progress-text">Treatment</span>
                </div>
                <div class="progress-item followup" onclick="scrollToCard('followup')">
                    <div class="progress-icon">üìÖ</div>
                    <span class="progress-text">Follow-up</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1>Bone and Soft Tissue Sarcoma</h1>
                <p>Recognition and Referral Clinical Algorithm - Based on NICE Guidelines 2025</p>
                <div class="badge-legend">
                    <span class="badge badge-urgent"><span class="badge-dot"></span>Urgent Referral (48hrs)</span>
                    <span class="badge badge-caution"><span class="badge-dot"></span>Caution (2 weeks)</span>
                    <span class="badge badge-stable"><span class="badge-dot"></span>Stable / Safety Net</span>
                </div>
            </header>

            <!-- Assessment Card -->
            <div class="card assessment expanded" id="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-header-left">
                        <div class="card-icon">üìã</div>
                        <div class="card-title-group">
                            <h2>Step 1: Initial Assessment</h2>
                            <p>Symptom recognition and clinical evaluation</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-inner">
                        <div class="section">
                            <h3><span class="section-icon" style="background: #dbeafe; color: #3b82f6;">ü¶¥</span> Bone Sarcoma Symptoms</h3>
                            <div class="info-box urgent">
                                <h4><span class="badge badge-urgent"><span class="badge-dot"></span>Very Urgent</span></h4>
                                <p><strong>In Children and Young People:</strong></p>
                                <ul>
                                    <li>Unexplained bone pain</li>
                                    <li>Unexplained bone swelling</li>
                                </ul>
                                <p style="margin-top: 12px; font-weight: 500;">‚Üí Consider very urgent direct access X-ray (within 48 hours)</p>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #ede9fe; color: #8b5cf6;">üîç</span> Soft Tissue Sarcoma Symptoms</h3>
                            <div class="info-box caution">
                                <h4><span class="badge badge-caution"><span class="badge-dot"></span>Adults</span></h4>
                                <p>Unexplained lump that is increasing in size</p>
                                <p style="margin-top: 12px; font-weight: 500;">‚Üí Consider urgent direct access ultrasound (within 2 weeks)</p>
                            </div>
                            <div class="info-box urgent">
                                <h4><span class="badge badge-urgent"><span class="badge-dot"></span>Children & Young People</span></h4>
                                <p>Unexplained lump that is increasing in size</p>
                                <p style="margin-top: 12px; font-weight: 500;">‚Üí Consider very urgent direct access ultrasound (within 48 hours)</p>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #d1fae5; color: #10b981;">‚ÑπÔ∏è</span> Key Clinical Points</h3>
                            <div class="info-box stable">
                                <ul>
                                    <li>Pain and loss of function are main presenting symptoms for bone sarcoma</li>
                                    <li>Soft tissue sarcomas may present as painless masses that can become quite large</li>
                                    <li>Can occur in many parts of the body (connective tissue)</li>
                                    <li>Consider patient age when determining referral pathway</li>
                                </ul>
                            </div>
                        </div>

                        <div class="action-group">
                            <button class="action-btn primary" onclick="expandNextCard('diagnosis')">
                                Continue to Diagnosis ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card diagnosis" id="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-header-left">
                        <div class="card-icon">üî¨</div>
                        <div class="card-title-group">
                            <h2>Step 2: Diagnosis & Investigations</h2>
                            <p>Primary care investigations and result interpretation</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-inner">
                        <div class="section">
                            <h3><span class="section-icon" style="background: #fee2e2; color: #dc2626;">‚ö°</span> Investigation Pathways</h3>
                            
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Investigation Result</th>
                                        <th>Age Group</th>
                                        <th>Action</th>
                                        <th>Urgency</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>X-ray suggests bone sarcoma</td>
                                        <td>Adults</td>
                                        <td>Suspected cancer pathway referral</td>
                                        <td><span class="badge badge-caution"><span class="badge-dot"></span>2 weeks</span></td>
                                    </tr>
                                    <tr>
                                        <td>X-ray suggests bone sarcoma</td>
                                        <td>Children/Young People</td>
                                        <td>Very urgent specialist referral</td>
                                        <td><span class="badge badge-urgent"><span class="badge-dot"></span>48 hours</span></td>
                                    </tr>
                                    <tr>
                                        <td>Ultrasound suggests soft tissue sarcoma</td>
                                        <td>Adults</td>
                                        <td>Suspected cancer pathway referral</td>
                                        <td><span class="badge badge-caution"><span class="badge-dot"></span>2 weeks</span></td>
                                    </tr>
                                    <tr>
                                        <td>Ultrasound suggests soft tissue sarcoma</td>
                                        <td>Children/Young People</td>
                                        <td>Very urgent specialist referral</td>
                                        <td><span class="badge badge-urgent"><span class="badge-dot"></span>48 hours</span></td>
                                    </tr>
                                    <tr>
                                        <td>Uncertain findings + clinical concern</td>
                                        <td>All ages</td>
                                        <td>Referral as above based on age</td>
                                        <td><span class="badge badge-caution"><span class="badge-dot"></span>As appropriate</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #fef3c7; color: #d97706;">üìû</span> Specialist Discussion</h3>
                            <div class="info-box caution">
                                <h4>When to Consider</h4>
                                <ul>
                                    <li>Uncertainty about interpretation of symptoms and signs</li>
                                    <li>Uncertainty about whether referral is needed</li>
                                    <li>To communicate concerns and sense of urgency when symptoms are not classical</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #dbeafe; color: #3b82f6;">üìù</span> Referral Requirements</h3>
                            <div class="info-box">
                                <ul>
                                    <li>Include all appropriate information in referral correspondence</li>
                                    <li>Clearly state whether referral is urgent or non-urgent</li>
                                    <li>Use local referral proformas if available</li>
                                    <li><strong>Make referral within 1 working day of decision</strong></li>
                                </ul>
                            </div>
                        </div>

                        <div class="action-group">
                            <button class="action-btn secondary" onclick="expandNextCard('assessment')">
                                ‚Üê Back to Assessment
                            </button>
                            <button class="action-btn primary" onclick="expandNextCard('treatment')">
                                Continue to Management ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment/Management Card -->
            <div class="card treatment" id="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-header-left">
                        <div class="card-icon">üíä</div>
                        <div class="card-title-group">
                            <h2>Step 3: Management & Referral</h2>
                            <p>Referral timelines and patient support</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-inner">
                        <div class="section">
                            <h3><span class="section-icon" style="background: #fee2e2; color: #dc2626;">‚è±Ô∏è</span> Referral Timeline Definitions</h3>
                            <div class="timeline">
                                <div class="timeline-item urgent">
                                    <div class="timeline-dot"></div>
                                    <div class="info-box urgent">
                                        <h4>Immediate</h4>
                                        <p>Acute admission or referral within a few hours, or more quickly if necessary</p>
                                    </div>
                                </div>
                                <div class="timeline-item urgent">
                                    <div class="timeline-dot"></div>
                                    <div class="info-box urgent">
                                        <h4>Very Urgent</h4>
                                        <p>To happen within 48 hours</p>
                                    </div>
                                </div>
                                <div class="timeline-item caution">
                                    <div class="timeline-dot"></div>
                                    <div class="info-box caution">
                                        <h4>Urgent</h4>
                                        <p>To happen/be performed within 2 weeks</p>
                                    </div>
                                </div>
                                <div class="timeline-item stable">
                                    <div class="timeline-dot"></div>
                                    <div class="info-box stable">
                                        <h4>Suspected Cancer Pathway</h4>
                                        <p>Diagnosis or ruling out of cancer within 28 days of GP referral</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #d1fae5; color: #10b981;">üí¨</span> Patient Information & Support</h3>
                            <div class="info-box">
                                <h4>Key Discussion Points</h4>
                                <ul>
                                    <li>Explain they are being referred to a cancer service</li>
                                    <li>Reassure that most people referred will not have cancer</li>
                                    <li>Discuss alternative diagnoses</li>
                                    <li>Provide information about possible diagnosis (benign and malignant)</li>
                                </ul>
                            </div>
                            <div class="info-box">
                                <h4>Written Information Should Cover</h4>
                                <ul>
                                    <li>Where they are being referred to</li>
                                    <li>Expected waiting time for appointment</li>
                                    <li>How to obtain further information or help</li>
                                    <li>What to expect from the service</li>
                                    <li>What tests may be carried out</li>
                                    <li>How long results will take</li>
                                    <li>Whether they can bring someone</li>
                                    <li>Contact if no appointment confirmation received</li>
                                    <li>Other sources of support</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #ede9fe; color: #8b5cf6;">üë∂</span> Special Considerations - Children</h3>
                            <div class="info-box caution">
                                <p>When cancer is suspected in a child, discuss the referral decision and information with parents/carers (and the child if appropriate)</p>
                            </div>
                        </div>

                        <div class="action-group">
                            <button class="action-btn secondary" onclick="expandNextCard('diagnosis')">
                                ‚Üê Back to Diagnosis
                            </button>
                            <button class="action-btn primary" onclick="expandNextCard('followup')">
                                Continue to Follow-up ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card followup" id="followup">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-header-left">
                        <div class="card-icon">üìÖ</div>
                        <div class="card-title-group">
                            <h2>Step 4: Safety Netting & Follow-up</h2>
                            <p>Monitoring and ongoing care arrangements</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-inner">
                        <div class="section">
                            <h3><span class="section-icon" style="background: #fef3c7; color: #d97706;">üõ°Ô∏è</span> Safety Netting Principles</h3>
                            <div class="info-box caution">
                                <h4>Core Components</h4>
                                <ul>
                                    <li>Timely review and action after investigations</li>
                                    <li>Active monitoring of symptoms in low-risk patients</li>
                                    <li>Clear explanation of symptoms to watch for</li>
                                    <li>When to return for re-evaluation</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #d1fae5; color: #10b981;">‚úì</span> Investigation Follow-up</h3>
                            <div class="info-box stable">
                                <ul>
                                    <li>Results must be reviewed and acted upon appropriately</li>
                                    <li>Healthcare professional ordering investigation takes responsibility</li>
                                    <li>Or explicitly passes on responsibility</li>
                                    <li><strong>Be aware of false-negative results</strong> for chest X-rays and faecal occult blood tests</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #fee2e2; color: #dc2626;">üìã</span> Low-Risk Patient Review</h3>
                            <div class="info-box">
                                <h4>For patients not meeting referral criteria but with relevant symptoms:</h4>
                                <p><strong>Planned review:</strong> Within timeframe agreed with patient</p>
                                <p style="margin-top: 8px;"><strong>Patient-initiated review:</strong></p>
                                <ul>
                                    <li>New symptoms develop</li>
                                    <li>Continued concern</li>
                                    <li>Symptoms recur, persist, or worsen</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #dbeafe; color: #3b82f6;">üè•</span> Local Arrangements</h3>
                            <div class="info-box">
                                <ul>
                                    <li>Non-urgent referral letters assessed by specialist for potential upgrade</li>
                                    <li>Maximum waiting period for non-urgent referrals (per national targets)</li>
                                    <li>System to identify and follow up missed appointments</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3><span class="section-icon" style="background: #ede9fe; color: #8b5cf6;">üìä</span> Prognosis Information</h3>
                            <div class="info-box stable">
                                <h4>5-Year Survival Rates</h4>
                                <p><strong>Bone sarcoma:</strong> More than 65% survive 5 years or more</p>
                                <p><strong>Soft tissue sarcoma:</strong> Almost 70% survive 5 years or more (site dependent)</p>
                            </div>
                        </div>

                        <div class="action-group">
                            <button class="action-btn secondary" onclick="expandNextCard('treatment')">
                                ‚Üê Back to Management
                            </button>
                            <button class="action-btn primary" onclick="resetAlgorithm()">
                                üîÑ Start Over
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Toggle card expansion
        function toggleCard(header) {
            const card = header.closest('.card');
            card.classList.toggle('expanded');
            updateProgress();
        }

        // Expand specific card and scroll to it
        function expandNextCard(cardId) {
            const card = document.getElementById(cardId);
            
            // Collapse all other cards
            document.querySelectorAll('.card').forEach(c => {
                if (c.id !== cardId) {
                    c.classList.remove('expanded');
                }
            });
            
            // Expand target card
            card.classList.add('expanded');
            
            // Scroll to card
            setTimeout(() => {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
            
            updateProgress();
        }

        // Scroll to card from sidebar
        function scrollToCard(cardId) {
            const card = document.getElementById(cardId);
            
            // Expand the card
            document.querySelectorAll('.card').forEach(c => {
                c.classList.remove('expanded');
            });
            card.classList.add('expanded');
            
            // Scroll to card
            card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            updateProgress();
        }

        // Update progress sidebar
        function updateProgress() {
            const cards = document.querySelectorAll('.card');
            const progressItems = document.querySelectorAll('.progress-item');
            
            cards.forEach((card, index) => {
                if (card.classList.contains('expanded')) {
                    progressItems[index].classList.add('active');
                } else {
                    progressItems[index].classList.remove('active');
                }
            });
        }

        // Reset algorithm
        function resetAlgorithm() {
            document.querySelectorAll('.card').forEach((card, index) => {
                if (index === 0) {
                    card.classList.add('expanded');
                } else {
                    card.classList.remove('expanded');
                }
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            updateProgress();
        }

        // Intersection Observer for automatic progress update
        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -60% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const cardId = entry.target.id;
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelector(`.progress-item.${cardId}`).classList.add('active');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.card').forEach(card => {
            observer.observe(card);
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>