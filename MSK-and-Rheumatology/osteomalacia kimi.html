<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Osteomalacia - Interactive Clinical Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            margin-right: 280px;
        }

        .header {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 25px;
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .progress-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
        }

        .progress-sidebar h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .progress-item:hover {
            background: #e9ecef;
            transform: translateX(-5px);
        }

        .progress-item.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .progress-item.completed {
            background: #28a745;
            color: white;
        }

        .progress-icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            margin-bottom: 25px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .card-header {
            padding: 20px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .card-header:hover {
            filter: brightness(1.1);
        }

        .card-header.assessment {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
        }

        .card-header.diagnosis {
            background: linear-gradient(135deg, #9C27B0, #E91E63);
        }

        .card-header.treatment {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }

        .card-header.followup {
            background: linear-gradient(135deg, #FF9800, #FFC107);
        }

        .card-title {
            display: flex;
            align-items: center;
            font-size: 1.4em;
            font-weight: bold;
        }

        .card-icon {
            font-size: 1.8em;
            margin-right: 15px;
        }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .card.expanded .card-content {
            max-height: 2000px;
        }

        .card-body {
            padding: 25px;
        }

        .sub-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .sub-section.assessment {
            border-left-color: #2196F3;
        }

        .sub-section.diagnosis {
            border-left-color: #9C27B0;
        }

        .sub-section.treatment {
            border-left-color: #4CAF50;
        }

        .sub-section.followup {
            border-left-color: #FF9800;
        }

        .sub-section h4 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 10px;
            text-transform: uppercase;
        }

        .badge-urgent {
            background: #dc3545;
            color: white;
        }

        .badge-caution {
            background: #ffc107;
            color: #333;
        }

        .badge-stable {
            background: #28a745;
            color: white;
        }

        .list-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 3px solid #ddd;
            transition: all 0.3s ease;
        }

        .list-item:hover {
            border-left-color: #667eea;
            transform: translateX(5px);
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .test-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .test-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
        }

        .test-card h5 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .treatment-algorithm {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .algorithm-step {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .algorithm-step h5 {
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .algorithm-step ul {
            margin-left: 20px;
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .monitoring-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-top: 4px solid #FF9800;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .complication-item {
            background: #fff5f5;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid #dc3545;
        }

        .complication-item h6 {
            color: #dc3545;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .main-content {
                margin-right: 0;
            }
            
            .progress-sidebar {
                position: relative;
                width: 100%;
                height: auto;
                box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <div class="header fade-in">
                <h1>üè• Osteomalacia Management Algorithm</h1>
                <p>Interactive clinical decision support tool based on BMJ Best Practice guidelines</p>
                <p style="font-size: 0.9em; color: #999; margin-top: 10px;">Last updated: March 2025</p>
            </div>

            <!-- Assessment Card -->
            <div class="card fade-in" data-section="assessment">
                <div class="card-header assessment" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üîç</span>
                        Assessment & History
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="sub-section assessment">
                            <h4>Key Diagnostic Factors <span class="badge badge-caution">High Yield</span></h4>
                            <div class="list-item">Older age - decreased skin synthesis, intake, and absorption</div>
                            <div class="list-item">Vitamin D/calcium deficient diets - inadequate fortified foods</div>
                            <div class="list-item">Lack of sunlight exposure - housebound, high latitudes, modest clothing</div>
                            <div class="list-item">Diffuse bone pain and tenderness - lower extremities, spine, ribs, pelvis</div>
                            <div class="list-item">Proximal muscle weakness - waddling gait, difficulty climbing stairs</div>
                            <div class="list-item">Fractures with minimal trauma - pseudofractures (Looser zones)</div>
                            <div class="list-item">Malabsorption syndromes - coeliac disease, gastrectomy, bariatric surgery</div>
                        </div>

                        <div class="sub-section assessment">
                            <h4>Physical Examination Findings</h4>
                            <div class="list-item">Bone tenderness to percussion</div>
                            <div class="list-item">Poorly localised bony tenderness</div>
                            <div class="list-item">Proximal muscle weakness and wasting</div>
                            <div class="list-item">Waddling gait (severe cases)</div>
                            <div class="list-item">Skeletal deformities (advanced disease)</div>
                        </div>

                        <div class="sub-section assessment">
                            <h4>Risk Factors <span class="badge badge-urgent">Screen High-Risk</span></h4>
                            <div class="list-item"><strong>Strong:</strong> Dietary deficiency, CKD, limited sunlight, inherited disorders</div>
                            <div class="list-item"><strong>Moderate:</strong> Anticonvulsant therapy, hypophosphatasia</div>
                            <div class="list-item"><strong>Weak:</strong> Mesenchymal tumours, Fanconi's syndrome</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card fade-in" data-section="diagnosis">
                <div class="card-header diagnosis" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üß™</span>
                        Diagnosis & Investigations
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="sub-section diagnosis">
                            <h4>First-Line Tests <span class="badge badge-urgent">Order All</span></h4>
                            <div class="test-grid">
                                <div class="test-card">
                                    <h5>Serum 25-hydroxyvitamin D</h5>
                                    <p><span class="highlight">&lt;25 nmol/L (&lt;10 ng/mL)</span> = high risk of osteomalacia</p>
                                    <p style="font-size: 0.9em; color: #666;">Low in deficiency states</p>
                                </div>
                                <div class="test-card">
                                    <h5>Serum Calcium</h5>
                                    <p>Low or normal in vitamin D deficiency</p>
                                    <p style="font-size: 0.9em; color: #666;">Monitor for hypocalcaemia</p>
                                </div>
                                <div class="test-card">
                                    <h5>Serum Phosphate</h5>
                                    <p>Low in primary phosphate wasting</p>
                                    <p style="font-size: 0.9em; color: #666;">Check for renal tubular defects</p>
                                </div>
                                <div class="test-card">
                                    <h5>Intact PTH</h5>
                                    <p>Elevated in vitamin D deficiency</p>
                                    <p style="font-size: 0.9em; color: #666;">Secondary hyperparathyroidism</p>
                                </div>
                                <div class="test-card">
                                    <h5>Alkaline Phosphatase</h5>
                                    <p>High in majority of cases</p>
                                    <p style="font-size: 0.9em; color: #666;">Normal in hypophosphatasia</p>
                                </div>
                                <div class="test-card">
                                    <h5>24-hour Urinary Calcium</h5>
                                    <p>Low in vitamin D deficiency</p>
                                    <p style="font-size: 0.9em; color: #666;">Useful for confirmation</p>
                                </div>
                            </div>
                        </div>

                        <div class="sub-section diagnosis">
                            <h4>Imaging & Special Tests <span class="badge badge-caution">As Indicated</span></h4>
                            <div class="list-item"><strong>Bone X-rays:</strong> Looser pseudofractures (pathognomonic), osteopenia</div>
                            <div class="list-item"><strong>DXA Scan:</strong> Low bone mass (cannot distinguish from osteoporosis)</div>
                            <div class="list-item"><strong>24-hour Urinary Phosphate:</strong> High in phosphate wasting/Fanconi's</div>
                            <div class="list-item"><strong>Bone Biopsy:</strong> Definitive but rarely needed (widened osteoid seams &gt;15Œºm)</div>
                        </div>

                        <div class="sub-section diagnosis">
                            <h4>Differential Diagnosis <span class="badge badge-stable">Key Distinctions</span></h4>
                            <div class="list-item"><strong>Osteoporosis:</strong> Painless until fracture, normal labs, normal PTH</div>
                            <div class="list-item"><strong>Paget's Disease:</strong> Asymptomatic, markedly elevated ALP, gross bone deformities</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card fade-in" data-section="treatment">
                <div class="card-header treatment" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üíä</span>
                        Treatment Management
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="sub-section treatment">
                            <h4>Treatment Algorithm <span class="badge badge-urgent">Follow Steps</span></h4>
                            <div class="treatment-algorithm">
                                <div class="algorithm-step">
                                    <h5>1. Vitamin D Deficiency <span class="badge badge-stable">First-Line</span></h5>
                                    <ul>
                                        <li><strong>Colecalciferol (D3):</strong> 50,000 units weekly OR 5,000-10,000 units daily for 6-12 weeks</li>
                                        <li><strong>PLUS Calcium:</strong> 1-2g elemental daily in divided doses</li>
                                        <li>Adjust for malabsorption (higher doses may be needed)</li>
                                    </ul>
                                </div>
                                <div class="algorithm-step">
                                    <h5>2. Refractory or Malabsorption <span class="badge badge-caution">Second-Line</span></h5>
                                    <ul>
                                        <li><strong>Calcitriol:</strong> 0.25-1 mcg daily (faster onset, shorter half-life)</li>
                                        <li><strong>PLUS Calcium:</strong> 1-2g elemental daily</li>
                                        <li>Preferred in CKD, inherited disorders, or treatment failure</li>
                                    </ul>
                                </div>
                                <div class="algorithm-step">
                                    <h5>3. Phosphate Wasting Disorders <span class="badge badge-urgent">Specialist Care</span></h5>
                                    <ul>
                                        <li><strong>X-linked Hypophosphataemia:</strong> Burosumab 1 mg/kg SC every 4 weeks</li>
                                        <li><strong>Alternative:</strong> Calcitriol + phosphate + calcium</li>
                                        <li><strong>Oncogenic:</strong> Treat tumour if possible; burosumab if unresectable</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="sub-section treatment">
                            <h4>Special Considerations</h4>
                            <div class="list-item"><strong>Anticonvulsants:</strong> Higher vitamin D doses needed (target 75-150 nmol/L)</div>
                            <div class="list-item"><strong>Malabsorption:</strong> Take vitamin D with largest meal to improve absorption</div>
                            <div class="list-item"><strong>CKD-MBD:</strong> Calcitriol + phosphate binders (avoid aluminium)</div>
                        </div>

                        <div class="sub-section treatment">
                            <h4>Prevention <span class="badge badge-stable">Public Health</span></h4>
                            <div class="list-item">Sunlight exposure: sensible daily outdoor activity</div>
                            <div class="list-item">Diet: fortified foods, adequate calcium/vitamin D intake</div>
                            <div class="list-item">Adults: 600-800 IU vitamin D daily; Elderly: 800-2000 IU daily</div>
                            <div class="list-item">Calcium: 1000-1200 mg/day (women &gt;50, men &gt;70)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card fade-in" data-section="followup">
                <div class="card-header followup" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üìä</span>
                        Follow-up & Monitoring
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="sub-section followup">
                            <h4>Monitoring Schedule <span class="badge badge-caution">Essential</span></h4>
                            <div class="monitoring-grid">
                                <div class="monitoring-card">
                                    <h5>Initial</h5>
                                    <p>Check 25(OH)D at <strong>2-3 months</strong></p>
                                    <p>Assess symptoms and bone pain</p>
                                </div>
                                <div class="monitoring-card">
                                    <h5>Annual (long-term)</h5>
                                    <p>Serum Ca, PO4, PTH, 25(OH)D</p>
                                    <p>24-hour urinary calcium (periodic)</p>
                                    <p>Bone density (DXA)</p>
                                </div>
                                <div class="monitoring-card">
                                    <h5>High-dose therapy</h5>
                                    <p>Check every <strong>3 months</strong></p>
                                    <p>Serum Ca, PO4, PTH, urine Ca:Cr ratio</p>
                                    <p>Baseline renal ultrasound</p>
                                </div>
                            </div>
                        </div>

                        <div class="sub-section followup">
                            <h4>Complications <span class="badge badge-urgent">Monitor For</span></h4>
                            <div class="complication-item">
                                <h6>Insufficiency Fractures</h6>
                                <p>Timeframe: Long-term | Likelihood: Medium</p>
                                <p>Looser zones (pseudofractures) - pathognomonic for osteomalacia</p>
                            </div>
                            <div class="complication-item">
                                <h6>Secondary Hyperparathyroidism</h6>
                                <p>Timeframe: Variable | Likelihood: Medium</p>
                                <p>Reversible with treatment of underlying cause</p>
                            </div>
                            <div class="complication-item">
                                <h6>Hypercalcaemia</h6>
                                <p>Timeframe: Variable (over-replacement) | Likelihood: Medium</p>
                                <p>Hold supplementation, hydrate, consider furosemide</p>
                            </div>
                            <div class="complication-item">
                                <h6>Hypercalciuria & Nephrolithiasis</h6>
                                <p>Timeframe: Variable | Likelihood: Low</p>
                                <p>Monitor urine calcium excretion</p>
                            </div>
                        </div>

                        <div class="sub-section followup">
                            <h4>Prognosis</h4>
                            <div class="list-item"><strong>Excellent</strong> with appropriate treatment and compliance</div>
                            <div class="list-item">Muscle strength and bone pain improve within <strong>weeks</strong></div>
                            <div class="list-item">Radiological healing may take <strong>3-6 months</strong></div>
                            <div class="list-item">Outcome depends on underlying cause</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px; color: white; font-size: 0.9em;">
                <p>Based on BMJ Best Practice Guidelines | For educational purposes</p>
            </div>
        </div>

        <div class="progress-sidebar">
            <h3>üìç Progress Tracker</h3>
            <div class="progress-item active" data-target="assessment">
                <div class="progress-icon">üîç</div>
                <span>Assessment</span>
            </div>
            <div class="progress-item" data-target="diagnosis">
                <div class="progress-icon">üß™</div>
                <span>Diagnosis</span>
            </div>
            <div class="progress-item" data-target="treatment">
                <div class="progress-icon">üíä</div>
                <span>Treatment</span>
            </div>
            <div class="progress-item" data-target="followup">
                <div class="progress-icon">üìä</div>
                <span>Follow-up</span>
            </div>
            
            <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                <h4 style="color: #667eea; margin-bottom: 10px;">Quick Refer</h4>
                <p style="font-size: 0.85em; color: #666;">
                    <strong>Urgent:</strong> Severe hypocalcaemia, pathological fractures<br>
                    <strong>Red flags:</strong> CKD, oncogenic osteomalacia, Fanconi's syndrome
                </p>
            </div>
        </div>
    </div>

    <script>
        // Card toggle functionality
        function toggleCard(header) {
            const card = header.parentElement;
            const isExpanded = card.classList.contains('expanded');
            
            // Close all cards
            document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
            
            // Toggle current card
            if (!isExpanded) {
                card.classList.add('expanded');
                updateProgress(card.dataset.section);
                
                // Smooth scroll to card
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        // Progress tracking
        function updateProgress(section) {
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active', 'completed');
                if (item.dataset.target === section) {
                    item.classList.add('active');
                }
                if (isSectionCompleted(item.dataset.target)) {
                    item.classList.add('completed');
                }
            });
        }

        function isSectionCompleted(target) {
            const cards = Array.from(document.querySelectorAll('.card'));
            const targetCard = cards.find(card => card.dataset.section === target);
            const targetIndex = cards.indexOf(targetCard);
            
            return cards.slice(0, targetIndex).every(card => 
                card.classList.contains('expanded')
            );
        }

        // Progress sidebar navigation
        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                const targetSection = item.dataset.target;
                const targetCard = document.querySelector(`[data-section="${targetSection}"]`);
                
                // Close all cards and open target
                document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
                targetCard.classList.add('expanded');
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                updateProgress(targetSection);
            });
        });

        // Initialize first card as expanded
        document.addEventListener('DOMContentLoaded', () => {
            const firstCard = document.querySelector('.card');
            setTimeout(() => {
                firstCard.classList.add('expanded');
                updateProgress('assessment');
            }, 500);
        });

        // Add subtle animations on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all cards
        document.querySelectorAll('.card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(card);
        });
    </script>
</body>
</html>