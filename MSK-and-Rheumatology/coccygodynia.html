<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coccygodynia Management Algorithm</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f4 100%);
            color: #2c3e50;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 25px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100px); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* Progress Sidebar */
        .progress-sidebar {
            width: 280px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
            border: 1px solid #e1e8ff;
        }

        .progress-sidebar h3 {
            color: #4361ee;
            margin-bottom: 20px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .progress-item:hover {
            background: #f0f4ff;
            transform: translateX(5px);
        }

        .progress-item.active {
            background: linear-gradient(135deg, #4361ee 0%, #4cc9f0 100%);
            color: white;
            border-left: 4px solid #3a0ca3;
            box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
        }

        .progress-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .progress-item.active .progress-icon {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        .progress-item:not(.active) .progress-icon {
            background: #f0f4ff;
            color: #4361ee;
        }

        .progress-text {
            font-weight: 500;
        }

        .progress-indicator {
            margin-left: auto;
            font-size: 0.8em;
            opacity: 0.7;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 0;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid #f0f4ff;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .card-header {
            padding: 25px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card-header:hover::before {
            opacity: 1;
        }

        .card-header.assessment {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
        }

        .card-header.diagnosis {
            background: linear-gradient(135deg, #ff9a00 0%, #ff6a00 100%);
        }

        .card-header.treatment {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .card-header.followup {
            background: linear-gradient(135deg, #00c9ff 0%, #92fe9d 100%);
        }

        .card-title-wrapper {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card-title {
            font-size: 1.4em;
            font-weight: 600;
        }

        .expand-icon {
            font-size: 1.2em;
            transition: transform 0.4s ease;
            background: rgba(255,255,255,0.15);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.215, 0.61, 0.355, 1);
        }

        .card.expanded .card-body {
            max-height: 3000px;
        }

        .card-content {
            padding: 25px;
        }

        /* Content Sections */
        .section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #f0f4ff;
        }

        .subsection {
            background: #f8faff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #e1e8ff;
            transition: all 0.3s ease;
        }

        .subsection:hover {
            border-left: 4px solid #4361ee;
            background: #f0f4ff;
        }

        .subsection h4 {
            color: #3a0ca3;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 82, 82, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 82, 82, 0); }
        }

        .badge-red {
            background: linear-gradient(135deg, #ff5252 0%, #ff1744 100%);
            color: white;
            animation: pulse 2s infinite;
        }

        .badge-amber {
            background: linear-gradient(135deg, #ffb142 0%, #ff9800 100%);
            color: white;
        }

        .badge-green {
            background: linear-gradient(135deg, #2ed573 0%, #00e676 100%);
            color: white;
        }

        .badge-blue {
            background: linear-gradient(135deg, #3742fa 0%, #2f3542 100%);
            color: white;
        }

        .badge-purple {
            background: linear-gradient(135deg, #a55eea 0%, #8854d0 100%);
            color: white;
        }

        /* Algorithm Steps */
        .algorithm-step {
            background: white;
            border: 2px solid #e1e8ff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .algorithm-step:hover {
            border-color: #4361ee;
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.1);
        }

        .step-number {
            position: absolute;
            top: -10px;
            left: 15px;
            background: linear-gradient(135deg, #4361ee 0%, #4cc9f0 100%);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 2px 8px rgba(67, 97, 238, 0.3);
        }

        .step-content {
            margin-top: 10px;
        }

        .step-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .info-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e1e8ff;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            border-color: #4361ee;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.1);
        }

        .info-card strong {
            color: #3a0ca3;
        }

        .icon-text {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
        }

        .icon-text i {
            width: 20px;
            color: #4361ee;
            transition: transform 0.3s ease;
        }

        .icon-text:hover i {
            transform: scale(1.2);
        }

        .warning-box {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border: 1px solid #ffd54f;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .warning-box i {
            color: #ff9800;
            margin-top: 2px;
            animation: pulse 2s infinite;
        }

        .warning-box strong {
            color: #f57c00;
        }

        .success-box {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border: 1px solid #81c784;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .success-box i {
            color: #4caf50;
        }

        .success-box strong {
            color: #2e7d32;
        }

        .danger-box {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border: 1px solid #ef9a9a;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .danger-box i {
            color: #f44336;
            animation: pulse 2s infinite;
        }

        .danger-box strong {
            color: #c62828;
        }

        .treatment-timeline {
            position: relative;
            padding-left: 30px;
        }

        .treatment-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #4361ee, #4cc9f0);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e1e8ff;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateX(10px);
            border-color: #4361ee;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.1);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4361ee;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #4361ee;
        }

        .timeline-duration {
            position: absolute;
            top: 10px;
            right: 15px;
            background: linear-gradient(135deg, #4361ee 0%, #4cc9f0 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }

            .progress-sidebar {
                width: 100%;
                position: static;
                margin-bottom: 25px;
            }

            .progress-item {
                flex: 1;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .card-content {
                padding: 15px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .step-actions {
                flex-direction: column;
            }
        }

        /* Print styles */
        @media print {
            .progress-sidebar {
                display: none;
            }

            .card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }

            .card-body {
                max-height: none !important;
            }
        }

        /* Loading animation */
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .highlight {
            background: linear-gradient(120deg, #ffeb3b 0%, #ffc107 100%);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .drug-card {
            background: linear-gradient(135deg, #f0f4ff 0%, #e1e8ff 100%);
            border: 1px solid #4361ee;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .drug-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.15);
        }

        .drug-card strong {
            color: #3a0ca3;
        }

        .drug-card small {
            color: #5a6c7d;
            display: block;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-bone"></i> Coccygodynia Management</h1>
        <p>Evidence-based clinical algorithm for tailbone pain assessment and treatment</p>
    </div>

    <div class="container">
        <!-- Progress Sidebar -->
        <aside class="progress-sidebar fade-in">
            <h3><i class="fas fa-route"></i> Progress</h3>
            <div class="progress-item active" data-step="assessment">
                <div class="progress-icon">
                    <i class="fas fa-clipboard-check"></i>
                </div>
                <span class="progress-text">Assessment</span>
                <span class="progress-indicator"><i class="fas fa-dot-circle"></i></span>
            </div>
            <div class="progress-item" data-step="diagnosis">
                <div class="progress-icon">
                    <i class="fas fa-search"></i>
                </div>
                <span class="progress-text">Diagnosis</span>
                <span class="progress-indicator"><i class="fas fa-circle"></i></span>
            </div>
            <div class="progress-item" data-step="treatment">
                <div class="progress-icon">
                    <i class="fas fa-pills"></i>
                </div>
                <span class="progress-text">Treatment</span>
                <span class="progress-indicator"><i class="fas fa-circle"></i></span>
            </div>
            <div class="progress-item" data-step="followup">
                <div class="progress-icon">
                    <i class="fas fa-user-md"></i>
                </div>
                <span class="progress-text">Follow-up</span>
                <span class="progress-indicator"><i class="fas fa-circle"></i></span>
            </div>
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                <small class="text-muted">
                    <i class="fas fa-info-circle"></i> Based on BMJ Best Practice<br>
                    Last updated: Apr 11, 2024
                </small>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Assessment Card -->
            <div class="card fade-in" id="assessment-card">
                <div class="card-header assessment" onclick="toggleCard(this)">
                    <div class="card-title-wrapper">
                        <div class="card-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <div>
                            <div class="card-title">Assessment</div>
                            <small>Initial evaluation and history taking</small>
                        </div>
                    </div>
                    <div class="expand-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-history"></i> Key History Points
                            </h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-question-circle"></i> Pain Characteristics</h4>
                                    <div class="icon-text"><i class="fas fa-arrow-right"></i> Lancinating, aching, or boring pain in coccyx</div>
                                    <div class="icon-text"><i class="fas fa-arrow-right"></i> Worse with sitting or standing from sitting</div>
                                    <div class="icon-text"><i class="fas fa-arrow-right"></i> May radiate to sacrum, lumbar spine, or thigh</div>
                                    <div class="icon-text"><i class="fas fa-arrow-right"></i> Worse with defecation or intercourse</div>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-calendar-alt"></i> Duration</h4>
                                    <div class="icon-text"><i class="fas fa-clock"></i> <strong>Acute:</strong> &lt;2 months</div>
                                    <div class="icon-text"><i class="fas fa-clock"></i> <strong>Chronic:</strong> ≥2 months</div>
                                    <div class="icon-text"><i class="fas fa-info-circle"></i> May have latent period after trauma</div>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-user"></i> Risk Factors</h4>
                                    <div class="icon-text"><i class="fas fa-female"></i> <strong>Female sex:</strong> 5:1 ratio</div>
                                    <div class="icon-text"><i class="fas fa-weight"></i> <strong>Obesity:</strong> 3.4x higher risk</div>
                                    <div class="icon-text"><i class="fas fa-baby"></i> <strong>Childbirth:</strong> Multiparity, dystocia</div>
                                    <div class="icon-text"><i class="fas fa-shoe-prints"></i> <strong>Trauma:</strong> Fall, repetitive stress</div>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-stethoscope"></i> Physical Examination
                            </h3>
                            <div class="subsection">
                                <h4><i class="fas fa-eye"></i> Observation</h4>
                                <p>Patients may sit on hands or elevate one buttock to avoid pressure (tailor's position)</p>
                            </div>
                            <div class="subsection">
                                <h4><i class="fas fa-hand-pointer"></i> Palpation</h4>
                                <p>Tenderness on external or transrectal palpation of coccyx tip</p>
                                <p>Hypermobility on rectal examination (key diagnostic finding)</p>
                            </div>
                            <div class="subsection">
                                <h4><i class="fas fa-muscle"></i> Pelvic Floor Assessment</h4>
                                <p>Spasm or tenderness of coccygeus and levator ani muscles</p>
                                <p>Piriformis spasm may coexist (pain down thigh)</p>
                            </div>
                            <div class="subsection">
                                <h4><i class="fas fa-syringe"></i> Diagnostic Injection</h4>
                                <p><strong>Therapeutic trial:</strong> Corticosteroid + local anesthetic around dorsal coccyx</p>
                                <p class="success-box">
                                    <i class="fas fa-check-circle"></i>
                                    <strong>Positive response:</strong> Rapid pain relief indicates true coccygodynia vs. referred pain
                                </p>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-exclamation-triangle"></i> Red Flags
                            </h3>
                            <div class="danger-box">
                                <i class="fas fa-exclamation-circle"></i>
                                <div>
                                    <strong>Rule out serious pathology:</strong> Tumors, infection, inflammatory conditions
                                    <br><small>Order WBC, ESR if suspected</small>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-tags"></i> Classification
                            </h3>
                            <div class="step-actions">
                                <span class="badge badge-blue">Post-traumatic (60-70%)</span>
                                <span class="badge badge-purple">Idiopathic (30-40%)</span>
                                <span class="badge badge-amber">Non-traumatic</span>
                            </div>
                            <div class="info-grid" style="margin-top: 15px;">
                                <div class="info-card">
                                    <h4>Post-traumatic</h4>
                                    <p>Fall onto buttocks, childbirth, repetitive stress injury</p>
                                </div>
                                <div class="info-card">
                                    <h4>Idiopathic</h4>
                                    <p>Unknown cause; may involve psychosocial factors, depression</p>
                                </div>
                                <div class="info-card">
                                    <h4>Non-traumatic</h4>
                                    <p>Degenerative disease, infection, neoplasm (rare)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card fade-in" id="diagnosis-card">
                <div class="card-header diagnosis" onclick="toggleCard(this)">
                    <div class="card-title-wrapper">
                        <div class="card-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <div>
                            <div class="card-title">Diagnosis</div>
                            <small>Imaging and differential diagnosis</small>
                        </div>
                    </div>
                    <div class="expand-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-x-ray"></i> Imaging Studies
                            </h3>
                            
                            <div class="algorithm-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Dynamic Lateral Sacrococcygeal X-ray</h4>
                                    <p><strong>All patients:</strong> Standing and sitting positions</p>
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Coccygeal Configuration Types</h4>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 1:</strong> Normal, slightly curved (68% population)</div>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 2:</strong> Curved forward 90°</div>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 3:</strong> Sharply angulated at intercoccygeal joint</div>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 4:</strong> Anterior subluxation</div>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 5:</strong> Retroversion with spicule</div>
                                            <div class="icon-text"><i class="fas fa-shape"></i> <strong>Type 6:</strong> Scoliotic deformity</div>
                                        </div>
                                        <div class="info-card">
                                            <h4>Key Findings</h4>
                                            <div class="icon-text"><i class="fas fa-check"></i> Type 3 & 4 more common in coccygodynia</div>
                                            <div class="icon-text"><i class="fas fa-check"></i> Sacrococcygeal fusion: 51% vs 37% in controls</div>
                                            <div class="icon-text"><i class="fas fa-check"></i> Instability: >20° angulation between positions</div>
                                            <div class="icon-text"><i class="fas fa-check"></i> Seen in ~70% of patients</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>MRI Scan</h4>
                                    <p><strong>All patients:</strong> Rule out tumors, abscesses</p>
                                    <p class="warning-box">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <strong>Essential:</strong> To exclude less common serious pathologies
                                    </p>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>CT Scan (if indicated)</h4>
                                    <p>For acute trauma or bony detail evaluation</p>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-diagnoses"></i> Differential Diagnosis
                            </h3>
                            <p class="info-card">
                                <i class="fas fa-info-circle"></i> <strong>True coccygodynia:</strong> Pain arising from coccyx<br>
                                <i class="fas fa-info-circle"></i> <strong>Pseudococcygodynia:</strong> Referred pain from visceral organs, dural irritation, neurogenic sources
                            </p>

                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Lumbar Spondylosis/Disc Herniation</h4>
                                    <p><strong>Differentiating:</strong> Pain relieved by sitting, no coccygeal tenderness, MRI shows lumbar pathology</p>
                                    <span class="badge badge-amber">Caution</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Proctalgia Fugax</h4>
                                    <p><strong>Differentiating:</strong> Episodic, severe but brief anal pain, no coccygeal tenderness</p>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Pudendal Neuralgia</h4>
                                    <p><strong>Differentiating:</strong> Burning/stabbing in perineum, worse with sitting, diagnostic pudendal nerve block</p>
                                    <span class="badge badge-amber">Caution</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Perianal Abscess/Fistula</h4>
                                    <p><strong>Differentiating:</strong> Fever, erythema, fluctuant mass, elevated inflammatory markers</p>
                                    <span class="badge badge-red">Urgent Referral</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Rectal Tumor</h4>
                                    <p><strong>Differentiating:</strong> Insidious onset, unrelated to sitting, mass on examination</p>
                                    <span class="badge badge-red">Urgent Referral</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-times-circle"></i> Pilonidal Cyst</h4>
                                    <p><strong>Differentiating:</strong> Pain at dorsal coccyx near gluteal fold, sinus tract drainage</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card fade-in" id="treatment-card">
                <div class="card-header treatment" onclick="toggleCard(this)">
                    <div class="card-title-wrapper">
                        <div class="card-icon">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div>
                            <div class="card-title">Treatment</div>
                            <small>Stepwise management algorithm</small>
                        </div>
                    </div>
                    <div class="expand-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-road"></i> Management Overview
                            </h3>
                            <div class="treatment-timeline">
                                <div class="timeline-item">
                                    <div class="timeline-duration">Acute Phase</div>
                                    <h4>Step 1: Acute Management (&lt;2 months)</h4>
                                    <p>Conservative measures for 8 weeks</p>
                                    <span class="badge badge-green">Initial Treatment</span>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-duration">Chronic Phase</div>
                                    <h4>Step 2: Chronic Management (≥2 months)</h4>
                                    <p>Escalate to injections if conservative fails</p>
                                    <span class="badge badge-amber">Escalation</span>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-duration">3-6 months</div>
                                    <h4>Step 3: Interventional Procedures</h4>
                                    <p>Corticosteroid injections, manipulation</p>
                                    <span class="badge badge-amber">Specialist Referral</span>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-duration">Refractory</div>
                                    <h4>Step 4: Surgical Consultation</h4>
                                    <p>Coccygectomy for failed conservative management</p>
                                    <span class="badge badge-red">Surgery</span>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-first-aid"></i> Acute Coccygodynia (&lt;2 months)
                            </h3>
                            
                            <div class="algorithm-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Lifestyle Measures <span class="badge badge-green">First-line</span></h4>
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Pressure Relief</h4>
                                            <div class="icon-text"><i class="fas fa-couch"></i> U-shaped or wedge-shaped cushions</div>
                                            <div class="icon-text"><i class="fas fa-chair"></i> Ergonomic seating adjustments</div>
                                        </div>
                                        <div class="info-card">
                                            <h4>Supportive Measures</h4>
                                            <div class="icon-text"><i class="fas fa-hot-tub"></i> Sitz baths</div>
                                            <div class="icon-text"><i class="fas fa-spa"></i> Pelvic floor physiotherapy</div>
                                            <div class="icon-text"><i class="fas fa-hands"></i> Chiropractic manipulation</div>
                                        </div>
                                    </div>
                                    <p class="success-box">
                                        <i class="fas fa-lightbulb"></i>
                                        <strong>Goal:</strong> Relax pelvic floor musculature and decrease pain
                                    </p>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>NSAID Therapy</h4>
                                    <p><strong>Duration:</strong> Up to 8 weeks (lowest effective dose)</p>
                                    <div class="drug-card">
                                        <strong>Ibuprofen:</strong> 300-400mg every 6-8 hours, max 2400mg/day
                                    </div>
                                    <div class="drug-card">
                                        <strong>Diclofenac potassium:</strong> 50mg three times daily
                                    </div>
                                    <div class="drug-card">
                                        <strong>Naproxen:</strong> 500mg initially, then 250mg every 6-8 hours, max 1250mg/day
                                    </div>
                                    <div class="warning-box">
                                        <i class="fas fa-exclamation-circle"></i>
                                        <div>
                                            <strong>Contraindications:</strong> CVS thrombotic risk, GI toxicity, renal impairment<br>
                                            <small>Use with caution in patients with risk factors</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Adjunctive Therapy <span class="badge badge-blue">Optional</span></h4>
                                    <p><strong>Stool softeners</strong> if pain with defecation</p>
                                    <div class="drug-card">
                                        <strong>Docusate sodium:</strong> 50-500mg/day in divided doses
                                    </div>
                                    <div class="drug-card">
                                        <strong>Lactulose:</strong> 15-60mL/day in 1-2 divided doses
                                    </div>
                                    <p class="info-card">
                                        <i class="fas fa-clock"></i> Prescribe for 8 weeks to decrease pain with bowel movements
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-procedures"></i> Chronic Coccygodynia (≥2 months)
                            </h3>
                            <p class="warning-box">
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Important:</strong> Obtain dynamic x-rays and MRI to rule out pathology before escalating treatment
                            </p>

                            <div class="algorithm-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Corticosteroid + Local Anesthetic Injection <span class="badge badge-green">First-line</span></h4>
                                    <p><strong>Frequency:</strong> Monthly as required</p>
                                    <p><strong>Success rate:</strong> Considered more successful when combined with invasive manipulation under GA</p>
                                    
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Injection Technique Options</h4>
                                            <h5>Option A - Soft tissue injection:</h5>
                                            <div class="drug-card">
                                                <strong>Methylprednisolone acetate:</strong> 40mg<br>
                                                <strong>Bupivacaine 0.25%:</strong> 10mL<br>
                                                <small>Inject around sides and tip of coccyx</small>
                                            </div>
                                            <h5>Option B - Sacrococcygeal junction:</h5>
                                            <div class="drug-card">
                                                <strong>Triamcinolone acetonide:</strong> 80mg<br>
                                                <strong>Lidocaine 1%:</strong> 2mL<br>
                                                <small>Inject into SC junction and dorsal periosteum</small>
                                            </div>
                                        </div>
                                        <div class="info-card">
                                            <h4>Percutaneous SC Junction Injection</h4>
                                            <p>If local injection fails</p>
                                            <div class="icon-text"><i class="fas fa-radiation"></i> Fluoroscopic guidance recommended</div>
                                            <div class="icon-text"><i class="fas fa-hand-pointer"></i> Digital rectal localization alternative</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Invasive Manipulation & Massage <span class="badge badge-blue">Adjunct</span></h4>
                                    <p><strong>Technique:</strong> Transrectal flexion and extension under general anesthesia</p>
                                    <p><strong>Combines with:</strong> Corticosteroid injection</p>
                                    <p class="success-box">
                                        <i class="fas fa-check-circle"></i>
                                        <strong>Considered more successful</strong> than injection alone
                                    </p>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Physiotherapy <span class="badge badge-amber">Second-line</span></h4>
                                    <p><strong>When:</strong> If 2 successive injections have no effect</p>
                                    <p><strong>Combines with:</strong> Corticosteroid injection</p>
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Physiotherapy Measures</h4>
                                            <div class="icon-text"><i class="fas fa-massage"></i> Transrectal pelvic floor massage</div>
                                            <div class="icon-text"><i class="fas fa-hand-paper"></i> Coccygeal mobilisation</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h4>Ganglion Impar Injection <span class="badge badge-purple">Third-line</span></h4>
                                    <p><strong>Technique:</strong> Local anesthetic (lidocaine/bupivacaine) under fluoroscopic guidance</p>
                                    <div class="success-box">
                                        <i class="fas fa-chart-line"></i>
                                        <div>
                                            <strong>Systematic review results:</strong><br>
                                            • >85% success rate for pain control<br>
                                            • 60% improvement at 1 month<br>
                                            • 55% improvement at 3 months<br>
                                            • 40% improvement at 6 months
                                        </div>
                                    </div>
                                    <div class="warning-box">
                                        <i class="fas fa-exclamation-circle"></i>
                                        <strong>Image guidance mandatory:</strong> To avoid intravascular injection complications
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-cut"></i> Surgical Management
                            </h3>
                            
                            <div class="danger-box">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div>
                                    <strong>Indication:</strong> Chronic coccygodynia with <span class="highlight">3-6 months failed conservative management</span><br>
                                    <strong>Refer to:</strong> Spine surgeon
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Coccygectomy <span class="badge badge-red">Surgery</span></h4>
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Success Rates</h4>
                                            <div class="icon-text"><i class="fas fa-percentage"></i> <strong>Overall:</strong> 60-91% success</div>
                                            <div class="icon-text"><i class="fas fa-weight"></i> <strong>Traumatic:</strong> 75% success</div>
                                            <div class="icon-text"><i class="fas fa-question-circle"></i> <strong>Idiopathic:</strong> 58% success</div>
                                            <div class="icon-text"><i class="fas fa-ruler"></i> <strong>With instability:</strong> 92% success</div>
                                        </div>
                                        <div class="info-card">
                                            <h4>Predictors of Success</h4>
                                            <p><strong>Radiographic instability</strong> on dynamic x-rays</p>
                                            <p><strong>Traumatic/post-partum</strong> etiology</p>
                                        </div>
                                        <div class="info-card">
                                            <h4>Surgical Complications</h4>
                                            <div class="icon-text"><i class="fas fa-bacterium"></i> <strong>Infection:</strong> 2-22% (most common)</div>
                                            <div class="icon-text"><i class="fas fa-briefcase-medical"></i> <strong>Fistula/Hernia:</strong> Rare</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Perioperative Management</h4>
                                    <p><strong>Antibiotics:</strong> Continue for 72 hours post-op</p>
                                    <div class="drug-card">
                                        <strong>Cefazolin:</strong> 1000mg IV q8h<br>
                                        <strong>+ Metronidazole:</strong> 500mg IV q8h<br>
                                        <strong>+ Gentamicin:</strong> 2mg/kg IV q8h
                                    </div>
                                    <p><strong>Drain:</strong> Use surgical drain to reduce infection risk</p>
                                    <p><strong>Diet:</strong> Low-residue, constipating diet initially</p>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Alternative Procedures</h4>
                                    <p><strong>Sacral Rhizotomy:</strong> Sectioning S4-S5 nerve roots</p>
                                    <p><strong>Indication:</strong> Pain strictly localized to coccygeal region after failed coccygectomy</p>
                                    <p class="warning-box">
                                        <i class="fas fa-info-circle"></i>
                                        <strong>Limited role:</strong> Currently not a major treatment option
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-lightbulb"></i> Emerging Therapies
                            </h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4>Pulsed Radiofrequency</h4>
                                    <p>Caudal epidural approach to S3-S4</p>
                                    <p><strong>Results:</strong> 81% good/excellent outcomes at 6 months (n=21)</p>
                                </div>
                                <div class="info-card">
                                    <h4>Extracorporeal Shock Wave Therapy</h4>
                                    <p>Weekly sessions for chronic coccygodynia</p>
                                    <p><strong>Results:</strong> 79.4% with VAS ≤3 at 6 months</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card fade-in" id="followup-card">
                <div class="card-header followup" onclick="toggleCard(this)">
                    <div class="card-title-wrapper">
                        <div class="card-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div>
                            <div class="card-title">Follow-up</div>
                            <small>Monitoring and prognosis</small>
                        </div>
                    </div>
                    <div class="expand-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-heartbeat"></i> Monitoring
                            </h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4>Conservative Management</h4>
                                    <div class="icon-text"><i class="fas fa-calendar-check"></i> No ongoing monitoring after resolution</div>
                                    <div class="icon-text"><i class="fas fa-user-check"></i> Follow-up PRN (as needed)</div>
                                </div>
                                <div class="info-card">
                                    <h4>Post-operative (Coccygectomy)</h4>
                                    <div class="icon-text"><i class="fas fa-calendar-day"></i> 7-10 days: Suture removal</div>
                                    <div class="icon-text"><i class="fas fa-calendar-week"></i> 1 month: Wound healing check</div>
                                    <div class="icon-text"><i class="fas fa-calendar-alt"></i> 3 months: Functional outcome assessment</div>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-exclamation-triangle"></i> Complications
                            </h3>
                            
                            <div class="algorithm-step">
                                <div class="step-number">!</div>
                                <div class="step-content">
                                    <h4>Coccygectomy-Related Infection <span class="badge badge-red">Most Common</span></h4>
                                    <div class="info-grid">
                                        <div class="info-card">
                                            <h4>Risk Factors</h4>
                                            <div class="icon-text"><i class="fas fa-location-arrow"></i> Incision near anus</div>
                                            <div class="icon-text"><i class="fas fa-bacteria"></i> Wound contamination</div>
                                        </div>
                                        <div class="info-card">
                                            <h4>Incidence</h4>
                                            <div class="icon-text"><i class="fas fa-chart-line"></i> Historical: 14-27%</div>
                                            <div class="icon-text"><i class="fas fa-chart-line-down"></i> Recent: ~11%</div>
                                            <div class="icon-text"><i class="fas fa-chart-pie"></i> Some series: 0-3%</div>
                                        </div>
                                    </div>
                                    <p class="warning-box">
                                        <i class="fas fa-info-circle"></i>
                                        <strong>Prevention:</strong> Prophylactic antibiotics (72 hours), surgical drain, low-residue diet
                                    </p>
                                </div>
                            </div>

                            <div class="algorithm-step">
                                <div class="step-number">!</div>
                                <div class="step-content">
                                    <h4>Rectal Hernia <span class="badge badge-amber">Rare</span></h4>
                                    <p><strong>Description:</strong> Herniation of rectum after coccygectomy</p>
                                    <p><strong>Management:</strong> Mesh repair via abdominal approach</p>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-crystal-ball"></i> Prognosis
                            </h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-clock"></i> Acute Coccygodynia</h4>
                                    <p>May resolve spontaneously with conservative management</p>
                                    <span class="badge badge-green">Good</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-calendar-times"></i> Chronic Coccygodynia</h4>
                                    <p>Can persist for years, causing severe disability and decreased quality of life</p>
                                    <span class="badge badge-amber">Variable</span>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-syringe"></i> Post-traumatic</h4>
                                    <p>Better response to surgical therapy than idiopathic</p>
                                    <p><strong>Success rate:</strong> 75% vs 58% for idiopathic</p>
                                    <span class="badge badge-green">Better Prognosis</span>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-users"></i> Patient Counseling
                            </h3>
                            <div class="success-box">
                                <i class="fas fa-comments"></i>
                                <div>
                                    <strong>Education Points:</strong>
                                    <ul style="margin-left: 20px; margin-top: 8px;">
                                        <li>Avoid inciting activities that stress the coccyx</li>
                                        <li>Maintain good upright posture while sitting</li>
                                        <li>Use well-designed, comfortable chairs</li>
                                        <li>Weight loss if obese</li>
                                        <li>Avoid tight-fitting clothing (jeans with constricting seams)</li>
                                        <li>Post-surgery: Resume normal activities after wound healing (~30 days)</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="warning-box">
                                <i class="fas fa-exclamation-circle"></i>
                                <div>
                                    <strong>Important Note:</strong> Coccygodynia is under-recognised and under-treated. Many patients suffer for years without proper diagnosis and treatment.
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h3 class="section-title">
                                <i class="fas fa-shield-alt"></i> Prevention Strategies
                            </h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-weight-loss"></i> Primary Prevention</h4>
                                    <div class="icon-text"><i class="fas fa-weight"></i> Weight loss to prevent decreased pelvic rotation</div>
                                    <div class="icon-text"><i class="fas fa-tshirt"></i> Avoid tight-fitting clothing (jean-seam coccygodynia)</div>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-undo"></i> Secondary Prevention</h4>
                                    <div class="icon-text"><i class="fas fa-weight"></i> Weight loss to prevent recurrence</div>
                                    <div class="icon-text"><i class="fas fa-couch"></i> Continue pressure-relieving measures</div>
                                    <div class="icon-text"><i class="fas fa-muscle"></i> Maintain pelvic floor physiotherapy</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Card toggle functionality
        function toggleCard(header) {
            const card = header.parentElement;
            const allCards = document.querySelectorAll('.card');
            
            // Close all other cards
            allCards.forEach(c => {
                if (c !== card && c.classList.contains('expanded')) {
                    c.classList.remove('expanded');
                }
            });
            
            // Toggle current card
            card.classList.toggle('expanded');
            
            // Update progress sidebar
            updateProgressSidebar(card.id.replace('-card', ''));
            
            // Smooth scroll to card
            setTimeout(() => {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // Progress sidebar functionality
        function updateProgressSidebar(activeStep) {
            const progressItems = document.querySelectorAll('.progress-item');
            
            progressItems.forEach(item => {
                const step = item.dataset.step;
                const icon = item.querySelector('.progress-indicator i');
                
                if (step === activeStep) {
                    item.classList.add('active');
                    icon.className = 'fas fa-dot-circle';
                } else {
                    item.classList.remove('active');
                    icon.className = 'fas fa-circle';
                }
            });
        }

        // Progress sidebar click handlers
        document.addEventListener('DOMContentLoaded', function() {
            const progressItems = document.querySelectorAll('.progress-item');
            
            progressItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetStep = this.dataset.step;
                    const targetCard = document.getElementById(`${targetStep}-card`);
                    
                    // Expand target card
                    targetCard.classList.add('expanded');
                    
                    // Update progress
                    updateProgressSidebar(targetStep);
                    
                    // Smooth scroll to card
                    targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Close other cards
                    const allCards = document.querySelectorAll('.card');
                    allCards.forEach(card => {
                        if (card !== targetCard) {
                            card.classList.remove('expanded');
                        }
                    });
                });
            });

            // Add intersection observer for auto-updating progress
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -60% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const cardId = entry.target.id.replace('-card', '');
                        updateProgressSidebar(cardId);
                    }
                });
            }, observerOptions);

            // Observe all cards
            document.querySelectorAll('.card').forEach(card => {
                observer.observe(card);
            });

            // Add hover animations to badges
            const badges = document.querySelectorAll('.badge');
            badges.forEach(badge => {
                badge.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1) rotate(2deg)';
                    this.style.boxShadow = '0 4px 15px rgba(0,0,0,0.2)';
                });
                badge.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1) rotate(0deg)';
                    this.style.boxShadow = 'none';
                });
            });

            // Add click animations to algorithm steps
            const steps = document.querySelectorAll('.algorithm-step');
            steps.forEach(step => {
                step.addEventListener('click', function() {
                    this.style.transform = 'translateX(20px) scale(1.02)';
                    setTimeout(() => {
                        this.style.transform = 'translateX(10px) scale(1)';
                    }, 200);
                });
            });

            // Expand first card by default
            const firstCard = document.querySelector('.card');
            setTimeout(() => {
                firstCard.classList.add('expanded');
            }, 500);
        });

        // Add scroll animations
        function animateOnScroll() {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const cardTop = card.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (cardTop < windowHeight * 0.85) {
                    card.classList.add('fade-in');
                }
            });
        }

        window.addEventListener('scroll', animateOnScroll);
        window.addEventListener('load', animateOnScroll);

        // Print functionality
        function printAlgorithm() {
            window.print();
        }

        // Add print button to header
        const printButton = document.createElement('button');
        printButton.innerHTML = '<i class="fas fa-print"></i> Print Algorithm';
        printButton.style.cssText = `
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        `;
        printButton.addEventListener('mouseenter', () => {
            printButton.style.background = 'rgba(255,255,255,0.3)';
        });
        printButton.addEventListener('mouseleave', () => {
            printButton.style.background = 'rgba(255,255,255,0.2)';
        });
        printButton.addEventListener('click', printAlgorithm);
        
        const header = document.querySelector('.header');
        header.appendChild(printButton);

        // Search functionality (basic)
        function searchAlgorithm(query) {
            const cards = document.querySelectorAll('.card');
            const lowerQuery = query.toLowerCase();
            
            cards.forEach(card => {
                const content = card.textContent.toLowerCase();
                if (content.includes(lowerQuery)) {
                    card.style.display = 'block';
                    card.style.border = '3px solid #4361ee';
                } else {
                    card.style.border = '';
                }
                
                if (query === '') {
                    card.style.border = '';
                }
            });
        }

        // Add search box to sidebar
        const searchBox = document.createElement('div');
        searchBox.innerHTML = `
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                <input type="text" id="searchInput" placeholder="Search algorithm..." 
                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9em;">
            </div>
        `;
        document.querySelector('.progress-sidebar').appendChild(searchBox);
        
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            searchAlgorithm(e.target.value);
        });
    </script>
</body>
</html>