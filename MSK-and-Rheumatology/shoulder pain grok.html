<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shoulder Pain Algorithm – NICE CKS Nov 2022 (Age ≥16)</title>
<style>
  :root {
    --blue: #007bff;
    --purple: #6f42c1;
    --green: #28a745;
    --orange: #fd7e14;
    --red: #dc3545;
    --amber: #ffc107;
    --gray: #6c757d;
  }
  body {margin:0; font-family: system-ui, sans-serif; background:#f8fafc; color:#212529;}
  .container {display:flex; min-height:100vh;}
  
  /* Sticky Progress Sidebar */
  .sidebar {
    position:sticky; top:0; height:100vh; width:260px; background:#343a40; color:white; padding:20px; overflow-y:auto;
  }
  .sidebar h3 {margin-top:0; color:#fff;}
  .sidebar ul {list-style:none; padding:0;}
  .sidebar li {padding:12px 16px; border-radius:6px; margin:8px 0; background:#495057; cursor:pointer; transition:0.3s;}
  .sidebar li.active {background:var(--purple); font-weight:bold; transform:translateX(8px);}
  .sidebar li:hover {background:#5a6268;}

  /* Main Content */
  .main {flex:1; padding:20px 40px; max-width:900px;}
  h1 {text-align:center; color:var(--blue);}
  
  /* Cards */
  .card {
    background:white; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.1); margin:20px 0; overflow:hidden;
    transition:transform 0.3s, box-shadow 0.3s;
  }
  .card:hover {transform:translateY(-8px); box-shadow:0 12px 30px rgba(0,0,0,0.15);}
  .card-header {
    padding:20px; color:white; font-size:1.4rem; cursor:pointer; display:flex; align-items:center; justify-content:space-between;
  }
  .card-header::after {content:"↓"; margin-left:10px; transition:transform 0.3s;}
  .card-header.open::after {transform:rotate(180deg);}
  
  .assess .card-header {background:var(--blue);}
  .diagnosis .card-header {background:var(--purple);}
  .treatment .card-header {background:var(--green);}
  .followup .card-header {background:var(--orange);}
  
  .card-content {padding:0 20px; max-height:0; overflow:hidden; transition:max-height 0.5s ease;}
  .card-content.open {max-height:3000px; padding:20px;}

  /* Badges */
  .badge {
    padding:6px 12px; border-radius:20px; color:white; font-weight:bold; font-size:0.9rem; display:inline-block;
  }
  .red {background:var(--red);}
  .amber {background:var(--amber); color:black;}
  .green {background:var(--green);}

  /* Buttons */
  .btn {
    padding:10px 20px; margin:10px 5px 20px 0; border:none; border-radius:6px; cursor:pointer; font-weight:bold; transition:0.2s;
  }
  .btn-yes {background:#28a745; color:white;}
  .btn-no {background:#6c757d; color:white;}
  .btn-proceed {background:var(--purple); color:white;}
  .btn:hover {transform:scale(1.05);}

  ul {line-height:1.6;}
  .highlight {background:#fff3cd; padding:15px; border-left:5px solid #ffc107; border-radius:4px;}
</style>
</head>
<body>

<div class="container">
  <!-- Sticky Progress Sidebar -->
  <div class="sidebar">
    <h3>Shoulder Pain Algorithm</h3>
    <ul>
      <li onclick="showSection('assessment')" class="active" data-section="assessment">1. Assessment & Red Flags</li>
      <li onclick="showSection('diagnosis')" data-section="diagnosis">2. Diagnosis</li>
      <li onclick="showSection('treatment')" data-section="treatment">3. Treatment</li>
      <li onclick="showSection('followup')" data-section="followup">4. Follow-up & Referral</li>
    </ul>
  </div>

  <div class="main">

    <h1>Shoulder Pain – Interactive Algorithm<br><small>NICE CKS November 2022 (Age ≥16)</small></h1>

    <!-- 1. Assessment & Red Flags -->
    <div id="assessment" class="card assess">
      <div class="card-header open" onclick="toggleCard(this)">1. Assessment & Red Flags</div>
      <div class="card-content open">
        <p><strong>Red Flags – Urgent/Same-day referral required if ANY present:</strong></p>
        <ul>
          <li>Trauma + sudden weakness/inability to actively raise arm → <strong class="badge red">Suspected acute rotator cuff tear</strong> → Urgent orthopaedics</li>
          <li>Shoulder mass/swelling, unexplained deformity → <strong class="badge red">Possible malignancy</strong> → 2-week wait</li>
          <li>Red, hot, systemically unwell → <strong class="badge red">Septic arthritis</strong> → Same-day emergency</li>
          <li>Trauma + abnormal contour/loss of rotation → <strong class="badge red">Unreduced dislocation</strong> → ED immediately</li>
          <li>New inflammatory arthritis in multiple joints → Urgent rheumatology</li>
        </ul>

        <div class="highlight">
          <strong>If ANY red flag → Stop routine algorithm and refer urgently according to findings.</strong>
        </div>

        <p><strong>If NO red flags → Proceed to key discriminating questions below (Diagnosis section).</strong></p>
        <button class="btn btn-proceed" onclick="showSection('diagnosis')">No Red Flags → Go to Diagnosis</button>
      </div>
    </div>

    <!-- 2. Diagnosis – Interactive Branching -->
    <div id="diagnosis" class="card diagnosis">
      <div class="card-header" onclick="toggleCard(this)">2. Diagnosis – Key Clinical Findings</div>
      <div class="card-content">

        <div id="q1">
          <p><strong>Q1. History of instability (feels "out of joint", previous dislocation, or fear of dislocation)?</strong></p>
          <button class="btn btn-yes" onclick="setDiagnosis('Instability disorder','amber','instability')">Yes → Instability</button>
          <button class="btn btn-no" onclick="nextQuestion('q2')">No</button>
        </div>

        <div id="q2" style="display:none">
          <p><strong>Q2. Localised tenderness over AC joint OR positive cross-arm test OR high arc pain?</strong></p>
          <button class="btn btn-yes" onclick="setDiagnosis('Acromioclavicular joint disorder','green','acjoint')">Yes → AC joint disorder</button>
          <button class="btn btn-no" onclick="nextQuestion('q3')">No</button>
        </div>

        <div id="q3" style="display:none">
          <p><strong>Q3. Significantly restricted passive external rotation (capsular pattern, global restriction)?</strong></p>
          <button class="btn btn-yes" onclick="nextQuestion('q3a')">Yes → Glenohumeral disorder</button>
          <button class="btn btn-no" onclick="nextQuestion('q4')">No</button>
        </div>

        <div id="q3a" style="display:none">
          <p><strong>Glenohumeral – which pattern?</strong></p>
          <button class="btn btn-yes" onclick="setDiagnosis('Frozen shoulder','amber','frozen')">Pain-dominant or stiffness-dominant, age 40–60, gradual onset</button>
          <button class="btn btn-yes" onclick="setDiagnosis('Glenohumeral osteoarthritis','green','oa')">Older patient, severe loss of ER, crepitus, deep pain</button>
        </div>

        <div id="q4" style="display:none">
          <p><strong>Q4. Painful arc 70–120° OR pain on resisted abduction with thumb down?</strong></p>
          <button class="btn btn-yes" onclick="setDiagnosis('Rotator cuff disorder','green','rotator')">Yes → Rotator cuff disorder</button>
          <button class="btn btn-no" onclick="setDiagnosis('Consider referred neck pain or other cause','amber','other')">No → Consider referred neck pain / polymyalgia / etc.</button>
        </div>

      </div>
    </div>

    <!-- 3. Treatment -->
    <div id="treatment" class="card treatment">
      <div class="card-header" onclick="toggleCard(this)">3. Treatment & Management <span id="diagnosis-badge"></span></div>
      <div class="card-content">

        <!-- Common Initial Management (always shown) -->
        <div id="common-management">
          <h3>Initial Management (all non-red-flag cases)</h3>
          <ul>
            <li>Explain diagnosis + natural history (often 6–18 months)</li>
            <li>Provide patient information (Versus Arthritis Shoulder Pain leaflet)</li>
            <li><strong>Analgesia:</strong> Paracetamol regular → add oral NSAID (ibuprofen) or weak opioid if needed. Stop NSAID if no benefit within 2–4 weeks.</li>
            <li>Continue normal activities as tolerated; avoid aggravating movements for a few weeks</li>
            <li>Consider short period (1–2 weeks) off work/sport if directly related</li>
            <li>Review at 2–4 weeks if severe</li>
            <li>Refer to physiotherapy early (6–12 week course usual)</li>
          </ul>
        </div>

        <!-- Specific Management (shown according to diagnosis) -->
        <div id="specific-management"></div>

      </div>
    </div>

    <!-- 4. Follow-up & Referral -->
    <div id="followup" class="card followup">
      <div class="card-header" onclick="toggleCard(this)">4. Follow-up & When to Refer</div>
      <div class="card-content">
        <ul>
          <li>Review at 6–12 weeks if not improving</li>
          <li><strong>Refer to secondary care (orthopaedics) if:</strong>
            <ul>
              <li>No improvement after 3 months of conservative treatment</li>
              <li>Significant functional impact / athlete / heavy manual worker</li>
              <li>Recurrent instability</li>
              <li>Diagnosis uncertain</li>
            </ul>
          </li>
          <li>Frozen shoulder: consider earlier referral if severe or diabetes with poor control</li>
          <li>Rotator cuff disorder: consider subacromial steroid injection (max 2, 6 weeks apart) before referral</li>
          <li>Glenohumeral OA: refer when pain/functional loss unacceptable (see NICE Osteoarthritis guideline)</li>
        </ul>
        <p><em>Most shoulder pain is self-limiting but recovery can take 6–18 months or longer.</em></p>
      </div>
    </div>

  </div>
</div>

<script>
let currentDiagnosis = '';
let currentBadge = '';
let specificId = '';

function toggleCard(el) {
  el.classList.toggle('open');
  el.nextElementSibling.classList.toggle('open');
}

function showSection(sectionId) {
  document.querySelectorAll('.card').forEach(c => {
    c.style.display = 'none';
  });
  document.getElementById(sectionId).style.display = 'block';
  
  document.querySelectorAll('.sidebar li').forEach(li => {
    li.classList.remove('active');
    if (li.getAttribute('data-section') === sectionId) li.classList.add('active');
  });
  window.scrollTo(0,0);
}

function nextQuestion(qId) {
  document.querySelectorAll('#diagnosis div[id^="q"]').forEach(div => div.style.display = 'none');
  document.getElementById(qId).style.display = 'block';
}

function setDiagnosis(text, badgeColor, id) {
  currentDiagnosis = text;
  currentBadge = badgeColor;
  specificId = id;
  
  // Update badge in treatment header
  document.getElementById('diagnosis-badge').innerHTML = text + ' <span class="badge ' + badgeColor + '">' + (badgeColor === 'amber' ? 'Caution' : badgeColor === 'red' ? 'Urgent' : 'Stable') + '</span>';
  
  // Show specific management
  const specificDiv = document.getElementById('specific-management');
  let content = '';
  
  if (id === 'instability') {
    content = `<h3>Instability Disorder (specific)</h3>
      <ul>
        <li>Acute traumatic dislocation → ED for reduction</li>
        <li>First-time dislocation (age <25) → refer to shoulder surgeon within 6 weeks</li>
        <li>Recurrent or symptomatic → refer to physiotherapy ± shoulder surgeon</li>
        <li>Atraumatic/multidirectional → physiotherapy (4–12 weeks) is first line</li>
      </ul>`;
  } else if (id === 'acjoint') {
    content = `<h3>Acromioclavicular Joint Disorder (specific)</h3>
      <ul>
        <li>Mild–moderate (Grade I–II): sling 5–7 days if acute, analgesia, early mobilisation</li>
        <li>Avoid heavy lifting/contact sport 8–12 weeks</li>
        <li>OA: avoid cross-body adduction/heavy lifting; consider local steroid injection if severe</li>
        <li>Refer if not settling or Grade III+</li>
      </ul>`;
  } else if (id === 'frozen') {
    content = `<h3>Frozen Shoulder (specific)</h3>
      <ul>
        <li>Early physiotherapy essential (even in painful phase)</li>
        <li>Glenohumeral (not subacromial) steroid injection early if slow progress</li>
        <li>Oral steroids NOT recommended</li>
        <li>Refer if no improvement after 3 months conservative treatment (earlier if severe/diabetes)</li>
        <li>Recovery 18–42 months common; persistent stiffness possible</li>
      </ul>`;
  } else if (id === 'rotator') {
    content = `<h3>Rotator Cuff Disorder (specific)</h3>
      <ul>
        <li>Physiotherapy 6–12 weeks (scapular stabilisation + rotator cuff strengthening)</li>
        <li>Subacromial steroid injection if slow progress (max 2, only if first helped)</li>
        <li>Do NOT inject if suspected full-thickness tear</li>
        <li>Refer orthopaedics if no improvement after 3 months non-operative treatment</li>
      </ul>`;
  } else if (id === 'oa') {
    content = `<h3>Glenohumeral Osteoarthritis (specific)</h3>
      <ul>
        <li>Manage as per NICE Osteoarthritis guideline</li>
        <li>Analgesia, exercise, weight loss if applicable</li>
        <li>Consider glenohumeral steroid injection for flare</li>
        <li>Refer when pain/function significantly affects quality of life</li>
      </ul>`;
  } else if (id === 'other') {
    content = `<h3>Other / Referred Pain</h3>
      <p>Examine neck → consider cervical radiculopathy, non-specific neck pain, or polymyalgia rheumatica (check ESR/CRP).</p>`;
  }
  
  specificDiv.innerHTML = content;
  showSection('treatment');
}

// Start
showSection('assessment');
</script>
</body>
</html>