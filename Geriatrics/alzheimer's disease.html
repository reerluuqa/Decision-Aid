<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD Clinical Quick-Scan | Alzheimer's Disease Reference</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #0056b3;
            --light-blue: #e3f2fd;
            --border-blue: #bbdefb;
            
            --danger-red: #d32f2f;
            --light-red: #ffcdd2;
            --border-red: #ef9a9a;
            
            --success-green: #2e7d32;
            --light-green: #c8e6c9;
            --border-green: #a5d6a7;
            
            --neutral-gray: #f5f7fa;
            --text-dark: #2c3e50;
            --text-light: #607d8b;
            --white: #ffffff;
            
            /* UI Variables */
            --card-shadow: 0 4px 6px rgba(0,0,0,0.05);
            --card-hover-shadow: 0 8px 15px rgba(0,0,0,0.1);
            --radius: 8px;
            --transition: all 0.2s ease-in-out;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--neutral-gray);
            color: var(--text-dark);
            line-height: 1.5;
            font-size: 14px; /* Slightly smaller for higher data density */
        }

        /* --- Header & Search --- */
        header {
            background: linear-gradient(135deg, #0d47a1, #1976d2);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.2rem;
        }

        .header-title p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .search-container {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border-radius: 20px;
            border: none;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        /* --- Layout Grid --- */
        main {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            min-height: 90vh;
        }

        /* --- Sidebar Navigation --- */
        aside {
            position: sticky;
            top: 90px;
            height: fit-content;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--card-shadow);
            padding: 1rem;
        }

        .nav-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 15px;
            background: none;
            border: none;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            transition: var(--transition);
            border-radius: 4px;
        }

        .nav-btn:hover {
            background-color: var(--light-blue);
            color: var(--primary-blue);
            padding-left: 20px;
        }

        .nav-btn.active {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        /* --- Content Area --- */
        .content-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 1.4rem;
            color: var(--text-dark);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* --- Cards & Layouts --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            border-left: 5px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover-shadow);
        }

        /* Card Types */
        .card-info { border-left-color: var(--primary-blue); }
        .card-info .card-icon { color: var(--primary-blue); background: var(--light-blue); }
        
        .card-alert { border-left-color: var(--danger-red); background: #fff8f8; }
        .card-alert .card-icon { color: var(--danger-red); background: var(--light-red); }
        
        .card-success { border-left-color: var(--success-green); }
        .card-success .card-icon { color: var(--success-green); background: var(--light-green); }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .card-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .card-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .card-content {
            font-size: 0.95rem;
            color: var(--text-dark);
        }

        .card-list {
            list-style: none;
            margin-top: 10px;
        }

        .card-list li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 6px;
        }

        .card-list li::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: #888;
        }

        .card-list li::marker {
            color: var(--primary-blue);
        }

        /* --- Badges --- */
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .badge-red { background: var(--light-red); color: var(--danger-red); }
        .badge-green { background: var(--light-green); color: var(--success-green); }
        .badge-blue { background: var(--light-blue); color: var(--primary-blue); }

        /* --- Tables --- */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--white);
            box-shadow: var(--card-shadow);
            border-radius: var(--radius);
            overflow: hidden;
            font-size: 0.9rem;
        }

        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background-color: #f8f9fa;
            font-weight: 700;
            color: var(--text-light);
            text-transform: uppercase;
            font-size: 0.8rem;
        }

        .data-table tr:hover {
            background-color: #f1f8ff;
        }

        /* --- Highlight Box --- */
        .red-flag-banner {
            background-color: #ffebee;
            border: 1px solid #ef9a9a;
            color: #c62828;
            padding: 15px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
        }

        /* --- Responsive --- */
        @media (max-width: 900px) {
            main {
                grid-template-columns: 1fr;
            }
            aside {
                display: flex;
                overflow-x: auto;
                top: 70px;
                padding: 10px;
                white-space: nowrap;
                position: sticky;
                z-index: 99;
                border-bottom: 1px solid #ddd;
            }
            .nav-btn {
                border-bottom: none;
                margin-right: 10px;
                width: auto;
                background: #f0f0f0;
            }
            .nav-btn.active {
                background: var(--primary-blue);
            }
        }
    </style>
    <!-- Simple SVG Icons Inline -->
    <script>
        const icons = {
            alert: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>`,
            brain: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-4A2.5 2.5 0 0 1 9.5 2Z"></path><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-4A2.5 2.5 0 0 0 14.5 2Z"></path></svg>`,
            clipboard: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`,
            pill: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"></path><line x1="8.5" y1="8.5" x2="15.5" y2="15.5"></line></svg>`,
            search: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>`,
            activity: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>`,
            shield: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>`
        };
    </script>
</head>
<body>

    <header>
        <div class="header-title">
            <h1>Alzheimer's Disease</h1>
            <p>Quick-Scan Clinical Reference</p>
        </div>
        <div class="search-container">
            <span class="search-icon"></span>
            <input type="text" class="search-input" id="searchInput" placeholder="Filter by sign, symptom, or test...">
        </div>
    </header>

    <main>
        <aside>
            <button class="nav-btn active" onclick="switchTab('critical')">Critical Red Flags</button>
            <button class="nav-btn" onclick="switchTab('overview')">Overview & Definition</button>
            <button class="nav-btn" onclick="switchTab('diagnosis')">Diagnosis & Signs</button>
            <button class="nav-btn" onclick="switchTab('investigations')">Workup & Tests</button>
            <button class="nav-btn" onclick="switchTab('risk')">Risk Factors</button>
            <button class="nav-btn" onclick="switchTab('management')">Management</button>
        </aside>

        <div id="content-area">
            
            <!-- SECTION 1: CRITICAL ALERTS (RED FLAGS) -->
            <section id="critical" class="content-section active">
                <div class="section-header">
                    <h2 class="section-title" style="color: var(--danger-red);">Critical Differentials & Red Flags</h2>
                </div>

                <div class="red-flag-banner">
                    <div style="font-size: 2rem;">!</div>
                    <div>
                        <strong>DO NOT MISS: Delirium vs. Dementia</strong><br>
                        Sudden onset, fluctuating consciousness, and inattention often indicate Delirium (Reversible), not Alzheimer's.
                    </div>
                </div>

                <div class="grid-container">
                    <!-- Delirium Card -->
                    <div class="card card-alert searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Suspect Delirium (Emergency)</div>
                        </div>
                        <div class="card-content">
                            <span class="badge badge-red">Urgent Action Required</span>
                            <ul class="card-list">
                                <li><strong>Inattention:</strong> Difficulty focusing.</li>
                                <li><strong>Fluctuating Course:</strong> Symptoms worsen at night.</li>
                                <li><strong>Acute Onset:</strong> Hours to days (not insidious).</li>
                                <li><strong>Disorganized Thinking:</strong> Rambling speech.</li>
                            </ul>
                            <div style="margin-top:10px; font-size: 0.85em; font-weight:bold;">
                                Action: Identify reversible causes (infection, dehydration, metabolic).
                            </div>
                        </div>
                    </div>

                    <!-- CJD Card -->
                    <div class="card card-alert searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Creutzfeld-Jacob Disease (CJD)</div>
                        </div>
                        <div class="card-content">
                            <span class="badge badge-red">Rapid Decline</span>
                            <ul class="card-list">
                                <li><strong>Rapid Progression:</strong> Dementia over months.</li>
                                <li><strong>Myoclonus:</strong> Startling muscle jerks.</li>
                                <li><strong>Visual/Sensory:</strong> Paraesthesias, visual disturbances.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Vascular Dementia Card -->
                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Vascular Dementia vs AD</div>
                        </div>
                        <div class="card-content">
                            <span class="badge badge-blue">Key Differentiator</span>
                            <ul class="card-list">
                                <li><strong>Stepwise Decline:</strong> Sudden drops followed by plateaus.</li>
                                <li><strong>Focal Deficits:</strong> History of stroke/TIA.</li>
                                <li><strong>Early Gait Issues:</strong> Walking problems early in disease.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 2: OVERVIEW -->
            <section id="overview" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Disease Overview</h2>
                </div>
                <div class="grid-container">
                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Definition</div>
                        </div>
                        <div class="card-content">
                            Chronic neurodegenerative disease. <strong>Insidious onset</strong> and progressive decline.
                            <br><br>
                            Most common type of dementia (60-70% of cases).
                        </div>
                    </div>

                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Epidemiology</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Prevalence:</strong> 5-7% in Europe.</li>
                                <li><strong>Sex:</strong> More common in women.</li>
                                <li><strong>Race:</strong> Higher in Black and Hispanic populations.</li>
                                <li><strong>Trend:</strong> Cases projected to reach 83m by 2030.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Pathophysiology</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Synaptic loss:</strong> Reduced cholinergic neurotransmission.</li>
                                <li><strong>Lesions:</strong> Neurofibrillary tangles (tau) & Senile plaques (amyloid-beta).</li>
                                <li><strong>Atrophy:</strong> Temporal, frontal, and parietal lobes.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: DIAGNOSIS & SIGNS -->
            <section id="diagnosis" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Key Diagnostic Factors</h2>
                </div>
                
                <div class="card card-info searchable" style="margin-bottom: 20px;">
                    <div class="card-content">
                        <strong>Approach:</strong> Diagnosis is clinical. Sensitivity ~81%, Specificity ~70%. Requires collateral history from an informant.
                    </div>
                </div>

                <div class="grid-container">
                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Hallmark Symptoms</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Memory Loss:</strong> Recent memory first (loss of recall of recent visitors).</li>
                                <li><strong>Disorientation:</strong> To time and place (subtle at first).</li>
                                <li><strong>Nominal Dysphasia:</strong> Difficulty finding words/naming objects.</li>
                                <li><strong>Executive Dysfunction:</strong> Reasoning, abstraction, judgement.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Progression Features</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Visuo-spatial:</strong> Clock-drawing impairment, getting lost.</li>
                                <li><strong>Behavioural:</strong> Apathy, aggression, paranoia, sundowning.</li>
                                <li><strong>Personality:</strong> Diminished interest in usual activities.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Late Stage Signs</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li>Prosopagnosia (not recognizing faces).</li>
                                <li>Incontinence.</li>
                                <li>Loss of spontaneous speech.</li>
                                <li>Rigidity, inability to walk.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 4: INVESTIGATIONS -->
            <section id="investigations" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Workup & Investigations</h2>
                </div>

                <table class="data-table searchable">
                    <thead>
                        <tr>
                            <th>Investigation</th>
                            <th>Purpose / Target</th>
                            <th>Expected Finding (AD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>CT / MRI Brain</strong></td>
                            <td>Rule out tumors, NPH, hydrocephalus, atrophy.</td>
                            <td>Medial temporal lobe atrophy; generalized atrophy later.</td>
                        </tr>
                        <tr>
                            <td><strong>FBC / Metabolic Panel</strong></td>
                            <td>Rule out anaemia, infection, electrolyte imbalance.</td>
                            <td>Normal (used to exclude other causes).</td>
                        </tr>
                        <tr>
                            <td><strong>TSH / Vitamin B12</strong></td>
                            <td>Rule out hypothyroidism, B12 deficiency.</td>
                            <td>Normal (reversible causes excluded).</td>
                        </tr>
                        <tr>
                            <td><strong>MMSE / MoCA</strong></td>
                            <td>Cognitive Screening baseline.</td>
                            <td>Impaired recall, disorientation, constructional dyspraxia.</td>
                        </tr>
                        <tr>
                            <td><strong>Amyloid PET</strong></td>
                            <td>Identify amyloid-beta deposition (Emerging).</td>
                            <td>Positive for amyloid plaques.</td>
                        </tr>
                        <tr>
                            <td><strong>CSF Biomarkers</strong></td>
                            <td>Adjunct for uncertain diagnosis.</td>
                            <td>Low ABeta-1-42, elevated tau/p-tau.</td>
                        </tr>
                    </tbody>
                </table>

                <div style="margin-top: 20px;" class="grid-container">
                    <div class="card card-alert searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">When to consider CSF/PET</div>
                        </div>
                        <div class="card-content">
                            Unusual presentation, early onset dementia (<60), or rapidly progressive cognitive impairment.
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 5: RISK FACTORS -->
            <section id="risk" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Risk Factors</h2>
                </div>
                
                <div class="grid-container">
                    <!-- Non-Modifiable -->
                    <div class="card card-info searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Strong / Non-Modifiable</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Age:</strong> Incidence doubles every 5 years >65.</li>
                                <li><strong>Genetics:</strong> APOE e4 allele, PSEN1/2, APP mutations.</li>
                                <li><strong>Family History:</strong> 25-50% lifetime risk in 1st degree relatives.</li>
                                <li><strong>Down's Syndrome:</strong> Clinical signs develop ~50 years.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Modifiable (Green) -->
                    <div class="card card-success searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Modifiable Factors (Target)</div>
                        </div>
                        <div class="card-content">
                            <span class="badge badge-green">Intervention Opportunity</span>
                            <ul class="card-list">
                                <li><strong>Smoking:</strong> Mid-life smoking increases risk.</li>
                                <li><strong>Cardiovascular:</strong> Hypertension, diabetes, hyperlipidaemia.</li>
                                <li><strong>Lifestyle:</strong> Mid-life obesity, sedentary lifestyle.</li>
                                <li><strong>Alcohol:</strong> Abstinence or >14 units/week increases risk.</li>
                                <li><strong>Education:</strong> < Secondary school education.</li>
                                <li><strong>Hearing Loss:</strong> Age-related hearing loss.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 6: MANAGEMENT -->
            <section id="management" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Management Strategy</h2>
                </div>

                <div class="grid-container">
                    <div class="card card-success searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Pharmacological</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Cholinesterase Inhibitors:</strong> (e.g., Donepezil) - Some evidence for symptom efficacy.</li>
                                <li><strong>Memantine:</strong> NMDA receptor antagonist - Useful for symptoms.</li>
                                <li><strong>Emerging:</strong> Monoclonal antibodies targeting amyloid-beta (slowing decline).</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card card-success searchable">
                        <div class="card-header">
                            <div class="card-icon"></div>
                            <div class="card-title">Non-Pharmacological</div>
                        </div>
                        <div class="card-content">
                            <ul class="card-list">
                                <li><strong>Psychosocial Interventions:</strong> Key for maintaining function.</li>
                                <li><strong>Carer Support:</strong> Support groups are highly beneficial.</li>
                                <li><strong>Routine:</strong> Maintaining a structured environment.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <script>
        // 1. Tab Switching Logic
        function switchTab(tabId) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(sec => sec.classList.remove('active'));

            // Show target section
            document.getElementById(tabId).classList.add('active');

            // Update Nav Buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Find the button that triggered this (event delegation would be cleaner but explicit is fine here)
            // Loop through buttons to find the one with matching onclick
            buttons.forEach(btn => {
                if(btn.getAttribute('onclick').includes(tabId)) {
                    btn.classList.add('active');
                }
            });
            
            // Scroll to top of content area on mobile
            if(window.innerWidth < 900) {
                 window.scrollTo({top: 0, behavior: 'smooth'});
            }
        }

        // 2. Search Logic
        const searchInput = document.getElementById('searchInput');
        
        searchInput.addEventListener('keyup', function() {
            const filter = searchInput.value.toLowerCase();
            const searchables = document.querySelectorAll('.searchable');
            
            searchables.forEach(item => {
                const text = item.innerText.toLowerCase();
                const card = item.closest('.card');
                const row = item.closest('tr'); // For table rows

                if(text.includes(filter)) {
                    // Show item
                    if(card) card.style.display = 'block';
                    if(row) row.style.display = '';
                    
                    // If inside a section, ensure section is visible
                    const section = item.closest('.content-section');
                    section.style.display = 'block';
                    
                } else {
                    // Hide item
                    if(card) card.style.display = 'none';
                    if(row) row.style.display = 'none';
                }
            });

            // If searching, we might want to ignore the tab active state visually, 
            // but logically we just unhide all sections so search results appear globally.
            // However, to keep it simple, we just ensure the elements are visible.
            
            // Helper: Check if a section has any visible children
            const sections = document.querySelectorAll('.content-section');
            let firstVisibleSectionFound = false;

            if(filter.length > 0) {
                sections.forEach(sec => {
                    const hasVisible = Array.from(sec.querySelectorAll('.searchable')).some(el => el.offsetParent !== null);
                    if(hasVisible) {
                        sec.style.display = 'block';
                        if(!firstVisibleSectionFound) {
                            firstVisibleSectionFound = true;
                            // Optional: Auto switch to the tab with results
                            // switchTab(sec.id); 
                        }
                    } else {
                        // If user explicitly switched a tab, keep it, otherwise hide?
                        // Let's hide empty sections during search for clarity
                        sec.style.display = 'none';
                    }
                });
                
                // Hide empty tables or handle them if needed
                const tableBody = document.querySelector('.data-table tbody');
                const visibleRows = Array.from(tableBody.querySelectorAll('tr')).filter(r => r.style.display !== 'none');
                if(visibleRows.length === 0) {
                    document.querySelector('.data-table').style.display = 'none';
                } else {
                    document.querySelector('.data-table').style.display = 'table';
                }

            } else {
                // Reset: Restore current tab state
                document.querySelectorAll('.nav-btn.active').forEach(btn => {
                    const match = btn.getAttribute('onclick').match(/'([^']+)'/);
                    if(match) switchTab(match[1]);
                });
                
                // Ensure all sections reset to display:none (handled by switchTab)
                // but specifically reset table display
                document.querySelector('.data-table').style.display = 'table';
            }
        });

        // 3. Populate Icons on Load
        window.onload = function() {
            document.querySelectorAll('.card-icon').forEach((iconDiv, index) => {
                const card = iconDiv.closest('.card');
                if(card.classList.contains('card-alert')) {
                    iconDiv.innerHTML = icons.alert;
                } else if (card.classList.contains('card-success')) {
                    iconDiv.innerHTML = icons.shield;
                } else {
                    // Info
                    if(card.innerText.includes('Definition') || card.innerText.includes('Pathophysiology') || card.innerText.includes('Epidemiology')) {
                         iconDiv.innerHTML = icons.brain;
                    } else if (card.innerText.includes('Workup') || card.innerText.includes('CSF')) {
                        iconDiv.innerHTML = icons.clipboard;
                    } else if (card.innerText.includes('Hallmark') || card.innerText.includes('Key Diagnostic')) {
                        iconDiv.innerHTML = icons.activity;
                    } else {
                        iconDiv.innerHTML = icons.brain;
                    }
                }
            });

            // Add search icon to input
            document.querySelector('.search-icon').innerHTML = icons.search;
        };
    </script>
</body>
</html>