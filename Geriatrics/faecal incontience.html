<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick-Scan: Faecal Incontinence (Adults)</title>
    <style>
        :root {
            /* Clinical Color Palette */
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #6c757d;
            
            --primary-blue: #007bff;
            --primary-dark: #0056b3;
            
            --alert-red: #dc3545;
            --alert-red-bg: #ffe6e6;
            
            --success-green: #28a745;
            --success-green-bg: #d4edda;
            
            --warning-orange: #fd7e14;
            --warning-bg: #fff3cd;
            
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
            --shadow-hover: 0 8px 15px rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- Header --- */
        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-blue));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .header-title span {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .header-meta {
            text-align: right;
            font-size: 0.85rem;
            opacity: 0.9;
        }

        /* --- Red Flags Banner --- */
        .red-flag-banner {
            background-color: var(--alert-red);
            color: white;
            padding: 0.75rem 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            font-weight: 600;
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }

        /* --- Navigation Tabs --- */
        .nav-container {
            background: white;
            padding: 0 2rem;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 1rem;
            overflow-x: auto;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .nav-btn:hover {
            color: var(--primary-blue);
            background-color: #f8f9fa;
        }

        .nav-btn.active {
            color: var(--primary-blue);
            border-bottom-color: var(--primary-blue);
        }

        /* --- Main Layout --- */
        main {
            flex: 1;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            display: grid;
            grid-template-columns: 2fr 1fr; /* Main content | Sidebar */
            gap: 2rem;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.4s ease-in-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Cards & Grids --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            border-left: 5px solid var(--primary-blue);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .card h3 {
            margin-bottom: 1rem;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .card ul {
            list-style: none;
        }

        .card li {
            margin-bottom: 0.5rem;
            padding-left: 1.2rem;
            position: relative;
        }

        .card li::before {
            content: "‚Ä¢";
            color: var(--primary-blue);
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* --- Specific Card Types --- */
        .card.red {
            border-left-color: var(--alert-red);
            background: linear-gradient(to right, #fff, var(--alert-red-bg));
        }
        .card.red h3 { color: var(--alert-red); }
        .card.red li::before { color: var(--alert-red); }

        .card.green {
            border-left-color: var(--success-green);
            background: linear-gradient(to right, #fff, var(--success-green-bg));
        }
        .card.green h3 { color: #1e7e34; }
        .card.green li::before { color: var(--success-green); }

        .card.blue {
            border-left-color: var(--primary-blue);
        }

        /* --- Interactive Tools (Sidebar) --- */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .tool-panel {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .tool-title {
            font-weight: 700;
            margin-bottom: 1rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
            color: var(--primary-dark);
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn-action {
            width: 100%;
            padding: 0.75rem;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            margin-top: 1rem;
        }

        .btn-action.red { background: var(--alert-red); color: white; }
        .btn-action.red:hover { background: #b02a37; }
        
        .btn-action.blue { background: var(--primary-blue); color: white; }
        .btn-action.blue:hover { background: var(--primary-dark); }

        /* --- Tables --- */
        .clin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .clin-table th, .clin-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .clin-table th {
            background-color: #f8f9fa;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* --- Tags --- */
        .tag {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.3rem;
            margin-bottom: 0.3rem;
        }
        .tag.risk { background: #ffeeba; color: #856404; }
        .tag.cause { background: #e2e3e5; color: #383d41; }

        /* --- Footer --- */
        footer {
            background: #343a40;
            color: #adb5bd;
            text-align: center;
            padding: 1.5rem;
            font-size: 0.8rem;
            margin-top: auto;
        }

        /* --- Responsive --- */
        @media (max-width: 900px) {
            main { grid-template-columns: 1fr; }
            .nav-container { padding: 0 1rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-title">
            <h1>Faecal Incontinence</h1>
            <span>Adult Clinical Reference ‚Ä¢ BMJ Best Practice Source</span>
        </div>
        <div class="header-meta">
            Last Updated: Aug 24, 2023<br>
            Ver 1.0
        </div>
    </header>

    <div class="red-flag-banner" id="emergencyBanner">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        <span>SCREEN FOR: Cauda Equina & Colorectal Cancer first</span>
    </div>

    <div class="nav-container">
        <button class="nav-btn active" onclick="switchTab('overview')">Overview & Aetiology</button>
        <button class="nav-btn" onclick="switchTab('diagnosis')">Diagnosis & Exam</button>
        <button class="nav-btn" onclick="switchTab('management')">Management Protocol</button>
    </div>

    <main>
        <!-- LEFT COLUMN: CONTENT TABS -->
        <div class="content-area">
            
            <!-- TAB 1: OVERVIEW & AETIOLOGY -->
            <section id="overview" class="content-section active">
                <div class="card-grid">
                    <!-- Definition Card -->
                    <div class="card blue">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            Definition
                        </h3>
                        <p>Involuntary passage of flatus or faeces.</p>
                        <ul style="margin-top:10px;">
                            <li>Prevalence: 1% - 10% adults (up to 50% in nursing homes).</li>
                            <li>Often multifactorial (structural, neurological, stool consistency).</li>
                        </ul>
                    </div>

                    <!-- Emergency Differentials Card -->
                    <div class="card red">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                            Critical Exclusions (Red Flags)
                        </h3>
                        <ul>
                            <li><strong>Cauda Equina Syndrome:</strong> Saddle anaesthesia, sciatica, reduced perianal sensation.</li>
                            <li><strong>Colorectal Cancer:</strong> Weight loss, bleeding, altered habit, family history, previous polyps.</li>
                            <li><strong>Acute Diarrhoea:</strong> Infectious causes, C. diff (recent hospitalization/antibiotics).</li>
                        </ul>
                    </div>
                </div>

                <div class="card blue">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                        Aetiological Subgroups (7 Categories)
                    </h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                        <span class="tag cause">Structural (Sphincter trauma, Prolapse)</span>
                        <span class="tag cause">Neurological (MS, Stroke, Pudendal neuropathy)</span>
                        <span class="tag cause">Stool Consistency (IBD, Infection)</span>
                        <span class="tag cause">Overflow (Impaction)</span>
                        <span class="tag cause">Cognitive (Dementia)</span>
                        <span class="tag cause">General Disability</span>
                        <span class="tag cause">Idiopathic</span>
                    </div>
                    <div style="margin-top: 1rem; padding: 0.5rem; background: #f8f9fa; border-radius: 4px;">
                        <strong>Key Risk Factor:</strong> Obstetric trauma (Forceps delivery > Vacuum; Baby >4kg; 3rd/4th degree tear).
                    </div>
                </div>
            </section>

            <!-- TAB 2: DIAGNOSIS -->
            <section id="diagnosis" class="content-section">
                <div class="card-grid">
                    <!-- History -->
                    <div class="card blue">
                        <h3>Key History Points</h3>
                        <ul>
                            <li><strong>Obstetric:</strong> Forceps, episiotomy, tears, birth weight.</li>
                            <li><strong>Symptom Character:</strong> Urgency vs Passive leakage vs Seepage.</li>
                            <li><strong>Co-morbidities:</strong> IBD, Diabetes (autonomic neuropathy), Neuro disease.</li>
                            <li><strong>Medications:</strong> Laxatives (check for overuse).</li>
                        </ul>
                    </div>

                    <!-- Physical Exam -->
                    <div class="card blue">
                        <h3>Physical Examination</h3>
                        <table class="clin-table">
                            <thead>
                                <tr>
                                    <th>Sign</th>
                                    <th>Indication</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Patulous Anus</td>
                                    <td>Low resting pressure (Internal sphincter)</td>
                                </tr>
                                <tr>
                                    <td>Weak Squeeze</td>
                                    <td>External sphincter dysfunction</td>
                                </tr>
                                <tr>
                                    <td>Scarring/Fistula</td>
                                    <td>Previous trauma or IBD</td>
                                </tr>
                                <tr>
                                    <td>Rectal Prolapse</td>
                                    <td>Inspect on commode/strain</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card blue">
                    <h3>Specialist Investigations (If conservative fails)</h3>
                    <div class="card-grid" style="margin-bottom:0;">
                        <div>
                            <strong>Anorectal Manometry</strong><br>
                            <span style="font-size:0.9rem; color:var(--text-muted);">Measures resting/squeeze pressure, reflexes, rectal sensation.</span>
                        </div>
                        <div>
                            <strong>Endoanal Ultrasound</strong><br>
                            <span style="font-size:0.9rem; color:var(--text-muted);">Gold standard for sphincter defects (nearly 100% accuracy).</span>
                        </div>
                        <div>
                            <strong>Endoanal MRI</strong><br>
                            <span style="font-size:0.9rem; color:var(--text-muted);">Superior for diagnosing external sphincter atrophy.</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- TAB 3: MANAGEMENT -->
            <section id="management" class="content-section">
                
                <!-- Step 1: Conservative -->
                <div class="card green">
                    <h3>Step 1: Primary Care / Conservative</h3>
                    <div class="card-grid">
                        <div>
                            <strong>Diet & Bowel Habit</strong>
                            <ul>
                                <li>Soluble fibre (ispaghula) for consistency.</li>
                                <li>Identify triggers (caffeine, sorbitol).</li>
                                <li>Timed defecation (gastrocolic reflex).</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Medication</strong>
                            <ul>
                                <li><strong>Diarrhoea:</strong> Loperamide (decreases motility & increases sphincter tone).</li>
                                <li><strong>Constipation:</strong> Enemas/Suppositories for clearance of impaction.</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Support</strong>
                            <ul>
                                <li>Pelvic floor exercises.</li>
                                <li>Anal plugs / Pads.</li>
                                <li>Emotional/Psych support.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Specialist -->
                <div class="card blue">
                    <h3>Step 2: Specialist / Surgical Options</h3>
                    <table class="clin-table">
                        <thead>
                            <tr>
                                <th>Indication</th>
                                <th>Procedure</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Intact sphincter, small defects</td>
                                <td><strong>Sacral Nerve Stimulation (SNS)</strong></td>
                                <td>Preferred first-line surgical intervention. Low morbidity.</td>
                            </tr>
                            <tr>
                                <td>Structural sphincter defect</td>
                                <td><strong>Anterior Sphincter Repair</strong></td>
                                <td>Overlapping repair of damaged muscle.</td>
                            </tr>
                            <tr>
                                <td>Severe, refractory cases</td>
                                <td><strong>Neosphincter</strong></td>
                                <td>Graciloplasty or artificial cuff. High complication/removal rate.</td>
                            </tr>
                            <tr>
                                <td>Constipation/Overflow refractory</td>
                                <td><strong>Antegrade Irrigation</strong></td>
                                <td>Via appendicostomy ( Malone procedure).</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </section>
        </div>

        <!-- RIGHT COLUMN: TOOLS -->
        <aside class="sidebar">
            
            <!-- Interactive Checker -->
            <div class="tool-panel">
                <div class="tool-title" style="color: var(--alert-red); border-color: var(--alert-red);">‚ö†Ô∏è Red Flag Checker</div>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="rf_saddle"> Saddle Anaesthesia</label>
                    <label><input type="checkbox" id="rf_sciatica"> Sciatica / Back Pain</label>
                    <label><input type="checkbox" id="rf_bleeding"> Rectal Bleeding</label>
                    <label><input type="checkbox" id="rf_weight"> Unexplained Weight Loss</label>
                    <label><input type="checkbox" id="rf_family"> Family History of Bowel Cancer</label>
                    <label><input type="checkbox" id="rf_mass"> Palpable Rectal Mass</label>
                </div>
                <button class="btn-action red" onclick="checkRedFlags()">Check Urgency</button>
                <div id="rf_result" style="margin-top:10px; font-weight:bold; font-size:0.9rem;"></div>
            </div>

            <!-- Severity Scores Reference -->
            <div class="tool-panel">
                <div class="tool-title">üìä Scoring Reference</div>
                <p style="font-size:0.85rem; color:var(--text-muted); margin-bottom:10px;">Use these to monitor response to therapy.</p>
                
                <details>
                    <summary style="cursor:pointer; font-weight:600; color:var(--primary-blue);">Wexner Score</summary>
                    <p style="font-size:0.8rem; margin-top:5px;">Frequency of: Solid, Liquid, Gas incontinence, Need for pad, Lifestyle alteration. (0 = Never, 4 = Always)</p>
                </details>
                <hr style="border:0; border-top:1px solid #eee; margin:10px 0;">
                <details>
                    <summary style="cursor:pointer; font-weight:600; color:var(--primary-blue);">Vaizey Score</summary>
                    <p style="font-size:0.8rem; margin-top:5px;">Similar to Wexner but adds: Urgency (+4), Use of constipating meds (+2), Use of pad/plug (+2).</p>
                </details>
            </div>

            <!-- Diagnostic Reminder -->
            <div class="tool-panel" style="background: #e7f5ff; border: 1px solid #b8daff;">
                <div class="tool-title" style="color: #004085; border-color: #004085;">üí° Diagnostic Tip</div>
                <p style="font-size:0.9rem; color: #004085;">
                    If symptoms do not improve with conservative management, refer for <strong>Anorectal Manometry</strong> and <strong>Endoanal Ultrasound</strong>.
                </p>
            </div>

        </aside>
    </main>

    <footer>
        <p>Disclaimer: This tool is a clinical reference aid based on BMJ Best Practice (Aug 2023). It does not replace professional clinical judgment. Always verify with current guidelines.</p>
    </footer>

    <script>
        // Tab Switching Logic
        function switchTab(tabId) {
            // Remove active class from all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(tabId).classList.add('active');

            // Add active class to clicked button
            // Find the button that triggered this (based on onclick attribute match is simple for this scope)
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                if(btn.getAttribute('onclick').includes(tabId)) {
                    btn.classList.add('active');
                }
            });
        }

        // Red Flag Checker Logic
        function checkRedFlags() {
            const saddle = document.getElementById('rf_saddle').checked;
            const sciatica = document.getElementById('rf_sciatica').checked;
            const bleeding = document.getElementById('rf_bleeding').checked;
            const weight = document.getElementById('rf_weight').checked;
            const family = document.getElementById('rf_family').checked;
            const mass = document.getElementById('rf_mass').checked;

            const resultDiv = document.getElementById('rf_result');
            resultDiv.className = ''; // reset classes

            // Cauda Equina Check
            if (saddle || sciatica) {
                resultDiv.innerHTML = "‚õî <strong>SUSPECT CAUDA EQUINA:</strong> Urgent MRI Spine required.";
                resultDiv.style.color = "var(--alert-red)";
                alert("CAUTION: Potential Cauda Equina Syndrome. Immediate investigation required.");
                return;
            }

            // Cancer Check
            if (bleeding || weight || family || mass) {
                resultDiv.innerHTML = "‚ö†Ô∏è <strong>ONCOLOGICAL ALERT:</strong> Refer for urgent Colonoscopy to exclude malignancy.";
                resultDiv.style.color = "var(--warning-orange)";
                return;
            }

            resultDiv.innerHTML = "‚úÖ <strong>No immediate red flags identified.</strong> Proceed with routine assessment.";
            resultDiv.style.color = "var(--success-green)";
        }

        // Add subtle entrance animation to cards on load
        document.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 100 * index);
            });
        });
    </script>
</body>
</html>