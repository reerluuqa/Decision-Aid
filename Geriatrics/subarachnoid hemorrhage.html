<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAH Quick-Scan Reference</title>
    <style>
        :root {
            /* Palette */
            --color-bg: #f4f6f9;
            --color-card-bg: #ffffff;
            --color-text-main: #2c3e50;
            --color-text-muted: #7f8c8d;
            
            /* Functional Colors */
            --color-critical: #e74c3c; /* Red for Emergency/Red Flags */
            --color-critical-bg: #fadbd8;
            --color-safe: #27ae60;    /* Green for Confirmed Actions/Treatment */
            --color-safe-bg: #d5f5e3;
            --color-info: #2980b9;     /* Blue for General Info/Definition */
            --color-info-bg: #d6eaf8;
            
            /* Spacing & Borders */
            --radius: 12px;
            --shadow: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text-main);
            line-height: 1.5;
            padding-bottom: 40px;
        }

        /* --- Layout Grid --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            gap: 24px;
            grid-template-columns: 1fr;
        }

        @media (min-width: 900px) {
            .container {
                grid-template-columns: 350px 1fr; /* Sidebar for Info, Main for Action */
                grid-template-rows: auto auto auto;
            }
            .header-area { grid-column: 1 / -1; }
            .sidebar { grid-row: 2 / 4; }
            .main-content { grid-column: 2; }
        }

        /* --- Typography --- */
        h1, h2, h3 { font-weight: 700; letter-spacing: -0.5px; }
        h1 { font-size: 1.8rem; display: flex; align-items: center; gap: 10px; }
        h2 { font-size: 1.25rem; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        p { margin-bottom: 12px; font-size: 0.95rem; }
        small { font-size: 0.85rem; color: var(--color-text-muted); }

        /* --- Header --- */
        .header-area {
            background: white;
            padding: 20px 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border-left: 6px solid var(--color-critical);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .brand-badge {
            background: var(--color-critical);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            animation: pulse 2s infinite;
        }

        /* --- Cards Generic --- */
        .card {
            background: var(--color-card-bg);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        /* --- Specific Card Types --- */
        .card.critical {
            border-left: 5px solid var(--color-critical);
        }
        .card.critical::before {
            content: '';
            position: absolute;
            top: 0; right: 0; width: 60px; height: 60px;
            background: linear-gradient(135deg, transparent 50%, rgba(231, 76, 60, 0.1) 50%);
        }

        .card.safe {
            border-left: 5px solid var(--color-safe);
        }
        .card.safe::before {
            content: '';
            position: absolute;
            top: 0; right: 0; width: 60px; height: 60px;
            background: linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%);
        }

        .card.info {
            border-left: 5px solid var(--color-info);
        }

        /* --- Interactive Widgets --- */
        .interactive-widget {
            background: var(--color-critical-bg);
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            border: 1px solid var(--color-critical);
        }

        .slider-container {
            margin: 15px 0;
        }
        
        input[type="range"] {
            width: 100%;
            accent-color: var(--color-critical);
            cursor: pointer;
        }

        .time-display {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--color-critical);
            text-align: center;
            margin-bottom: 10px;
            display: block;
        }

        .dynamic-guidance {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid var(--color-text-muted);
            transition: all 0.3s;
        }

        /* --- Tags (Risk Factors) --- */
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            background: #eee;
            color: #555;
        }
        
        .tag.strong {
            background: var(--color-critical-bg);
            color: #c0392b;
            border: 1px solid rgba(192, 57, 43, 0.2);
            font-weight: 700;
        }
        
        .tag.modifiable {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }

        /* --- Algorithm / Flow --- */
        .flow-step {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: flex-start;
        }

        .step-number {
            background: var(--color-info);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .checklist-icon {
            color: var(--color-safe);
        }

        /* --- Utility --- */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat-box {
            background: var(--color-info-bg);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-val { font-size: 1.5rem; font-weight: 800; color: var(--color-info); }
        .stat-label { font-size: 0.8rem; text-transform: uppercase; color: var(--color-info); }

        /* --- Icons (SVG) --- */
        .icon { width: 20px; height: 20px; vertical-align: text-bottom; fill: currentColor; }
        .icon-lg { width: 32px; height: 32px; }

        /* --- Animation --- */
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .anim-entry {
            animation: slideIn 0.4s ease-out forwards;
        }

    </style>
</head>
<body>

    <div class="container">
        
        <!-- HEADER SECTION -->
        <header class="header-area">
            <div>
                <h1>
                    <svg class="icon icon-lg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                    SAH: Subarachnoid Haemorrhage
                </h1>
                <small>Quick-Scan Clinical Reference (Based on BMJ Best Practice)</small>
            </div>
            <div class="brand-badge">Life Threatening</div>
        </header>

        <!-- SIDEBAR (Definition, Epidemiology, Risk Factors) -->
        <aside class="sidebar">
            
            <!-- Definition -->
            <section class="card info">
                <h2><svg class="icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg> What is it?</h2>
                <p>Bleeding into the subarachnoid space. Medical emergency.</p>
                <p><strong>Most Common Cause:</strong> Rupture of intracranial aneurysm (~80%).</p>
            </section>

            <!-- Epidemiology / Stats -->
            <section class="grid-2" style="margin-bottom: 24px;">
                <div class="stat-box">
                    <div class="stat-val">5%</div>
                    <div class="stat-label">Of all strokes</div>
                </div>
                <div class="stat-box">
                    <div class="stat-val">1.6x</div>
                    <div class="stat-label">More common in women</div>
                </div>
            </section>

            <!-- Risk Factors -->
            <section class="card">
                <h2>Risk Factors</h2>
                <div class="tag-cloud">
                    <span class="tag strong">Hypertension (RR 2.8)</span>
                    <span class="tag strong modifiable">Smoking (RR 1.9)</span>
                    <span class="tag strong">Family History (1st deg)</span>
                    <span class="tag strong">ADPKD (RR 4.4)</span>
                    <span class="tag">Age > 50</span>
                    <span class="tag">Cocaine Use</span>
                    <span class="tag">Alcohol misuse</span>
                    <span class="tag">Connective Tissue Disorders</span>
                </div>
                <p style="margin-top:15px; font-size: 0.85rem; color: #666;">
                    <strong>Tip:</strong> Strong/Modifiable risks are highlighted in <span class="tag strong" style="padding: 2px 6px;">Red</span>.
                </p>
            </section>

            <!-- Complications -->
            <section class="card info">
                <h2>Key Complications</h2>
                <ul>
                    <li>Rebleeding (Highest risk: 24h)</li>
                    <li>Acute Hydrocephalus</li>
                    <li>Vasospasm</li>
                    <li>Delayed Cerebral Ischaemia</li>
                </ul>
            </section>
        </aside>

        <!-- MAIN CONTENT (Triage, Diagnosis, Management) -->
        <main class="main-content">

            <!-- INTERACTIVE TOOL: TIME CALCULATOR -->
            <section class="interactive-widget">
                <h2 style="color: var(--color-critical);"><svg class="icon" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg> Time Since Symptom Onset</h2>
                <p class="time-display" id="time-display">0 Hours</p>
                <div class="slider-container">
                    <input type="range" id="time-slider" min="0" max="48" value="0" step="0.5">
                </div>
                <div id="dynamic-guidance" class="dynamic-guidance">
                    <!-- Content injected via JS -->
                </div>
            </section>

            <!-- PRESENTATION / RED FLAGS -->
            <section class="card critical anim-entry" style="margin-bottom: 24px;">
                <h2><svg class="icon" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg> Presentation: Red Flags</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <strong>Thunderclap Headache</strong>
                        <p>Sudden, severe. Peaks 1-5 mins. Lasts >1 hr.</p>
                    </div>
                    <div>
                        <strong>Associated Symptoms</strong>
                        <p>Vomiting, Photophobia, Neck stiffness (meningismus).</p>
                    </div>
                    <div>
                        <strong>Consciousness</strong>
                        <p>Loss of consciousness or altered GCS.</p>
                    </div>
                </div>
                <div style="margin-top: 20px; background: #ffebee; padding: 10px; border-radius: 6px;">
                    <strong>⚠️ If GCS ≤ 8 or falling:</strong> Stabilise ABC, Intubate, Protect airway. Check pupils every 20 mins.
                </div>
            </section>

            <!-- DIAGNOSIS ALGORITHM -->
            <section class="card info anim-entry" style="animation-delay: 0.1s;">
                <h2><svg class="icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-1c0-2.33 4.67-3.5 7-3.5s7 1.17 7 3.5v1z"/></svg> Diagnosis Algorithm</h2>
                
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>
                        <h3>Non-contrast CT Head</h3>
                        <p><strong>Action:</strong> Urgent. Ideally within 6 hours.</p>
                        <p><strong>Positive Findings:</strong> Hyperdense blood in subarachnoid space/basal cisterns.</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>
                        <h3>Result: Positive?</h3>
                        <div class="card safe" style="padding: 10px; margin-top: 10px; margin-bottom: 10px;">
                            <strong>Yes:</strong> Confirm SAH. Refer to Neurosurgical Centre urgently.
                        </div>
                        <div class="card info" style="padding: 10px; margin-top: 10px;">
                            <strong>No:</strong> Consider timing (see tool above).
                        </div>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>
                        <h3>If CT Negative (or inconclusive)</h3>
                        <p><strong>&lt; 6 hours:</strong> Sensitivity is ~100%. LP <strong>not</strong> routinely needed (NICE). Consider alternatives.</p>
                        <p><strong>&gt; 6 hours:</strong> Sensitivity drops. Consider <strong>Lumbar Puncture</strong>.</p>
                        <ul style="margin-left: 20px; font-size: 0.9rem;">
                            <li>Wait at least 12 hours from onset.</li>
                            <li>Check for <strong>Xanthochromia</strong> (Spectrophotometry).</li>
                            <li>Collect 3 tubes to rule out traumatic tap.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- MANAGEMENT -->
            <section class="card safe anim-entry" style="animation-delay: 0.2s;">
                <h2><svg class="icon" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> Management & Treatment</h2>
                
                <div class="checklist-item">
                    <svg class="icon checklist-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                    <div>
                        <strong>Urgent Specialist Discussion</strong>
                        <p>Refer to Neurosurgical Centre immediately upon confirmation. Do not use severity scores alone to decide transfer.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <svg class="icon checklist-icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-1c0-2.33 4.67-3.5 7-3.5s7 1.17 7 3.5v1z"/></svg>
                    <div>
                        <strong>Enteral Nimodipine</strong>
                        <p>Consider for all patients with confirmed SAH (prevents delayed cerebral ischaemia).</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <svg class="icon checklist-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                    <div>
                        <strong>Secure the Aneurysm</strong>
                        <p>Interventional Neuroradiologist & Neurosurgeon decide between Coiling or Clipping. Aim to secure within 48h.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <svg class="icon checklist-icon" viewBox="0 0 24 24"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"/></svg>
                    <div>
                        <strong>Monitoring</strong>
                        <p>Continuous observation for deterioration (seizure, dropping GCS), cardiac complications (arrhythmias), and rebleeding.</p>
                    </div>
                </div>

                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;">
                    <h3>Investigations to Request</h3>
                    <p><strong>CTA (CT Angiography):</strong> To identify causal pathology/anatomy.</p>
                    <p><strong>Bloods:</strong> FBC, Electrolytes (Hyponatraemia common), Coagulation, Troponin I, Glucose.</p>
                    <p><strong>ECG:</strong> Look for arrhythmias, QT prolongation, ST changes.</p>
                </div>
            </section>

        </main>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // Logic for the Interactive Time Calculator
        document.addEventListener('DOMContentLoaded', () => {
            const slider = document.getElementById('time-slider');
            const display = document.getElementById('time-display');
            const guidance = document.getElementById('dynamic-guidance');

            function updateGuidance(hours) {
                // Update Text
                display.textContent = hours + (hours === 1 ? ' Hour' : ' Hours');
                
                // Logic based on provided content (CT Sensitivity)
                let htmlContent = '';
                let borderColor = '';
                let icon = '';

                if (hours < 6) {
                    // HIGH ACCURACY ZONE
                    borderColor = 'var(--color-safe)';
                    icon = '<svg class="icon" style="color:var(--color-safe)" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>';
                    htmlContent = `
                        <strong>CT Head Sensitivity: ~100%</strong><br>
                        <span style="color:var(--color-text-muted)">Perform urgent Non-contrast CT.</span><br><br>
                        <strong>If CT is Negative:</strong> NICE recommends <strong>no LP</strong> required. 
                        Consider alternative diagnoses.
                    `;
                } else if (hours >= 6 && hours < 12) {
                    // CAUTION ZONE (CT sensitivity drops)
                    borderColor = '#f1c40f'; // Yellow/Orange warning
                    icon = '<svg class="icon" style="color:#f39c12" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>';
                    htmlContent = `
                        <strong>CT Head Sensitivity: Declining</strong><br>
                        <span style="color:var(--color-text-muted)">Perform urgent CT anyway.</span><br><br>
                        <strong>If CT is Negative:</strong> Sensitivity is reduced. 
                        <span style="color:#c0392b">NICE suggests waiting until 12h mark for LP</span> to allow bilirubin detection (xanthochromia).
                    `;
                } else {
                    // DELAYED PRESENTATION
                    borderColor = 'var(--color-critical)';
                    icon = '<svg class="icon" style="color:var(--color-critical)" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>';
                    htmlContent = `
                        <strong>CT Head Sensitivity: Low (58-68%)</strong><br>
                        <span style="color:var(--color-text-muted)">Perform urgent CT.</span><br><br>
                        <strong>If CT is Negative:</strong> 
                        <strong>Lumbar Puncture (LP) is indicated.</strong><br>
                        Check for <strong>Xanthochromia</strong> via spectrophotometry.
                    `;
                }

                // Apply styling and content
                guidance.style.borderLeftColor = borderColor;
                guidance.innerHTML = icon + ' ' + htmlContent;
            }

            // Initialize
            updateGuidance(0);

            // Event Listener
            slider.addEventListener('input', (e) => {
                updateGuidance(e.target.value);
            });
        });
    </script>
</body>
</html>