<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADPKD Clinical Quick-Scan</title>
    <style>
        :root {
            /* Color Palette */
            --color-danger: #d32f2f;
            --color-danger-bg: #ffcdd2;
            --color-safe: #2e7d32;
            --color-safe-bg: #c8e6c9;
            --color-info: #0288d1;
            --color-info-bg: #b3e5fc;
            --color-neutral: #546e7a;
            --color-bg: #f5f7fa;
            --color-surface: #ffffff;
            --color-text: #263238;
            
            /* Spacing & Layout */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --border-radius: 8px;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 12px rgba(0,0,0,0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            line-height: 1.5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* App-like feel */
        }

        /* --- Header --- */
        header {
            background-color: var(--color-surface);
            border-bottom: 1px solid #e0e0e0;
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
            z-index: 10;
        }

        h1 {
            font-size: 1.25rem;
            color: var(--color-neutral);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            font-size: 0.75rem;
            background: var(--color-info);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .update-info {
            font-size: 0.8rem;
            color: #78909c;
        }

        /* --- Layout --- */
        .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* --- Sidebar Navigation --- */
        aside {
            width: 240px;
            background-color: var(--color-surface);
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            padding: var(--spacing-md);
        }

        .nav-btn {
            background: none;
            border: none;
            text-align: left;
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-xs);
            border-radius: var(--border-radius);
            cursor: pointer;
            color: var(--color-neutral);
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover {
            background-color: #eceff1;
        }

        .nav-btn.active {
            background-color: var(--color-info-bg);
            color: var(--color-info);
            font-weight: 600;
        }

        .nav-btn.danger {
            color: var(--color-danger);
        }
        .nav-btn.danger.active {
            background-color: var(--color-danger-bg);
            color: #b71c1c;
        }

        /* --- Main Content Area --- */
        main {
            flex: 1;
            padding: var(--spacing-lg);
            overflow-y: auto;
            position: relative;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Components --- */
        
        /* Cards */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .card {
            background: var(--color-surface);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid #eceff1;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card.danger {
            border-left: 4px solid var(--color-danger);
            background: linear-gradient(to right, #fff5f5, #ffffff);
        }

        .card.safe {
            border-left: 4px solid var(--color-safe);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            color: var(--color-neutral);
            display: flex;
            justify-content: space-between;
        }

        .card-content {
            font-size: 0.95rem;
            color: #455a64;
        }

        /* Lists & Checks */
        ul.check-list {
            list-style: none;
        }

        ul.check-list li {
            position: relative;
            padding-left: 24px;
            margin-bottom: 8px;
        }

        ul.check-list li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--color-info);
            font-weight: bold;
            font-size: 1.2em;
            line-height: 1;
        }
        
        ul.check-list.danger li::before { color: var(--color-danger); }

        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            font-size: 0.9rem;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #eceff1;
        }

        th {
            background-color: #fafafa;
            font-weight: 600;
            color: var(--color-neutral);
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        /* Utility Classes */
        .text-danger { color: var(--color-danger); font-weight: bold; }
        .text-safe { color: var(--color-safe); font-weight: bold; }
        .text-info { color: var(--color-info); font-weight: bold; }
        
        .tag {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 4px;
        }
        .tag-red { background: var(--color-danger-bg); color: var(--color-danger); }
        .tag-blue { background: var(--color-info-bg); color: var(--color-info); }

        /* --- Interactive Tool Styles --- */
        .tool-panel {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid #cfd8dc;
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--color-neutral);
            font-size: 0.9rem;
        }

        select, input {
            width: 100%;
            padding: 10px;
            border: 1px solid #cfd8dc;
            border-radius: 4px;
            font-size: 1rem;
            background-color: #fafafa;
        }

        .action-btn {
            background-color: var(--color-info);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
        }

        .action-btn:hover { background-color: #01579b; }

        .result-box {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            border-radius: 4px;
            display: none;
            text-align: center;
            font-weight: 500;
        }

        .result-box.positive {
            display: block;
            background-color: var(--color-safe-bg);
            color: var(--color-safe);
            border: 1px solid #a5d6a7;
        }

        .result-box.negative {
            display: block;
            background-color: #eceff1;
            color: var(--color-neutral);
            border: 1px solid #cfd8dc;
        }

        /* --- Footer --- */
        footer {
            background: #eceff1;
            padding: var(--spacing-sm);
            text-align: center;
            font-size: 0.75rem;
            color: #78909c;
            border-top: 1px solid #cfd8dc;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; overflow-y: auto; }
            aside { width: 100%; flex-direction: row; overflow-x: auto; border-right: none; border-bottom: 1px solid #e0e0e0; padding: 8px; }
            .nav-btn { white-space: nowrap; margin: 0 4px; }
            .grid-2 { grid-template-columns: 1fr; }
            main { overflow-y: visible; }
        }
    </style>
</head>
<body>

    <header>
        <h1>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-info">
                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            ADPKD Quick-Ref
        </h1>
        <div class="update-info">Updated: Jan 10, 2025</div>
    </header>

    <div class="app-container">
        <!-- Navigation Sidebar -->
        <aside>
            <button class="nav-btn active" onclick="showSection('overview', this)">
                <span>üìã</span> Overview
            </button>
            <button class="nav-btn danger" onclick="showSection('red-flags', this)">
                <span>üö®</span> Red Flags
            </button>
            <button class="nav-btn" onclick="showSection('diagnosis', this)">
                <span>üîç</span> Diagnosis
            </button>
            <button class="nav-btn" onclick="showSection('genetics', this)">
                <span>üß¨</span> Genetics
            </button>
        </aside>

        <!-- Main Content -->
        <main>
            
            <!-- SECTION: OVERVIEW -->
            <section id="overview" class="section active">
                <div class="grid-2">
                    <div class="card safe">
                        <div class="card-title">Definition <span class="text-info">PKD</span></div>
                        <div class="card-content">
                            <p>Inherited renal cystic disease. Characterised by renal cysts, extrarenal cysts, and cardiovascular manifestations.</p>
                            <div style="margin-top: 10px;">
                                <span class="tag tag-blue">Autosomal Dominant (ADPKD)</span>
                                <span class="tag tag-blue">Most Common Form</span>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Key Statistics</div>
                        <div class="card-content">
                            <ul class="check-list">
                                <li><strong>Prevalence:</strong> ~2.34 - 5.73 per 10,000 (varies by region).</li>
                                <li><strong>ESRD Cause:</strong> 4th primary cause in the US.</li>
                                <li><strong>Onset:</strong> Typically adult-onset.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-title">Common Presentations</div>
                        <div class="card-content">
                            <ul class="check-list">
                                <li>Hypertension (Avg onset 30-34 yrs)</li>
                                <li>Flank/Abdominal pain</li>
                                <li>Renal colic (Stones)</li>
                                <li>Gross haematuria</li>
                                <li>Palpable abdominal mass</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Systemic Associations</div>
                        <div class="card-content">
                            <ul class="check-list">
                                <li>Intracranial aneurysms (ICAs)</li>
                                <li>Liver cysts (>90% age >35)</li>
                                <li>Pancreatic cysts</li>
                                <li>Mitral valve prolapse</li>
                                <li>Diverticular disease</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card" style="border-left: 4px solid #ffa000; background: #fff8e1;">
                    <div class="card-title text-danger">‚ö†Ô∏è Prognosis</div>
                    <div class="card-content">
                        <p>Average decline in renal function: <strong>4.4 to 5.9 mL/min/year</strong>.</p>
                        <p style="margin-top:8px;">End-Stage Renal Disease (ESRD) Mean Age:</p>
                        <ul style="margin-left: 20px; margin-top: 4px;">
                            <li><strong>PKD1 mutation:</strong> 55 years</li>
                            <li><strong>PKD2 mutation:</strong> 79 years</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- SECTION: RED FLAGS -->
            <section id="red-flags" class="section">
                <h2 style="margin-bottom: 16px; color: var(--color-danger);">Emergency & Critical Signs</h2>
                
                <div class="card danger">
                    <div class="card-title">
                        <span>Subarachnoid Haemorrhage (SAH)</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-danger"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    </div>
                    <div class="card-content">
                        <p class="text-danger" style="font-size: 1.1em; margin-bottom: 8px;">High Risk: 4x higher than general population.</p>
                        <ul class="check-list danger">
                            <li><strong>Sentinel Headache:</strong> Severe, unusual, new onset.</li>
                            <li>Loss of consciousness.</li>
                            <li><strong>Action:</strong> Immediate Non-contrast Head CT ‚Üí Angiogram if positive.</li>
                        </ul>
                    </div>
                </div>

                <div class="grid-2" style="margin-top: 20px;">
                    <div class="card danger" style="border-left: 4px solid #d32f2f;">
                        <div class="card-title">Infection (Renal/Hepatic Cyst)</div>
                        <div class="card-content">
                            <ul class="check-list danger">
                                <li><strong>Symptoms:</strong> Fever >38¬∞C (>3 days), Loin/Liver tenderness.</li>
                                <li><strong>Lab:</strong> C-reactive protein >5 mg/dL.</li>
                                <li><strong>Warning:</strong> Urine culture may be negative (cysts don't communicate with tract).</li>
                                <li><strong>Imaging:</strong> PET/CT or FDG-PET for confirmation.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card danger" style="border-left: 4px solid #d32f2f;">
                        <div class="card-title">Cardiovascular Morbidity</div>
                        <div class="card-content">
                            <ul class="check-list danger">
                                <li><strong>Hypertension:</strong> Leading cause of death. Check BP early (onset <19y possible).</li>
                                <li><strong>Left Ventricular Hypertrophy:</strong> Present even without HTN.</li>
                                <li><strong>Valvular Abnormalities:</strong> MVP, MR, AR.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: DIAGNOSIS -->
            <section id="diagnosis" class="section">
                <div class="grid-2">
                    <!-- Tool: Ravine Criteria Calculator -->
                    <div class="card">
                        <div class="card-title">
                            Ravine Criteria Checker
                            <span class="tag tag-blue">Interactive</span>
                        </div>
                        <div class="card-content">
                            <p style="font-size:0.9rem; margin-bottom:12px; color:#546e7a;">For patients <strong>at risk</strong> (family history).</p>
                            
                            <div class="tool-panel">
                                <div class="form-group">
                                    <label for="age">Patient Age</label>
                                    <select id="age">
                                        <option value="child">< 15 years</option>
                                        <option value="15-39" selected>15 - 39 years</option>
                                        <option value="40-59">40 - 59 years</option>
                                        <option value="60+">60+ years</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="cysts">Renal Cysts on Ultrasound</label>
                                    <select id="cysts">
                                        <option value="0">None / Unclear</option>
                                        <option value="1">1 cyst (Bilateral)</option>
                                        <option value="2">2 cysts (Bilateral)</option>
                                        <option value="3_uni">3+ (Unilateral or Bilateral)</option>
                                        <option value="4_bi">4+ (Each Kidney)</option>
                                    </select>
                                </div>

                                <button class="action-btn" onclick="checkCriteria()">Check Criteria</button>
                                
                                <div id="result" class="result-box"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Investigation Order -->
                    <div class="card">
                        <div class="card-title">1st Line Investigations</div>
                        <div class="card-content">
                            <div style="margin-bottom: 15px;">
                                <strong class="text-info">Renal Ultrasound</strong>
                                <p style="font-size: 0.85rem;">Most common initial test. Low cost, safe.</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <strong class="text-info">CT Abdomen/Pelvis</strong>
                                <p style="font-size: 0.85rem;">Detects 2-3mm cysts. Essential for Total Kidney Volume (TKV) prognosis.</p>
                            </div>
                            <div>
                                <strong class="text-info">MRI Abdomen/Pelvis</strong>
                                <p style="font-size: 0.85rem;">High sensitivity. Avoid Gadolinium if GFR <30.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">Differential Diagnosis Guide</div>
                    <div class="card-content table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Condition</th>
                                    <th>Differentiating Feature</th>
                                    <th>Test</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Simple Cysts</strong></td>
                                    <td>Common >40y, no family history.</td>
                                    <td>Ultrasound (Bosniak criteria)</td>
                                </tr>
                                <tr>
                                    <td><strong>von Hippel-Lindau (VHL)</strong></td>
                                    <td>Retinal/CNS hemangioblastomas, pheochromocytoma.</td>
                                    <td>VHL gene mutation</td>
                                </tr>
                                <tr>
                                    <td><strong>Tuberous Sclerosis</strong></td>
                                    <td>Facial angiofibromas, seizures, rhabdomyomas.</td>
                                    <td>TSC1/TSC2 analysis</td>
                                </tr>
                                <tr>
                                    <td><strong>Acquired Cystic KD</strong></td>
                                    <td>Pre-existing renal disease, small kidneys.</td>
                                    <td>Clinical history</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- SECTION: GENETICS -->
            <section id="genetics" class="section">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-title">
                            PKD1 vs PKD2
                        </div>
                        <div class="card-content table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>PKD1</th>
                                        <th>PKD2</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Prevalence</strong></td>
                                        <td>~78%</td>
                                        <td>~15%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Severity</strong></td>
                                        <td class="text-danger">More Severe</td>
                                        <td class="text-safe">Milder</td>
                                    </tr>
                                    <tr>
                                        <td><strong>ESRD Age</strong></td>
                                        <td>Avg 54 years</td>
                                        <td>Avg 74 years</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Protein</strong></td>
                                        <td>Polycystin 1</td>
                                        <td>Polycystin 2</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Chrom</strong></td>
                                        <td>16p13.3</td>
                                        <td>4q21</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Genetic Testing Indications</div>
                        <div class="card-content">
                            <p style="margin-bottom:12px; font-size:0.9rem;">Testing is recommended when:</p>
                            <ul class="check-list">
                                <li>Imaging results are equivocal/inconclusive.</li>
                                <li>No family history (to confirm diagnosis).</li>
                                <li>Definite diagnosis needed for living related donor.</li>
                                <li>Antenatal/Preimplantation testing.</li>
                            </ul>
                            <div style="margin-top: 16px; padding: 8px; background: #f1f8e9; border-radius: 4px; font-size: 0.85rem;">
                                <strong>Note:</strong> 10-15% of patients have no PKD1/PKD2 mutation detected. Consider GANAB or DNAJB11 if negative.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">Case History #1: Management Plan</div>
                    <div class="card-content">
                        <p><em>30yo woman, family history (+), screened (+), BP Normal.</em></p>
                        <div style="display:flex; gap:10px; margin-top:10px;">
                            <div style="flex:1; background:#e3f2fd; padding:10px; border-radius:4px;">
                                <strong>Immediate:</strong> Counsel on inheritance (50% risk). BP monitoring (every 1-2 yrs).
                            </div>
                            <div style="flex:1; background:#e8f5e9; padding:10px; border-radius:4px;">
                                <strong>Future:</strong> Avoid nephrotoxins. Treat UTIs aggressively.
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <footer>
        Disclaimer: This tool is based on BMJ Best Practice (Jan 10, 2025). For educational purposes only. Always verify with current clinical guidelines.
    </footer>

    <script>
        // Navigation Logic
        function showSection(sectionId, btnElement) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(sec => {
                sec.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update buttons state
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            btnElement.classList.add('active');
        }

        // Ravine Criteria Logic
        function checkCriteria() {
            const ageGroup = document.getElementById('age').value;
            const cystCount = document.getElementById('cysts').value;
            const resultBox = document.getElementById('result');
            
            let positive = false;
            let message = "";

            // Logic based on the text provided
            if (ageGroup === 'child') {
                // "In a child aged under 15 years... detection of one or more renal cysts... is highly suggestive"
                if (cystCount !== '0') {
                    positive = true;
                    message = "<strong>Highly Suggestive:</strong> One or more cysts detected in at-risk child.";
                } else {
                    message = "Diagnosis not supported by ultrasound alone.";
                }
            } 
            else if (ageGroup === '15-39') {
                // "at least three (unilateral or bilateral) renal cysts"
                if (cystCount === '3_uni' || cystCount === '4_bi') {
                    positive = true;
                    message = "<strong>Positive:</strong> Meets criteria (‚â•3 unilateral/bilateral cysts).";
                } else {
                    message = "Criteria not met. Requires ‚â•3 cysts.";
                }
            } 
            else if (ageGroup === '40-59') {
                // "two cysts in each kidney"
                if (cystCount === '2' || cystCount === '4_bi') {
                    positive = true;
                    message = "<strong>Positive:</strong> Meets criteria (‚â•2 cysts in each kidney).";
                } else {
                    message = "Criteria not met. Requires ‚â•2 cysts in EACH kidney.";
                }
            } 
            else if (ageGroup === '60+') {
                // "four or more cysts in each kidney"
                if (cystCount === '4_bi') {
                    positive = true;
                    message = "<strong>Positive:</strong> Meets criteria (‚â•4 cysts in each kidney).";
                } else {
                    message = "Criteria not met. Requires ‚â•4 cysts in EACH kidney.";
                }
            }

            // Render Result
            resultBox.className = 'result-box'; // reset
            if (positive) {
                resultBox.classList.add('positive');
                resultBox.innerHTML = `‚úÖ ${message}`;
            } else {
                resultBox.classList.add('negative');
                resultBox.innerHTML = `‚ùå ${message}`;
            }
        }
    </script>
</body>
</html>