<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Reference: Anatomical Penile Abnormalities</title>
    <style>
        :root {
            /* Color System */
            --color-bg: #f4f7f6;
            --color-card-bg: #ffffff;
            --color-text-main: #2d3748;
            --color-text-muted: #718096;
            --color-primary: #3182ce; /* Medical Blue */
            --color-primary-dark: #2c5282;
            --color-emergency: #e53e3e; /* Alert Red */
            --color-emergency-light: #fff5f5;
            --color-warning: #dd6b20; /* Warning Orange */
            --color-warning-light: #fffaf0;
            --color-success: #38a169; /* Safe Green */
            --color-success-light: #f0fff4;
            --color-border: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text-main);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* Utility Classes */
        .text-red { color: var(--color-emergency); }
        .text-green { color: var(--color-success); }
        .text-blue { color: var(--color-primary); }
        .font-bold { font-weight: 700; }
        .hidden { display: none; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }

        /* Layout */
        header {
            background: #ffffff;
            border-bottom: 1px solid var(--color-border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--color-primary-dark);
            letter-spacing: -0.5px;
        }

        .status-badge {
            background: var(--color-emergency-light);
            color: var(--color-emergency);
            padding: 0.25rem 0.75rem;
            border-radius: 99px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(229, 62, 62, 0.2);
            animation: pulse 2s infinite;
        }

        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 1.5rem;
        }

        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--color-card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-border);
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-body {
            padding: 1rem;
        }

        /* Navigation (Left Column) */
        .nav-list {
            list-style: none;
        }

        .nav-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-item:hover {
            background-color: #f7fafc;
        }

        .nav-item.active {
            background-color: #ebf8ff;
            color: var(--color-primary);
            border-left-color: var(--color-primary);
        }

        .nav-item .icon {
            font-size: 1.1rem;
        }

        /* Emergency Banner (Top of Content) */
        .emergency-banner {
            background: var(--color-emergency);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            box-shadow: var(--shadow-md);
            animation: slideIn 0.5s ease-out;
        }

        .emergency-icon {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem;
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* Content Area (Middle) */
        .condition-content h2 {
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
            color: var(--color-text-main);
        }
        
        .condition-meta {
            font-size: 0.9rem;
            color: var(--color-text-muted);
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
        }

        .visual-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .visual-card {
            background: #f7fafc;
            padding: 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--color-border);
            text-align: center;
        }

        .visual-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            background-color: #e2e8f0; /* Placeholder color */
        }

        .action-box {
            padding: 1rem;
            border-radius: var(--radius);
            margin-top: 1rem;
        }

        .action-red {
            background: var(--color-emergency-light);
            border: 1px solid var(--color-emergency);
        }

        .action-green {
            background: var(--color-success-light);
            border: 1px solid var(--color-success);
        }

        .action-neutral {
            background: #ebf8ff;
            border: 1px solid var(--color-primary);
        }

        /* Sidebar Tools (Right Column) */
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #f0f0f0;
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checkbox-custom {
            width: 18px;
            height: 18px;
            border: 2px solid var(--color-primary);
            border-radius: 4px;
            flex-shrink: 0;
            margin-top: 3px;
            cursor: pointer;
        }

        .checkbox-custom.checked {
            background-color: var(--color-primary);
            position: relative;
        }

        .checkbox-custom.checked::after {
            content: '‚úì';
            color: white;
            position: absolute;
            top: -3px;
            left: 2px;
            font-size: 14px;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .data-table th, .data-table td {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 1px solid var(--color-border);
        }

        .data-table th {
            background-color: #f7fafc;
            color: var(--color-text-muted);
            font-weight: 600;
        }

        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(229, 62, 62, 0); }
            100% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0); }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Tab System */
        .tab-btn {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--color-text-muted);
            border-bottom: 2px solid transparent;
        }

        .tab-btn.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Mobile specific adjustments */
        @media(max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            .emergency-banner {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="header-content">
        <div class="logo">
            <span style="color:var(--color-emergency)">‚ö†</span> Anatomical Penile Abnormalities
        </div>
        <div>
            <span class="status-badge">Clinical Reference ‚Ä¢ Updated Oct 2024</span>
        </div>
    </div>
</header>

<main>
    <!-- Left Sidebar: Navigation -->
    <aside>
        <div class="card">
            <div class="card-header">
                <span>‚ö° Quick Index</span>
            </div>
            <div class="card-body" style="padding: 0;">
                <ul class="nav-list">
                    <li class="nav-item active" onclick="showCondition('paraphimosis')">
                        <span>Paraphimosis</span>
                        <span class="icon" style="color:var(--color-emergency)">‚óè</span>
                    </li>
                    <li class="nav-item" onclick="showCondition('phimosis')">
                        <span>Phimosis</span>
                        <span class="icon">‚óè</span>
                    </li>
                    <li class="nav-item" onclick="showCondition('hypospadias')">
                        <span>Hypospadias</span>
                        <span class="icon">‚óè</span>
                    </li>
                    <li class="nav-item" onclick="showCondition('curvature')">
                        <span>Penile Curvature/Torsion</span>
                        <span class="icon">‚óè</span>
                    </li>
                    <li class="nav-item" onclick="showCondition('buried')">
                        <span>Concealed/Buried Penis</span>
                        <span class="icon">‚óè</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header">
                <span>üîç Quick Filters</span>
            </div>
            <div class="card-body">
                <button class="tab-btn active" onclick="filterAll()" style="width:100%; text-align:left; margin-bottom:5px;">Show All</button>
                <button class="tab-btn" onclick="filterEmergency()" style="width:100%; text-align:left; color:var(--color-emergency)">Emergencies Only</button>
            </div>
        </div>
    </aside>

    <!-- Center: Main Content -->
    <section>
        
        <!-- Paraphimosis Content (Default) -->
        <article id="paraphimosis" class="condition-content">
            <div class="emergency-banner">
                <div class="emergency-icon">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                </div>
                <div>
                    <h3 style="margin-bottom: 0.25rem; font-size: 1.2rem;">SURGICAL EMERGENCY</h3>
                    <p style="font-size: 0.9rem; opacity: 0.9;">Foreskin retracted proximal to corona; unable to reduce. Risk of necrosis.</p>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h2>Paraphimosis</h2>
                    <div class="condition-meta">
                        <span>üè• Specialty: Urology / Emergency</span>
                        <span>üë• Group: Uncircumcised males</span>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <h4 class="font-bold">Visual Diagnosis</h4>
                        <p style="margin-bottom: 0.5rem; color: var(--color-text-muted);">Look for a "doughnut" shaped constriction ring proximal to glans. Distal glans is swollen and edematous.</p>
                        <div class="visual-grid">
                            <div class="visual-card">
                                <div style="background:#ddd; height:120px; display:flex; align-items:center; justify-content:center; border-radius:4px; margin-bottom:5px;">[Image: Swollen Glans]</div>
                                <small>Early Paraphimosis</small>
                            </div>
                            <div class="visual-card">
                                <div style="background:#ddd; height:120px; display:flex; align-items:center; justify-content:center; border-radius:4px; margin-bottom:5px;">[Image: Constriction Band]</div>
                                <small>Severe Edema</small>
                            </div>
                        </div>
                    </div>

                    <div class="action-box action-red">
                        <div class="flex justify-between items-center" style="margin-bottom: 0.5rem;">
                            <span class="font-bold">‚õî Immediate Action Required</span>
                            <span style="font-size:0.8rem; background:white; padding:2px 6px; border-radius:4px;">Priority 1</span>
                        </div>
                        <ul style="padding-left: 1.25rem; font-size: 0.95rem;">
                            <li><strong>Manual Reduction:</strong> Compress glans to reduce edema, then push foreskin forward.</li>
                            <li><strong>Pain Management:</strong> Local anesthetic block often required.</li>
                            <li><strong>Do NOT Delay:</strong> Prolonged ischemia leads to gangrene/necrosis.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </article>

        <!-- Phimosis Content -->
        <article id="phimosis" class="condition-content hidden">
            <h2>Phimosis</h2>
            <div class="condition-meta">
                <span>üè• Specialty: Pediatrics / Urology</span>
                <span>üìÖ Age: Common < 3y (Physio) or Adult (Patho)</span>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <div class="card-body">
                    <!-- Internal Tabs for Distinction -->
                    <div style="border-bottom:1px solid #eee; margin-bottom:1rem;">
                        <button class="tab-btn active" onclick="switchTab('phimosis-physio')">Physiological (Benign)</button>
                        <button class="tab-btn" onclick="switchTab('phimosis-patho')">Pathological (Red Flag)</button>
                    </div>

                    <div id="phimosis-physio" class="tab-content active">
                        <div class="action-box action-green" style="margin-bottom: 1rem;">
                            <strong>‚úÖ Reassurance & Routine Care</strong>
                            <p style="margin-top:0.5rem; font-size:0.9rem;">Normal finding in children < 3 years. Do NOT force retract.</p>
                        </div>
                        <p>Expected in 96% of newborns. Foreskin adherent to glans.</p>
                    </div>

                    <div id="phimosis-patho" class="tab-content">
                        <div class="action-box action-red" style="margin-bottom: 1rem;">
                            <strong>‚ö†Ô∏è Requires Intervention</strong>
                            <p style="margin-top:0.5rem; font-size:0.9rem;">Look for <span class="text-red font-bold">sclerotic white ring (cicatrix)</span> or history of BXO.</p>
                        </div>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:1rem;">
                            <div>
                                <strong>Causes:</strong>
                                <ul style="padding-left:1.2rem; font-size:0.9rem;">
                                    <li>Balanitis Xerotica Obliterans (Lichen Sclerosis)</li>
                                    <li>Chronic infection</li>
                                    <li>Repeated forced retraction</li>
                                </ul>
                            </div>
                            <div>
                                <strong>Management:</strong>
                                <ul style="padding-left:1.2rem; font-size:0.9rem;">
                                    <li>Topical steroids (mild cases)</li>
                                    <li>Circumcision (definitive)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>

        <!-- Hypospadias Content -->
        <article id="hypospadias" class="condition-content hidden">
            <h2>Hypospadias</h2>
            <div class="condition-meta">
                <span>üè• Specialty: Pediatric Urology</span>
                <span>üë∂ Timing: Diagnosis at birth</span>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <div class="card-body">
                    <h4 class="font-bold">Key Visual: Incomplete Prepuce (Dorsal Hood)</h4>
                    <p style="margin-bottom: 1rem;">Urethra located abnormally ventral. Severity varies (Distal vs Proximal).</p>

                    <div class="visual-grid">
                        <div class="visual-card" style="border-color:var(--color-primary);">
                            <strong style="display:block; color:var(--color-primary);">Distal</strong>
                            <p style="font-size:0.8rem;">Glans or distal shaft. Prepuce often intact.</p>
                        </div>
                        <div class="visual-card" style="border-color:var(--color-warning);">
                            <strong style="display:block; color:var(--color-warning);">Proximal</strong>
                            <p style="font-size:0.8rem;">Perineum/Proximal shaft. Look for cleft scrotum & chordee.</p>
                        </div>
                    </div>

                    <div class="action-box action-neutral">
                        <strong>üìã Assessment & Action</strong>
                        <ul style="padding-left:1.2rem; margin-top:0.5rem; font-size:0.9rem;">
                            <li>Do NOT circumcise (foreskin needed for repair).</li>
                            <li>Assess for cryptorchidism (check endocrine function if present).</li>
                            <li>Surgical repair typically between 6-18 months.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </article>

        <!-- Curvature Content -->
        <article id="curvature" class="condition-content hidden">
            <h2>Congenital Penile Curvature / Torsion</h2>
            <div class="condition-meta">
                <span>üè• Specialty: Pediatric Urology</span>
            </div>
            
            <div class="card" style="margin-top: 1rem;">
                <div class="card-body">
                    <div style="display: flex; gap: 1rem; align-items: start;">
                        <div style="flex: 1;">
                            <strong>Chordee (Curvature)</strong>
                            <p style="font-size: 0.9rem; color: var(--color-text-muted);">Usually ventral. >30 degrees is clinically significant.</p>
                        </div>
                        <div style="flex: 1;">
                            <strong>Torsion</strong>
                            <p style="font-size: 0.9rem; color: var(--color-text-muted);">Typically counter-clockwise (to patient's left).</p>
                        </div>
                    </div>
                    <hr style="border: 0; border-top: 1px solid var(--color-border); margin: 1rem 0;">
                    <div class="action-box action-neutral">
                        <strong>‚öïÔ∏è Management</strong>
                        <p style="font-size: 0.9rem; margin-top: 0.5rem;">Surgical correction if curvature interferes with future sexual function or causes significant cosmetic deformity. Often repaired with hypospadias if present.</p>
                    </div>
                </div>
            </div>
        </article>

        <!-- Buried Penis Content -->
        <article id="buried" class="condition-content hidden">
            <h2>Concealed / Buried Penis</h2>
            <div class="condition-meta">
                <span>üè• Specialty: Urology / Pediatrics</span>
                <span>‚öñÔ∏è Risk Factor: Obesity</span>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <div class="card-body">
                    <div class="action-box action-green" style="margin-bottom:1rem;">
                        <strong>‚úÖ Normal Anatomy, Hidden Appearance</strong>
                    </div>

                    <h4 class="font-bold">Differential Diagnosis</h4>
                    <table class="data-table" style="margin-top: 0.5rem;">
                        <thead>
                            <tr>
                                <th>Condition</th>
                                <th>Clinical Feature</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Buried Penis</strong></td>
                                <td>Normal shaft length, buried in pre-pubic fat.</td>
                                <td>Weight loss, reassurance.</td>
                            </tr>
                            <tr>
                                <td><strong>Micropenis</strong></td>
                                <td>Stretched length < 2.5 SD below mean.</td>
                                <td><span class="text-red font-bold">Endocrine Referral</span></td>
                            </tr>
                            <tr>
                                <td><strong>Trapped Penis</strong></td>
                                <td>Scar tissue from circumcision anchors penis.</td>
                                <td>Surgical repair.</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="action-box action-neutral" style="margin-top:1rem;">
                        <strong>‚ö†Ô∏è Congenital Megaprepuce</strong>
                        <p style="font-size:0.9rem;">Severe ballooning of skin with urination due to tight phimotic ring. Requires surgical referral.</p>
                    </div>
                </div>
            </div>
        </article>

    </section>

    <!-- Right Sidebar: Tools & Checks -->
    <aside>
        <!-- Quick Checklist -->
        <div class="card">
            <div class="card-header">
                <span>üìù Triage Checklist</span>
            </div>
            <div class="card-body">
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span>Airway is patent (not applicable usually)</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span class="text-red font-bold">Is there pain/swelling?</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span class="text-red font-bold">Is urinary flow obstructed?</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span>Is the foreskin retractable?</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span>Check meatus location</span>
                </div>
                <div class="checklist-item" onclick="toggleCheck(this)">
                    <div class="checkbox-custom"></div>
                    <span>Assess penile length (push down fat)</span>
                </div>
            </div>
        </div>

        <!-- GMS Score Reference -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header">
                <span>üìä Hypospadias GMS Score</span>
            </div>
            <div class="card-body" style="font-size: 0.85rem;">
                <p style="margin-bottom:0.5rem;"><strong>G</strong>lans / <strong>M</strong>eatus / <strong>S</strong>haft</p>
                <div style="display:flex; justify-content:space-between; margin-bottom:4px; border-bottom:1px dashed #eee;">
                    <span>Mild</span>
                    <span>Score 3-6</span>
                </div>
                <div style="display:flex; justify-content:space-between; margin-bottom:4px; border-bottom:1px dashed #eee;">
                    <span>Moderate</span>
                    <span>Score 7-9</span>
                </div>
                <div style="display:flex; justify-content:space-between;">
                    <span>Severe</span>
                    <span>Score 10-12</span>
                </div>
            </div>
        </div>

        <!-- Red Flags -->
        <div class="card" style="margin-top: 1.5rem; border-color: var(--color-emergency);">
            <div class="card-header text-red">
                <span>üö® Red Flags</span>
            </div>
            <div class="card-body">
                <ul style="padding-left: 1.2rem; font-size: 0.9rem;">
                    <li style="margin-bottom:0.5rem;">Firm, discolored glans (Necrosis)</li>
                    <li style="margin-bottom:0.5rem;">Urinary retention</li>
                    <li style="margin-bottom:0.5rem;">Balanitis Xerotica Obliterans (White ring)</li>
                    <li>Bilateral non-palpable gonads</li>
                </ul>
            </div>
        </div>
    </aside>
</main>

<script>
    // Tab Logic for Content Area
    function showCondition(conditionId) {
        // Hide all content
        const contents = document.querySelectorAll('.condition-content');
        contents.forEach(content => content.classList.add('hidden'));

        // Show selected content
        const selected = document.getElementById(conditionId);
        if (selected) {
            selected.classList.remove('hidden');
            selected.style.animation = 'fadeIn 0.3s';
        }

        // Update nav state
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => item.classList.remove('active'));
        
        // Find the nav item that matches (simple approach based on onclick attribute string matching or index)
        // Here we just re-highlight based on the click event usually, but for explicit function calls:
        // A simpler way for this demo is to find the li with the matching onclick
        Array.from(navItems).find(item => item.getAttribute('onclick').includes(conditionId)).classList.add('active');
    }

    // Internal Tabs (e.g., Physio vs Patho)
    function switchTab(tabId) {
        // Find parent container to scope selection
        // This assumes tabs are inside a card-body
        const parent = document.getElementById(tabId).closest('.card-body');
        
        // Hide all tabs in this parent
        const tabs = parent.querySelectorAll('.tab-content');
        tabs.forEach(tab => tab.classList.remove('active'));

        // Remove active class from buttons in this parent
        const buttons = parent.querySelectorAll('.tab-btn');
        buttons.forEach(btn => btn.classList.remove('active'));

        // Activate selected tab and button
        document.getElementById(tabId).classList.add('active');
        // Find button that triggered this (event delegation or simple logic)
        // For simplicity, we match by onclick attr
        const activeBtn = Array.from(buttons).find(btn => btn.getAttribute('onclick').includes(tabId));
        if(activeBtn) activeBtn.classList.add('active');
    }

    // Checklist Interaction
    function toggleCheck(element) {
        const checkbox = element.querySelector('.checkbox-custom');
        checkbox.classList.toggle('checked');
        // Optional: visual strikethrough of text
        if(checkbox.classList.contains('checked')) {
            element.querySelector('span').style.textDecoration = "line-through";
            element.querySelector('span').style.color = "var(--color-text-muted)";
        } else {
            element.querySelector('span').style.textDecoration = "none";
            element.querySelector('span').style.color = "var(--color-text-main)";
        }
    }

    // Sidebar Filters
    function filterAll() {
        showCondition('paraphimosis'); // Reset view
        // In a more complex app, this would show all cards in a grid view.
        // For this "tabbed" layout, we will just reset to dashboard.
        const btns = document.querySelectorAll('aside .tab-btn');
        btns.forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
    }

    function filterEmergency() {
        // In this layout, let's auto-switch to Paraphimosis as the primary emergency
        showCondition('paraphimosis');
        
        // Visual feedback on button
        const btns = document.querySelectorAll('aside .tab-btn');
        btns.forEach(b => b.classList.remove('active'));
        if(event.target) event.target.classList.add('active');

        // Highlight the red flags card in the sidebar
        const redFlagsCard = document.querySelector('.card[style*="border-color: var(--color-emergency)"]');
        if(redFlagsCard) {
            redFlagsCard.style.transform = "scale(1.05)";
            setTimeout(() => {
                redFlagsCard.style.transform = "scale(1)";
            }, 300);
        }
    }
</script>

</body>
</html>