<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priapism Management - Interactive Algorithm</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7ec 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1a2a4a 0%, #2c3e50 100%);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            position: relative;
            z-index: 100;
        }

        .header h1 {
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header p {
            margin-top: 0.5rem;
            opacity: 0.85;
            font-size: 1rem;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: calc(100vh - 120px);
        }

        .sidebar {
            width: 280px;
            background: white;
            padding: 2rem 1.5rem;
            position: sticky;
            top: 0;
            height: fit-content;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            border-right: 1px solid #eaeaea;
        }

        .sidebar h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .progress-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .progress-item.active {
            background: #e3f2fd;
            border-left-color: #2196f3;
            font-weight: 600;
        }

        .progress-item.completed {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }

        .progress-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.8rem;
            font-size: 0.9rem;
            color: white;
        }

        .progress-icon.assessment { background: #ff9800; }
        .progress-icon.diagnosis { background: #9c27b0; }
        .progress-icon.treatment { background: #f44336; }
        .progress-icon.followup { background: #4caf50; }

        .main-content {
            flex: 1;
            padding: 2rem;
        }

        .section {
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .section:nth-child(1) { animation-delay: 0.1s; }
        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid #eaeaea;
        }

        .card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1.5rem;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .card-header.assessment {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        }

        .card-header.diagnosis {
            background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
        }

        .card-header.treatment {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }

        .card-header.followup {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
        }

        .card-header h2 {
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .card-header i {
            font-size: 1.5rem;
        }

        .expand-icon {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
        }

        .card.expanded .card-content {
            max-height: 2000px;
            padding: 0 1.5rem 1.5rem;
        }

        .sub-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.2rem;
            margin-bottom: 1rem;
            border-left: 4px solid #ddd;
            transition: all 0.3s ease;
        }

        .sub-card:hover {
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .sub-card.urgent {
            border-left-color: #f44336;
            background: #ffebee;
        }

        .sub-card.caution {
            border-left-color: #ff9800;
            background: #fff3e0;
        }

        .sub-card.stable {
            border-left-color: #4caf50;
            background: #e8f5e9;
        }

        .sub-card h3 {
            color: #2c3e50;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.urgent {
            background: #f44336;
            color: white;
        }

        .badge.caution {
            background: #ff9800;
            color: white;
        }

        .badge.stable {
            background: #4caf50;
            color: white;
        }

        .list-item {
            display: flex;
            align-items: flex-start;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-item i {
            color: #2196f3;
            margin-right: 0.8rem;
            margin-top: 0.2rem;
            font-size: 0.9rem;
        }

        .algorithm-path {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1rem 0;
            border: 1px solid #bbdefb;
        }

        .algorithm-path h4 {
            color: #1976d2;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-container {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .step-box {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            min-width: 150px;
            margin: 0.5rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .step-box.urgent {
            border-color: #f44336;
            background: #ffebee;
        }

        .step-box.caution {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .step-box.stable {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .step-box:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .arrow {
            font-size: 1.5rem;
            color: #757575;
            margin: 0 0.5rem;
        }

        .highlight {
            background: #fff9c4;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .warning-box {
            background: #fff3e0;
            border: 1px solid #ff9800;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
        }

        .warning-box i {
            color: #ff9800;
            font-size: 1.2rem;
            margin-top: 0.2rem;
        }

        .emergency-box {
            background: #ffebee;
            border: 1px solid #f44336;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
        }

        .emergency-box i {
            color: #f44336;
            font-size: 1.2rem;
            margin-top: 0.2rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .info-card h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-indicator {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: white;
            border-radius: 50px;
            padding: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 1000;
        }

        .progress-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .progress-dot.active {
            background: #2196f3;
            transform: scale(1.3);
        }

        .progress-dot.completed {
            background: #4caf50;
        }

        .progress-dot:hover::after {
            content: attr(data-title);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            background: #2c3e50;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            white-space: nowrap;
            font-size: 0.85rem;
            z-index: 1001;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: relative;
                padding: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .progress-indicator {
                display: none;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .step-container {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(244, 67, 54, 0); }
            100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-procedures"></i> Priapism Management</h1>
        <p>Interactive Clinical Decision Support Tool | Based on BMJ Best Practice Guidelines (Sept 2022)</p>
    </div>

    <div class="container">
        <aside class="sidebar">
            <h3><i class="fas fa-list-check"></i> Algorithm Steps</h3>
            <div class="progress-item active" data-section="assessment">
                <div class="progress-icon assessment"><i class="fas fa-stethoscope"></i></div>
                <span>Assessment</span>
            </div>
            <div class="progress-item" data-section="diagnosis">
                <div class="progress-icon diagnosis"><i class="fas fa-microscope"></i></div>
                <span>Diagnosis</span>
            </div>
            <div class="progress-item" data-section="treatment">
                <div class="progress-icon treatment"><i class="fas fa-syringe"></i></div>
                <span>Treatment</span>
            </div>
            <div class="progress-item" data-section="followup">
                <div class="progress-icon followup"><i class="fas fa-user-check"></i></div>
                <span>Follow-up</span>
            </div>
        </aside>

        <main class="main-content">
            <!-- Assessment Section -->
            <section class="section" id="assessment-section">
                <div class="card" data-section="assessment">
                    <div class="card-header assessment">
                        <h2><i class="fas fa-stethoscope"></i> Assessment <span class="badge urgent">Emergency</span></h2>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="emergency-box">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div>
                                <strong>Ischaemic priapism >4 hours is a MEDICAL EMERGENCY</strong><br>
                                Immediate treatment is critical to prevent permanent erectile dysfunction (>50% risk if lasting 24-48 hours)
                            </div>
                        </div>

                        <div class="sub-card urgent">
                            <h3><i class="fas fa-clock"></i> Key Assessment Points <span class="badge urgent">Critical</span></h3>
                            <div class="list-item">
                                <i class="fas fa-stopwatch"></i>
                                <div><strong>Duration:</strong> Exact time since onset (<4 hours vs >4 hours)</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-question-circle"></i>
                                <div><strong>Pain:</strong> Painful rigid penis suggests ischaemic; painless suggests non-ischaemic</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-pills"></i>
                                <div><strong>Medication/Drug Use:</strong> Sildenafil, antipsychotics, antidepressants, cocaine</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-medkit"></i>
                                <div><strong>History:</strong> Sickle cell disease, malignancy, trauma, spinal cord disease</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-history"></i>
                                <div><strong>Previous Episodes:</strong> Recurrent/stuttering pattern?</div>
                            </div>
                        </div>

                        <div class="sub-card caution">
                            <h3><i class="fas fa-search"></i> Physical Examination <span class="badge caution">Important</span></h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-hand-paper"></i> Penile Examination</h4>
                                    <ul style="margin-top: 0.5rem; padding-left: 1.2rem;">
                                        <li>Rigidity (fully rigid vs partially tumescent)</li>
                                        <li>Tenderness (painful vs painless)</li>
                                        <li>Corporal body involvement (bicorporal vs tricorporal)</li>
                                        <li>Flaccid corpus spongiosum in non-ischaemic</li>
                                    </ul>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-search-plus"></i> Additional Exam</h4>
                                    <ul style="margin-top: 0.5rem; padding-left: 1.2rem;">
                                        <li>Abdominal exam for malignancy</li>
                                        <li>Perineal exam for trauma/hematoma</li>
                                        <li>Rectal exam for pelvic pathology</li>
                                        <li>Neurological exam if spinal cord lesion suspected</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card">
                            <h3><i class="fas fa-vial"></i> Investigations <span class="badge stable">Routine</span></h3>
                            <div class="step-container">
                                <div class="step-box urgent">
                                    <i class="fas fa-tint" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Corpus Cavernosum Blood Sampling</strong><br>
                                    <small style="color: #666;">First-line diagnostic test</small>
                                </div>
                                <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="step-box caution">
                                    <i class="fas fa-blood-test" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>FBC & Differential</strong><br>
                                    <small style="color: #666;">All patients</small>
                                </div>
                                <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="step-box stable">
                                    <i class="fas fa-wave-square" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Color Duplex Ultrasound</strong><br>
                                    <small style="color: #666;">If available</small>
                                </div>
                            </div>

                            <div class="algorithm-path">
                                <h4><i class="fas fa-tint"></i> Cavernous Blood Gas Analysis</h4>
                                <div class="info-grid">
                                    <div class="info-card" style="border-left: 4px solid #f44336;">
                                        <h4 style="color: #d32f2f;">Ischaemic Priapism</h4>
                                        <ul style="padding-left: 1.2rem; margin-top: 0.5rem;">
                                            <li>pO₂ < 30 mmHg</li>
                                            <li>pCO₂ > 60 mmHg</li>
                                            <li>pH < 7.25</li>
                                            <li>Blood: dark/hypoxic</li>
                                        </ul>
                                    </div>
                                    <div class="info-card" style="border-left: 4px solid #4caf50;">
                                        <h4 style="color: #388e3c;">Non-Ischaemic Priapism</h4>
                                        <ul style="padding-left: 1.2rem; margin-top: 0.5rem;">
                                            <li>pO₂ > 90 mmHg</li>
                                            <li>pCO₂ < 40 mmHg</li>
                                            <li>pH = 7.40</li>
                                            <li>Blood: bright red/oxygenated</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="info-grid" style="margin-top: 1rem;">
                                <div class="info-card">
                                    <h4><i class="fas fa-dna"></i> Sickle Cell Testing</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Hb-solubility test → Hb electrophoresis if positive</p>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-flask"></i> Toxicology Screen</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Urine screen for medications and illicit drugs</p>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-x-ray"></i> MRI Consideration</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">For corporal smooth muscle necrosis evaluation</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Diagnosis Section -->
            <section class="section" id="diagnosis-section">
                <div class="card" data-section="diagnosis">
                    <div class="card-header diagnosis">
                        <h2><i class="fas fa-microscope"></i> Diagnosis <span class="badge caution">Differentiate</span></h2>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="algorithm-path">
                            <h4><i class="fas fa-diagnoses"></i> Classification of Priapism</h4>
                            <div class="step-container">
                                <div class="step-box urgent">
                                    <i class="fas fa-heartbeat" style="font-size: 1.8rem; margin-bottom: 0.5rem; color: #d32f2f;"></i>
                                    <strong>Ischaemic (Low-Flow)</strong><br>
                                    <small>Veno-occlusive</small>
                                    <ul style="text-align: left; margin-top: 0.5rem; padding-left: 1.2rem; font-size: 0.8rem;">
                                        <li>Painful, rigid penis</li>
                                        <li>Abnormal blood gases</li>
                                        <li>Medical emergency</li>
                                    </ul>
                                </div>
                                <div class="arrow"><i class="fas fa-plus"></i></div>
                                <div class="step-box stable">
                                    <i class="fas fa-tint" style="font-size: 1.8rem; margin-bottom: 0.5rem; color: #388e3c;"></i>
                                    <strong>Non-Ischaemic (High-Flow)</strong><br>
                                    <small>Arterial</small>
                                    <ul style="text-align: left; margin-top: 0.5rem; padding-left: 1.2rem; font-size: 0.8rem;">
                                        <li>Painless, not fully rigid</li>
                                        <li>Normal blood gases</li>
                                        <li>Usually post-traumatic</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card urgent">
                            <h3><i class="fas fa-redo"></i> Recurrent (Stuttering) Priapism <span class="badge urgent">Action Required</span></h3>
                            <div class="list-item">
                                <i class="fas fa-clock"></i>
                                <div>Episodes last <strong><4 hours</strong>, occur weekly/fortnightly</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-bed"></i>
                                <div>Often occur during sleep or morning erections</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-arrow-trend-up"></i>
                                <div>Frequency and duration may escalate over time</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-sickle"></i>
                                <div>Commonly associated with <strong>sickle cell disease</strong></div>
                            </div>
                        </div>

                        <div class="sub-card">
                            <h3><i class="fas fa-not-equal"></i> Differential Diagnosis</h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-curve-arrow"></i> Peyronie's Disease</h4>
                                    <p>Penile curvature with fibrotic plaque on palpation</p>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-robot"></i> Penile Implant</h4>
                                    <p>Permanent erection (pseudopriapism) - clinical history crucial</p>
                                </div>
                            </div>
                        </div>

                        <div class="emergency-box">
                            <i class="fas fa-exclamation-circle"></i>
                            <div>
                                <strong>Key Differentiator:</strong> Blood gas analysis is the gold standard for distinguishing ischaemic from non-ischaemic priapism. Do not delay treatment for imaging if ischaemic priapism is suspected.
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Treatment Section -->
            <section class="section" id="treatment-section">
                <div class="card" data-section="treatment">
                    <div class="card-header treatment">
                        <h2><i class="fas fa-syringe"></i> Treatment <span class="badge urgent">Time-Critical</span></h2>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="emergency-box pulse">
                            <i class="fas fa-ambulance"></i>
                            <div>
                                <strong>CRITICAL:</strong> Ischaemic priapism >4 hours requires immediate treatment. Every hour of delay increases risk of permanent erectile dysfunction.
                            </div>
                        </div>

                        <div class="sub-card urgent">
                            <h3><i class="fas fa-disease"></i> Ischaemic Priapism Treatment Algorithm <span class="badge urgent">Emergency</span></h3>
                            
                            <div class="algorithm-path">
                                <h4><i class="fas fa-stopwatch"></i> Duration <4 Hours</h4>
                                <div class="step-container">
                                    <div class="step-box caution">
                                        <i class="fas fa-eye" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                        <strong>Observation</strong><br>
                                        <small>OR immediate treatment</small>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                    <div class="step-box urgent">
                                        <i class="fas fa-syringe" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                        <strong>Aspiration & Irrigation</strong><br>
                                        <small>Preferred: Start treatment</small>
                                    </div>
                                </div>
                            </div>

                            <div class="algorithm-path">
                                <h4><i class="fas fa-stopwatch-20"></i> Duration >4 Hours (EMERGENCY)</h4>
                                <div class="step-container" style="flex-direction: column; align-items: center;">
                                    <div class="step-box urgent pulse" style="min-width: 300px;">
                                        <i class="fas fa-syringe" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                                        <strong>1. Aspiration & Irrigation</strong><br>
                                        <small>First-line definitive treatment</small>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-down"></i></div>
                                    <div class="step-box urgent" style="min-width: 300px;">
                                        <i class="fas fa-pills" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                                        <strong>2. Intracavernosal Injection</strong><br>
                                        <small>Phenylephrine (preferred)</small>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-down"></i></div>
                                    <div class="step-box caution" style="min-width: 300px;">
                                        <i class="fas fa-cut" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                                        <strong>3. Penile Shunt Surgery</strong><br>
                                        <small>If injection fails</small>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-down"></i></div>
                                    <div class="step-box stable" style="min-width: 300px;">
                                        <i class="fas fa-robot" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                                        <strong>4. Penile Prosthesis</strong><br>
                                        <small>For refractory cases >36-48h</small>
                                    </div>
                                </div>
                            </div>

                            <div class="info-grid">
                                <div class="info-card" style="border-left: 4px solid #f44336;">
                                    <h4 style="color: #d32f2f;"><i class="fas fa-syringe"></i> Phenylephrine Dosing</h4>
                                    <ul style="padding-left: 1.2rem; margin-top: 0.5rem;">
                                        <li>Dilute: 100-500 micrograms/mL</li>
                                        <li>Inject: 1 mL intracavernosally</li>
                                        <li>Repeat: Every 5 minutes</li>
                                        <li>Maximum: 1000 micrograms</li>
                                        <li>Monitor: BP, ECG, cardiovascular effects</li>
                                    </ul>
                                </div>
                                <div class="info-card" style="border-left: 4px solid #ff9800;">
                                    <h4 style="color: #f57c00;"><i class="fas fa-cut"></i> Shunt Procedures (Order)</h4>
                                    <ol style="padding-left: 1.5rem; margin-top: 0.5rem;">
                                        <li><strong>Winter:</strong> Percutaneous distal</li>
                                        <li><strong>Al-Ghorab:</strong> Open distal</li>
                                        <li><strong>Corporal tunneling:</strong> "Snake maneuver"</li>
                                        <li><strong>Proximal:</strong> Quackels/Sacher</li>
                                        <li><strong>Vein anastomosis:</strong> Grayhack/Barry</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card stable">
                            <h3><i class="fas fa-heart"></i> Non-Ischaemic Priapism <span class="badge stable">Conservative</span></h3>
                            <div class="step-container">
                                <div class="step-box stable">
                                    <i class="fas fa-clock" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Observation</strong><br>
                                    <small>4 weeks recommended</small>
                                </div>
                                <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="step-box caution">
                                    <i class="fas fa-snowflake" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Conservative</strong><br>
                                    <small>Ice/compression</small>
                                </div>
                                <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="step-box urgent">
                                    <i class="fas fa-compress-arrows-alt" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Embolisation</strong><br>
                                    <small>If requested/fails</small>
                                </div>
                                <div class="arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="step-box caution">
                                    <i class="fas fa-cut" style="font-size: 1.5rem; margin-bottom: 0.5rem;"></i>
                                    <strong>Surgical Ligation</strong><br>
                                    <small>Last resort</small>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card">
                            <h3><i class="fas fa-sync-alt"></i> Recurrent (Stuttering) Priapism <span class="badge caution">Preventative</span></h3>
                            <div class="warning-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong>Acute episodes:</strong> Treat as ischaemic priapism<br>
                                    <strong>Focus:</strong> Prevent future episodes + treat underlying condition
                                </div>
                            </div>
                            <div class="info-grid">
                                <div class="info-card">
                                    <h4><i class="fas fa-pills"></i> Preventative Medications</h4>
                                    <ul style="padding-left: 1.2rem; margin-top: 0.5rem; font-size: 0.85rem;">
                                        <li><strong>Ketoconazole + prednisolone:</strong> Most effective</li>
                                        <li><strong>Baclofen, dutasteride</strong></li>
                                        <li><strong>Tadalafil/sildenafil:</strong> Paradoxical effect</li>
                                        <li><strong>Etilefrine, hydroxycarbamide:</strong> For SCD</li>
                                    </ul>
                                </div>
                                <div class="info-card">
                                    <h4><i class="fas fa-home"></i> Home Management</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Self-injection of phenylephrine taught to patients. Seek medical help if >3 hours.</p>
                                </div>
                            </div>
                        </div>

                        <div class="emergency-box">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div>
                                <strong>Sickle Cell Disease:</strong> IV hydration, oxygenation, alkalinization, exchange transfusion may be used BUT should NOT precede aspiration and sympathomimetic injection.
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Follow-up Section -->
            <section class="section" id="followup-section">
                <div class="card" data-section="followup">
                    <div class="card-header followup">
                        <h2><i class="fas fa-user-check"></i> Follow-up <span class="badge stable">Ongoing</span></h2>
                        <i class="fas fa-chevron-down expand-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="sub-card caution">
                            <h3><i class="fas fa-heartbeat"></i> Monitoring <span class="badge caution">Required</span></h3>
                            <div class="info-grid">
                                <div class="info-card" style="border-left: 4px solid #f44336;">
                                    <h4 style="color: #d32f2f;"><i class="fas fa-heart-pulse"></i> Cardiovascular</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Telemetry/BP/ECG monitoring during sympathomimetic injection. Watch for hypertension, arrhythmias, reflex bradycardia.</p>
                                </div>
                                <div class="info-card" style="border-left: 4px solid #ff9800;">
                                    <h4 style="color: #f57c00;"><i class="fas fa-liver"></i> Liver Function</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Monitor LFTs and adrenal function if using ketoconazole for prevention.</p>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card urgent">
                            <h3><i class="fas fa-exclamation-triangle"></i> Complications <span class="badge urgent">High Risk</span></h3>
                            <div class="info-grid">
                                <div class="info-card" style="border-left: 4px solid #f44336;">
                                    <h4 style="color: #d32f2f;"><i class="fas fa-biohazard"></i> Erectile Dysfunction</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;"><strong>>50% risk</strong> if priapism lasts 24-48 hours. Most common complication.</p>
                                </div>
                                <div class="info-card" style="border-left: 4px solid #f44336;">
                                    <h4 style="color: #d32f2f;"><i class="fas fa-scar"></i> Penile Fibrosis</h4>
                                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Corporal smooth muscle necrosis and fibrosis develop after >24 hours ischaemia.</p>
                                </div>
                                <div class="info-card" style="border-left: 4px solid #ff9800;">
                                    <h4 style="color: #f57c00;"><i class="fas fa-cut"></i> Shunt Complications</h4>
                                    <ul style="padding-left: 1.2rem; margin-top: 0.5rem; font-size: 0.85rem;">
                                        <li>ED rates: 25% (distal) to 50% (proximal)</li>
                                        <li>Urethral damage/fistula</li>
                                        <li>Cavernositis, skin necrosis</li>
                                        <li>Pulmonary embolism (Grayhack)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card">
                            <h3><i class="fas fa-chart-line"></i> Prognosis <span class="badge stable">Outcome-Based</span></h3>
                            <div class="algorithm-path">
                                <h4><i class="fas fa-clock"></i> Treatment Timing is Critical</h4>
                                <div class="step-container" style="flex-direction: column; align-items: center;">
                                    <div class="info-card" style="width: 100%; text-align: center;">
                                        <h4 style="color: #4caf50;"><i class="fas fa-check-circle"></i> <12-24 Hours</h4>
                                        <p>Favorable response, better erectile function preservation</p>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-down"></i></div>
                                    <div class="info-card" style="width: 100%; text-align: center;">
                                        <h4 style="color: #ff9800;"><i class="fas fa-exclamation-triangle"></i> >36-48 Hours</h4>
                                        <p>Recovery of erectile function unlikely. Consider immediate prosthesis.</p>
                                    </div>
                                    <div class="arrow"><i class="fas fa-arrow-down"></i></div>
                                    <div class="info-card" style="width: 100%; text-align: center;">
                                        <h4 style="color: #f44336;"><i class="fas fa-times-circle"></i> Untreated</h4>
                                        <p>Global penile fibrosis, severe ED. Pharmacotherapy will fail.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="sub-card stable">
                            <h3><i class="fas fa-comments"></i> Patient Counseling <span class="badge stable">Essential</span></h3>
                            <div class="list-item">
                                <i class="fas fa-info"></i>
                                <div><strong>Risk Education:</strong> Inform patients with predisposing conditions (SCD, medications)</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-clock"></i>
                                <div><strong>Time Threshold:</strong> Seek immediate medical attention if >3-4 hours</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-exclamation"></i>
                                <div><strong>Consequences:</strong> ED, penile deformity, scarring, shortening may occur</div>
                            </div>
                            <div class="list-item">
                                <i class="fas fa-pills"></i>
                                <div><strong>ED Treatment:</strong> Avoid oral PDE5 inhibitors; prefer vacuum devices, intracavernous therapy, or prosthesis</div>
                            </div>
                        </div>

                        <div class="warning-box">
                            <i class="fas fa-lightbulb"></i>
                            <div>
                                <strong>Key Success Factor:</strong> Prompt recognition and immediate treatment of ischaemic and recurrent priapism are essential for optimal outcomes. Shunt procedures have 50-65% success rate when medical therapy fails.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div class="progress-indicator">
        <div class="progress-dot active" data-section="assessment" data-title="Assessment"></div>
        <div class="progress-dot" data-section="diagnosis" data-title="Diagnosis"></div>
        <div class="progress-dot" data-section="treatment" data-title="Treatment"></div>
        <div class="progress-dot" data-section="followup" data-title="Follow-up"></div>
    </div>

    <script>
        // Card expansion functionality
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.card');
            const progressItems = document.querySelectorAll('.progress-item');
            const progressDots = document.querySelectorAll('.progress-dot');
            
            // Expand first card by default
            if (cards.length > 0) {
                cards[0].classList.add('expanded');
            }

            // Card header click handler
            cards.forEach(card => {
                const header = card.querySelector('.card-header');
                header.addEventListener('click', function() {
                    const isExpanded = card.classList.contains('expanded');
                    
                    // Close all cards
                    cards.forEach(c => c.classList.remove('expanded'));
                    
                    // Toggle current card
                    if (!isExpanded) {
                        card.classList.add('expanded');
                        updateProgress(card.dataset.section);
                        scrollToCard(card);
                    }
                });
            });

            // Progress sidebar click handler
            progressItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.dataset.section;
                    const targetCard = document.querySelector(`.card[data-section="${section}"]`);
                    
                    if (targetCard) {
                        // Close all cards
                        cards.forEach(c => c.classList.remove('expanded'));
                        // Open target card
                        targetCard.classList.add('expanded');
                        updateProgress(section);
                        scrollToCard(targetCard);
                    }
                });
            });

            // Progress dots click handler
            progressDots.forEach(dot => {
                dot.addEventListener('click', function() {
                    const section = this.dataset.section;
                    const targetCard = document.querySelector(`.card[data-section="${section}"]`);
                    
                    if (targetCard) {
                        // Close all cards
                        cards.forEach(c => c.classList.remove('expanded'));
                        // Open target card
                        targetCard.classList.add('expanded');
                        updateProgress(section);
                        scrollToCard(targetCard);
                    }
                });
            });

            // Update progress indicators
            function updateProgress(activeSection) {
                // Update sidebar progress
                progressItems.forEach(item => {
                    item.classList.remove('active', 'completed');
                    if (item.dataset.section === activeSection) {
                        item.classList.add('active');
                    } else if (isSectionCompleted(item.dataset.section, activeSection)) {
                        item.classList.add('completed');
                    }
                });

                // Update dots progress
                progressDots.forEach(dot => {
                    dot.classList.remove('active', 'completed');
                    if (dot.dataset.section === activeSection) {
                        dot.classList.add('active');
                    } else if (isSectionCompleted(dot.dataset.section, activeSection)) {
                        dot.classList.add('completed');
                    }
                });
            }

            // Check if section is completed (comes before active section)
            function isSectionCompleted(section, activeSection) {
                const order = ['assessment', 'diagnosis', 'treatment', 'followup'];
                const sectionIndex = order.indexOf(section);
                const activeIndex = order.indexOf(activeSection);
                return sectionIndex < activeIndex;
            }

            // Smooth scroll to card
            function scrollToCard(card) {
                setTimeout(() => {
                    card.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 100);
            }

            // Auto-expand cards when scrolling
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.id;
                        const section = sectionId.replace('-section', '');
                        updateProgress(section);
                    }
                });
            }, {
                threshold: 0.5
            });

            document.querySelectorAll('.section').forEach(section => {
                observer.observe(section);
            });

            // Add fade-in animation to cards when they become visible
            const fadeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, {
                threshold: 0.1
            });

            document.querySelectorAll('.sub-card, .info-card, .step-box').forEach(el => {
                fadeObserver.observe(el);
            });
        });
    </script>
</body>
</html>