<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hearing Loss Assessment - Interactive Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }

        .main-content {
            flex: 1;
            padding-right: 280px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            color: #7f8c8d;
        }

        .card {
            background: white;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 6px solid;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .card.assessment {
            border-left-color: #3498db;
        }

        .card.diagnosis {
            border-left-color: #9b59b6;
        }

        .card.treatment {
            border-left-color: #e67e22;
        }

        .card.follow-up {
            border-left-color: #27ae60;
        }

        .card-header {
            padding: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, #f8f9fa 0%, #eef2f7 100%);
            transition: all 0.3s ease;
        }

        .card-header:hover {
            background: linear-gradient(135deg, #eef2f7 0%, #e3e9f2 100%);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-icon {
            font-size: 2em;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .assessment .card-icon { color: #3498db; }
        .diagnosis .card-icon { color: #9b59b6; }
        .treatment .card-icon { color: #e67e22; }
        .follow-up .card-icon { color: #27ae60; }

        .card h2 {
            font-size: 1.5em;
            color: #2c3e50;
        }

        .expand-icon {
            font-size: 1.5em;
            color: #7f8c8d;
            transition: transform 0.3s ease;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.expanded .card-body {
            max-height: 2000px;
        }

        .card-content {
            padding: 0 25px 25px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .item:hover {
            background: #eef2f7;
            transform: translateX(5px);
            border-color: #3498db;
        }

        .item-icon {
            font-size: 1.5em;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .item-content {
            flex: 1;
        }

        .item-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .item-description {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .severity-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
            flex-shrink: 0;
        }

        .badge-urgent {
            background: #ffeaea;
            color: #c0392b;
            border: 1px solid #e74c3c;
        }

        .badge-caution {
            background: #fff3e0;
            color: #e67e22;
            border: 1px solid #f39c12;
        }

        .badge-stable {
            background: #e8f5e8;
            color: #27ae60;
            border: 1px solid #2ecc71;
        }

        .progress-sidebar {
            position: fixed;
            right: 20px;
            top: 20px;
            width: 250px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .progress-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .progress-item:hover {
            background: #f8f9fa;
        }

        .progress-item.active {
            background: #3498db;
            color: white;
        }

        .progress-item.completed {
            background: #e8f5e8;
            color: #27ae60;
        }

        .progress-icon {
            font-size: 1.2em;
        }

        .progress-text {
            font-size: 0.9em;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-percentage {
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        @media (max-width: 1200px) {
            .main-content {
                padding-right: 0;
            }
            
            .progress-sidebar {
                position: relative;
                right: auto;
                top: auto;
                width: 100%;
                margin-top: 20px;
                max-height: 300px;
            }
            
            .container {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .card-header {
                padding: 20px;
            }
            
            .card-icon {
                width: 50px;
                height: 50px;
                font-size: 1.5em;
            }
            
            .card h2 {
                font-size: 1.2em;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <main class="main-content">
            <div class="header fade-in">
                <h1>ü¶ª Hearing Loss Assessment</h1>
                <p>Interactive Clinical Decision Support Tool | BMJ Best Practice Guidelines</p>
            </div>

            <!-- Assessment Card -->
            <div class="card assessment fade-in" data-step="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üìù</div>
                        <div>
                            <h2>Assessment</h2>
                            <p style="font-size: 0.9em; color: #7f8c8d; margin-top: 5px;">History, Examination & Initial Triage</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <div class="section-title">
                                <span>üìã</span>
                                History Taking
                            </div>
                            
                            <div class="item" data-severity="caution">
                                <div class="item-icon">üëÇ</div>
                                <div class="item-content">
                                    <div class="item-title">Onset & Duration</div>
                                    <div class="item-description">Sudden (<72 hours) vs gradual. Unilateral vs bilateral.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">‚ö°</div>
                                <div class="item-content">
                                    <div class="item-title">Red Flag Symptoms</div>
                                    <div class="item-description">Severe vertigo, facial weakness, severe ear pain, trauma, neurological signs.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üîä</div>
                                <div class="item-content">
                                    <div class="item-title">Associated Symptoms</div>
                                    <div class="item-description">Tinnitus, aural fullness, discharge, pain, dizziness.</div>
                                </div>
                                <div class="severity-badge badge-stable">Stable</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíä</div>
                                <div class="item-content">
                                    <div class="item-title">Medication History</div>
                                    <div class="item-description">Aminoglycosides, loop diuretics, chemotherapy, NSAIDs.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üë∑</div>
                                <div class="item-content">
                                    <div class="item-title">Noise Exposure</div>
                                    <div class="item-description">Occupational, recreational, sudden loud noises.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üë∂</div>
                                <div class="item-content">
                                    <div class="item-title">Pediatric Considerations</div>
                                    <div class="item-description">Prenatal infections, jaundice, developmental history, family history.</div>
                                </div>
                                <div class="severity-badge badge-stable">Stable</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üîç</span>
                                Physical Examination
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üëÇ</div>
                                <div class="item-content">
                                    <div class="item-title">Otoscopy</div>
                                    <div class="item-description">External canal (wax, foreign body, infection, neoplasm). Tympanic membrane (perforation, effusion, cholesteatoma).</div>
                                </div>
                                <div class="severity-badge badge-stable">Stable</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üéµ</div>
                                <div class="item-content">
                                    <div class="item-title">Tuning Fork Tests</div>
                                    <div class="item-description">Rinne's test (air vs bone conduction). Weber's test (lateralization).</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üß†</div>
                                <div class="item-content">
                                    <div class="item-title">Neurological Examination</div>
                                    <div class="item-description">Cranial nerves, cerebellar function, nystagmus assessment.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üëÅÔ∏è</div>
                                <div class="item-content">
                                    <div class="item-title">General Examination</div>
                                    <div class="item-description">Facial features (syndromes), skin lesions (neurofibromatosis), blood pressure.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üè•</span>
                                Initial Triage
                            </div>

                            <div class="item" data-severity="urgent" onclick="showDetail('sudden-loss')">
                                <div class="item-icon">üö®</div>
                                <div class="item-content">
                                    <div class="item-title">Sudden Sensorineural Hearing Loss</div>
                                    <div class="item-description"><72 hours onset, >30dB loss in ‚â•3 frequencies. Immediate ENT referral.</div>
                                </div>
                                <div class="severity-badge badge-urgent">EMERGENCY</div>
                            </div>

                            <div class="item" data-severity="urgent" onclick="showDetail('necrotizing')">
                                <div class="item-icon">üî•</div>
                                <div class="item-content">
                                    <div class="item-title">Necrotising Otitis Externa</div>
                                    <div class="item-description">Severe pain in diabetic/immunocompromised patients. Granulation tissue at bony-cartilaginous junction.</div>
                                </div>
                                <div class="severity-badge badge-urgent">EMERGENCY</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíâ</div>
                                <div class="item-content">
                                    <div class="item-title">Suspected Otitis Media</div>
                                    <div class="item-description">Acute infection or effusion. Consider observation vs antibiotics.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üßº</div>
                                <div class="item-content">
                                    <div class="item-title">Cerumen Impaction</div>
                                    <div class="item-description">Common cause of conductive hearing loss. Consider removal if symptomatic.</div>
                                </div>
                                <div class="severity-badge badge-stable">Stable</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card diagnosis fade-in" data-step="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üî¨</div>
                        <div>
                            <h2>Diagnosis</h2>
                            <p style="font-size: 0.9em; color: #7f8c8d; margin-top: 5px;">Investigations & Differential Diagnosis</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <div class="section-title">
                                <span>üéØ</span>
                                Key Diagnostic Steps
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üìÖ</div>
                                <div class="item-content">
                                    <div class="item-title">Timing of Investigations</div>
                                    <div class="item-description">Sudden SNHL: investigations within 14 days. MRI for unilateral/asymmetric loss.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üéµ</div>
                                <div class="item-content">
                                    <div class="item-title">Audiometric Testing</div>
                                    <div class="item-description">Pure tone audiometry (250-8000Hz). Speech audiometry. Tympanometry.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üî¨</div>
                                <div class="item-content">
                                    <div class="item-title">Auditory Brainstem Response</div>
                                    <div class="item-description">For infants, suspected acoustic neuroma, or auditory neuropathy.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üîç</span>
                                Imaging Studies
                            </div>

                            <div class="item" data-severity="urgent" onclick="showDetail('mri')">
                                <div class="item-icon">üß≤</div>
                                <div class="item-content">
                                    <div class="item-title">MRI with Gadolinium</div>
                                    <div class="item-description">Unilateral SNHL, tinnitus, or neurological signs. Rules out acoustic neuroma.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üè¢</div>
                                <div class="item-content">
                                    <div class="item-title">CT Temporal Bone</div>
                                    <div class="item-description">Conductive/mixed hearing loss. Trauma, cholesteatoma, congenital anomalies.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üìã</span>
                                Differential Diagnosis
                            </div>

                            <div class="item" data-severity="stable" onclick="showDetail('conductive')">
                                <div class="item-icon">üëÇ</div>
                                <div class="item-content">
                                    <div class="item-title">Conductive Hearing Loss</div>
                                    <div class="item-description">External/middle ear pathology. Rinne negative, Weber lateralizes to affected ear.</div>
                                </div>
                                <div class="severity-badge badge-stable">Common</div>
                            </div>

                            <div class="item" data-severity="stable" onclick="showDetail('sensorineural')">
                                <div class="item-icon">üß†</div>
                                <div class="item-content">
                                    <div class="item-title">Sensorineural Hearing Loss</div>
                                    <div class="item-description">Inner ear, nerve, or central pathology. Rinne positive, Weber lateralizes to normal ear.</div>
                                </div>
                                <div class="severity-badge badge-stable">Common</div>
                            </div>

                            <div class="item" data-severity="caution" onclick="showDetail('mixed')">
                                <div class="item-icon">‚öñÔ∏è</div>
                                <div class="item-content">
                                    <div class="item-title">Mixed Hearing Loss</div>
                                    <div class="item-description">Both conductive and sensorineural components present.</div>
                                </div>
                                <div class="severity-badge badge-caution">Complex</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üë∂</div>
                                <div class="item-content">
                                    <div class="item-title">Pediatric Considerations</div>
                                    <div class="item-description">Congenital CMV, genetic testing (connexin 26), syndromic hearing loss.</div>
                                </div>
                                <div class="severity-badge badge-caution">Specialist</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üß™</span>
                                Special Tests
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üß¨</div>
                                <div class="item-content">
                                    <div class="item-title">Genetic Testing</div>
                                    <div class="item-description">GJB2 (connexin 26) for non-syndromic hearing loss. Multigene panel for children.</div>
                                </div>
                                <div class="severity-badge badge-caution">Specialist</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üíß</div>
                                <div class="item-content">
                                    <div class="item-title">Lab Investigations</div>
                                    <div class="item-description">CMV PCR (infants), syphilis serology, autoimmune panels, renal function (Alport's).</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card treatment fade-in" data-step="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üíä</div>
                        <div>
                            <h2>Treatment</h2>
                            <p style="font-size: 0.9em; color: #7f8c8d; margin-top: 5px;">Management & Specialist Referral</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <div class="section-title">
                                <span>üö®</span>
                                Emergency Management
                            </div>

                            <div class="item" data-severity="urgent" onclick="showDetail('steroids')">
                                <div class="item-icon">üíä</div>
                                <div class="item-content">
                                    <div class="item-title">Sudden SNHL Treatment</div>
                                    <div class="item-description">Immediate high-dose oral steroids within 72 hours. Consider intratympanic steroids.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Emergency</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üè•</div>
                                <div class="item-content">
                                    <div class="item-title">Necrotising Otitis Externa</div>
                                    <div class="item-description">Urgent ENT referral. IV antibiotics, diabetes control, imaging for skull base osteomyelitis.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Emergency</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üß†</div>
                                <div class="item-content">
                                    <div class="item-title">Cerebrovascular Events</div>
                                    <div class="item-description">Stroke protocol: thrombolysis if indicated. Vertebral artery dissection: anticoagulation.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Emergency</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üëÇ</span>
                                External Ear Management
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üßº</div>
                                <div class="item-content">
                                    <div class="item-title">Cerumen Removal</div>
                                    <div class="item-description">Cerumenolytics, irrigation, or manual removal. Contraindicated if TM perforation suspected.</div>
                                </div>
                                <div class="severity-badge badge-stable">Routine</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">ü¶†</div>
                                <div class="item-content">
                                    <div class="item-title">Otitis Externa</div>
                                    <div class="item-description">Topical antibiotics +/- steroids. Keep ear dry. Systemic antibiotics if severe.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üö´</div>
                                <div class="item-content">
                                    <div class="item-title">Foreign Body Removal</div>
                                    <div class="item-description">Microsuction or instrumentation. Refer if difficult or risk of trauma.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üéØ</span>
                                Middle Ear Management
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíä</div>
                                <div class="item-content">
                                    <div class="item-title">Acute Otitis Media</div>
                                    <div class="item-description">Pain control, observation vs antibiotics. Consider delayed prescription.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíß</div>
                                <div class="item-content">
                                    <div class="item-title">Otitis Media with Effusion</div>
                                    <div class="item-description">Watchful waiting 3 months. Autoinflation. Refer if persistent or speech delayed.</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">üè•</div>
                                <div class="item-content">
                                    <div class="item-title">Cholesteatoma</div>
                                    <div class="item-description">Urgent ENT referral for surgical management. Risk of bone erosion and complications.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent Referral</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üß†</span>
                                Inner Ear Management
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üîä</div>
                                <div class="item-content">
                                    <div class="item-title">Hearing Rehabilitation</div>
                                    <div class="item-description">Hearing aids, assistive devices, communication strategies, cochlear implants if severe.</div>
                                </div>
                                <div class="severity-badge badge-stable">Routine</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíä</div>
                                <div class="item-content">
                                    <div class="item-title">Meniere's Disease</div>
                                    <div class="item-description">Salt restriction, diuretics, betahistine. Intratympanic gentamicin or surgery if refractory.</div>
                                </div>
                                <div class="severity-badge badge-caution">Specialist</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üö´</div>
                                <div class="item-content">
                                    <div class="item-title">Ototoxic Drug Management</div>
                                    <div class="item-description">Stop offending drug if possible. Monitor hearing. Genetic testing (mitochondrial DNA).</div>
                                </div>
                                <div class="severity-badge badge-caution">Caution</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card follow-up fade-in" data-step="follow-up">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üìä</div>
                        <div>
                            <h2>Follow-up</h2>
                            <p style="font-size: 0.9em; color: #7f8c8d; margin-top: 5px;">Monitoring & Long-term Management</p>
                        </div>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-body">
                    <div class="card-content">
                        <div class="section">
                            <div class="section-title">
                                <span>üìÖ</span>
                                Monitoring Schedule
                            </div>

                            <div class="item" data-severity="urgent">
                                <div class="item-icon">‚ö°</div>
                                <div class="item-content">
                                    <div class="item-title">Post-Sudden SNHL</div>
                                    <div class="item-description">Repeataudiometry at 2 weeks, 1 month, 3 months. MRI if no improvement.</div>
                                </div>
                                <div class="severity-badge badge-urgent">Urgent</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üë∂</div>
                                <div class="item-content">
                                    <div class="item-title">Pediatric Follow-up</div>
                                    <div class="item-description">Regular audiology, speech development assessment, educational support.</div>
                                </div>
                                <div class="severity-badge badge-caution">Important</div>
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üë¥</div>
                                <div class="item-content">
                                    <div class="item-title">Age-Related Hearing Loss</div>
                                    <div class="item-description">Annual hearing assessment, hearing aid adjustment, communication review.</div>
                                </div>
                                <div class="severity-badge badge-stable">Routine</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <spanüîÑ</span>
                                Rehabilitation & Support
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üîä</div>
                                <div class="item-content">
                                    <div class="item-title">Audiological Rehabilitation</div>
                                    <div class="item-description">Hearing aid fitting, verification, orientation. Assistive listening devices.</div>
                                </div>
                                <div class="severity-badge badge-stable">Routine</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üí¨</div>
                                <div class="item-content">
                                    <div class="item-title">Communication Strategies</div>
                                    <div class="item-description">Lip reading, sign language, communication tactics, family counseling.</div>
                                </div>
                                <div class="severity-badge badge-caution">Support</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üè•</div>
                                <div class="item-content">
                                    <div class="item-title">Multidisciplinary Care</div>
                                    <div class="item-description">ENT, audiology, speech therapy, genetics, education support for children.</div>
                                </div>
                                <div class="severity-badge badge-caution">Specialist</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üõ°Ô∏è</span>
                                Prevention & Education
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üëÇ</div>
                                <div class="item-content">
                                    <div class="item-title">Noise Protection</div>
                                    <div class="item-description">Ear protection in noisy environments. Avoid ototoxic drugs when possible.</div>
                                </div>
                                <div class="severity-badge badge-stable">Prevention</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üíä</div>
                                <div class="item-content">
                                    <div class="item-title">Medication Monitoring</div>
                                    <div class="item-description">Regular hearing tests if on ototoxic drugs. Consider alternative medications.</div>
                                </div>
                                <div class="severity-badge badge-caution">Monitoring</div>
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üìö</div>
                                <div class="item-content">
                                    <div class="item-title">Patient Education</div>
                                    <div class="item-description">Understanding hearing loss, device care, communication strategies, support groups.</div>
                                </div>
                                <div class="severity-badge badge-stable">Education</div>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">
                                <span>üìà</span>
                                Outcome Measures
                            </div>

                            <div class="item" data-severity="stable">
                                <div class="item-icon">üìä</div>
                                <div class="item-content">
                                    <div class="item-title">Quality of Life Assessment</div>
                                    <div class="item-description">Hearing handicap inventories, communication assessment, psychosocial impact.</div>
                                </div>
                                <div class="severity-badge badge-stable">Assessment</div>
                            </div>

                            <div class="item" data-severity="caution">
                                <div class="item-icon">üéØ</div>
                                <div class="item-content">
                                    <div class="item-title">Treatment Goals</div>
                                    <div class="item-description">Improved communication, tinnitus management, balance improvement, prevention of progression.</div>
                                </div>
                                <div class="severity-badge badge-caution">Goals</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="progress-sidebar fade-in">
            <div class="progress-title">üìç Progress Tracker</div>
            <div class="progress-percentage" id="progress-percentage">0%</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div class="progress-item active" data-target="assessment">
                <div class="progress-icon">üìù</div>
                <div class="progress-text">Assessment</div>
            </div>
            
            <div class="progress-item" data-target="diagnosis">
                <div class="progress-icon">üî¨</div>
                <div class="progress-text">Diagnosis</div>
            </div>
            
            <div class="progress-item" data-target="treatment">
                <div class="progress-icon">üíä</div>
                <div class="progress-text">Treatment</div>
            </div>
            
            <div class="progress-item" data-target="follow-up">
                <div class="progress-icon">üìä</div>
                <div class="progress-text">Follow-up</div>
            </div>

            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">‚ö° Quick Actions</div>
                <button onclick="expandAllCards()" style="width: 100%; padding: 8px; margin-bottom: 8px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">Expand All</button>
                <button onclick="collapseAllCards()" style="width: 100%; padding: 8px; background: #95a5a6; color: white; border: none; border-radius: 5px; cursor: pointer;">Collapse All</button>
            </div>
        </aside>
    </div>

    <script>
        // Global variables
        let currentProgress = 0;
        let completedSteps = new Set();

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Add fade-in animation to cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200);
            });

            // Set up scroll listener for progress tracking
            window.addEventListener('scroll', updateProgressOnScroll);
            
            // Initialize progress
            updateProgress();
        });

        // Toggle card expansion
        function toggleCard(header) {
            const card = header.parentElement;
            const isExpanded = card.classList.contains('expanded');
            
            // Close all other cards
            document.querySelectorAll('.card').forEach(c => {
                if (c !== card) {
                    c.classList.remove('expanded');
                    c.querySelector('.expand-icon').textContent = '‚ñº';
                }
            });

            // Toggle current card
            if (isExpanded) {
                card.classList.remove('expanded');
                header.querySelector('.expand-icon').textContent = '‚ñº';
            } else {
                card.classList.add('expanded');
                header.querySelector('.expand-icon').textContent = '‚ñ≤';
                
                // Mark step as completed
                const step = card.dataset.step;
                completedSteps.add(step);
                updateProgress();
                
                // Update active progress item
                document.querySelectorAll('.progress-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-target="${step}"]`).classList.add('active');
            }

            // Add pulse animation
            card.classList.add('pulse');
            setTimeout(() => card.classList.remove('pulse'), 2000);
        }

        // Expand all cards
        function expandAllCards() {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.add('expanded');
                card.querySelector('.expand-icon').textContent = '‚ñ≤';
                completedSteps.add(card.dataset.step);
            });
            updateProgress();
        }

        // Collapse all cards
        function collapseAllCards() {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('expanded');
                card.querySelector('.expand-icon').textContent = '‚ñº';
            });
        }

        // Update progress bar
        function updateProgress() {
            const totalSteps = 4;
            const completedCount = completedSteps.size;
            currentProgress = (completedCount / totalSteps) * 100;
            
            document.getElementById('progress-fill').style.width = currentProgress + '%';
            document.getElementById('progress-percentage').textContent = Math.round(currentProgress) + '%';
            
            // Update progress items
            document.querySelectorAll('.progress-item').forEach(item => {
                const step = item.dataset.target;
                if (completedSteps.has(step)) {
                    item.classList.add('completed');
                    item.classList.remove('active');
                }
            });

            // Add special effect at 100%
            if (currentProgress === 100) {
                confettiEffect();
            }
        }

        // Update progress based on scroll
        function updateProgressOnScroll() {
            const cards = document.querySelectorAll('.card');
            const scrollPosition = window.scrollY + 200;
            
            cards.forEach(card => {
                const cardTop = card.offsetTop;
                const cardHeight = card.offsetHeight;
                const step = card.dataset.step;
                
                if (scrollPosition >= cardTop && scrollPosition <= cardTop + cardHeight) {
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelector(`[data-target="${step}"]`).classList.add('active');
                }
            });
        }

        // Show detail modal
        function showDetail(detailType) {
            const details = {
                'sudden-loss': {
                    title: 'Sudden Sensorineural Hearing Loss',
                    content: `
                        <h3>‚ö° EMERGENCY MANAGEMENT</h3>
                        <p><strong>Definition:</strong> Subjective sensation of rapid-onset hearing impairment in one or both ears, often with tinnitus and/or vertigo.</p>
                        
                        <h4>Key Features:</h4>
                        <ul>
                            <li>Onset < 72 hours</li>
                            <li>>30dB loss in ‚â•3 frequencies</li>
                            <li>Often unilateral</li>
                            <li>May have associated symptoms (tinnitus, vertigo, aural fullness)</li>
                        </ul>

                        <h4>Immediate Actions:</h4>
                        <ol>
                            <li>Urgent ENT referral (within 24 hours)</li>
                            <li>Bedside tuning fork tests (Rinne, Weber)</li>
                            <li>Formal audiometry within 14 days</li>
                            <li>MRI brain and internal auditory canals</li>
                        </ol>

                        <h4>Treatment:</h4>
                        <ul>
                            <li>High-dose oral corticosteroids (e.g., prednisolone 1mg/kg/day)</li>
                            <li>Consider intratympanic steroids if contraindications to systemic steroids</li>
                            <li>Start within 72 hours for best outcomes</li>
                        </ul>

                        <h4>Prognosis:</h4>
                        <p>50-60% recover spontaneously. Early treatment improves recovery rates.</p>
                    `
                },
                'necrotizing': {
                    title: 'Necrotising Otitis Externa',
                    content: `
                        <h3>üî• EMERGENT INFECTION</h3>
                        <p><strong>Definition:</strong> Invasive infection of external auditory canal with potential for skull base osteomyelitis, typically in diabetics or immunocompromised.</p>

                        <h4>Key Features:</h4>
                        <ul>
                            <li>Severe otalgia (wakes patient from sleep)</li>
                            <li>Otorrhoea, often refractory to treatment</li>
                            <li>Granulation tissue at bony-cartilaginous junction</li>
                            <li>Cranial nerve palsies (VII, IX, X, XI, XII) in advanced cases</li>
                        </ul>

                        <h4>Risk Factors:</h4>
                        <ul>
                            <li>Diabetes mellitus (poorly controlled)</li>
                            <li>Immunocompromise (HIV, chemotherapy)</li>
                            <li>Advanced age</li>
                            <li>Recent ear irrigation with tap water</li>
                        </ul>

                        <h4>Management:</h4>
                        <ol>
                            <li>Urgent ENT referral</li>
                            <li>CT temporal bone with contrast</li>
                            <li>Technetium-99m or Gallium-67 scan for extent</li>
                            <li>Biopsy to exclude malignancy</li>
                            <li>IV antibiotics (anti-pseudomonal) for 6-8 weeks</li>
                            <li>Diabetes optimization</li>
                        </ol>

                        <h4>Complications:</h4>
                        <ul>
                            <li>Skull base osteomyelitis</li>
                            <li>Cranial nerve palsies</li>
                            <li>Intracranial extension (meningitis, brain abscess)</li>
                            <li>High mortality if untreated</li>
                        </ul>
                    `
                },
                'conductive': {
                    title: 'Conductive Hearing Loss',
                    content: `
                        <h3>üëÇ CONDUCTIVE HEARING LOSS</h3>
                        <p><strong>Mechanism:</strong> Impaired sound transmission through external or middle ear to inner ear.</p>

                        <h4>Common Causes:</h4>
                        <ul>
                            <li>Cerumen impaction</li>
                            <li>Foreign body</li>
                            <li>External otitis</li>
                            <li>Tympanic membrane perforation</li>
                            <li>Acute otitis media</li>
                            <li>Otitis media with effusion</li>
                            <li>Eustachian tube dysfunction</li>
                            <li>Otosclerosis</li>
                            <li>Cholesteatoma</li>
                        </ul>

                        <h4>Clinical Features:</h4>
                        <ul>
                            <li>Rinne test: Negative (bone conduction > air conduction)</li>
                            <li>Weber test: Lateralizes to affected ear</li>
                            <li>Otoscopy may show abnormality</li>
                            <li>May have ear pain, discharge, or fullness</li>
                        </ul>

                        <h4>Investigations:</h4>
                        <ul>
                            <li>Otoscopy</li>
                            <li>Tuning fork tests</li>
                            <li>Pure tone audiometry</li>
                            <li>Tympanometry</li>
                            <li>CT temporal bone if indicated</li>
                        </ul>

                        <h4>Management:</h4>
                        <p>Depends on cause - may include cerumen removal, antibiotics, surgery, or hearing aids.</p>
                    `
                },
                'sensorineural': {
                    title: 'Sensorineural Hearing Loss',
                    content: `
                        <h3>üß† SENSORINEURAL HEARING LOSS</h3>
                        <p><strong>Mechanism:</strong> Pathology of inner ear, cochlear nerve, or central auditory pathways.</p>

                        <h4>Common Causes:</h4>
                        <ul>
                            <li>Presbycusis (age-related)</li>
                            <li>Noise-induced hearing loss</li>
                            <li>Sudden sensorineural hearing loss</li>
                            <li>Meniere's disease</li>
                            <li>Ototoxic drugs</li>
                            <li>Congenital/genetic</li>
                            <li>Vestibular schwannoma</li>
                            <li>Infections (meningitis, CMV)</li>
                            <li>Autoimmune inner ear disease</li>
                        </ul>

                        <h4>Clinical Features:</h4>
                        <ul>
                            <li>Rinne test: Positive (air conduction > bone conduction)</li>
                            <li>Weber test: Lateralizes to normal ear</li>
                            <li>Otoscopy usually normal</li>
                            <li>May have tinnitus, vertigo</li>
                        </ul>

                        <h4>Investigations:</h4>
                        <ul>
                            <li>Pure tone audiometry</li>
                            <li>Speech audiometry</li>
                            <li>MRI brain with IAC (if unilateral/asymmetric)</li>
                            <li>Genetic testing (if indicated)</li>
                            <li>Autoimmune panel</li>
                        </ul>

                        <h4>Management:</h4>
                        <p>Depends on cause - may include steroids, hearing aids, cochlear implants, or treatment of underlying condition.</p>
                    `
                },
                'mri': {
                    title: 'MRI Imaging',
                    content: `
                        <h3>üß≤ MRI BRAIN & INTERNAL AUDITORY CANALS</h3>
                        <p><strong>Indications:</strong> Unilateral/asymmetric sensorineural hearing loss, tinnitus, or neurological symptoms.</p>

                        <h4>Key Findings:</h4>
                        <ul>
                            <li>Vestibular schwannoma (acoustic neuroma)</li>
                            <li>Meningioma</li>
                            <li>Multiple sclerosis plaques</li>
                            <li>Stroke (brainstem, cerebellum)</li>
                            <li>Arnold-Chiari malformation</li>
                            <li>Enlarged vestibular aqueduct</li>
                        </ul>

                        <h4>Protocol:</h4>
                        <ul>
                            <li>T1-weighted with gadolinium contrast</li>
                            <li>T2-weighted high-resolution sequences</li>
                            <li>CISS/FIESTA sequences for IAC detail</li>
                        </ul>

                        <h4>When to Order:</h4>
                        <ul>
                            <li>Unilateral SNHL</li>
                            <li>Asymmetric tinnitus</li>
                            <li>Facial nerve palsy</li>
                            <li>Abnormal neurological examination</li>
                            <li>Progressive hearing loss</li>
                        </ul>
                    `
                },
                'steroids': {
                    title: 'Steroid Treatment for Sudden SNHL',
                    content: `
                        <h3>üíä STEROID PROTOCOL FOR SUDDEN SNHL</h3>
                        
                        <h4>First-line Treatment:</h4>
                        <ul>
                            <li><strong>Prednisolone:</strong> 1mg/kg/day (maximum 60mg) for 7-14 days</li>
                            <li>Start within 72 hours of symptom onset</li>
                            <li>Taper over 7-14 days if response</li>
                        </ul>

                        <h4>Contraindications:</h4>
                        <ul>
                            <li>Uncontrolled diabetes</li>
                            <li>Active infection</li>
                            <li>Recent peptic ulcer</li>
                            <li>Severe psychiatric illness</li>
                        </ul>

                        <h4>Second-line (Intratympanic):</h4>
                        <ul>
                            <li>Dexamethasone 4-24mg/ml</li>
                            <li>Methylprednisolone 30-40mg/ml</li>
                            <li>Multiple injections over weeks</li>
                        </ul>

                        <h4>Follow-up:</h4>
                        <ul>
                            <li>Repeataudiometry at 2 weeks</li>
                            <li>Consider salvage intratympanic steroids if incomplete response</li>
                            <li>MRI if no improvement to rule out retrocochlear pathology</li>
                        </ul>
                    `
                }
            };

            const detail = details[detailType];
            if (detail) {
                alert(`${detail.title}\n\n${detail.content.replace(/<[^>]*>/g, '').replace(/&bull;/g, '‚Ä¢')}`);
            } else {
                alert('Detailed information coming soon!');
            }
        }

        // Confetti effect for completion
        function confettiEffect() {
            // Simple visual feedback for 100% completion
            const body = document.querySelector('body');
            body.style.filter = 'hue-rotate(30deg)';
            setTimeout(() => {
                body.style.filter = 'none';
            }, 2000);
        }

        // Add hover effects to items
        document.querySelectorAll('.item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateX(10px) scale(1.02)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateX(0) scale(1)';
            });

            // Add click feedback
            item.addEventListener('click', function() {
                this.style.animation = 'pulse 0.5s';
                setTimeout(() => {
                    this.style.animation = '';
                }, 500);
            });
        });

        // Progress sidebar click handlers
        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', function() {
                const target = this.dataset.target;
                const targetCard = document.querySelector(`[data-step="${target}"]`);
                
                // Scroll to target
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Expand the target card
                if (!targetCard.classList.contains('expanded')) {
                    const header = targetCard.querySelector('.card-header');
                    toggleCard(header);
                }
            });
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
                navigateToNextCard();
            } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
                navigateToPreviousCard();
            } else if (e.key === 'Enter' || e.key === ' ') {
                const activeCard = document.querySelector('.card.expanded') || document.querySelector('.card');
                const header = activeCard.querySelector('.card-header');
                toggleCard(header);
            }
        });

        function navigateToNextCard() {
            const cards = Array.from(document.querySelectorAll('.card'));
            const activeCard = document.querySelector('.card.expanded');
            const currentIndex = activeCard ? cards.indexOf(activeCard) : -1;
            const nextIndex = (currentIndex + 1) % cards.length;
            
            cards[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
            setTimeout(() => {
                const header = cards[nextIndex].querySelector('.card-header');
                if (!cards[nextIndex].classList.contains('expanded')) {
                    toggleCard(header);
                }
            }, 500);
        }

        function navigateToPreviousCard() {
            const cards = Array.from(document.querySelectorAll('.card'));
            const activeCard = document.querySelector('.card.expanded');
            const currentIndex = activeCard ? cards.indexOf(activeCard) : 0;
            const prevIndex = currentIndex === 0 ? cards.length - 1 : currentIndex - 1;
            
            cards[prevIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
            setTimeout(() => {
                const header = cards[prevIndex].querySelector('.card-header');
                if (!cards[prevIndex].classList.contains('expanded')) {
                    toggleCard(header);
                }
            }, 500);
        }

        // Filter by severity
        function filterBySeverity(severity) {
            const items = document.querySelectorAll('.item');
            items.forEach(item => {
                if (item.dataset.severity === severity || severity === 'all') {
                    item.style.display = 'flex';
                    item.style.animation = 'fadeIn 0.5s';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Add filter buttons to header
        const filterButtons = document.createElement('div');
        filterButtons.className = 'severity-filters';
        filterButtons.innerHTML = `
            <button onclick="filterBySeverity('all')" style="margin: 0 5px; padding: 5px 10px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer;">All</button>
            <button onclick="filterBySeverity('urgent')" style="margin: 0 5px; padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">Urgent</button>
            <button onclick="filterBySeverity('caution')" style="margin: 0 5px; padding: 5px 10px; background: #f39c12; color: white; border: none; border-radius: 3px; cursor: pointer;">Caution</button>
            <button onclick="filterBySeverity('stable')" style="margin: 0 5px; padding: 5px 10px; background: #27ae60; color: white; border: none; border-radius: 3px; cursor: pointer;">Stable</button>
        `;
        document.querySelector('.header').appendChild(filterButtons);
    </script>
</body>
</html>