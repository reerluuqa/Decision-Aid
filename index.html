<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Medical Reference Library</title>
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    h1 { margin-bottom: 0.5rem; }
    h2 { margin-top: 2rem; }
    ul { margin-top: 0.25rem; }
  </style>
</head>
<body>
  <h1>My Medical Reference Library</h1>
  <p>General practice / primary care topics organised by system.</p>

  <div id="content"></div>

  <script>
    const categories = [
      { dir: "Endocrine-metabolic",              title: "Endocrine metabolic" },
      { dir: "GI-gastroenterology-hepatology",   title: "GI Gastroenterology hepatology" },
      { dir: "Skin-and-Nail",                    title: "Skin & Nail" },
      { dir: "ENT-and-Oral-health",              title: "ENT & Oral health" },
      { dir: "MSK-and-Rheumatology",             title: "MSK & Rheumatology" },
      { dir: "Pregnancy",                        title: "Pregnancy" },
      { dir: "Renal-Urology",                    title: "Renal Urology" },
      { dir: "Haematology",                      title: "Haematology" },
      { dir: "Allergy",                          title: "Allergy" },
      { dir: "Palliative",                       title: "Palliative" },
      { dir: "Geriatrics",                       title: "Geriatrics" },
      { dir: "Neurology",                        title: "Neurology" },
      { dir: "Cancer",                           title: "Cancer" },
      { dir: "Eyes-ophthalmology",               title: "Eyes ophthalmology" },
      { dir: "Infectious-disease",               title: "Infectious disease" },
      { dir: "Paeds",                            title: "Paeds" },
      { dir: "Mental-health",                    title: "Mental health" },
      { dir: "Cardio-respiratory",               title: "Cardio respiratory" },
      { dir: "General",                          title: "General" },
      { dir: "Womens-Health",                    title: "Women's Health" },
      { dir: "Mens-Health",                      title: "Men's Health" }
    ];

    const baseApi = "https://api.github.com/repos/reerluuqa/My-Medical-pages/contents/";

    const content = document.getElementById("content");

    categories.forEach(cat => {
      const section = document.createElement("section");
      const header = document.createElement("h2");
      header.textContent = cat.title;
      section.appendChild(header);

      const ul = document.createElement("ul");
      section.appendChild(ul);
      content.appendChild(section);

      fetch(baseApi + encodeURIComponent(cat.dir))
        .then(res => {
          if (!res.ok) { return []; }  // folder might not exist yet
          return res.json();
        })
        .then(files => {
          files
            .filter(f => f.name.endsWith(".html"))
            .forEach(file => {
              const li = document.createElement("li");
              const a = document.createElement("a");
              a.href = `${cat.dir}/${file.name}`;
              // remove .html and replace underscores with spaces for nicer titles
              a.textContent = file.name.replace(".html", "").replace(/_/g, " ");
              li.appendChild(a);
              ul.appendChild(li);
            });
        })
        .catch(err => {
          console.error("Error loading", cat.dir, err);
        });
    });
  </script>
</body>
</html>
