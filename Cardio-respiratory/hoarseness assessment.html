<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoarseness & Dysphonia Clinical Quick-Scan</title>
    <style>
        :root {
            /* Clinical Color Palette */
            --color-bg: #f4f7f6;
            --color-card-bg: #ffffff;
            --color-text-main: #2c3e50;
            --color-text-muted: #607d8b;
            
            --color-urgent-bg: #ffebee;
            --color-urgent-border: #e53935;
            --color-urgent-text: #b71c1c;

            --color-action-bg: #e8f5e9;
            --color-action-border: #43a047;
            --color-action-text: #1b5e20;

            --color-neutral-bg: #e3f2fd;
            --color-neutral-border: #1e88e5;
            --color-neutral-text: #0d47a1;

            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 15px rgba(0,0,0,0.15);
            
            --radius: 8px;
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text-main);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- Header --- */
        header {
            background: #fff;
            border-bottom: 1px solid #e0e0e0;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .brand h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-text-main);
        }

        .brand-sub {
            font-size: 0.85rem;
            color: var(--color-text-muted);
            font-weight: 400;
        }

        .search-container {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border: 1px solid #ccc;
            border-radius: 20px;
            background: #f9f9f9;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-neutral-border);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            fill: var(--color-text-muted);
        }

        /* --- Main Layout --- */
        main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        @media (max-width: 1024px) {
            main { grid-template-columns: 1fr; }
        }

        /* --- Sidebar / Critical Column --- */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .card {
            background: var(--color-card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            border: 1px solid transparent;
        }

        /* Urgent Card Styling */
        .card.urgent {
            background: var(--color-urgent-bg);
            border: 1px solid var(--color-urgent-border);
        }

        .card.urgent:hover {
            box-shadow: 0 0 0 2px rgba(229, 57, 53, 0.2);
            transform: translateY(-2px);
        }

        /* Action Card Styling */
        .card.action {
            background: var(--color-action-bg);
            border-left: 5px solid var(--color-action-border);
        }

        /* Neutral Card Styling */
        .card.neutral {
            border-top: 4px solid var(--color-neutral-border);
        }

        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .urgent h2 { color: var(--color-urgent-text); }
        .action h2 { color: var(--color-action-text); }
        .neutral h2 { color: var(--color-neutral-text); }

        .checklist {
            list-style: none;
        }

        .checklist li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.95rem;
        }

        .checklist li::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .urgent .checklist li::before { color: var(--color-urgent-text); }
        .action .checklist li::before { color: var(--color-action-text); }

        /* --- Content Area --- */
        .content-area {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #fff;
            border: 1px solid #ddd;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn:hover { background: #f0f0f0; }
        
        .filter-btn.active {
            background: var(--color-neutral-border);
            color: #fff;
            border-color: var(--color-neutral-border);
        }

        /* --- Differentials Grid --- */
        .diff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .diff-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            padding: 1.25rem;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .diff-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-3px);
            border-color: var(--color-neutral-border);
        }

        .diff-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: #ccc; /* default */
        }
        
        /* Category Colors for Top Border */
        .diff-card[data-cat="Functional"]::before { background: #9c27b0; }
        .diff-card[data-cat="Inflammatory"]::before { background: #ff9800; }
        .diff-card[data-cat="Benign"]::before { background: #4caf50; }
        .diff-card[data-cat="Neurological"]::before { background: #2196f3; }
        .diff-card[data-cat="Malignant"]::before { background: #f44336; }

        .diff-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .diff-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: #333;
        }

        .diff-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            background: #eee;
            color: #555;
            font-weight: 600;
            text-transform: uppercase;
        }

        .diff-clinical {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .diff-clinical ul {
            padding-left: 1.2rem;
            margin-top: 0.5rem;
        }

        .diff-action {
            margin-top: auto;
            padding-top: 0.75rem;
            border-top: 1px dashed #eee;
            font-size: 0.85rem;
            color: var(--color-neutral-border);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* --- Modal/Detail View --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(2px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: #fff;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            border-radius: var(--radius);
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-hover);
            transform: scale(0.95);
            transition: var(--transition);
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-neutral-bg);
            border-top-left-radius: var(--radius);
            border-top-right-radius: var(--radius);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-neutral-text);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            color: var(--color-text-muted);
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
        }

        .detail-section {
            margin-bottom: 1.5rem;
        }

        .detail-label {
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            color: var(--color-text-muted);
            margin-bottom: 0.5rem;
            display: block;
        }

        .modal-footer {
            padding: 1rem 2rem;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
        }

        /* --- Utilities --- */
        .hidden { display: none !important; }

        /* SVG Icons */
        .icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        .big-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 1rem;
            display: block;
        }

        /* Animation Keyframes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease forwards;
        }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <!-- Logo Icon -->
            <svg class="icon" viewBox="0 0 24 24" style="width:32px; height:32px; color: var(--color-neutral-border);">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
            <div>
                <h1>Hoarseness Assessment</h1>
                <span class="brand-sub">Clinical Quick-Scan Tool (BMJ Based)</span>
            </div>
        </div>
        <div class="search-container">
            <svg class="search-icon" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
            <input type="text" id="searchInput" class="search-input" placeholder="Search conditions, symptoms...">
        </div>
    </header>

    <main>
        <!-- LEFT COLUMN: Triage & Actions -->
        <aside class="sidebar">
            
            <!-- RED FLAGS -->
            <div class="card urgent fade-in" style="animation-delay: 0.1s;">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                    </svg>
                    Urgent / Red Flags
                </h2>
                <p style="font-size: 0.9rem; margin-bottom: 1rem; color: var(--color-urgent-text);">Immediate evaluation required if:</p>
                <ul class="checklist">
                    <li><strong>Airway Obstruction:</strong> Stridor, dyspnoea, respiratory distress, noisy resting breathing.</li>
                    <li><strong>Malignancy Suspect:</strong> Persistent hoarseness >4 weeks, especially in smokers/alcohol users.</li>
                    <li><strong>Associated Risks:</strong> Neck mass, dysphagia (solids/liquids), otalgia (referred pain), hemoptysis.</li>
                    <li><strong>Emergency History:</strong> Recent neck/chest surgery, intubation trauma.</li>
                </ul>
            </div>

            <!-- QUICK ACTIONS (GREEN) -->
            <div class="card action fade-in" style="animation-delay: 0.2s;">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    Standard Management
                </h2>
                <ul class="checklist">
                    <li><strong> > 4 Weeks duration:</strong> Refer for evaluation & visualisation of larynx (ENT/Otolaryngology).</li>
                    <li><strong>< 4 Weeks (No red flags):</strong> Supportive care. Hydration, voice rest, avoid irritants.</li>
                    <li><strong>Visualisation:</strong> Flexible fibre-optic nasolaryngoscopy is gold standard.</li>
                    <li><strong>Lifestyle:</strong> Smoking cessation, reduce alcohol, reflux management.</li>
                </ul>
            </div>

            <!-- REFERENCE KEY -->
            <div class="card neutral fade-in" style="animation-delay: 0.3s;">
                <h2>
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
                        <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82z"/>
                    </svg>
                    Assessment Types
                </h2>
                <div style="font-size: 0.85rem; display: grid; gap: 0.5rem;">
                    <div><strong>History:</strong> Onset, duration, vocal use, reflux, smoking.</div>
                    <div><strong>Physical:</strong> Head/Neck exam (nodes), cranial nerves.</div>
                    <div><strong>Specialist Tests:</strong> Laryngoscopy, Stroboscopy, EMG.</div>
                </div>
            </div>

        </aside>

        <!-- RIGHT COLUMN: Differentials Grid -->
        <section class="content-area">
            <div class="filters">
                <button class="filter-btn active" data-filter="all">All Conditions</button>
                <button class="filter-btn" data-filter="Functional">Functional</button>
                <button class="filter-btn" data-filter="Inflammatory">Inflammatory</button>
                <button class="filter-btn" data-filter="Benign">Benign Lesions</button>
                <button class="filter-btn" data-filter="Neurological">Neurological</button>
                <button class="filter-btn" data-filter="Malignant">Malignant</button>
            </div>

            <div class="diff-grid" id="diffGrid">
                <!-- Cards will be injected via JS -->
            </div>
        </section>
    </main>

    <!-- MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Condition Name</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalContent">
                <!-- Dynamic Content -->
            </div>
            <div class="modal-footer">
                <button class="filter-btn" style="background:var(--color-text-main); color:white;" onclick="document.getElementById('modalOverlay').classList.remove('active')">Close Reference</button>
            </div>
        </div>
    </div>

    <script>
        // --- Data Source (Condensed from PDF) ---
        const conditions = [
            {
                name: "Muscle Tension Dysphonia",
                category: "Functional",
                history: "Throat discomfort, neck tenderness, vocal fatigue, voice loss, stress, anxiety, URI, reflux.",
                exam: "Tension/tenderness in neck muscles. Visual: Anteroposterior squeeze, hypo-adduction.",
                tests: "Videostroboscopy (muscle tension patterns), Perceptual assessment.",
                action: "Voice therapy, treat reflux (LPR), stress management."
            },
            {
                name: "Acute Laryngitis",
                category: "Inflammatory",
                history: "Acute onset breathiness, weakness, fatigue. Following URI, phonotrauma, irritants.",
                exam: "Unremarkable head/neck.",
                tests: "Visual: Oedema, erythema, possible ulceration.",
                action: "Voice rest, hydration, treat infection. Usually self-limiting."
            },
            {
                name: "Chronic Laryngitis",
                category: "Inflammatory",
                history: "Roughness, altered pitch, voice breaks. Long history of URI, reflux, irritants.",
                exam: "Unremarkable head/neck.",
                tests: "Visual: Diffuse oedema/erythema, sticky exudate.",
                action: "Identify irritants, reflux management, hydration."
            },
            {
                name: "Reflux Laryngitis",
                category: "Inflammatory",
                history: "Altered pitch, chronic cough, throat clearing, globus, dysphagia, heartburn (<50%).",
                exam: "Often unremarkable physically.",
                tests: "Visual: Post-cricoid oedema, posterior commissure hypertrophy, erythema. pH monitoring.",
                action: "PPIs, diet modification, antacids, lifestyle changes."
            },
            {
                name: "Vocal Fold Nodules",
                category: "Benign",
                history: "Hoarseness, breathiness. Vocal overuse/misuse (singers, teachers). Extroverts.",
                exam: "Unremarkable neck.",
                tests: "Visual: Bilateral swellings at membranous midpoint.",
                action: "Voice therapy (primary). Surgery rarely needed."
            },
            {
                name: "Vocal Fold Polyp",
                category: "Benign",
                history: "Variable hoarseness, sudden voice change often after specific trauma.",
                exam: "Unremarkable neck.",
                tests: "Visual: Unilateral lesion, often haemorrhagic.",
                action: "Voice therapy. Surgical removal if persistent or large."
            },
            {
                name: "Vocal Fold Cyst",
                category: "Benign",
                history: "Hoarseness, diplophonia. Can be congenital or acquired (phonotrauma).",
                exam: "Unremarkable neck.",
                tests: "Visual: Submucosal mass, unilateral.",
                action: "Microsurgical excision. Voice therapy pre/post-op."
            },
            {
                name: "Reinke's Oedema",
                category: "Benign",
                history: "Low, rough voice. Heavy smoking (key factor). reflux.",
                exam: "Unremarkable neck.",
                tests: "Visual: 'Baggy' swelling along entire fold length.",
                action: "Smoking cessation (critical). Surgery for voice improvement."
            },
            {
                name: "Granuloma",
                category: "Benign",
                history: "Throat pain, foreign body sensation. History of intubation or severe reflux.",
                exam: "Unremarkable neck.",
                tests: "Visual: Grey/red mass on vocal process of arytenoid (unilateral/bilateral).",
                action: "Treat reflux/irritants. Botox or surgery if refractory."
            },
            {
                name: "Vocal Fold Paralysis (Unilateral)",
                category: "Neurological",
                history: "Breathiness, weak cough, aspiration. Neck/chest surgery, tumors, idiopathic.",
                exam: "Unilateral oral/facial weakness possible.",
                tests: "Visual: Immobile fold. CT Chest/Neck to identify cause (nerve path).",
                action: "Treat underlying cause. Voice therapy or medialization (injection/fat)."
            },
            {
                name: "Vocal Fold Paralysis (Bilateral)",
                category: "Neurological",
                history: "Airway obstruction, stridor (inspiratory). Thyroidectomy complication.",
                exam: "Respiratory distress signs.",
                tests: "Visual: Both folds midline or paramedian.",
                action: "Secure airway (tracheostomy if needed). Cordotomy or arytenoidectomy later."
            },
            {
                name: "Spasmodic Dysphonia",
                category: "Neurological",
                history: "Strained, jerky, breaks in voice. Adductor (strained) vs Abductor (breathy) types.",
                exam: "Normal head/neck.",
                tests: "Visual: Hyperadduction (adductor type) or excessive abduction (abductor type).",
                action: "Botox injections (gold standard). Voice therapy."
            },
            {
                name: "Parkinson's Disease (Hypokinetic)",
                category: "Neurological",
                history: "Reduced loudness, monotone, fast speech rate, imprecise articulation.",
                exam: "Masked facies, tremor, rigidity, shuffling gait.",
                tests: "Visual: Reduced vocal fold movement, bowing.",
                action: "LSVT LOUD speech therapy. Medication adjustment."
            },
            {
                name: "Vocal Fold Cancer (SCC)",
                category: "Malignant",
                history: "Persistent hoarseness, throat pain, otalgia, dysphagia, weight loss. Smoker/Drinker.",
                exam: "Cervical lymphadenopathy (neck mass).",
                tests: "Visual: Leukoplakia, exophytic mass, ulceration. Biopsy mandatory. CT/MRI.",
                action: "Urgent referral to Head & Neck Cancer MD. Radiotherapy/Surgery."
            },
            {
                name: "Leukoplakia",
                category: "Malignant",
                history: "Often asymptomatic or hoarseness. Pre-malignant. Smoking/Alcohol.",
                exam: "White patch on visual exam.",
                tests: "Visual: White plaque on vocal folds. Biopsy to rule out dysplasia/cancer.",
                action: "Smoking cessation. Biopsy/Stripping. Surveillance."
            },
            {
                name: "Recurrent Respiratory Papilloma",
                category: "Malignant", // Technically Benign but behaves aggressively/obstructive, often grouped with urgent
                history: "Hoarseness, stridor. HPV infection. Can be severe in infants/children.",
                exam: "Stridor if airway compromised.",
                tests: "Visual: Exophytic, wart-like lesions. Biopsy.",
                action: "Surgical debulking (microdebrider/laser). Cidofovir/Bevacizumab."
            }
        ];

        // --- DOM Elements ---
        const grid = document.getElementById('diffGrid');
        const filterBtns = document.querySelectorAll('.filter-btn[data-filter]');
        const searchInput = document.getElementById('searchInput');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const closeModal = document.getElementById('closeModal');

        // --- Render Grid ---
        function renderGrid(filter = 'all', searchTerm = '') {
            grid.innerHTML = '';
            
            const filtered = conditions.filter(c => {
                const matchesCategory = filter === 'all' || c.category === filter;
                const matchesSearch = c.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                      c.history.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                      c.category.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            if(filtered.length === 0) {
                grid.innerHTML = `<div style="grid-column: 1/-1; text-align: center; color: #888; padding: 2rem;">No conditions found matching criteria.</div>`;
                return;
            }

            filtered.forEach((c, index) => {
                const card = document.createElement('div');
                card.className = 'diff-card fade-in';
                card.style.animationDelay = `${index * 0.05}s`;
                card.dataset.cat = c.category;
                
                // Get short snippet for history
                const shortHistory = c.history.split('.')[0] + '.';

                card.innerHTML = `
                    <div class="diff-header">
                        <div class="diff-title">${c.name}</div>
                        <div class="diff-badge">${c.category}</div>
                    </div>
                    <div class="diff-clinical">
                        <strong>Clinical Clue:</strong>
                        <ul>
                            <li>${shortHistory}</li>
                        </ul>
                    </div>
                    <div class="diff-action">
                        <svg class="icon" viewBox="0 0 24 24" style="width:16px;height:16px;">
                            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                        </svg>
                        View Details
                    </div>
                `;

                card.addEventListener('click', () => openModal(c));
                grid.appendChild(card);
            });
        }

        // --- Modal Logic ---
        function openModal(data) {
            modalTitle.textContent = data.name;
            modalContent.innerHTML = `
                <div class="detail-section">
                    <span class="detail-label">Category</span>
                    <span class="diff-badge" style="font-size:0.9rem; padding:0.3rem 0.8rem;">${data.category}</span>
                </div>
                <div class="detail-section">
                    <span class="detail-label">History / Symptoms</span>
                    <p>${data.history}</p>
                </div>
                <div class="detail-section">
                    <span class="detail-label">Physical Exam Findings</span>
                    <p>${data.exam}</p>
                </div>
                <div class="detail-section">
                    <span class="detail-label">Diagnostic Tests / Visuals</span>
                    <p>${data.tests}</p>
                </div>
                <div class="detail-section" style="background: var(--color-action-bg); padding: 1rem; border-radius: 6px; border-left: 4px solid var(--color-action-border);">
                    <span class="detail-label" style="color:var(--color-action-text);">Primary Management</span>
                    <p style="font-weight:600; color:var(--color-action-text); margin-top:0.25rem;">${data.action}</p>
                </div>
            `;
            modalOverlay.classList.add('active');
        }

        closeModal.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
        });

        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
            }
        });

        // --- Filters & Search ---
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderGrid(btn.dataset.filter, searchInput.value);
            });
        });

        searchInput.addEventListener('input', (e) => {
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
            renderGrid(activeFilter, e.target.value);
        });

        // --- Init ---
        renderGrid();

    </script>
</body>
</html>