<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Rapid Reference: Chronic Cough Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --emergency-red: #dc2626;
            --emergency-red-light: #fef2f2;
            --emergency-red-hover: #b91c1c;
            --safe-green: #16a34a;
            --safe-green-light: #f0fdf4;
            --safe-green-hover: #15803d;
            --info-blue: #2563eb;
            --info-blue-light: #eff6ff;
            --neutral-bg: #f8fafc;
            --neutral-border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-light: #64748b;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--neutral-bg);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
        }

        /* Sticky Header */
        .header {
            position: sticky;
            top: 0;
            background: var(--info-blue);
            color: var(--white);
            padding: 1rem 2rem;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header h1 {
            font-size: 1.25rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .reset-btn {
            background: var(--white);
            color: var(--info-blue);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .reset-btn:hover {
            background: var(--neutral-bg);
            transform: translateY(-1px);
        }

        .disclaimer {
            font-size: 0.75rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Emergency Banner */
        .emergency-banner {
            background: var(--emergency-red);
            color: var(--white);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            animation: pulse-border 2s infinite;
            position: relative;
            overflow: hidden;
        }

        @keyframes pulse-border {
            0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(220, 38, 38, 0); }
        }

        .emergency-banner::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            opacity: 0.3;
        }

        .emergency-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .emergency-header h2 {
            font-size: 1.25rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .red-flag-checklist {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 0.75rem;
        }

        .red-flag-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .red-flag-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateX(4px);
        }

        .red-flag-item.checked {
            background: var(--safe-green);
            border-color: var(--white);
        }

        .red-flag-item input {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--safe-green);
        }

        .red-flag-item label {
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .urgent-alert {
            display: none;
            background: var(--white);
            color: var(--emergency-red);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 700;
            text-align: center;
            animation: slideIn 0.3s ease;
        }

        .urgent-alert.show {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Main Content Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 900px) {
            .main-grid {
                grid-template-columns: 3fr 2fr;
            }
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 12px;
            border: 1px solid var(--neutral-border);
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--neutral-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .card-header:hover {
            background: var(--neutral-bg);
        }

        .card-header h3 {
            font-size: 1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-header .toggle-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            font-size: 1.25rem;
            color: var(--text-secondary);
        }

        .card.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .card-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.3s ease;
        }

        .card.expanded .card-content {
            max-height: 2000px;
            padding: 1.25rem;
        }

        .card-body {
            padding: 1.25rem;
        }

        /* Section Headers */
        .section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        /* Info Banner */
        .info-banner {
            background: var(--info-blue-light);
            border-left: 4px solid var(--info-blue);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-bottom: 1.25rem;
        }

        .info-banner p {
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .info-banner strong {
            color: var(--info-blue);
        }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        @media (min-width: 600px) {
            .two-col {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Definition Box */
        .definition-box {
            background: var(--info-blue);
            color: var(--white);
            padding: 1.25rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }

        .definition-box h3 {
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
            opacity: 0.9;
        }

        .definition-box p {
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Algorithm Timeline */
        .algorithm-timeline {
            position: relative;
            padding-left: 2rem;
        }

        .algorithm-timeline::before {
            content: '';
            position: absolute;
            left: 0.75rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--neutral-border);
        }

        .algorithm-step {
            position: relative;
            padding: 1rem;
            background: var(--neutral-bg);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .algorithm-step:hover {
            background: var(--info-blue-light);
            transform: translateX(4px);
        }

        .algorithm-step::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 1.25rem;
            width: 12px;
            height: 12px;
            background: var(--info-blue);
            border-radius: 50%;
            border: 2px solid var(--white);
            box-shadow: 0 0 0 2px var(--info-blue);
        }

        .algorithm-step .step-number {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--info-blue);
            text-transform: uppercase;
            margin-bottom: 0.25rem;
        }

        .algorithm-step h4 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .algorithm-step p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Cause Cards */
        .cause-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .cause-card {
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid;
            transition: all 0.3s ease;
        }

        .cause-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .cause-card.common {
            background: var(--info-blue-light);
            border-color: var(--info-blue);
        }

        .cause-card.less-common {
            background: var(--neutral-bg);
            border-color: var(--text-light);
        }

        .cause-card.drug {
            background: #fef3c7;
            border-color: #d97706;
        }

        .cause-card h4 {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cause-card p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .data-table th {
            background: var(--info-blue);
            color: var(--white);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--neutral-border);
        }

        .data-table tr:nth-child(even) {
            background: var(--neutral-bg);
        }

        .data-table tr:hover {
            background: var(--info-blue-light);
        }

        /* Action Buttons */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .action-btn {
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .action-btn.refer {
            background: var(--emergency-red-light);
            border-color: var(--emergency-red);
            color: var(--emergency-red);
        }

        .action-btn.treat {
            background: var(--info-blue-light);
            border-color: var(--info-blue);
            color: var(--info-blue);
        }

        .action-btn.observe {
            background: var(--safe-green-light);
            border-color: var(--safe-green);
            color: var(--safe-green);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            text-decoration: underline dotted;
            text-decoration-thickness: 2px;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: var(--white);
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 100;
            font-weight: 400;
            text-decoration: none;
        }

        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 5px);
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .badge-emergency {
            background: var(--emergency-red);
            color: var(--white);
        }

        .badge-common {
            background: var(--info-blue);
            color: var(--white);
        }

        .badge-urgent {
            background: #f59e0b;
            color: var(--white);
        }

        /* Highlight Box */
        .highlight-box {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .highlight-box.positive {
            background: var(--safe-green-light);
            border: 2px solid var(--safe-green);
        }

        .highlight-box.positive h4 {
            color: var(--safe-green);
            margin-bottom: 0.5rem;
        }

        .highlight-box.caution {
            background: #fef3c7;
            border: 2px solid #f59e0b;
        }

        .highlight-box.caution h4 {
            color: #b45309;
            margin-bottom: 0.5rem;
        }

        /* List Styles */
        .checklist {
            list-style: none;
        }

        .checklist li {
            padding: 0.5rem 0;
            padding-left: 1.75rem;
            position: relative;
            border-bottom: 1px solid var(--neutral-border);
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checklist li::before {
            content: '‚òê';
            position: absolute;
            left: 0;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist li.checked::before {
            content: '‚òë';
            color: var(--safe-green);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .header h1 {
                font-size: 1rem;
            }

            .container {
                padding: 1rem;
            }

            .emergency-banner {
                padding: 1rem;
            }

            .red-flag-checklist {
                grid-template-columns: 1fr;
            }

            .definition-box p {
                font-size: 1rem;
            }
        }

        /* Print Styles */
        @media print {
            .header {
                position: static;
            }

            .card.expanded .card-content {
                max-height: none;
            }

            .emergency-banner {
                animation: none;
            }

            .reset-btn {
                display: none;
            }
        }

        /* Diagnostic Pointer */
        .diagnostic-pointer {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            background: var(--info-blue-light);
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .diagnostic-pointer .icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .diagnostic-pointer h4 {
            color: var(--info-blue);
            margin-bottom: 0.25rem;
        }

        .diagnostic-pointer p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Therapeutic Trial Box */
        .trial-box {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .trial-box h4 {
            font-size: 0.875rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .trial-box p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .trial-box.uacs {
            background: #ede9fe;
            border: 2px solid #7c3aed;
        }

        .trial-box.asthma {
            background: #dbeafe;
            border: 2px solid #2563eb;
        }

        .trial-box.gerd {
            background: #fef3c7;
            border: 2px solid #d97706;
        }

        /* Footer */
        .footer {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 12px;
            border: 1px solid var(--neutral-border);
            text-align: center;
        }

        .footer p {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>üè• Clinical Rapid Reference: Chronic Cough Assessment</h1>
        <div class="header-actions">
            <span class="disclaimer">Clinical Decision Support Tool</span>
            <button class="reset-btn" onclick="resetAll()">‚Ü∫ Reset</button>
        </div>
    </header>

    <main class="container">
        <!-- EMERGENCY SECTION - Red Flags -->
        <section class="emergency-banner" id="emergency-section">
            <div class="emergency-header">
                <h2>üö® Red Flags - Immediate Action Required</h2>
            </div>
            <p style="margin-bottom: 1rem; opacity: 0.95;">Check any red flags present. <strong>Any checked item requires urgent evaluation.</strong></p>
            <div class="red-flag-checklist">
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf1">
                    <label for="rf1">Hemoptysis</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf2">
                    <label for="rf2">Significant weight loss</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf3">
                    <label for="rf3">Dyspnea at rest</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf4">
                    <label for="rf4">Chest pain (new onset)</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf5">
                    <label for="rf5">Fever ‚â•38¬∞C</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf6">
                    <label for="rf6">Immunosuppressed status</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf7">
                    <label for="rf7">Hoarseness >3 weeks</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf8">
                    <label for="rf8">Finger clubbing</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf9">
                    <label for="rf9">Stridor</label>
                </div>
                <div class="red-flag-item" onclick="toggleRedFlag(this)">
                    <input type="checkbox" id="rf10">
                    <label for="rf10">Suspected foreign body</label>
                </div>
            </div>
            <div class="urgent-alert" id="urgent-alert">
                ‚ö†Ô∏è URGENT: One or more red flags detected. Prioritize immediate evaluation. Consider chest X-ray, urgent referral, or emergency department referral depending on severity.
            </div>
        </section>

        <!-- MAIN CONTENT GRID -->
        <div class="main-grid">
            <!-- Left Column - Assessment -->
            <div class="left-column">
                <!-- Definition -->
                <div class="definition-box">
                    <h3>Definition & Duration</h3>
                    <p><strong>Chronic Cough:</strong> >8 weeks in adults | >4 weeks in children</p>
                </div>

                <!-- Assessment Algorithm -->
                <div class="card" id="algorithm-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üìã Assessment Algorithm</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="algorithm-timeline">
                            <div class="algorithm-step" onclick="highlightCause('history')">
                                <div class="step-number">Step 1</div>
                                <h4>Detailed History</h4>
                                <p>Onset, triggers, associated symptoms, smoking, medications, exposures, prior atopy</p>
                            </div>
                            <div class="algorithm-step" onclick="highlightCause('exam')">
                                <div class="step-number">Step 2</div>
                                <h4>Physical Examination</h4>
                                <p>Vitals, lung sounds, ENT exam, signs of systemic disease</p>
                            </div>
                            <div class="algorithm-step" onclick="highlightCause('cxr')">
                                <div class="step-number">Step 3</div>
                                <h4>Chest X-Ray</h4>
                                <p><strong>Essential early test</strong> - Rules out structural lung disease, cancer, TB</p>
                            </div>
                            <div class="algorithm-step" onclick="highlightCause('testing')">
                                <div class="step-number">Step 4</div>
                                <h4>Targeted Testing</h4>
                                <p>Spirometry, FeNO, sputum studies, pH monitoring based on clinical suspicion</p>
                            </div>
                            <div class="algorithm-step" onclick="highlightCause('trial')">
                                <div class="step-number">Step 5</div>
                                <h4>Therapeutic Trials</h4>
                                <p>Treat common causes sequentially if testing unavailable or equivocal</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Common Causes -->
                <div class="card" id="causes-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üîç Most Common Causes</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="info-banner">
                            <p><strong>Remember:</strong> In non-smokers with normal CXR not on ACEi, <strong>80-90%</strong> have one of these four:</p>
                        </div>
                        <div class="cause-grid">
                            <div class="cause-card common" id="cause-uacs" data-cause="history">
                                <h4>üëÉ UACS</h4>
                                <p class="badge badge-common">Most Common</p>
                                <p>Upper Airway Cough Syndrome (Postnasal drip)</p>
                                <p style="margin-top: 0.5rem; font-size: 0.75rem;">Throat clearing, nasal symptoms, drip sensation</p>
                            </div>
                            <div class="cause-card common" id="cause-asthma">
                                <h4>üå¨Ô∏è Asthma</h4>
                                <p class="badge badge-common">Common</p>
                                <p>Including cough-variant asthma</p>
                                <p style="margin-top: 0.5rem; font-size: 0.75rem;">Wheeze, dyspnea, nocturnal cough, trigger-based</p>
                            </div>
                            <div class="cause-card common" id="cause-gerd">
                                <h4>üî• GORD</h4>
                                <p class="badge badge-common">Common</p>
                                <p>Gastro-oesophageal Reflux Disease</p>
                                <p style="margin-top: 0.5rem; font-size: 0.75rem;">Heartburn, cough on lying down, silent in 75%</p>
                            </div>
                            <div class="cause-card common" id="cause-naeb">
                                <h4>‚ö° NAEB</h4>
                                <p class="badge badge-common">Common</p>
                                <p>Non-asthmatic Eosinophilic Bronchitis</p>
                                <p style="margin-top: 0.5rem; font-size: 0.75rem;">Eosinophilic inflammation without asthma features</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Therapeutic Trials -->
                <div class="card" id="trials-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üíä Therapeutic Trials</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="two-col">
                            <div class="trial-box uacs">
                                <h4>üëÉ UACS Trial</h4>
                                <p><strong>Antihistamine + Decongestant</strong></p>
                                <p>Failure ‚Üí ENT referral + Sinus CT</p>
                            </div>
                            <div class="trial-box asthma">
                                <h4>üå¨Ô∏è Asthma/NAEB Trial</h4>
                                <p><strong>Inhaled Corticosteroid 2-4 weeks</strong></p>
                                <p>Check FeNO, blood/sputum eosinophils</p>
                            </div>
                            <div class="trial-box gerd">
                                <h4>üî• GORD Trial</h4>
                                <p><strong>PPI for 8-12 weeks</strong></p>
                                <p>Consider pH monitoring if refractory</p>
                            </div>
                        </div>
                        <div class="highlight-box positive">
                            <h4>‚úì Positive Response</h4>
                            <p>Resolution of cough confirms etiology. If partial response, consider multiple causes and continue successful therapy while investigating other possibilities.</p>
                        </div>
                    </div>
                </div>

                <!-- Diagnostic Testing -->
                <div class="card" id="testing-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üî¨ Diagnostic Testing</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="diagnostic-pointer">
                            <span class="icon">üì∑</span>
                            <div>
                                <h4>Chest X-Ray - First Line</h4>
                                <p>Essential in all chronic cough patients. Can rapidly identify serious pathology including lung cancer, TB, bronchiectasis, fibrosis, pneumonia, or sarcoidosis requiring urgent intervention.</p>
                            </div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Test</th>
                                    <th>Indication</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Spirometry</strong></td>
                                    <td>Suspected asthma or COPD</td>
                                </tr>
                                <tr>
                                    <td><strong>FeNO</strong></td>
                                    <td>Eosinophilic airway inflammation</td>
                                </tr>
                                <tr>
                                    <td><strong>Sputum Culture</strong></td>
                                    <td>Productive cough, suspected infection</td>
                                </tr>
                                <tr>
                                    <td><strong>HRCT Chest</strong></td>
                                    <td>Normal CXR, suspect bronchiectasis/fibrosis</td>
                                </tr>
                                <tr>
                                    <td><strong>Bronchoscopy</strong></td>
                                    <td>Suspected foreign body, endobronchial lesion</td>
                                </tr>
                                <tr>
                                    <td><strong>pH Monitoring</strong></td>
                                    <td>Suspected silent GORD</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Right Column - Quick Reference -->
            <div class="right-column">
                <!-- When to Refer -->
                <div class="card" id="refer-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üöë When to Escalate/Refer</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="highlight-box caution">
                            <h4>‚ö†Ô∏è Immediate Actions</h4>
                            <ul class="checklist">
                                <li onclick="toggleCheck(this)">Abnormal CXR findings</li>
                                <li onclick="toggleCheck(this)">Suspected lung cancer</li>
                                <li onclick="toggleCheck(this)">Severe asthma exacerbation</li>
                                <li onclick="toggleCheck(this)">Active TB suspected</li>
                                <li onclick="toggleCheck(this)">Unexplained hemoptysis</li>
                            </ul>
                        </div>
                        <div class="action-grid">
                            <div class="action-btn refer" onclick="showReferMessage(this)">
                                üè• Pulmonary<br>Referral
                            </div>
                            <div class="action-btn refer" onclick="showReferMessage(this)">
                                üëÇ ENT<br>Referral
                            </div>
                            <div class="action-btn treat" onclick="showReferMessage(this)">
                                üíä GI/GORD<br>Specialist
                            </div>
                        </div>
                        <p style="margin-top: 1rem; font-size: 0.8rem; color: var(--text-secondary); text-align: center;">Click referral buttons for details</p>
                    </div>
                </div>

                <!-- Less Common Causes -->
                <div class="card" id="less-common-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üìö Less Common Causes</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="cause-grid" style="grid-template-columns: 1fr;">
                            <div class="cause-card less-common">
                                <h4>üíä ACE Inhibitor</h4>
                                <p>Dry cough, tickling sensation. Stops within 1-4 weeks of cessation (up to 3 months).</p>
                            </div>
                            <div class="cause-card less-common">
                                <h4>ü´Å Interstitial Lung Disease</h4>
                                <p>Progressive dyspnea, dry crackles, clubbing. Restrictive PFT pattern.</p>
                            </div>
                            <div class="cause-card less-common">
                                <h4>ü¶† Tuberculosis</h4>
                                <p>Night sweats, weight loss, endemic exposure. CXR findings + sputum culture.</p>
                            </div>
                            <div class="cause-card less-common">
                                <h4>üí® Pertussis</h4>
                                <p>Paroxysmal cough, whoop, post-tussive vomiting. Macrolide treatment.</p>
                            </div>
                            <div class="cause-card less-common">
                                <h4>üò¥ Obstructive Sleep Apnea</h4>
                                <p>Snoring, witnessed apneas, nocturnal cough. Consider polysomnography.</p>
                            </div>
                            <div class="cause-card less-common">
                                <h4>üé§ Voice Professionals</h4>
                                <p>Teachers, singers, call center workers. Hoarseness + chronic cough.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key History Points -->
                <div class="card" id="history-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üìù Key History Checklist</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <ul class="checklist">
                            <li onclick="toggleCheck(this)"><strong>Onset:</strong> When did cough start? Acute vs gradual?</li>
                            <li onclick="toggleCheck(this)"><strong>Character:</strong> Dry vs productive? Frequency?</li>
                            <li onclick="toggleCheck(this)"><strong>Triggers:</strong> Allergens, cold air, exercise, lying down?</li>
                            <li onclick="toggleCheck(this)"><strong>Associated:</strong> Dyspnea, wheeze, heartburn, postnasal drip?</li>
                            <li onclick="toggleCheck(this)"><strong>Smoking:</strong> Current/former? Pack-years?</li>
                            <li onclick="toggleCheck(this)"><strong>Medications:</strong> ACE inhibitors? Betablockers?</li>
                            <li onclick="toggleCheck(this)"><strong>Occupational:</strong> Exposures, dust, chemicals?</li>
                            <li onclick="toggleCheck(this)"><strong>Travel:</strong> TB-endemic areas? Fungal exposures?</li>
                            <li onclick="toggleCheck(this)"><strong>Prior trials:</strong> What treatments tried? Response?</li>
                        </ul>
                    </div>
                </div>

                <!-- Drug Causes -->
                <div class="card" id="drug-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üíä Drug-Induced Cough</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="cause-card drug" style="margin-bottom: 1rem;">
                            <h4>‚ö†Ô∏è ACE Inhibitors</h4>
                            <p>Most common drug cause. Incidence varies; more common in women and older adults. Mechanism: accumulation of bradykinin and substance P.</p>
                            <p style="margin-top: 0.5rem;"><strong>Action:</strong> Discontinue if suspected. Cough typically resolves within 1-4 weeks (up to 3 months).</p>
                        </div>
                        <div class="highlight-box positive">
                            <h4>‚úì Important Note</h4>
                            <p>Angiotensin Receptor Blockers (ARBs) do NOT significantly cause cough and are a reasonable alternative if ACE inhibitor is essential.</p>
                        </div>
                    </div>
                </div>

                <!-- Special Populations -->
                <div class="card" id="special-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>üë∂ Special Populations</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <table class="data-table" style="font-size: 0.8rem;">
                            <thead>
                                <tr>
                                    <th>Population</th>
                                    <th>Key Considerations</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Children (‚â§14 yrs)</strong></td>
                                    <td>Different causes than adults. Consider foreign body, TB, pertussis</td>
                                </tr>
                                <tr>
                                    <td><strong>Elderly</strong></td>
                                    <td>Higher lung cancer risk. More likely to have multiple etiologies</td>
                                </tr>
                                <tr>
                                    <td><strong>Immunocompromised</strong></td>
                                    <td>Lower threshold for infectious workup. Consider PCP, fungal disease</td>
                                </tr>
                                <tr>
                                    <td><strong>Smokers</strong></td>
                                    <td>COPD, lung cancer higher priority. CXR essential</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card" id="actions-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3>‚ö° Quick Actions Summary</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="action-grid" style="grid-template-columns: 1fr 1fr;">
                            <div class="action-btn observe" onclick="showReferMessage(this)">
                                üëÅÔ∏è Watchful<br>Waiting
                            </div>
                            <div class="action-btn treat" onclick="showReferMessage(this)">
                                üí® Inhaler<br>Trial
                            </div>
                            <div class="action-btn treat" onclick="showReferMessage(this)">
                                üíä PPI<br>Trial
                            </div>
                            <div class="action-btn refer" onclick="showReferMessage(this)">
                                üì∑ Order<br>CXR
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p><strong>Disclaimer:</strong> This tool is for clinical decision support only. Always exercise clinical judgment and refer to current guidelines. Last updated based on BMJ Best Practice guidelines.</p>
            <p style="margin-top: 0.5rem;">Clinical Rapid Reference - Chronic Cough Assessment</p>
        </footer>
    </main>

    <script>
        // Toggle card expansion
        function toggleCard(header) {
            const card = header.parentElement;
            card.classList.toggle('expanded');
        }

        // Toggle red flag checkbox
        function toggleRedFlag(item) {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            item.classList.toggle('checked', checkbox.checked);
            checkRedFlags();
        }

        // Check for any red flags checked
        function checkRedFlags() {
            const checkedItems = document.querySelectorAll('.red-flag-item input:checked');
            const urgentAlert = document.getElementById('urgent-alert');
            
            if (checkedItems.length > 0) {
                urgentAlert.classList.add('show');
                document.getElementById('emergency-section').style.boxShadow = '0 0 0 4px #dc2626';
            } else {
                urgentAlert.classList.remove('show');
                document.getElementById('emergency-section').style.boxShadow = 'none';
            }
        }

        // Toggle checklist items
        function toggleCheck(li) {
            li.classList.toggle('checked');
        }

        // Highlight cause card based on algorithm step
        function highlightCause(cause) {
            // Remove previous highlights
            document.querySelectorAll('.cause-card').forEach(card => {
                card.style.transform = '';
                card.style.boxShadow = '';
                card.style.borderWidth = '2px';
            });

            // Map algorithm steps to cause cards
            const causeMap = {
                'history': 'cause-uacs',
                'exam': null,
                'cxr': null,
                'testing': null,
                'trial': null
            };

            const cardId = causeMap[cause];
            if (cardId) {
                const card = document.getElementById(cardId);
                if (card) {
                    card.style.transform = 'translateY(-4px)';
                    card.style.boxShadow = '0 8px 20px rgba(0, 0, 0, 0.15)';
                    card.style.borderWidth = '3px';
                }
            }

            // Reset after 2 seconds
            setTimeout(() => {
                document.querySelectorAll('.cause-card').forEach(card => {
                    card.style.transform = '';
                    card.style.boxShadow = '';
                    card.style.borderWidth = '2px';
                });
            }, 2000);
        }

        // Show referral message
        function showReferMessage(btn) {
            const messages = {
                'refer': 'Consider pulmonary/ENT referral for: abnormal imaging, refractory cough >8 weeks, suspected malignancy, or complex cases requiring specialist evaluation.',
                'treat': 'Initiate appropriate therapeutic trial based on clinical suspicion. Assess response in 2-4 weeks. Consider combination therapy if partial response.',
                'observe': 'Watchful waiting appropriate for post-infectious cough &lt;8 weeks, mild symptoms, or while awaiting test results.',
                'default': 'Order chest X-ray as first-line investigation for all patients with chronic cough unless recently performed.'
            };

            // Find closest action type
            let type = 'default';
            if (btn.classList.contains('refer')) type = 'refer';
            else if (btn.classList.contains('treat')) type = 'treat';
            else if (btn.classList.contains('observe')) type = 'observe';

            alert(messages[type]);
        }

        // Reset all selections
        function resetAll() {
            // Uncheck all red flags
            document.querySelectorAll('.red-flag-item').forEach(item => {
                item.classList.remove('checked');
                item.querySelector('input[type="checkbox"]').checked = false;
            });
            checkRedFlags();

            // Uncheck all checklists
            document.querySelectorAll('.checklist li').forEach(li => {
                li.classList.remove('checked');
            });

            // Collapse all cards
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('expanded');
            });

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set up checkbox listeners
            document.querySelectorAll('.red-flag-item input').forEach(checkbox => {
                checkbox.addEventListener('change', checkRedFlags);
            });

            // Auto-expand first few cards for better UX
            document.getElementById('algorithm-card').classList.add('expanded');
            document.getElementById('causes-card').classList.add('expanded');
        });
    </script>
</body>
</html>
