<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neurally Mediated Reflex Syncope - Interactive Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        /* Progress Sidebar */
        .progress-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 80px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            z-index: 1000;
            box-shadow: 2px 0 20px rgba(0,0,0,0.1);
        }

        .progress-step {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            background: #ddd;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .progress-step.active {
            background: #4CAF50;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .progress-step.completed {
            background: #2196F3;
        }

        .progress-step:hover {
            transform: scale(1.15);
        }

        .progress-line {
            width: 3px;
            height: 40px;
            background: #ddd;
            margin: -10px 0;
            transition: all 0.3s ease;
        }

        .progress-line.active {
            background: #4CAF50;
        }

        /* Main Content */
        .main-content {
            margin-left: 100px;
            padding: 40px 20px;
            flex: 1;
            max-width: calc(100% - 120px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Cards Container */
        .cards-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Individual Cards */
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--card-color);
        }

        .card.assessment {
            --card-color: #FF6B6B;
        }

        .card.diagnosis {
            --card-color: #4ECDC4;
        }

        .card.treatment {
            --card-color: #45B7D1;
        }

        .card.followup {
            --card-color: #96CEB4;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .card-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: var(--card-color);
        }

        .card-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            flex: 1;
        }

        .expand-icon {
            font-size: 1.5rem;
            color: #999;
            transition: transform 0.3s ease;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .card.expanded .card-content {
            max-height: 1000px;
        }

        /* Badges */
        .badges {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.urgent {
            background: #FF4444;
            color: white;
        }

        .badge.caution {
            background: #FFA726;
            color: white;
        }

        .badge.stable {
            background: #66BB6A;
            color: white;
        }

        /* Content Sections */
        .content-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--card-color);
        }

        .content-section h3 {
            color: var(--card-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .content-section ul {
            list-style: none;
            padding-left: 0;
        }

        .content-section li {
            margin: 8px 0;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            position: relative;
            padding-left: 20px;
        }

        .content-section li::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: var(--card-color);
            font-size: 0.8rem;
        }

        .content-section li:last-child {
            border-bottom: none;
        }

        /* Interactive Elements */
        .interactive-element {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .interactive-element:hover {
            border-color: var(--card-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .interactive-element.selected {
            border-color: var(--card-color);
            background: rgba(var(--card-color-rgb), 0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .progress-sidebar {
                width: 60px;
            }
            
            .main-content {
                margin-left: 80px;
                max-width: calc(100% - 100px);
                padding: 20px 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .card-title {
                font-size: 1.5rem;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Sidebar -->
        <div class="progress-sidebar">
            <div class="progress-step active" data-step="assessment" title="Assessment">
                üìã
            </div>
            <div class="progress-line" id="line1"></div>
            <div class="progress-step" data-step="diagnosis" title="Diagnosis">
                üîç
            </div>
            <div class="progress-line" id="line2"></div>
            <div class="progress-step" data-step="treatment" title="Treatment">
                üíä
            </div>
            <div class="progress-line" id="line3"></div>
            <div class="progress-step" data-step="followup" title="Follow-up">
                üìà
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1>Neurally Mediated Reflex Syncope</h1>
                <p>Interactive Clinical Decision Algorithm</p>
            </div>

            <div class="cards-container">
                <!-- Assessment Card -->
                <div class="card assessment expanded" id="assessment">
                    <div class="card-header" onclick="toggleCard('assessment')">
                        <div class="card-icon">üìã</div>
                        <div class="card-title">Initial Assessment</div>
                        <div class="expand-icon">‚ñº</div>
                    </div>
                    <div class="card-content">
                        <div class="badges">
                            <span class="badge urgent">Red Flags</span>
                            <span class="badge caution">Risk Stratification</span>
                            <span class="badge stable">Low Risk</span>
                        </div>
                        
                        <div class="content-section">
                            <h3>Key Assessment Points</h3>
                            <ul>
                                <li>Detailed description of symptomatic events</li>
                                <li>Presence of structural heart disease (ECG, echocardiogram)</li>
                                <li>Clinical features suggesting specific diagnosis</li>
                                <li>Risk stratification for serious conditions</li>
                            </ul>
                        </div>

                        <div class="content-section">
                            <h3>Red Flags - Urgent Referral</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üö® Severe structural heart disease</strong><br>
                                LV dysfunction, severe valvular disease, hypertrophic cardiomyopathy
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üö® ECG abnormalities</strong><br>
                                Long QT, QRS >120ms, AV block, bundle branch block
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üö® Exertional syncope</strong><br>
                                Syncope during exercise or in supine position
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Low Risk Features</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚úÖ Vasovagal trigger</strong><br>
                                Prolonged standing, emotional stress, pain, warm environment
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚úÖ Prodromal symptoms</strong><br>
                                Nausea, diaphoresis, warmth, lightheadedness
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚úÖ Absence of heart disease</strong><br>
                                Normal ECG, no structural abnormalities
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Diagnosis Card -->
                <div class="card diagnosis" id="diagnosis">
                    <div class="card-header" onclick="toggleCard('diagnosis')">
                        <div class="card-icon">üîç</div>
                        <div class="card-title">Diagnostic Workup</div>
                        <div class="expand-icon">‚ñº</div>
                    </div>
                    <div class="card-content">
                        <div class="badges">
                            <span class="badge urgent">Immediate Tests</span>
                            <span class="badge caution">Consider if Needed</span>
                            <span class="badge stable">Routine</span>
                        </div>

                        <div class="content-section">
                            <h3>Essential Tests</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üìä 12-lead ECG</strong><br>
                                Rule out arrhythmias, conduction blocks, structural abnormalities
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>ü©∏ Basic labs</strong><br>
                                Hemoglobin, glucose, renal function, pregnancy test
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Specialized Tests</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üìà Tilt-table testing</strong><br>
                                Gold standard for vasovagal syncope diagnosis
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üëÇ Carotid sinus massage</strong><br>
                                Diagnose carotid sinus syndrome
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üì± Implantable loop recorder</strong><br>
                                For infrequent episodes with suspected arrhythmia
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Treatment Card -->
                <div class="card treatment" id="treatment">
                    <div class="card-header" onclick="toggleCard('treatment')">
                        <div class="card-icon">üíä</div>
                        <div class="card-title">Treatment Strategy</div>
                        <div class="expand-icon">‚ñº</div>
                    </div>
                    <div class="card-content">
                        <div class="badges">
                            <span class="badge stable">Education First</span>
                            <span class="badge caution">Physical Maneuvers</span>
                            <span class="badge urgent">Medications</span>
                        </div>

                        <div class="content-section">
                            <h3>Patient Education</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üìö Trigger avoidance</strong><br>
                                Prolonged standing, warm environments, dehydration
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚ö†Ô∏è Warning recognition</strong><br>
                                Early symptoms and appropriate response
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Physical Counterpressure Maneuvers</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>ü¶µ Leg crossing with muscle tensing</strong><br>
                                Most effective for aborting imminent syncope
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>ü§ù Arm tensing</strong><br>
                                Cross arms and pull in opposite directions
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üßò Squatting</strong><br>
                                Effective but may be socially awkward
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Pharmacologic Options</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üíß Volume expansion</strong><br>
                                Increased salt intake, fludrocortisone (0.1-0.2mg daily)
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>ü©∏ Midodrine</strong><br>
                                Alpha-agonist (2.5-10mg TID) - best evidence
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚ù§Ô∏è Cardiac pacing</strong><br>
                                For cardioinhibitory carotid sinus syndrome
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Follow-up Card -->
                <div class="card followup" id="followup">
                    <div class="card-header" onclick="toggleCard('followup')">
                        <div class="card-icon">üìà</div>
                        <div class="card-title">Follow-up & Prognosis</div>
                        <div class="expand-icon">‚ñº</div>
                    </div>
                    <div class="card-content">
                        <div class="badges">
                            <span class="badge stable">Good Prognosis</span>
                            <span class="badge caution">Injury Risk</span>
                            <span class="badge urgent">Recurrence</span>
                        </div>

                        <div class="content-section">
                            <h3>Prognosis</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>‚úÖ Generally excellent</strong><br>
                                No increased mortality in NMRS compared to general population
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üîÑ Recurrence common</strong><br>
                                Often occurs in clusters, then remission periods
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Follow-up Schedule</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üìÖ Early follow-up</strong><br>
                                2-4 weeks after initial evaluation
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üîç Annual review</strong><br>
                                Assess treatment efficacy and compliance
                            </div>
                        </div>

                        <div class="content-section">
                            <h3>Complications to Monitor</h3>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>ü§ï Injury risk</strong><br>
                                1/3 of patients experience injury; 14% major injury
                            </div>
                            <div class="interactive-element" onclick="selectElement(this)">
                                <strong>üß† Head trauma</strong><br>
                                Consider imaging if neurological symptoms persist
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Card toggle functionality
        function toggleCard(cardId) {
            const card = document.getElementById(cardId);
            const allCards = document.querySelectorAll('.card');
            
            // Close all other cards
            allCards.forEach(c => {
                if (c.id !== cardId) {
                    c.classList.remove('expanded');
                }
            });
            
            // Toggle current card
            card.classList.toggle('expanded');
            
            // Update progress sidebar
            updateProgress(cardId);
            
            // Smooth scroll to card
            if (card.classList.contains('expanded')) {
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        // Progress sidebar update
        function updateProgress(currentStep) {
            const steps = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const currentIndex = steps.indexOf(currentStep);
            
            steps.forEach((step, index) => {
                const stepElement = document.querySelector(`[data-step="${step}"]`);
                const lineElement = document.getElementById(`line${index + 1}`);
                
                if (index <= currentIndex) {
                    stepElement.classList.add('completed');
                    if (index === currentIndex) {
                        stepElement.classList.add('active');
                    } else {
                        stepElement.classList.remove('active');
                    }
                } else {
                    stepElement.classList.remove('completed', 'active');
                }
                
                if (lineElement && index < currentIndex) {
                    lineElement.classList.add('active');
                } else if (lineElement) {
                    lineElement.classList.remove('active');
                }
            });
        }

        // Interactive element selection
        function selectElement(element) {
            // Remove previous selections in the same section
            const section = element.closest('.content-section');
            const elements = section.querySelectorAll('.interactive-element');
            elements.forEach(el => el.classList.remove('selected'));
            
            // Add selection to clicked element
            element.classList.add('selected');
            
            // Add pulse animation
            element.classList.add('pulse');
            setTimeout(() => {
                element.classList.remove('pulse');
            }, 2000);
        }

        // Progress step click functionality
        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = this.getAttribute('data-step');
                const targetCard = document.getElementById(targetStep);
                
                // Expand the target card
                const allCards = document.querySelectorAll('.card');
                allCards.forEach(card => card.classList.remove('expanded'));
                targetCard.classList.add('expanded');
                
                // Update progress
                updateProgress(targetStep);
                
                // Scroll to card
                setTimeout(() => {
                    targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            });
        });

        // Initialize with assessment expanded
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress('assessment');
            
            // Add fade-in animation to cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('fade-in');
                }, index * 200);
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const steps = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const currentExpanded = document.querySelector('.card.expanded');
            
            if (currentExpanded) {
                const currentId = currentExpanded.id;
                const currentIndex = steps.indexOf(currentId);
                
                if (e.key === 'ArrowDown' && currentIndex < steps.length - 1) {
                    e.preventDefault();
                    toggleCard(steps[currentIndex + 1]);
                } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                    e.preventDefault();
                    toggleCard(steps[currentIndex - 1]);
                }
            }
        });

        // Add hover effects to badges
        document.querySelectorAll('.badge').forEach(badge => {
            badge.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.1)';
                this.style.transition = 'transform 0.2s ease';
            });
            
            badge.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        });
    </script>
</body>
</html>