<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stable Angina – Quick Reference Algorithm</title>
  <style>
    /* ====== Design tokens ====== */
    :root{
      --bg: #0b1020;                /* page background */
      --panel: #0f1733;             /* card background */
      --panel-2: #121c3f;
      --text: #e9ecf5;              /* main text */
      --muted: #b7c0d9;             /* secondary text */
      --accent: #6ee7ff;            /* cyan */
      --accent-2: #8b5cf6;          /* violet */
      --ok: #22c55e;                /* green */
      --warn: #f59e0b;              /* amber */
      --danger: #ef4444;            /* red */
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --radius: 18px;
      --gap: 18px;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    /* High contrast toggle */
    body.contrast{
      --bg: #fff; --panel: #ffffff; --panel-2: #f4f6fb; --text: #0b1020; --muted: #39425f;
      --accent: #0ea5e9; --accent-2: #7c3aed; --ok:#16a34a; --warn:#d97706; --danger:#dc2626;
    }

    /* Compact toggle (tighter spacing, slightly smaller text) */
    body.compact{ --gap: 12px; }
    body.compact .stack > * { margin: .55rem 0; }
    body.compact p, body.compact li { line-height: 1.35; }

    /* ====== Global ====== */
    html,body{height:100%;}
    body{
      margin:0; background: radial-gradient(1200px 800px at 10% -10%, #172143 0%, var(--bg) 60%), var(--bg);
      color: var(--text); font-family: var(--font); line-height: 1.55; letter-spacing:.2px;
    }
    .container{ max-width: 1100px; margin: 0 auto; padding: 28px 18px 80px; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

    /* ====== Header ====== */
    header.hero{
      position: relative; border-radius: calc(var(--radius) * 1.2);
      background: linear-gradient(120deg, rgba(139,92,246,.16), rgba(110,231,255,.12)),
                  linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      box-shadow: var(--shadow); overflow: hidden; padding: 28px;
    }
    header.hero .title{
      display:flex; align-items:center; gap:14px; flex-wrap:wrap;
    }
    .badge{ font: 600 .78rem var(--mono); padding: 6px 10px; border-radius: 999px; color:#0b1020;
            background: linear-gradient(120deg, var(--accent), var(--accent-2)); box-shadow: 0 6px 18px rgba(0,0,0,.25); }
    h1{ font-weight:800; font-size: clamp(1.6rem, 2vw + 1.2rem, 2.3rem); margin:0; letter-spacing:.3px; }
    .subtitle{ color: var(--muted); margin-top: 6px; font-size: .98rem; }

    /* ====== Top actions ====== */
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:16px; }
    .btn{ appearance:none; border:0; border-radius: 12px; padding: 10px 14px; font-weight:650; cursor:pointer;
          background: #1b254f; color: var(--text); box-shadow: var(--shadow); display:inline-flex; align-items:center; gap:10px; }
    .btn:hover{ filter: brightness(1.03); transform: translateY(-1px); }
    .btn.secondary{ background: #121a3a; }

    /* ====== Layout grid ====== */
    .grid{ display:grid; gap: var(--gap); grid-template-columns: repeat(12,1fr); margin-top: 20px; }
    .col-12{ grid-column: span 12; }
    .col-8{ grid-column: span 8; }
    .col-6{ grid-column: span 6; }
    .col-4{ grid-column: span 4; }
    .col-3{ grid-column: span 3; }
    @media (max-width: 980px){ .col-8,.col-6,.col-4,.col-3{ grid-column: span 12; } }

    /* ====== Card ====== */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00)), var(--panel);
      border: 1px solid rgba(255,255,255,.06); border-radius: var(--radius); box-shadow: var(--shadow);
      padding: 18px 18px 16px;
    }
    .card h2{ font-size: 1.05rem; letter-spacing:.25px; margin: 0 0 10px; display:flex; align-items:center; gap:10px; }
    .card h3{ font-size: .98rem; margin: 16px 0 6px; color: var(--muted); font-weight:700; }
    .card p, .card li{ color:#e6e9f3; }
    .card ul{ margin: .4rem 0 .5rem 1.2rem; }

    .stack > *{ margin: .7rem 0; }
    .note{ font-size:.95rem; color: var(--muted); }
    .pill{ display:inline-block; padding: 5px 10px; border-radius: 999px; font: 700 .8rem var(--mono); }
    .pill.warn{ background: rgba(245, 158, 11, .18); border: 1px solid rgba(245, 158, 11, .35); color: #fde68a; }
    .pill.danger{ background: rgba(239, 68, 68, .18); border: 1px solid rgba(239, 68, 68, .4); color: #fecaca; }
    .pill.ok{ background: rgba(34, 197, 94, .18); border: 1px solid rgba(34, 197, 94, .35); color: #bbf7d0; }

    /* List styles */
    ul.check > li{ list-style: none; position:relative; padding-left: 26px; }
    ul.check > li::before{ content:""; position:absolute; left:0; top:.35rem; width:16px; height:16px; border-radius:4px;
      background: linear-gradient(120deg, var(--ok), var(--accent)); box-shadow: inset 0 0 0 2px rgba(0,0,0,.2); }
    ul.cross > li{ list-style: none; position:relative; padding-left: 26px; }
    ul.cross > li::before{ content:"✕"; position:absolute; left:0; top:.05rem; font-weight:900; color: var(--danger); }

    /* Callouts */
    .callout{ border-left: 4px solid var(--accent); padding: 10px 12px; background: rgba(110,231,255,.08); border-radius: 10px; }
    .callout.urgent{ border-left-color: var(--danger); background: rgba(239,68,68,.09); }

    /* Timeline (for acute GTN steps) */
    .timeline { position:relative; padding-left: 20px; }
    .timeline::before { content:""; position:absolute; left:7px; top:4px; bottom:6px; width:2px; background: linear-gradient(var(--accent), transparent); }
    .timeline .step{ position:relative; margin: 10px 0 12px 0; }
    .timeline .step::before{ content:""; position:absolute; left:-2px; top:.25rem; width:10px; height:10px; border-radius:50%; background: var(--accent); box-shadow:0 0 0 3px rgba(110,231,255,.2); }

    /* Footer */
    footer{ margin-top: 22px; color: var(--muted); font-size: .9rem; }

    /* Print styles (fit nicely on A4) */
    @media print{
      body{ background:#fff; color:#111; }
      header.hero{ background:#fff; box-shadow:none; border:1px solid #ddd; }
      .badge{ background:#0ea5e9; color:#fff; box-shadow:none; }
      .card{ background:#fff; border:1px solid #ddd; box-shadow:none; }
      .btn, .actions{ display:none !important; }
      .pill{ border:1px solid #999 !important; color:#000 !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <div class="title">
        <span class="badge">Clinical Algorithm</span>
        <h1>Stable Angina – Quick Reference (Primary Care)</h1>
      </div>
      <p class="subtitle">Concise, at‑a‑glance guidance for rapid decision‑making in consultations. Based on your supplied CKS content (last revised May 2025). Follow local protocols.</p>
      <div class="actions" role="toolbar" aria-label="Page actions">
        <button class="btn" onclick="window.print()" title="Print or save as PDF">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 9V4h12v5" stroke="currentColor" stroke-width="2"/><rect x="6" y="13" width="12" height="7" rx="2" stroke="currentColor" stroke-width="2"/><path d="M6 13h12" stroke="currentColor" stroke-width="2"/><circle cx="18" cy="10" r="1.5" fill="currentColor"/></svg>
          Print / PDF
        </button>
        <button class="btn secondary" id="toggle-compact" title="Tighter spacing for 1-page view">Compact</button>
        <button class="btn secondary" id="toggle-contrast" title="Switch to light / high contrast theme">High Contrast</button>
      </div>
    </header>

    <!-- GRID LAYOUT -->
    <section class="grid">
      <!-- Section: Initial Diagnosis & Education -->
      <article class="card col-6">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21s-7-4.35-7-10a7 7 0 1114 0c0 5.65-7 10-7 10z" stroke="currentColor" stroke-width="2"/></svg>
          1) Initial Diagnosis & Education
        </h2>
        <div class="stack">
          <div class="callout"><strong>Suspect stable angina</strong> based on clinical assessment & symptom typicality (typical/atypical). If uncertain, refer to chest pain service to confirm/exclude.</div>
          <ul class="check">
            <li>Explain triggers: exertion, emotional stress, cold, large meals.</li>
            <li>Discuss prognosis and management; encourage questions & address misconceptions.</li>
            <li>Safety‑net: sudden worsening → urgent medical help.</li>
          </ul>
          <p class="note">Document chest‑pain features in any investigation request. Do not use exercise ECG to diagnose/exclude in patients without known CAD.</p>
        </div>
      </article>

      <!-- Section: GTN algorithm -->
      <article class="card col-6">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2"/></svg>
          2) Rapid Symptom Relief – GTN
        </h2>
        <div class="timeline">
          <div class="step"><strong>At onset</strong>: Stop & rest. Take GTN spray (1–2×400 mcg) or 1 sublingual tablet.</div>
          <div class="step"><strong>After 5 min</strong>: If pain persists → repeat dose once.</div>
          <div class="step callout urgent"><strong>If still in pain 5 min after 2nd dose</strong> (or worsening/feels unwell) → <span class="pill danger">call 999</span>.</div>
          <div class="step"><em>Prevention</em>: Consider GTN prior to exertion known to precipitate angina.</div>
        </div>
      </article>

      <!-- Section: First-line anti-anginals -->
      <article class="card col-8">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2"/></svg>
          3) Regular Anti‑anginal Therapy
        </h2>
        <div class="grid" style="--gap:14px; grid-template-columns: repeat(12,1fr);">
          <div class="col-6">
            <h3>First line</h3>
            <ul>
              <li><strong>Beta‑blocker</strong> <em>or</em> <strong>CCB</strong> (choose per comorbidity/contraindication & preference).</li>
              <li>If not tolerated → switch to the other class.</li>
            </ul>
            <div class="pill warn">Titrate to max licensed / tolerated</div>
          </div>
          <div class="col-6">
            <h3>When both BB & CCB unsuitable</h3>
            <ul>
              <li>Monotherapy with one of: <strong>long‑acting nitrate</strong>, <strong>nicorandil</strong>, <strong>ivabradine</strong>, <strong>ranolazine</strong>.</li>
              <li>Review response & adverse effects after <strong>2–4 weeks</strong>.</li>
            </ul>
          </div>
          <div class="col-12">
            <div class="callout">
              <strong>Combination cautions</strong>: <span class="pill danger">Do not combine BB + verapamil/diltiazem</span> (risk severe bradycardia/heart failure). Avoid <strong>ivabradine</strong> with rate‑limiting CCBs.
            </div>
          </div>
        </div>
      </article>

      <!-- Section: Secondary prevention -->
      <article class="card col-4">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2l3 7h7l-5.5 4 2.5 8-7-4.5L5.5 21l2.5-8L2 9h7z" stroke="currentColor" stroke-width="2"/></svg>
          4) Secondary Prevention
        </h2>
        <ul class="check">
          <li><strong>Antiplatelet</strong>: Aspirin 75 mg (clopidogrel if stroke/PAD).</li>
          <li><strong>Statin</strong>: offer to all.</li>
          <li><strong>ACE inhibitor</strong> if diabetes, CKD, LV dysfunction, HF, or post‑MI.</li>
          <li>Manage BP to guideline targets; address smoking, weight, activity, alcohol, diet.</li>
        </ul>
      </article>

      <!-- Section: Routine review -->
      <article class="card col-6">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 7v6l4 2" stroke="currentColor" stroke-width="2"/></svg>
          5) Routine Review (every 6–12 months)
        </h2>
        <ul>
          <li>Assess symptoms, exertional threshold, GTN use.</li>
          <li>Check <strong>BP, HR</strong>, signs of <strong>heart failure</strong>; screen mood.</li>
          <li>Review adherence, interactions & adverse effects.</li>
          <li>Ensure ongoing <strong>BB or CCB</strong> unless both contraindicated.</li>
          <li>Reinforce lifestyle advice and safety‑netting.</li>
          <li>Consider non‑invasive testing if well‑controlled but potentially high‑risk (e.g., left main/proximal 3‑vessel disease).</li>
        </ul>
      </article>

      <!-- Section: Poor control -->
      <article class="card col-6">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h18M12 3v18" stroke="currentColor" stroke-width="2"/></svg>
          6) Poor Control on Treatment
        </h2>
        <ul>
          <li>Confirm max tolerated dosing.</li>
          <li><strong>On BB</strong> → switch to/add <strong>dihydropyridine CCB</strong> (amlodipine / MR nifedipine / MR felodipine). If not suitable → add <strong>nitrate</strong>, <strong>nicorandil</strong>, <strong>ivabradine</strong> (HR ≥70), or <strong>ranolazine</strong>.</li>
          <li><strong>On CCB</strong> → switch to/add <strong>BB</strong>. If not suitable → add <strong>nitrate</strong>, <strong>nicorandil</strong>, <strong>ivabradine</strong> or <strong>ranolazine</strong>.</li>
          <li><em>Ivabradine</em>: stop if no improvement by 3 months.</li>
          <li>Inadequate control on two agents at max tolerated dose → <strong>refer for cardiology</strong> (consider revascularisation). Start a 3rd agent while awaiting review.</li>
        </ul>
        <div class="callout"><strong>ECG extensive ischaemia</strong> or persistent angina despite optimal therapy → expedite referral.</div>
      </article>

      <!-- Section: Referral & Red Flags -->
      <article class="card col-8">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" stroke="currentColor" stroke-width="2"/><path d="M12 7v6" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="16" r="1.5" fill="currentColor"/></svg>
          7) Referral & Red Flags
        </h2>
        <div class="grid" style="--gap:14px; grid-template-columns: repeat(12,1fr);">
          <div class="col-6">
            <h3>Urgent admission (possible unstable angina)</h3>
            <ul class="cross">
              <li>Chest pain at <strong>rest</strong> (including night).</li>
              <li>Pain on <strong>minimal exertion</strong>.</li>
              <li><strong>Rapidly worsening</strong> angina despite escalating meds.</li>
            </ul>
          </div>
          <div class="col-6">
            <h3>Specialist referral (cardiology)</h3>
            <ul>
              <li>Persistent symptoms on <strong>two agents</strong> (max tolerated).</li>
              <li><strong>Extensive ischaemia</strong> on ECG.</li>
              <li>High‑risk contexts: post‑MI/CABG/PCI with angina, AF with angina, HF with angina, suspected aortic stenosis/HCM, major risk burden, strong FHx, diagnostic doubt, or patient preference.</li>
            </ul>
          </div>
        </div>
      </article>

      <!-- Section: Lifestyle & Safety -->
      <article class="card col-4">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 6l6 4v8l-6 4-6-4v-8l6-4z" stroke="currentColor" stroke-width="2"/></svg>
          8) Lifestyle & Safety Advice
        </h2>
        <ul>
          <li><strong>Smoking</strong>: offer cessation support.</li>
          <li><strong>Diet/Weight</strong>: cardioprotective diet; weight management.</li>
          <li><strong>Activity</strong>: increase within symptom limits.</li>
          <li><strong>Alcohol</strong>: ≤14 units/week, spread over ≥3 days.</li>
          <li><strong>Sex</strong>: generally safe; GTN pre‑intercourse may help. <span class="pill danger">PDE5 inhibitors + nitrates/nicorandil = contraindicated</span>. If angina during sex: <em>do not take GTN</em>; stop; call 999 if pain >10 min.</li>
          <li><strong>Driving</strong> (UK): Stop if angina at rest/emotion/while driving. Group 1 may resume when controlled; Group 2 must notify DVLA; re‑licensing after ≥6 weeks angina‑free & criteria met.</li>
          <li><strong>Flying</strong>: Stable symptoms – no restriction. Minimal‑exertion pain – consider airport assistance/possible in‑flight O<sub>2</sub>. Pain at rest/change in symptoms – defer or travel with medical escort & ensure O<sub>2</sub>.</li>
        </ul>
      </article>

      <!-- Section: Interaction warnings (quick look) -->
      <article class="card col-12">
        <h2>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" stroke="currentColor" stroke-width="2"/><path d="M12 9v4" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="17" r="1.5" fill="currentColor"/></svg>
          Quick Interaction & Combination Warnings
        </h2>
        <ul class="cross">
          <li><strong>Nitrates / Nicorandil</strong> with <strong>PDE5 inhibitors</strong> (avanafil, sildenafil, tadalafil, vardenafil): contraindicated (severe hypotension). If co‑use medically essential: leave ≥12 h (avanafil), ≥24 h (sildenafil), ≥48 h (tadalafil); <em>no safe interval for vardenafil</em>.</li>
          <li><strong>BB + verapamil/diltiazem</strong>: avoid (bradycardia/HF).</li>
          <li><strong>Ivabradine</strong> + rate‑limiting CCBs: avoid (excess bradycardia). Do not start if resting HR &lt;70; stop if HR &lt;50 or no benefit by 3 months.</li>
        </ul>
      </article>
    </section>

    <footer>
      <p><strong>Note:</strong> This page is a condensed aide‑mémoire derived from your provided CKS guidance for stable angina. It does not replace clinical judgement. Always consider comorbidities, individual preferences, and local pathways.</p>
    </footer>
  </div>

  <script>
    // UI toggles
    document.getElementById('toggle-compact').addEventListener('click', function(){
      document.body.classList.toggle('compact');
    });
    document.getElementById('toggle-contrast').addEventListener('click', function(){
      document.body.classList.toggle('contrast');
    });
  </script>
</body>
</html>
