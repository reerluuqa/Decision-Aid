<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diabetic Retinopathy: Clinical Quick-Scan Reference</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            /* Color Palette */
            --urgent-bg: #ffebee;
            --urgent-border: #ef5350;
            --urgent-text: #c62828;
            
            --warning-bg: #fff3e0;
            --warning-border: #ffa726;
            --warning-text: #ef6c00;
            
            --safe-bg: #e8f5e9;
            --safe-border: #66bb6a;
            --safe-text: #2e7d32;
            
            --neutral-bg: #e3f2fd;
            --neutral-border: #42a5f5;
            --neutral-text: #1565c0;

            --text-dark: #37474f;
            --text-light: #78909c;
            --bg-body: #f5f7fa;
            
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- Layout & Grid --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        header {
            grid-column: 1 / -1;
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid var(--neutral-border);
        }

        h1 { font-size: 1.5rem; color: var(--text-dark); }
        h2 { font-size: 1.2rem; margin-bottom: 15px; border-left: 4px solid var(--neutral-border); padding-left: 10px; }
        h3 { font-size: 1rem; margin-bottom: 10px; font-weight: 600; }
        
        .subtitle {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* --- Sections --- */
        .card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        /* --- Critical Alert Banner --- */
        .critical-banner {
            background-color: var(--urgent-bg);
            border: 2px solid var(--urgent-border);
            color: var(--urgent-text);
            padding: 15px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(198, 40, 40, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(198, 40, 40, 0); }
            100% { box-shadow: 0 0 0 0 rgba(198, 40, 40, 0); }
        }

        .critical-banner i {
            font-size: 1.5rem;
        }

        .flag-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            width: 100%;
        }

        .flag-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            background: rgba(255,255,255,0.6);
            padding: 8px;
            border-radius: 4px;
        }

        /* --- 4-2-1 Rule Visualization --- */
        .rule-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
            margin-top: 10px;
        }
        .rule-box {
            background: var(--neutral-bg);
            padding: 15px;
            border-radius: var(--radius);
            border: 1px solid var(--neutral-border);
        }
        .rule-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--neutral-border);
        }

        /* --- Interactive Severity Tool --- */
        .tool-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            padding: 20px;
        }

        .tool-area {
            display: flex;
            gap: 20px;
        }

        .controls {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .visualizer {
            flex: 1;
            height: 250px;
            background: #000;
            border-radius: 50%; /* Simulating eye shape */
            position: relative;
            overflow: hidden;
            border: 4px solid #ddd;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }

        .optic-disc {
            position: absolute;
            top: 50%;
            left: 20%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ffccbc 30%, #ffab91 100%);
            border-radius: 50%;
            z-index: 2;
        }

        .vessels {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .vessel {
            position: absolute;
            background: rgba(255,255,255,0.3);
            height: 4px;
            transform-origin: left center;
        }

        /* Lesions */
        .lesion {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.5s ease;
            transform: scale(0);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .lesion.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Types of lesions */
        .microaneurysm {
            width: 6px;
            height: 6px;
            background: #ff5252; /* Red dot */
            box-shadow: 0 0 4px #ff5252;
        }

        .hemorrhage {
            width: 12px;
            height: 8px;
            background: #b71c1c; /* Darker blot */
            border-radius: 4px;
        }

        .exudate {
            width: 8px;
            height: 8px;
            background: #ffeb3b; /* Yellow */
            border: 1px solid #fbc02d;
        }

        .neovascular {
            background: radial-gradient(circle, #fff 10%, #d32f2f 100%);
            width: 20px;
            height: 20px;
            animation: pulse-vessels 1.5s infinite;
        }

        @keyframes pulse-vessels {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }

        /* Checkboxes styled as toggles */
        .checkbox-wrapper {
            display: flex;
            align-items: center;
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #eee;
            cursor: pointer;
            user-select: none;
        }
        
        .checkbox-wrapper:hover {
            background: #f5f5f5;
        }

        .checkbox-wrapper input {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .diagnosis-result {
            background: var(--neutral-bg);
            padding: 15px;
            border-radius: var(--radius);
            border-left: 5px solid var(--neutral-border);
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            transition: all 0.3s;
        }

        .diagnosis-result.urgent {
            background: var(--urgent-bg);
            color: var(--urgent-text);
            border-color: var(--urgent-border);
        }

        .diagnosis-result.warning {
            background: var(--warning-bg);
            color: var(--warning-text);
            border-color: var(--warning-border);
        }

        .diagnosis-result.safe {
            background: var(--safe-bg);
            color: var(--safe-text);
            border-color: var(--safe-border);
        }

        /* --- Info Tables & Lists --- */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .info-table th, .info-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            text-align: left;
        }

        .info-table th {
            color: var(--text-light);
            font-weight: 600;
        }

        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        .tag-urgent { background: var(--urgent-bg); color: var(--urgent-text); }
        .tag-warn { background: var(--warning-bg); color: var(--warning-text); }
        .tag-safe { background: var(--safe-bg); color: var(--safe-text); }

        /* --- Management Section --- */
        .mgmt-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .mgmt-item {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            padding: 15px;
            background: #f9f9f9;
            border-radius: var(--radius);
        }

        .mgmt-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .icon-inject { background: #e1bee7; color: #7b1fa2; }
        .icon-laser { background: #ffccbc; color: #d84315; }
        .icon-surg { background: #cfd8dc; color: #455a64; }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            .tool-area {
                flex-direction: column-reverse;
            }
            .flag-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <header>
        <div>
            <h1><i class="fa-solid fa-eye"></i> Diabetic Retinopathy</h1>
            <div class="subtitle">Clinical Quick-Scan Reference & Assessment Tool</div>
        </div>
        <div style="text-align: right;">
            <div style="font-size: 0.8rem; color: #888;">Last Updated</div>
            <div style="font-weight: bold;">Nov 18, 2025</div>
        </div>
    </header>

    <div class="container">
        
        <!-- URGENT BANNER -->
        <div class="full-width">
            <div class="critical-banner">
                <i class="fa-solid fa-triangle-exclamation"></i>
                <div style="width: 100%;">
                    <h3 style="margin: 0; color: var(--urgent-text);">SIGHT-THREATENING SIGNS (Red Flags)</h3>
                    <div class="flag-grid">
                        <div class="flag-item"><i class="fa-solid fa-droplet"></i> Macular Oedema</div>
                        <div class="flag-item"><i class="fa-solid fa-burst"></i> Retinal/Optic Disc New Vessels</div>
                        <div class="flag-item"><i class="fa-solid fa-cloud"></i> Vitreous Haemorrhage</div>
                        <div class="flag-item"><i class="fa-solid fa-tear"></i> Tractional Retinal Detachment</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEFT COLUMN: Theory & Definition -->
        <div class="card">
            <h2><i class="fa-solid fa-book-medical" style="color: var(--neutral-border);"></i> Definition & Epidemiology</h2>
            <p style="margin-bottom: 15px;">Chronic progressive retinal manifestation of hyperglycaemic vascular damage. Two stages: <strong>Non-proliferative (NPDR)</strong> and <strong>Proliferative (PDR)</strong>.</p>
            
            <table class="info-table">
                <tr>
                    <th>Metric</th>
                    <th>Statistic (Global)</th>
                </tr>
                <tr>
                    <td>Diabetes Prevalence</td>
                    <td>537 million (2021) &uarr; 783M (2045)</td>
                </tr>
                <tr>
                    <td>Retinopathy in Diabetics</td>
                    <td>35%</td>
                </tr>
                <tr>
                    <td>Vision-Threatening Retinopathy</td>
                    <td>10%</td>
                </tr>
                <tr>
                    <td>Type 2 at Diagnosis</td>
                    <td>25% already have retinopathy</td>
                </tr>
            </table>
        </div>

        <!-- RIGHT COLUMN: Classification Scale -->
        <div class="card">
            <h2><i class="fa-solid fa-list-ol" style="color: var(--neutral-border);"></i> Severity Scale (UK R-Code)</h2>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <div style="padding: 10px; border-left: 4px solid #ccc; background: #f9f9f9;">
                    <strong>R0</strong> - No apparent retinopathy
                </div>
                <div style="padding: 10px; border-left: 4px solid #ffa726; background: #fff3e0;">
                    <strong>R1</strong> - Mild/Moderate NPDR (Microaneurysms only)
                </div>
                <div style="padding: 10px; border-left: 4px solid #ef5350; background: #ffebee;">
                    <strong>R2</strong> - Severe NPDR (Pre-proliferative)
                    <div style="font-size: 0.85rem; margin-top: 5px;"><strong>4-2-1 Rule:</strong></div>
                </div>
                
                <!-- Visual 4-2-1 Rule -->
                <div class="rule-grid">
                    <div class="rule-box">
                        <div class="rule-number">4</div>
                        <small>>20 Hemorrhages in 4 Quadrants</small>
                    </div>
                    <div class="rule-box">
                        <div class="rule-number">2</div>
                        <small>Venous Beading in 2+ Quadrants</small>
                    </div>
                    <div class="rule-box">
                        <div class="rule-number">1</div>
                        <small>IRMA in 1+ Quadrants</small>
                    </div>
                </div>

                <div style="padding: 10px; border-left: 4px solid #b71c1c; background: #ffcdd2; margin-top: 10px;">
                    <strong>R3</strong> - Proliferative Retinopathy (New vessels, Haemorrhage)
                </div>
            </div>
        </div>

        <!-- INTERACTIVE TOOL: Severity Checker -->
        <div class="card full-width">
            <h2><i class="fa-solid fa-stethoscope" style="color: var(--neutral-border);"></i> Interactive Severity Simulator</h2>
            <p style="margin-bottom: 15px;">Select the clinical signs observed in the patient. The visualizer will update, and the suggested classification will appear below.</p>
            
            <div class="tool-container">
                <div class="tool-area">
                    <!-- Controls -->
                    <div class="controls">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-ma" onchange="updateSimulation()">
                            <span>Microaneurysms (R1)</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-hem" onchange="updateSimulation()">
                            <span>Blot/Flame Hemorrhages</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-ex" onchange="updateSimulation()">
                            <span>Hard Exudates / Lipid</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-cws" onchange="updateSimulation()">
                            <span>Cotton Wool Spots (Ischaemia)</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-irma" onchange="updateSimulation()">
                            <span style="color: #d84315; font-weight: bold;">IRMA (Intraretinal Microvascular Abnormalities)</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-venous" onchange="updateSimulation()">
                            <span style="color: #d84315; font-weight: bold;">Venous Beading</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-nvd" onchange="updateSimulation()">
                            <span style="color: #c62828; font-weight: bold;">Neovascularization (NVD/NVE)</span>
                        </label>
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="check-prh" onchange="updateSimulation()">
                            <span style="color: #c62828; font-weight: bold;">Pre-retinal/Vitreous Haemorrhage</span>
                        </label>
                    </div>

                    <!-- Visualizer -->
                    <div class="visualizer" id="eye-viz">
                        <div class="optic-disc"></div>
                        <!-- SVG Vessels generated dynamically or static -->
                        <svg class="vessels" viewBox="0 0 100 100" preserveAspectRatio="none">
                            <path d="M20,50 Q40,30 100,20" stroke="rgba(255,200,200,0.4)" stroke-width="2" fill="none"/>
                            <path d="M20,50 Q40,70 100,80" stroke="rgba(255,200,200,0.4)" stroke-width="2" fill="none"/>
                            <path d="M20,50 Q60,50 100,50" stroke="rgba(255,200,200,0.4)" stroke-width="1.5" fill="none"/>
                        </svg>
                        
                        <!-- Lesions Container -->
                        <div id="lesions-layer"></div>
                    </div>
                </div>

                <!-- Result Output -->
                <div id="diagnosis-output" class="diagnosis-result safe">
                    Normal / No Apparent Retinopathy (R0)
                </div>
            </div>
        </div>

        <!-- PATHOPHYSIOLOGY -->
        <div class="card">
            <h2><i class="fa-solid fa-microscope" style="color: var(--neutral-border);"></i> Pathophysiology</h2>
            <div style="margin-bottom: 10px;">
                <span class="tag tag-warn">Hyperglycaemia</span> &rarr; Vascular Damage
            </div>
            <ul style="padding-left: 20px; margin-bottom: 10px;">
                <li>Pericyte apoptosis & basement membrane thickening</li>
                <li>Capillary occlusion & Ischaemia</li>
            </ul>
            <div style="margin-bottom: 10px;">
                <span class="tag tag-warn">Ischaemia</span> &rarr; <span class="tag tag-urgent">VEGF Upregulation</span>
            </div>
            <p>VEGF increases permeability (Oedema) and stimulates endothelial proliferation (New Vessels).</p>
            <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                <em>Other factors: Inflammation (ICAM-1), Neurodegeneration.</em>
            </div>
        </div>

        <!-- MANAGEMENT -->
        <div class="card">
            <h2><i class="fa-solid fa-user-doctor" style="color: var(--neutral-border);"></i> Management Priorities</h2>
            
            <div class="mgmt-grid">
                <!-- Prevention -->
                <div class="mgmt-item">
                    <div class="mgmt-icon icon-surg"><i class="fa-solid fa-shield-heart"></i></div>
                    <div>
                        <strong>Primary Prevention</strong>
                        <div style="font-size: 0.9rem;">Glycaemic, Lipid, Hypertensive control. Early ID of disease.</div>
                    </div>
                </div>

                <!-- Macular Oedema -->
                <div class="mgmt-item">
                    <div class="mgmt-icon icon-inject"><i class="fa-solid fa-syringe"></i></div>
                    <div>
                        <strong>Centre-Involving DMO (CIDMO)</strong>
                        <div style="font-size: 0.9rem;"><strong>1st Line:</strong> Intravitreal Anti-VEGF (Aflibercept, Ranibizumab, Bevacizumab). <br><strong>Refractory:</strong> Intravitreal Steroids (Dexamethasone/Fluocinolone) or Macular Laser.</div>
                    </div>
                </div>

                <!-- Proliferative -->
                <div class="mgmt-item">
                    <div class="mgmt-icon icon-laser"><i class="fa-solid fa-bullseye"></i></div>
                    <div>
                        <strong>Proliferative (PDR)</strong>
                        <div style="font-size: 0.9rem;"><strong>Standard:</strong> Pan-Retinal Laser Photocoagulation (PRP).<br><strong>Adjunct:</strong> Anti-VEGF.<br><strong>Complicated:</strong> Vitrectomy (for non-clearing VH or Tractional RD).</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MACULAR OEDEMA DEFINITION -->
        <div class="card full-width">
            <h2><i class="fa-solid fa-ruler-combined" style="color: var(--neutral-border);"></i> Diabetic Macular Oedema (DMO) Definition</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center;">
                <div style="flex: 1; min-width: 300px;">
                    <table class="info-table">
                        <tr>
                            <th>Criterion</th>
                            <th>Definition</th>
                        </tr>
                        <tr>
                            <td>OCT Thickness</td>
                            <td>Central subfield thickness > 300 &mu;m</td>
                        </tr>
                        <tr>
                            <td>Centre-Involving (CIDMO)</td>
                            <td>Thickening/Exudate within 1 disc diameter of fovea causing visual loss</td>
                        </tr>
                        <tr>
                            <td>Non-Centre-Involving (NCIDMO)</td>
                            <td>Thickening away from fovea</td>
                        </tr>
                    </table>
                </div>
                <div style="flex: 1; text-align: center; padding: 10px; background: #e3f2fd; border-radius: var(--radius);">
                    <i class="fa-solid fa-eye-low-vision" style="font-size: 3rem; color: var(--neutral-text); margin-bottom: 10px;"></i>
                    <p><strong>Visual Acuity Impact</strong></p>
                    <p>Management varies based on VA (Better than 6/9 vs 6/18+)</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer style="text-align: center; padding: 20px; color: #888; font-size: 0.8rem;">
        &copy; BMJ Publishing Group Ltd 2025. Content based on BMJ Best Practice. For simulation and reference purposes only.
    </footer>

    <script>
        // --- 2D Animation & Logic ---

        const lesionsLayer = document.getElementById('lesions-layer');
        const outputBox = document.getElementById('diagnosis-output');

        // Function to generate random lesion positions within the "eye" circle
        function getRandomPosition() {
            // Simple polar coordinates to stay inside circle, avoiding the very center
            const angle = Math.random() * Math.PI * 2;
            const radius = 25 + Math.random() * 70; // 25% to 95% radius
            const x = 50 + radius * Math.cos(angle);
            const y = 50 + radius * Math.sin(angle);
            return { x, y };
        }

        // Initial generation of invisible lesions
        const lesionData = [];

        function initLesions(type, count) {
            for(let i=0; i<count; i++) {
                const pos = getRandomPosition();
                const el = document.createElement('div');
                el.className = `lesion ${type}`;
                el.style.left = pos.x + '%';
                el.style.top = pos.y + '%';
                // Randomize rotation slightly
                el.style.transform = `rotate(${Math.random()*360}deg) scale(0)`;
                lesionsLayer.appendChild(el);
                lesionData.push({ element: el, type: type });
            }
        }

        // Pre-generate elements for performance
        initLesions('microaneurysm', 20);   // R1 signs
        initLesions('hemorrhage', 15);      // R2 signs
        initLesions('exudate', 10);         // DMO signs
        initLesions('cotton-wool', 5);      // R2 signs (IRMA precursor)
        initLesions('neovascular', 4);      // R3 signs

        function updateSimulation() {
            const ma = document.getElementById('check-ma').checked;
            const hem = document.getElementById('check-hem').checked;
            const ex = document.getElementById('check-ex').checked;
            const cws = document.getElementById('check-cws').checked;
            const irma = document.getElementById('check-irma').checked;
            const venous = document.getElementById('check-venous').checked;
            const nvd = document.getElementById('check-nvd').checked;
            const prh = document.getElementById('check-prh').checked;

            // Update Visuals
            lesionData.forEach(item => {
                let show = false;
                if(item.type === 'microaneurysm' && ma) show = true;
                if(item.type === 'hemorrhage' && hem) show = true;
                if(item.type === 'exudate' && ex) show = true;
                if(item.type === 'cotton-wool' && cws) show = true; // Abstractly representing CWS as fluffy white spots
                
                // Show neovascularization if checked (R3)
                if(item.type === 'neovascular' && (nvd || prh)) show = true;

                if(show) {
                    item.element.classList.add('active');
                } else {
                    item.element.classList.remove('active');
                }
            });

            // Calculate Classification Logic
            let resultText = "";
            let resultClass = "safe";

            // Priority Logic (Highest severity wins)
            if (nvd || prh) {
                resultText = "PROLIFERATIVE DIABETIC RETINOPATHY (R3) - URGENT REFERRAL";
                resultClass = "urgent";
            } else if (irma || venous || cws) {
                resultText = "SEVERE NPDR (R2) - Refer Urgently / Monitor Closely";
                resultClass = "warning";
            } else if (ma || hem || ex) {
                resultText = "MILD TO MODERATE NPDR (R1) - Routine Screening";
                resultClass = "safe"; // Blue/Neutral usually, but safe works for non-urgent
                resultClass = "warning"; // Actually, let's make R1 a neutral/blue color, but 'safe' class is green. 
                // Let's rely on CSS. I will treat R1 as "warning" color in CSS just to distinguish from normal.
            } else {
                resultText = "NORMAL / NO APPARENT RETINOPATHY (R0)";
                resultClass = "safe";
            }

            // Add Macular Oedema Note
            if (ex) {
                resultText += " + Diabetic Macular Oedema suspected (Check OCT)";
            }

            outputBox.className = `diagnosis-result ${resultClass}`;
            outputBox.innerHTML = resultText;
        }
    </script>
</body>
</html>