<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peptic Ulcer Disease - Interactive Management Algorithm</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #2c3e50;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            gap: 2rem;
        }

        .content-area {
            flex: 1;
            padding-right: 250px;
        }

        .progress-sidebar {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            width: 220px;
            z-index: 1000;
        }

        .progress-sidebar h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #1e3c72;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .progress-item:hover {
            background: #f8f9fa;
            transform: translateX(-5px);
        }

        .progress-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .progress-item.completed {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .progress-item i {
            width: 20px;
            text-align: center;
        }

        .progress-line {
            width: 2px;
            height: 30px;
            background: #ddd;
            margin: 0 auto;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2rem;
            color: #1e3c72;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--card-color);
            transition: width 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .card:hover::before {
            width: 8px;
        }

        .card.assessment {
            --card-color: #3498db;
        }

        .card.diagnosis {
            --card-color: #9b59b6;
        }

        .card.treatment {
            --card-color: #e74c3c;
        }

        .card.followup {
            --card-color: #27ae60;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--card-color);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
        }

        .expand-icon {
            transition: transform 0.3s ease;
            color: #7f8c8d;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .card.expanded .card-content {
            max-height: 1000px;
        }

        .card-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .badges-container {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .badge.red {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        .badge.amber {
            background: #fff8e1;
            color: #f57c00;
            border: 1px solid #ffecb3;
        }

        .badge.green {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .card-list {
            list-style: none;
            margin: 1rem 0;
        }

        .card-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            border-bottom: 1px solid #f5f5f5;
        }

        .card-list li:last-child {
            border-bottom: none;
        }

        .card-list li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--card-color);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .algorithm-flow {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .flow-step::after {
            content: '';
            position: absolute;
            bottom: -0.75rem;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid var(--step-color);
        }

        .flow-step:last-child::after {
            display: none;
        }

        .flow-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--step-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 1.5rem;
            flex-shrink: 0;
        }

        .step-1 { --step-color: #3498db; }
        .step-2 { --step-color: #9b59b6; }
        .step-3 { --step-color: #e74c3c; }
        .step-4 { --step-color: #27ae60; }

        .flow-content {
            flex: 1;
        }

        .flow-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--step-color);
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer p {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        .print-button {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 1001;
        }

        .print-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                padding: 1rem;
            }

            .content-area {
                padding-right: 0;
            }

            .progress-sidebar {
                position: static;
                transform: none;
                width: 100%;
                margin-bottom: 2rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .print-button {
                bottom: 1rem;
                right: 1rem;
                padding: 0.8rem 1.2rem;
            }
        }

        @media print {
            .progress-sidebar,
            .print-button {
                display: none;
            }

            .card {
                page-break-inside: avoid;
            }

            .card-content {
                max-height: none !important;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1><i class="fas fa-stomach"></i> Peptic Ulcer Disease</h1>
        <p class="subtitle">Interactive Clinical Management Algorithm</p>
    </header>

    <div class="main-container">
        <div class="content-area">
            <!-- Assessment Section -->
            <section class="section" id="assessment">
                <h2 class="section-title">
                    <i class="fas fa-clipboard-check"></i>
                    Assessment
                </h2>
                
                <div class="cards-grid">
                    <div class="card assessment" data-card-id="risk-factors">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                Risk Factors Assessment
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Identify key risk factors for peptic ulcer disease development
                            </p>
                            <div class="badges-container">
                                <span class="badge red"><i class="fas fa-flag"></i> Strong Risk Factors</span>
                                <span class="badge amber"><i class="fas fa-exclamation-circle"></i> Moderate Risk</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Helicobacter pylori infection:</strong> Present in >90% of duodenal ulcers, >70% of gastric ulcers</li>
                                <li><strong>NSAID use:</strong> 20% ulcer incidence in chronic users vs 5% in non-users</li>
                                <li><strong>Smoking:</strong> Nearly doubles ulcer disease prevalence</li>
                                <li><strong>Age:</strong> Incidence increases with age, peaks 5th-7th decade</li>
                                <li><strong>Personal/family history:</strong> Persistent H. pylori infection</li>
                                <li><strong>Intensive care patients:</strong> Stress ulcer risk</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card assessment" data-card-id="symptoms">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-stethoscope"></i>
                                </div>
                                Clinical Symptoms
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Key clinical features and presenting complaints
                            </p>
                            <ul class="card-list">
                                <li><strong>Dyspepsia:</strong> Chronic/recurrent upper abdominal pain</li>
                                <li><strong>Pain characteristics:</strong> Related to meals, often nocturnal</li>
                                <li><strong>'Pointing sign':</strong> Patient can locate pain with one finger</li>
                                <li><strong>Epigastric tenderness:</strong> Common but not universal</li>
                                <li><strong>Variable symptoms:</strong> May be asymptomatic, especially in elderly</li>
                                <li><strong>Alarm features:</strong> Weight loss, anemia, vomiting, GI bleeding</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card assessment" data-card-id="red-flags">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-flag"></i>
                                </div>
                                Red Flag Indicators
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Warning signs requiring urgent evaluation
                            </p>
                            <div class="badges-container">
                                <span class="badge red pulse"><i class="fas fa-ambulance"></i> Emergency</span>
                                <span class="badge amber"><i class="fas fa-clock"></i> Urgent</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>GI Bleeding:</strong> Hematemesis and/or melena</li>
                                <li><strong>Shock/hypotension:</strong> Hemodynamic instability</li>
                                <li><strong>Peritonitis:</strong> Signs of perforation</li>
                                <li><strong>Weight loss:</strong> Especially in patients ≥55 years</li>
                                <li><strong>Persistent vomiting:</strong> Possible gastric outlet obstruction</li>
                                <li><strong>Anemia:</strong> Iron deficiency from occult bleeding</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Diagnosis Section -->
            <section class="section" id="diagnosis">
                <h2 class="section-title">
                    <i class="fas fa-microscope"></i>
                    Diagnosis
                </h2>

                <div class="cards-grid">
                    <div class="card diagnosis" data-card-id="endoscopy">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                Endoscopic Evaluation
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Definitive diagnostic procedure and findings
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-check-circle"></i> Gold Standard</span>
                                <span class="badge amber"><i class="fas fa-calendar"></i> Timing Critical</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Diagnostic test of choice:</strong> Direct visualization of ulcer</li>
                                <li><strong>Biopsy capabilities:</strong> H. pylori testing and malignancy exclusion</li>
                                <li><strong>Rapid urease test:</strong> Quick H. pylori detection during endoscopy</li>
                                <li><strong>Timing:</strong> Within 24 hours for acute bleeding</li>
                                <li><strong>Repeat endoscopy:</strong> 6-8 weeks for gastric ulcers to exclude malignancy</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card diagnosis" data-card-id="h-pylori-testing">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-bacteria"></i>
                                </div>
                                H. pylori Testing
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Confirm infection status to guide treatment
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-flask"></i> Non-invasive</span>
                                <span class="badge amber"><i class="fas fa-clock"></i> Washout Needed</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Urea breath test:</strong> Preferred non-invasive test</li>
                                <li><strong>Stool antigen test:</strong> Alternative non-invasive option</li>
                                <li><strong>Serology:</strong> Less accurate, cannot distinguish active from past infection</li>
                                <li><strong>Washout period:</strong> 2 weeks after PPI, 4 weeks after antibiotics</li>
                                <li><strong>Test of cure:</strong> Repeat 6-8 weeks after treatment</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card diagnosis" data-card-id="differential">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-diagnoses"></i>
                                </div>
                                Differential Diagnosis
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Conditions to consider in differential diagnosis
                            </p>
                            <div class="badges-container">
                                <span class="badge amber"><i class="fas fa-question-circle"></i> Consider</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Gastroesophageal reflux disease:</strong> Heartburn, regurgitation</li>
                                <li><strong>Gastric/esophageal cancer:</strong> Alarm features, weight loss</li>
                                <li><strong>Functional dyspepsia:</strong> Diagnosis of exclusion</li>
                                <li><strong>Biliary colic:</strong> Right upper quadrant pain after meals</li>
                                <li><strong>Pancreatitis:</strong> Radiating back pain, elevated amylase/lipase</li>
                                <li><strong>Zollinger-Ellison syndrome:</strong> Refractory ulcers, diarrhea</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Treatment Section -->
            <section class="section" id="treatment">
                <h2 class="section-title">
                    <i class="fas fa-pills"></i>
                    Treatment
                </h2>

                <div class="algorithm-flow">
                    <div class="flow-step step-1">
                        <div class="flow-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="flow-content">
                            <div class="flow-title">Assess for Active Bleeding</div>
                            <p>Evaluate hemodynamic stability and signs of GI bleeding</p>
                        </div>
                    </div>
                    <div class="flow-step step-2">
                        <div class="flow-icon">
                            <i class="fas fa-microscope"></i>
                        </div>
                        <div class="flow-content">
                            <div class="flow-title">Determine H. pylori Status</div>
                            <p>Test for H. pylori infection to guide treatment approach</p>
                        </div>
                    </div>
                    <div class="flow-step step-3">
                        <div class="flow-icon">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div class="flow-content">
                            <div class="flow-title">Initiate Appropriate Therapy</div>
                            <p>Start bleeding control, acid suppression, or eradication therapy</p>
                        </div>
                    </div>
                    <div class="flow-step step-4">
                        <div class="flow-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <div class="flow-content">
                            <div class="flow-title">Follow-up & Monitor</div>
                            <p>Ensure healing and prevent recurrence</p>
                        </div>
                    </div>
                </div>

                <div class="cards-grid">
                    <div class="card treatment" data-card-id="bleeding-management">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-ambulance"></i>
                                </div>
                                Active Bleeding Management
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Emergency management of bleeding peptic ulcers
                            </p>
                            <div class="badges-container">
                                <span class="badge red pulse"><i class="fas fa-exclamation-triangle"></i> Emergency</span>
                                <span class="badge amber"><i class="fas fa-clock"></i> Within 24h</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Resuscitation:</strong> ABC principles, blood products as needed</li>
                                <li><strong>Risk assessment:</strong> Blatchford score at presentation</li>
                                <li><strong>Endoscopy:</strong> Within 24 hours of presentation</li>
                                <li><strong>Hemostasis:</strong> Clips, thermal coagulation, or fibrin/thrombin</li>
                                <li><strong>IV PPI:</strong> 80mg bolus, then 8mg/hr infusion for 72 hours</li>
                                <li><strong>NSAIDs:</strong> Stop immediately if possible</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card treatment" data-card-id="h-pylori-eradication">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-bacterium"></i>
                                </div>
                                H. pylori Eradication Therapy
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Antibiotic regimens for H. pylori positive patients
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-check-circle"></i> First-line</span>
                                <span class="badge amber"><i class="fas fa-pills"></i> 7-day course</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>First-line (non-penicillin allergic):</strong> PPI + amoxicillin + clarithromycin/metronidazole</li>
                                <li><strong>Penicillin allergic:</strong> PPI + clarithromycin + metronidazole</li>
                                <li><strong>Duration:</strong> 7 days (local protocols may vary)</li>
                                <li><strong>Adherence:</strong> Emphasize importance of completing course</li>
                                <li><strong>Test of cure:</strong> Urea breath test 6-8 weeks post-treatment</li>
                                <li><strong>Second-line:</strong> Quadruple therapy if first-line fails</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card treatment" data-card-id="acid-suppression">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                Acid Suppression Therapy
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                PPI therapy for ulcer healing and maintenance
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-heart"></i> Standard</span>
                                <span class="badge amber"><i class="fas fa-calendar"></i> 4-8 weeks</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Standard dose PPI:</strong> Once daily for 4-8 weeks</li>
                                <li><strong>H2 antagonists:</strong> Alternative if PPI not tolerated</li>
                                <li><strong>NSAID users:</strong> Continue PPI prophylaxis if NSAID continued</li>
                                <li><strong>GERD symptoms:</strong> Consider long-term maintenance therapy</li>
                                <li><strong>High-risk patients:</strong> Long-term PPI for recurrence prevention</li>
                                <li><strong>Monitoring:</strong> Review need for continued therapy annually</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card treatment" data-card-id="nsaid-management">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-hand-paper"></i>
                                </div>
                                NSAID Management
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Strategies for patients requiring NSAIDs
                            </p>
                            <div class="badges-container">
                                <span class="badge amber"><i class="fas fa-balance-scale"></i> Risk-Benefit</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Stop NSAID:</strong> If possible, discontinue completely</li>
                                <li><strong>Lowest effective dose:</strong> Minimize dose if continuation necessary</li>
                                <li><strong>COX-2 inhibitors:</strong> Consider in high-risk patients</li>
                                <li><strong>Gastroprotection:</strong> Always co-prescribe PPI with NSAID</li>
                                <li><strong>Alternatives:</strong> Paracetamol or other analgesics when appropriate</li>
                                <li><strong>Review:</strong> Regular (≥6 monthly) assessment of NSAID need</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Follow-up Section -->
            <section class="section" id="followup">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i>
                    Follow-up
                </h2>

                <div class="cards-grid">
                    <div class="card followup" data-card-id="monitoring">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                Monitoring & Surveillance
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Follow-up protocols to ensure healing and prevent recurrence
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-check-circle"></i> Routine</span>
                                <span class="badge amber"><i class="fas fa-microscope"></i> Endoscopy</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Gastric ulcer:</strong> Repeat endoscopy 6-8 weeks to confirm healing</li>
                                <li><strong>H. pylori test of cure:</strong> Urea breath test 6-8 weeks post-treatment</li>
                                <li><strong>Washout period:</strong> 2 weeks after PPI, 4 weeks after antibiotics</li>
                                <li><strong>Duodenal ulcer:</strong> No routine follow-up needed if H. pylori eradicated</li>
                                <li><strong>Symptom review:</strong> Assess for recurrence or persistent symptoms</li>
                                <li><strong>Malignancy exclusion:</strong> Biopsy/repeat endoscopy if gastric ulcer persists</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card followup" data-card-id="complications">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-exclamation-circle"></i>
                                </div>
                                Complications
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Potential complications and their management
                            </p>
                            <div class="badges-container">
                                <span class="badge red"><i class="fas fa-ambulance"></i> Emergency</span>
                                <span class="badge amber"><i class="fas fa-procedures"></i> Intervention</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>GI bleeding:</strong> Most common complication (35% of cases)</li>
                                <li><strong>Perforation:</strong> Surgical emergency, high mortality in elderly</li>
                                <li><strong>Penetration:</strong> Into adjacent organs (pancreas)</li>
                                <li><strong>Gastric outlet obstruction:</strong> From pyloric channel scarring</li>
                                <li><strong>Anemia:</strong> Iron deficiency from chronic blood loss</li>
                                <li><strong>Recurrence:</strong> High if H. pylori not eradicated or NSAIDs continued</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card followup" data-card-id="prognosis">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                Prognosis & Prevention
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Expected outcomes and preventive strategies
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-thumbs-up"></i> Good</span>
                                <span class="badge green"><i class="fas fa-shield-alt"></i> Preventable</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Healing time:</strong> Duodenal ulcers 4 weeks, gastric ulcers 8 weeks with PPI</li>
                                <li><strong>Recurrence reduction:</strong> From 64% to 14% for duodenal ulcers post-H. pylori eradication</li>
                                <li><strong>Prevention:</strong> H. pylori eradication before long-term NSAID therapy</li>
                                <li><strong>Lifestyle:</strong> Smoking cessation, avoid excessive alcohol</li>
                                <li><strong>Medication review:</strong> Regular assessment of NSAID need</li>
                                <li><strong>Patient education:</strong> Warning signs and adherence importance</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card followup" data-card-id="patient-education">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                Patient Education
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Key points for patient counseling and education
                            </p>
                            <div class="badges-container">
                                <span class="badge green"><i class="fas fa-info-circle"></i> Education</span>
                            </div>
                            <ul class="card-list">
                                <li><strong>Medication adherence:</strong> Complete full course of therapy</li>
                                <li><strong>Warning signs:</strong> Seek care for bleeding, black stools, vomiting</li>
                                <li><strong>NSAID avoidance:</strong> Avoid unless essential and prescribed</li>
                                <li><strong>Smoking cessation:</strong> Strongly recommended</li>
                                <li><strong>As-needed therapy:</strong> Self-management with antacids if appropriate</li>
                                <li><strong>Follow-up:</strong> Attend scheduled appointments and tests</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Progress Sidebar -->
        <aside class="progress-sidebar">
            <h3>
                <i class="fas fa-map-marked-alt"></i>
                Progress
            </h3>
            <div class="progress-item active" data-section="assessment">
                <i class="fas fa-clipboard-check"></i>
                <span>Assessment</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-item" data-section="diagnosis">
                <i class="fas fa-microscope"></i>
                <span>Diagnosis</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-item" data-section="treatment">
                <i class="fas fa-pills"></i>
                <span>Treatment</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-item" data-section="followup">
                <i class="fas fa-chart-line"></i>
                <span>Follow-up</span>
            </div>
        </aside>
    </div>

    <button class="print-button" onclick="window.print()">
        <i class="fas fa-print"></i>
        <span>Print Algorithm</span>
    </button>

    <footer class="footer">
        <p>Based on BMJ Best Practice Guidelines | Last updated: July 2025</p>
        <p>For healthcare professionals only - Clinical judgement should always be applied</p>
    </footer>

    <script>
        // Card expansion functionality
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.toggle('expanded');
                
                // Add fade-in animation to content when expanded
                if (this.classList.contains('expanded')) {
                    const content = this.querySelector('.card-content');
                    content.classList.add('fade-in');
                    setTimeout(() => content.classList.remove('fade-in'), 500);
                }
            });
        });

        // Progress sidebar navigation
        const progressItems = document.querySelectorAll('.progress-item');
        const sections = document.querySelectorAll('.section');

        // Update active progress item based on scroll position
        function updateProgress() {
            const scrollPosition = window.scrollY + 200;
            
            sections.forEach((section, index) => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    // Remove active class from all items
                    progressItems.forEach(item => item.classList.remove('active'));
                    
                    // Add active class to current item
                    progressItems[index].classList.add('active');
                    
                    // Mark previous items as completed
                    for (let i = 0; i < index; i++) {
                        progressItems[i].classList.add('completed');
                    }
                }
            });
        }

        // Smooth scroll to section when clicking progress item
        progressItems.forEach(item => {
            item.addEventListener('click', function() {
                const targetSection = this.getAttribute('data-section');
                const section = document.getElementById(targetSection);
                
                section.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // Throttle scroll events for better performance
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }
            scrollTimeout = setTimeout(updateProgress, 10);
        });

        // Initialize progress on page load
        updateProgress();

        // Auto-expand first card in each section
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const firstCards = document.querySelectorAll('.card:first-child');
                firstCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('expanded');
                    }, index * 200);
                });
            }, 500);
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Collapse all expanded cards
                document.querySelectorAll('.card.expanded').forEach(card => {
                    card.classList.remove('expanded');
                });
            }
        });

        // Expand all cards when printing
        window.addEventListener('beforeprint', function() {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.add('expanded');
            });
        });

        // Collapse cards after printing
        window.addEventListener('afterprint', function() {
            document.querySelectorAll('.card').forEach((card, index) => {
                if (index > 3) { // Keep first 4 cards expanded
                    card.classList.remove('expanded');
                }
            });
        });

        // Add pulse animation to emergency badges periodically
        setInterval(() => {
            document.querySelectorAll('.badge.red.pulse').forEach(badge => {
                badge.style.animation = 'none';
                setTimeout(() => badge.style.animation = 'pulse 2s infinite', 10);
            });
        }, 10000);

        // Track user interaction for analytics (optional)
        const interactionData = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            interactions: []
        };

        // Log card interactions
        document.querySelectorAll('.card').forEach(card => {
            const cardId = card.getAttribute('data-card-id');
            card.addEventListener('click', function() {
                interactionData.interactions.push({
                    type: 'card_click',
                    cardId: cardId,
                    timestamp: new Date().toISOString()
                });
            });
        });

        // Save interaction data before page unload
        window.addEventListener('beforeunload', function() {
            if (interactionData.interactions.length > 0) {
                // In a real application, send this data to your analytics server
                console.log('User interactions:', interactionData);
            }
        });

        // Add swipe support for mobile devices
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                // Swipe detected, could be used for navigation
                const currentActive = document.querySelector('.progress-item.active');
                const allItems = Array.from(progressItems);
                const currentIndex = allItems.indexOf(currentActive);
                
                if (diff > 0 && currentIndex < allItems.length - 1) {
                    // Swipe left - next section
                    allItems[currentIndex + 1].click();
                } else if (diff < 0 && currentIndex > 0) {
                    // Swipe right - previous section
                    allItems[currentIndex - 1].click();
                }
            }
        }

        // Add search functionality
        const searchInput = document.createElement('input');
        searchInput.type = 'text';
        searchInput.placeholder = 'Search algorithm...';
        searchInput.style.cssText = `
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 20px;
            width: 200px;
            z-index: 1000;
            display: none;
        `;
        document.body.appendChild(searchInput);

        // Show search on Ctrl/Cmd + F
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                searchInput.style.display = 'block';
                searchInput.focus();
            }
        });

        // Hide search on Escape
        searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                this.style.display = 'none';
                this.value = '';
                clearHighlights();
            }
        });

        // Search functionality
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            clearHighlights();
            
            if (searchTerm.length > 2) {
                highlightText(searchTerm);
            }
        });

        function highlightText(searchTerm) {
            const walker = document.createTreeWalker(
                document.body,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );
            
            const textNodes = [];
            let node;
            
            while (node = walker.nextNode()) {
                if (node.nodeValue.toLowerCase().includes(searchTerm)) {
                    textNodes.push(node);
                }
            }
            
            textNodes.forEach(node => {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.style.backgroundColor = '#ffeb3b';
                span.style.padding = '2px';
                
                const regex = new RegExp(`(${searchTerm})`, 'gi');
                const parts = node.nodeValue.split(regex);
                
                parts.forEach((part, index) => {
                    if (part.toLowerCase() === searchTerm) {
                        const highlight = document.createElement('span');
                        highlight.className = 'highlight';
                        highlight.style.backgroundColor = '#ffeb3b';
                        highlight.textContent = part;
                        node.parentNode.insertBefore(highlight, node);
                    } else if (part) {
                        const text = document.createTextNode(part);
                        node.parentNode.insertBefore(text, node);
                    }
                });
                
                node.parentNode.removeChild(node);
            });
        }

        function clearHighlights() {
            document.querySelectorAll('.highlight').forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
        }
    </script>
</body>
</html>