<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBS Clinical Quick-Scan Reference</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #1565c0;
            --primary-light: #e3f2fd;
            --urgent-red: #d32f2f;
            --urgent-bg: #ffebee;
            --safe-green: #2e7d32;
            --safe-bg: #e8f5e9;
            --neutral-dark: #37474f;
            --neutral-gray: #f4f6f8;
            --white: #ffffff;
            --shadow-card: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.15);
            --radius: 12px;
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--neutral-gray);
            color: var(--neutral-dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Layout & Header --- */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 3px solid var(--primary-blue);
        }

        h1 {
            color: var(--primary-blue);
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 1rem;
            color: #666;
            font-weight: 500;
        }

        /* --- Navigation Tabs --- */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: var(--white);
            border: 2px solid transparent;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            color: #666;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-card);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            color: var(--primary-blue);
        }

        .tab-btn.active {
            background: var(--primary-blue);
            color: var(--white);
            box-shadow: var(--shadow-hover);
        }

        /* --- Main Content Area --- */
        .tab-content {
            display: none; /* Hidden by default */
            animation: fadeIn 0.4s ease-out;
        }

        .tab-content.active {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Cards --- */
        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow-card);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 6px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .card h3 {
            margin-bottom: 15px;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card ul {
            list-style-type: none;
        }

        .card li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .card li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: var(--primary-blue);
            font-weight: bold;
        }

        /* --- Color Coded Cards --- */
        .card.urgent {
            border-left-color: var(--urgent-red);
            background: linear-gradient(to right, var(--urgent-bg), var(--white));
        }
        .card.urgent h3 { color: var(--urgent-red); }
        .card.urgent li::before { color: var(--urgent-red); }

        .card.safe {
            border-left-color: var(--safe-green);
            background: linear-gradient(to right, var(--safe-bg), var(--white));
        }
        .card.safe h3 { color: var(--safe-green); }
        .card.safe li::before { color: var(--safe-green); }

        .card.info {
            border-left-color: var(--primary-blue);
        }
        .card.info h3 { color: var(--primary-blue); }

        /* --- Grid Spans --- */
        .span-12 { grid-column: span 12; }
        .span-8 { grid-column: span 8; }
        .span-6 { grid-column: span 6; }
        .span-4 { grid-column: span 4; }

        /* --- Elements inside cards --- */
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
        }

        .checklist-icon {
            min-width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        .checklist-icon.red { background-color: var(--urgent-red); }
        .checklist-icon.green { background-color: var(--safe-green); }

        .pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .pill.red { background: var(--urgent-red); color: white; }
        .pill.blue { background: var(--primary-blue); color: white; }

        /* --- Tables (For Prescribing) --- */
        .drug-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }
        .drug-table th {
            text-align: left;
            padding: 10px;
            background: #eee;
            color: #555;
            border-bottom: 2px solid #ddd;
        }
        .drug-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .warning-text {
            color: var(--urgent-red);
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* --- Responsive --- */
        @media (max-width: 900px) {
            .span-8, .span-6, .span-4 {
                grid-column: span 12;
            }
        }

        /* --- Icons --- */
        .icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* --- Animation for Red Flags --- */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }
        .pulse-urgent {
            animation: pulse-red 2s infinite;
        }

    </style>
</head>
<body>

<div class="app-container">
    <header>
        <h1>IBS Clinical Quick-Scan</h1>
        <div class="subtitle">Adults • Primary Care • NICE CKS 2025</div>
    </header>

    <nav class="nav-tabs">
        <button class="tab-btn active" onclick="openTab('diagnosis')">
            <svg class="icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
            Diagnosis
        </button>
        <button class="tab-btn" onclick="openTab('management')">
            <svg class="icon" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>
            Management
        </button>
        <button class="tab-btn" onclick="openTab('prescribing')">
            <svg class="icon" viewBox="0 0 24 24"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/></svg>
            Prescribing
        </button>
    </nav>

    <!-- TAB 1: DIAGNOSIS -->
    <main id="diagnosis" class="tab-content active">
        
        <!-- Critical Red Flags - Always Top -->
        <div class="card urgent span-12 pulse-urgent">
            <h3>
                <svg class="icon" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
                RED FLAGS (Alarm Symptoms)
            </h3>
            <p style="margin-bottom: 15px;">If present, investigate for other causes (e.g., cancer, IBD) <strong>before</strong> diagnosing IBS.</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <ul>
                    <li>Unintentional/unexplained weight loss</li>
                    <li>Rectal bleeding</li>
                    <li>Family history of bowel/ovarian cancer</li>
                </ul>
                <ul>
                    <li>Change in bowel habit > 60yrs</li>
                    <li>Abdominal/rectal mass</li>
                    <li>Iron deficiency anaemia</li>
                </ul>
                <ul>
                    <li>Raised faecal calprotectin</li>
                    <li>Night-time symptoms (nocturnal diarrhoea)</li>
                    <li>Recent onset in >50yrs</li>
                </ul>
            </div>
        </div>

        <!-- Rome IV Criteria -->
        <div class="card info span-8">
            <h3>
                <svg class="icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                Rome IV Diagnostic Criteria
            </h3>
            <div class="checklist-item">
                <div class="checklist-icon blue">1</div>
                <div>Recurrent abdominal pain, on average, at least 1 day/week in the last 3 months.</div>
            </div>
            <div class="checklist-item">
                <div class="checklist-icon blue">2</div>
                <div>Onset at least 6 months prior to diagnosis.</div>
            </div>
            <div class="checklist-item">
                <div class="checklist-icon blue">+</div>
                <div>Associated with <strong>two or more</strong> of the following:</div>
            </div>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>Related to defecation</li>
                <li>Associated with a change in frequency of stool</li>
                <li>Associated with a change in form (appearance) of stool</li>
            </ul>
        </div>

        <!-- Investigations -->
        <div class="card safe span-4">
            <h3>
                <svg class="icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
                Routine Investigations
            </h3>
            <p>To exclude differentials:</p>
            <ul>
                <li><strong>FBC</strong> (Anaemia)</li>
                <li><strong>CRP / ESR</strong> (Inflammation)</li>
                <li><strong>Coeliac serology</strong> (if diarrhoea/mixed)</li>
                <li><strong>Faecal calprotectin</strong> (if diarrhoea & ≤45yrs)</li>
            </ul>
        </div>

        <!-- Subtypes -->
        <div class="card info span-12">
            <h3>IBS Subtypes (Based on Bristol Stool Form)</h3>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <span class="pill blue">IBS-D (Diarrhoea)</span>
                <span class="pill blue">IBS-C (Constipation)</span>
                <span class="pill blue">IBS-M (Mixed)</span>
                <span class="pill blue">IBS-U (Unclassified)</span>
            </div>
        </div>
    </main>

    <!-- TAB 2: MANAGEMENT -->
    <main id="management" class="tab-content">
        
        <!-- Initial Advice -->
        <div class="card safe span-12">
            <h3>
                <svg class="icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                Step 1: Lifestyle & General Advice
            </h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div>
                    <strong>Diet & Lifestyle:</strong>
                    <ul>
                        <li>Regular meals, balanced diet.</li>
                        <li>Adequate fluid intake (water).</li>
                        <li>Regular physical activity (30 mins, 5 days/week).</li>
                        <li>Probiotics (try for 12 weeks if chosen).</li>
                    </ul>
                </div>
                <div>
                    <strong>Specific Triggers:</strong>
                    <ul>
                        <li><strong>Diarrhoea:</strong> Limit insoluble fibre (bran), caffeine, alcohol, spicy/fatty foods, gas-producing foods.</li>
                        <li><strong>Constipation:</strong> Increase soluble fibre (oats, linseed, ispaghula). <em>Avoid lactulose.</em></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Pharmacological Management -->
        <div class="card info span-8">
            <h3>
                <svg class="icon" viewBox="0 0 24 24"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/></svg>
                Step 2: Pharmacological Treatment (If symptoms persist)
            </h3>
            
            <h4>Abdominal Pain / Spasm</h4>
            <ul>
                <li><strong>Antispasmodics:</strong> (e.g., Mebeverine, Alverine, Peppermint oil). Take as needed.</li>
                <li><strong>Review:</strong> After 3 months. Discontinue if ineffective.</li>
            </ul>
            
            <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">

            <h4>Refractory Pain (Second Line)</h4>
            <ul>
                <li><strong>TCA (Low Dose):</strong> e.g., Amitriptyline 10mg at night. Start low, titrate. Use for pain modulation, not depression.</li>
                <li><strong>SSRI:</strong> e.g., Citalopram, Fluoxetine (if TCA contraindicated/ineffective).</li>
            </ul>
        </div>

        <!-- Symptom Control -->
        <div class="card info span-4">
            <h3>Targeted Symptom Control</h3>
            
            <h4 style="color: var(--primary-blue); margin-top: 10px;">Diarrhoea (IBS-D)</h4>
            <ul>
                <li><strong>Loperamide:</strong> For urgent/frequent stools.</li>
            </ul>

            <h4 style="color: var(--primary-blue); margin-top: 10px;">Constipation (IBS-C)</h4>
            <ul>
                <li><strong>Bulk-forming laxative:</strong> (e.g., Ispaghula husk).</li>
                <li><strong>Linaclotide:</strong> (Second line, if >12 months, severe).</li>
            </ul>
        </div>

        <!-- Referral -->
        <div class="card urgent span-12">
            <h3>When to Refer</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                <ul>
                    <li>Diagnostic uncertainty</li>
                    <li>Symptoms refractory to primary care management</li>
                </ul>
                <ul>
                    <li>Red flags present (Urgent 2-week wait)</li>
                    <li>Patient requests specialist opinion</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- TAB 3: PRESCRIBING -->
    <main id="prescribing" class="tab-content">
        
        <!-- Linaclotide -->
        <div class="card info span-6">
            <h3>Linaclotide (Constella)</h3>
            <table class="drug-table">
                <tr>
                    <th>Indication</th>
                    <td>IBS with constipation (Moderate to severe)</td>
                </tr>
                <tr>
                    <th>Dose</th>
                    <td>290 micrograms once daily, 30 mins before food.</td>
                </tr>
                <tr>
                    <th>Duration</th>
                    <td>Review after 4 weeks. Stop if no response.</td>
                </tr>
                <tr>
                    <th>Caution/CI</th>
                    <td class="warning-text">Do not use if obstruction, IBD, or pregnant. Watch for severe diarrhoea.</td>
                </tr>
            </table>
        </div>

        <!-- Loperamide -->
        <div class="card info span-6">
            <h3>Loperamide (Imodium)</h3>
            <table class="drug-table">
                <tr>
                    <th>Indication</th>
                    <td>IBS with diarrhoea (Symptomatic relief)</td>
                </tr>
                <tr>
                    <th>Dose</th>
                    <td>Start 4mg, then 2mg after loose stool. Max 16mg/day.</td>
                </tr>
                <tr>
                    <th>Duration</th>
                    <td>Short term / Acute episodes. Review 3 months.</td>
                </tr>
                <tr>
                    <th>Caution/CI</th>
                    <td class="warning-text">Avoid in active ulcerative colitis, antibiotic colitis, pregnancy. Risks: Cardiac events if overdose.</td>
                </tr>
            </table>
        </div>

        <!-- Antispasmodics -->
        <div class="card info span-6">
            <h3>Antispasmodics</h3>
            <table class="drug-table">
                <tr>
                    <th>Options</th>
                    <td>
                        <strong>Mebeverine:</strong> 135mg tds (20 min before food) or 200mg MR bd.<br>
                        <strong>Alverine:</strong> 60-120mg tds.<br>
                        <strong>Peppermint Oil:</strong> 1-2 caps tds.
                    </td>
                </tr>
                <tr>
                    <th>Adverse Effects</th>
                    <td>Generally mild. Mebeverine: allergy. Peppermint: Heartburn/Reflex.</td>
                </tr>
            </table>
        </div>

        <!-- TCAs -->
        <div class="card info span-6">
            <h3>Antidepressants (Pain Modulation)</h3>
            <table class="drug-table">
                <tr>
                    <th>TCA (1st Choice)</th>
                    <td><strong>Amitriptyline:</strong> Start 5-10mg at night. Increase by 10mg every 2 weeks (Max 30mg).</td>
                </tr>
                <tr>
                    <th>SSRI (2nd Choice)</th>
                    <td><strong>Fluoxetine/Citalopram:</strong> If TCA ineffective.</td>
                </tr>
                <tr>
                    <th>Review</th>
                    <td>Review after 4 weeks. Continue for 6 months if effective.</td>
                </tr>
            </table>
        </div>

        <div class="card safe span-12">
            <h3>Notes</h3>
            <ul>
                <li>Explain to patients these are used for <strong>pain relief</strong> at low doses, not for treating depression.</li>
                <li>Laxatives: Any class can be used except Lactulose (may cause gas/bloating).</li>
                <li>Enterosgel is an OTC option for diarrhoea (not typically prescribed initially).</li>
            </ul>
        </div>
    </main>

    <footer style="text-align: center; margin-top: 40px; color: #888; font-size: 0.9rem;">
        <p>Based on NICE CKS Topic: Irritable Bowel Syndrome (Last revised July 2025).</p>
        <p>Designed for clinical reference. Always use clinical judgement.</p>
    </footer>
</div>

<script>
    function openTab(tabName) {
        // Hide all tab content
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach(content => {
            content.classList.remove('active');
        });

        // Remove active class from all buttons
        const buttons = document.querySelectorAll('.tab-btn');
        buttons.forEach(btn => {
            btn.classList.remove('active');
        });

        // Show specific tab and activate button
        document.getElementById(tabName).classList.add('active');
        
        // Find the button that called this function and make it active
        // We use event.currentTarget if passed, otherwise we search by onclick attribute (simple approach)
        const activeButton = Array.from(buttons).find(btn => btn.getAttribute('onclick').includes(tabName));
        if(activeButton) {
            activeButton.classList.add('active');
        }
    }
</script>

</body>
</html>