<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diverticular Disease | Clinical Quick-Scan</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #0d47a1;
            --primary-light: #e3f2fd;
            --primary-dark: #002171;
            
            --danger-red: #d32f2f;
            --danger-bg: #ffebee;
            --danger-hover: #b71c1c;

            --success-green: #2e7d32;
            --success-bg: #e8f5e9;
            
            --neutral-grey: #f5f5f5;
            --text-main: #212121;
            --text-muted: #616161;
            --border-color: #e0e0e0;
            
            --shadow-card: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-hover: 0 4px 12px rgba(0,0,0,0.15);
            
            --radius: 8px;
            --transition: all 0.2s ease-in-out;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #fcfcfc;
            color: var(--text-main);
            line-height: 1.5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* App-like feel */
        }

        /* --- Header & Nav --- */
        header {
            background-color: #fff;
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }

        .brand {
            display: flex;
            flex-direction: column;
        }

        .brand h1 {
            font-size: 1.25rem;
            color: var(--primary-blue);
            font-weight: 700;
        }

        .brand span {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header-meta {
            text-align: right;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* --- Main Layout --- */
        .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Sidebar / Tabs */
        .sidebar {
            width: 250px;
            background: #fff;
            border-right: 1px solid var(--border-color);
            padding: 1rem 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .nav-btn {
            background: none;
            border: none;
            text-align: left;
            padding: 1rem 1.5rem;
            font-size: 0.95rem;
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition);
            border-left: 3px solid transparent;
            font-weight: 500;
        }

        .nav-btn:hover {
            background-color: var(--neutral-grey);
            color: var(--primary-blue);
        }

        .nav-btn.active {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            border-left-color: var(--primary-blue);
            font-weight: 600;
        }

        .nav-icon {
            margin-right: 10px;
            width: 18px;
            vertical-align: text-bottom;
        }

        /* Content Area */
        main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .section-content {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .section-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Cards & Layout --- */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--shadow-card);
            padding: 1.5rem;
            border-top: 4px solid transparent;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        .card h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* --- Semantic Colors --- */
        .card.danger { border-top-color: var(--danger-red); }
        .card.danger h3 { color: var(--danger-red); }
        
        .card.success { border-top-color: var(--success-green); }
        .card.success h3 { color: var(--success-green); }

        .card.info { border-top-color: var(--primary-blue); }
        .card.info h3 { color: var(--primary-blue); }

        .alert-banner {
            background-color: var(--danger-bg);
            border: 1px solid #ffcdd2;
            color: var(--danger-red);
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .alert-banner svg { flex-shrink: 0; }

        /* --- Typography & Lists --- */
        ul {
            list-style: none;
            padding-left: 0;
        }

        li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.95rem;
        }

        li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: var(--text-muted);
            font-weight: bold;
        }

        li.check::before { content: "✓"; color: var(--success-green); }
        li.alert::before { content: "!"; color: var(--danger-red); font-weight: bold; }

        strong { color: var(--text-main); font-weight: 600; }
        .text-sm { font-size: 0.85rem; color: var(--text-muted); }

        /* --- Interactive Elements --- */
        .chip {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            background: #eee;
            color: #555;
        }
        .chip.red { background: var(--danger-bg); color: var(--danger-red); }
        .chip.green { background: var(--success-bg); color: var(--success-green); }

        .action-btn {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .action-btn:hover { background-color: var(--primary-dark); }

        /* --- Tables --- */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        th, td {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }
        th {
            background-color: var(--neutral-grey);
            font-weight: 600;
            color: var(--text-muted);
        }

        /* --- Modal --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .modal-overlay.open { opacity: 1; pointer-events: auto; }
        
        .modal {
            background: white;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            border-radius: var(--radius);
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
        }

        /* --- Mobile Responsive --- */
        @media (max-width: 768px) {
            body { overflow: auto; }
            .app-container { flex-direction: column; overflow: visible; }
            .sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--border-color); flex-direction: row; overflow-x: auto; white-space: nowrap; padding: 0.5rem; }
            .nav-btn { padding: 0.75rem 1rem; border-left: none; border-bottom: 3px solid transparent; }
            .nav-btn.active { border-left: none; border-bottom-color: var(--primary-blue); }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            main { padding: 1rem; overflow: visible; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <h1>Diverticular Disease</h1>
        <span>CKS / NICE Guideline Quick Reference</span>
    </div>
    <div class="header-meta">
        Last Revised: Dec 2023<br>
        Target: Primary Care
    </div>
</header>

<div class="app-container">
    <nav class="sidebar">
        <button class="nav-btn active" onclick="switchTab('tab-diagnosis')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            Diagnosis & Assessment
        </button>
        <button class="nav-btn" onclick="switchTab('tab-diverticulosis')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
            Diverticulosis
        </button>
        <button class="nav-btn" onclick="switchTab('tab-disease')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.1.5-3z"></path></svg>
            Diverticular Disease
        </button>
        <button class="nav-btn" style="color: var(--danger-red); font-weight: 700;" onclick="switchTab('tab-acute')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            Acute Diverticulitis
        </button>
        <button class="nav-btn" onclick="switchTab('tab-prescribing')">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
            Prescribing
        </button>
    </nav>

    <main>
        
        <!-- DIAGNOSIS TAB -->
        <section id="tab-diagnosis" class="section-content active">
            <h2 style="margin-bottom: 1rem;">Diagnosis & Assessment</h2>
            
            <div class="grid-2">
                <div class="card info">
                    <h3>Symptomatic Disease</h3>
                    <p class="text-sm">Consider diverticular disease if:</p>
                    <ul>
                        <li class="check">Intermittent abdominal pain (LLQ typically)</li>
                        <li class="check">Pain relieved by defecation/flatus</li>
                        <li class="check">Tenderness in Left Lower Quadrant (LLQ)</li>
                        <li>Bloating, change in bowel habit</li>
                    </ul>
                </div>
                <div class="card danger">
                    <h3>Acute Diverticulitis</h3>
                    <p class="text">Suspect if constant abdominal pain (usually severe, LLQ) PLUS:</p>
                    <ul>
                        <li class="alert">Fever</li>
                        <li class="alert">Sudden change in bowel habit</li>
                        <li class="alert">Significant rectal bleeding</li>
                        <li>Palpable mass / distention</li>
                    </ul>
                </div>
            </div>

            <div class="card info" style="margin-top: 1rem;">
                <h3>Differential Diagnosis</h3>
                <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                    <div>
                        <strong>GI:</strong>
                        <ul>
                            <li>Irritable Bowel Syndrome</li>
                            <li>Colorectal Cancer</li>
                            <li>Inflammatory Bowel Disease</li>
                            <li>Appendicitis (if RLQ pain)</li>
                        </ul>
                    </div>
                    <div>
                        <strong>Gynae (Women):</strong>
                        <ul>
                            <li>Ectopic pregnancy</li>
                            <li>Ovarian torsion</li>
                            <li>Pelvic Inflammatory Disease</li>
                        </ul>
                    </div>
                    <div>
                        <strong>Urology:</strong>
                        <ul>
                            <li>UTI / Pyelonephritis</li>
                            <li>Ureteric colic</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- DIVERTICULOSIS TAB -->
        <section id="tab-diverticulosis" class="section-content">
            <h2 style="margin-bottom: 1rem;">Scenario: Asymptomatic Diverticulosis</h2>
            <div class="alert-banner success" style="background-color: var(--success-bg); color: var(--success-green); border: none;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                <span><strong>No specific treatment needed.</strong> Condition is asymptomatic. Reassurance is key.</span>
            </div>

            <div class="grid-3">
                <div class="card success">
                    <h3>Diet & Lifestyle</h3>
                    <ul>
                        <li class="check"><strong>High Fibre Diet:</strong> Whole grains, fruit, veg.</li>
                        <li class="check"><strong>No restrictions:</strong> Seeds, nuts, popcorn ok.</li>
                        <li class="check"><strong>Hydration:</strong> Adequate fluids (esp. if increasing fibre).</li>
                        <li class="check">Exercise & weight loss.</li>
                        <li class="check">Stop smoking.</li>
                    </ul>
                </div>
                <div class="card info">
                    <h3>Constipation?</h3>
                    <p>If constipated with low fibre diet:</p>
                    <ul>
                        <li>Increase fibre <strong>gradually</strong> to minimize bloating.</li>
                        <li>Consider bulk-forming laxatives.</li>
                    </ul>
                </div>
                <div class="card info">
                    <h3>Follow Up</h3>
                    <ul>
                        <li>Routine follow-up <strong>not necessary</strong> if asymptomatic.</li>
                        <li>Advise on red flag symptoms requiring review.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- DIVERTICULAR DISEASE TAB -->
        <section id="tab-disease" class="section-content">
            <h2 style="margin-bottom: 1rem;">Scenario: Symptomatic Diverticular Disease</h2>
            <p style="margin-bottom: 1rem;">Management of recurring symptoms without inflammation.</p>

            <div class="grid-2">
                <div class="card danger">
                    <h3>Immediate Action</h3>
                    <ul>
                        <li class="alert"><strong>Urgent Admission</strong> if significant rectal bleeding (haemodynamic instability).</li>
                    </ul>
                </div>
                <div class="card info">
                    <h3>Medication Review</h3>
                    <ul>
                        <li><strong>Avoid</strong> NSAIDs and Opioids (risk of perforation).</li>
                    </ul>
                </div>
            </div>

            <div class="grid-2">
                <div class="card success">
                    <h3>Management</h3>
                    <ul>
                        <li>High fibre diet (may take weeks for benefit).</li>
                        <li>Bulk-forming laxatives if diet intolerant or persistent constipation.</li>
                        <li>Simple analgesia: Paracetamol.</li>
                        <li>Antispasmodics (e.g., Mebeverine) for cramping.</li>
                    </ul>
                </div>
                <div class="card info">
                    <h3>Advice</h3>
                    <ul>
                        <li><strong>Do NOT offer antibiotics.</strong></li>
                        <li>Reassess if symptoms persist.</li>
                        <li>Consider alternative diagnoses.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ACUTE DIVERTICULITIS TAB -->
        <section id="tab-acute" class="section-content">
            <h2 style="margin-bottom: 1rem;">Scenario: Acute Diverticulitis</h2>

            <!-- Critical Alert -->
            <div class="alert-banner">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                <div>
                    <strong>ARRANGE SAME-DAY HOSPITAL ASSESSMENT IF:</strong>
                    <div style="margin-top:0.5rem; display:flex; gap:1rem; flex-wrap:wrap;">
                        <span class="chip red">Uncontrolled pain</span>
                        <span class="chip red">Signs of perforation/abscess</span>
                        <span class="chip red">Dehydration</span>
                        <span class="chip red">Unable to take oral fluids/antibiotics</span>
                        <span class="chip red">Age > 65</span>
                        <span class="chip red">Immunosuppressed</span>
                        <span class="chip red">Comorbidities</span>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <!-- Left: Unwell -->
                <div class="card info">
                    <h3>Patient: Systemically <span style="color:var(--primary-blue)">UNWELL</span></h3>
                    <p class="text-sm">No referral criteria, but febrile/unwell.</p>
                    <div style="margin: 1rem 0;">
                        <strong>Offer Oral Antibiotics (5 days):</strong>
                        <div style="margin-top: 0.5rem;">
                            <button class="action-btn" onclick="showDrug('co-amoxiclav')">1st Line: Co-amoxiclav 500/125mg TDS</button>
                        </div>
                        <p style="margin: 0.5rem 0; font-size: 0.9rem; color: var(--text-muted);">If penicillin allergy:</p>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="action-btn" style="background-color: #e0e0e0; color: #333;" onclick="showDrug('cefalexin')">Cefalexin + Metronidazole</button>
                            <button class="action-btn" style="background-color: #e0e0e0; color: #333;" onclick="showDrug('trimethoprim')">Trimethoprim + Metronidazole</button>
                        </div>
                    </div>
                </div>

                <!-- Right: Well -->
                <div class="card success">
                    <h3>Patient: Systemically <span style="color:var(--success-green)">WELL</span></h3>
                    <p class="text-sm">No signs of systemic infection.</p>
                    <div style="margin: 1rem 0;">
                        <ul>
                            <li class="check"><strong>Consider NO antibiotic strategy.</strong></li>
                            <li>Offer Paracetamol for pain.</li>
                            <li>Avoid NSAIDs/Opioids.</li>
                            <li>Advise to re-present if symptoms worsen.</li>
                            <li>Safety netting advice provided.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card danger" style="margin-top: 1.5rem;">
                <h3>Complications (Red Flags)</h3>
                <p style="margin-bottom: 1rem;">Immediate imaging/specialist referral required for:</p>
                <div class="grid-2">
                    <ul>
                        <li class="alert"><strong>Abscess:</strong> Abdominal mass / peri-rectal fullness on DRE.</li>
                        <li class="alert"><strong>Perforation:</strong> Rigidity, guarding, rebound tenderness.</li>
                    </ul>
                    <ul>
                        <li class="alert"><strong>Sepsis:</strong> Altered mental state, tachycardia, hypotension.</li>
                        <li class="alert"><strong>Fistula:</strong> Faecaluria, pneumaturia, vaginal faeces.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- PRESCRIBING TAB -->
        <section id="tab-prescribing" class="section-content">
            <h2 style="margin-bottom: 1rem;">Prescribing Information</h2>
            <p class="text-sm" style="margin-bottom: 1.5rem;">Click on a drug to view cautions, adverse effects, and interactions.</p>

            <div class="grid-3">
                <div class="card info" onclick="showDrug('co-amoxiclav')" style="cursor: pointer;">
                    <h3>Co-amoxiclav</h3>
                    <p>500/125 mg TDS (5 days)</p>
                    <p class="text-sm">1st line for acute diverticulitis.</p>
                </div>
                <div class="card info" onclick="showDrug('cefalexin')" style="cursor: pointer;">
                    <h3>Cefalexin</h3>
                    <p>500 mg BD/TDS (5 days)</p>
                    <p class="text-sm">Use with Metronidazole if penicillin allergy.</p>
                </div>
                <div class="card info" onclick="showDrug('metronidazole')" style="cursor: pointer;">
                    <h3>Metronidazole</h3>
                    <p>400 mg TDS (5 days)</p>
                    <p class="text-sm">Anaerobic cover. Avoid alcohol.</p>
                </div>
                <div class="card info" onclick="showDrug('trimethoprim')" style="cursor: pointer;">
                    <h3>Trimethoprim</h3>
                    <p>200 mg BD (5 days)</p>
                    <p class="text-sm">Alternative with Metronidazole.</p>
                </div>
            </div>
        </section>

    </main>
</div>

<!-- MODAL FOR DRUG INFO -->
<div class="modal-overlay" id="drug-modal" onclick="closeModal(event)">
    <div class="modal">
        <div class="modal-header">
            <h2 id="modal-title">Drug Name</h2>
            <button class="close-modal" onclick="closeModalDirect()">&times;</button>
        </div>
        <div class="modal-body" id="modal-content">
            <!-- Content injected via JS -->
        </div>
    </div>
</div>

<script>
    // --- Data Store ---
    const drugData = {
        'co-amoxiclav': {
            title: 'Co-amoxiclav',
            content: `
                <div class="card danger" style="margin-bottom:1rem;">
                    <strong>DO NOT prescribe if:</strong> True penicillin allergy (GI upset alone is not an allergy). History of jaundice/hepatic dysfunction.
                </div>
                <h4>Adverse Effects</h4>
                <ul>
                    <li>Diarrhoea (very common), nausea/vomiting.</li>
                    <li>Drug-induced enterocolitis.</li>
                    <li>Hepatitis, cholestatic jaundice.</li>
                    <li class="alert">Aseptic meningitis, Kounis syndrome (unknown freq).</li>
                </ul>
                <h4 style="margin-top:1rem;">Cautions</h4>
                <ul>
                    <li>Hepatic impairment.</li>
                    <li>Chronic kidney disease (reduce dose if eGFR < 30).</li>
                    <li>Pregnancy: Avoid unless essential.</li>
                </ul>
                <h4 style="margin-top:1rem;">Interactions</h4>
                <ul>
                    <li><strong>Warfarin:</strong> Monitor INR within 3 days.</li>
                    <li><strong>Allopurinol:</strong> Increased risk of rash.</li>
                    <li><strong>Methotrexate:</strong> Reduced excretion.</li>
                </ul>
            `
        },
        'cefalexin': {
            title: 'Cefalexin',
            content: `
                <h4>Adverse Effects</h4>
                <ul>
                    <li>Diarrhoea, nausea, abdominal discomfort.</li>
                    <li>Headache, dizziness.</li>
                    <li class="alert">Neurological: Tremor, myoclonia, convulsions, encephalopathy (esp. renal impairment).</li>
                </ul>
                <h4 style="margin-top:1rem;">Cautions</h4>
                <ul>
                    <li>History of immediate hypersensitivity to penicillin (cross-reactivity risk).</li>
                </ul>
                <h4 style="margin-top:1rem;">Interactions</h4>
                <ul>
                    <li><strong>Warfarin:</strong> May enhance anticoagulant effect. Monitor INR.</li>
                    <li><strong>Probenecid:</strong> Inhibits renal excretion.</li>
                </ul>
            `
        },
        'metronidazole': {
            title: 'Metronidazole',
            content: `
                <h4>Adverse Effects</h4>
                <ul>
                    <li>Nausea, metallic taste, furred tongue.</li>
                    <li>Peripheral neuropathy (rare).</li>
                    <li class="alert">QT prolongation reported (unknown freq).</li>
                </ul>
                <h4 style="margin-top:1rem;">Cautions</h4>
                <ul>
                    <li>Active/chronic CNS disease.</li>
                    <li>Hepatic encephalopathy (reduce dose).</li>
                    <li><strong>Alcohol:</strong> Disulfiram-like reaction. Warn patient to avoid alcohol during treatment and 48hrs after.</li>
                    <li>Pregnancy: 2nd/3rd trimester usually safe. Avoid high dose regimens in 1st trimester.</li>
                </ul>
                <h4 style="margin-top:1rem;">Interactions</h4>
                <ul>
                    <li><strong>Warfarin:</strong> Marked increase in effect. Monitor INR.</li>
                    <li><strong>Lithium:</strong> Increased risk of toxicity.</li>
                    <li><strong>Phenobarbital:</strong> Increases metronidazole metabolism.</li>
                </ul>
            `
        },
        'trimethoprim': {
            title: 'Trimethoprim',
            content: `
                <h4>Adverse Effects</h4>
                <ul>
                    <li>Nausea, vomiting, diarrhoea.</li>
                    <li class="alert">Blood disorders: Leucopenia, thrombocytopenia, hyperkalaemia.</li>
                    <li>Rashes (common).</li>
                </ul>
                <h4 style="margin-top:1rem;">Cautions</h4>
                <ul>
                    <li>Severe renal/hepatic insufficiency.</li>
                    <li>Risk of hyperkalaemia (monitor K+).</li>
                    <li>Pregnancy: <strong>Contraindicated in 1st trimester</strong> (folate antagonist). If essential, give Folic Acid 5mg.</li>
                </ul>
                <h4 style="margin-top:1rem;">Interactions</h4>
                <ul>
                    <li><strong>ACE-I / AIIRAs:</strong> Increased risk of hyperkalaemia.</li>
                    <li><strong>Warfarin:</strong> Potentiates effect. Monitor INR.</li>
                    <li><strong>Methotrexate:</strong> Increased risk of haematological toxicity.</li>
                </ul>
            `
        }
    };

    // --- Functions ---

    function switchTab(tabId) {
        // Hide all sections
        document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));

        // Show selected
        document.getElementById(tabId).classList.add('active');
        
        // Activate button
        const btn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(tabId));
        if(btn) btn.classList.add('active');
    }

    function showDrug(drugKey) {
        const data = drugData[drugKey];
        if(!data) return;

        document.getElementById('modal-title').innerText = data.title;
        document.getElementById('modal-content').innerHTML = data.content;
        
        const modal = document.getElementById('drug-modal');
        modal.classList.add('open');
    }

    function closeModal(e) {
        if (e.target.id === 'drug-modal') {
            document.getElementById('drug-modal').classList.remove('open');
        }
    }
    
    function closeModalDirect() {
        document.getElementById('drug-modal').classList.remove('open');
    }

    // Keyboard accessibility for modal
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape") {
            closeModalDirect();
        }
    });

</script>

</body>
</html>