<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urticaria and Angioedema Management Algorithm</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --tertiary-color: #e74c3c;
            --quaternary-color: #f39c12;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --hover-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            gap: 20px;
        }
        
        .content {
            flex: 1;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .progress-sidebar {
            width: 250px;
            position: sticky;
            top: 20px;
            height: fit-content;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .progress-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .progress-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 5px;
        }
        
        .progress-step:hover {
            background-color: #f1f9ff;
        }
        
        .progress-step.active {
            background-color: #e3f2fd;
            border-left: 4px solid var(--primary-color);
        }
        
        .progress-step i {
            margin-right: 10px;
            color: var(--primary-color);
        }
        
        .step-card {
            background-color: white;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .step-card:hover {
            box-shadow: var(--hover-shadow);
            transform: translateY(-5px);
        }
        
        .card-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .card-title i {
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .card-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .card-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
        }
        
        .card-content.expanded {
            padding: 0 20px 20px;
            max-height: 2000px;
        }
        
        .assessment {
            border-top: 5px solid var(--primary-color);
        }
        
        .assessment .card-title i {
            color: var(--primary-color);
        }
        
        .diagnosis {
            border-top: 5px solid var(--secondary-color);
        }
        
        .diagnosis .card-title i {
            color: var(--secondary-color);
        }
        
        .treatment {
            border-top: 5px solid var(--tertiary-color);
        }
        
        .treatment .card-title i {
            color: var(--tertiary-color);
        }
        
        .followup {
            border-top: 5px solid var(--quaternary-color);
        }
        
        .followup .card-title i {
            color: var(--quaternary-color);
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .badge-urgent {
            background-color: #ffebee;
            color: var(--tertiary-color);
        }
        
        .badge-caution {
            background-color: #fff8e1;
            color: var(--quaternary-color);
        }
        
        .badge-stable {
            background-color: #e8f5e9;
            color: var(--secondary-color);
        }
        
        .decision-tree {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .decision-point {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .decision-option {
            margin: 10px 0 10px 20px;
            position: relative;
        }
        
        .decision-option:before {
            content: "â†’";
            position: absolute;
            left: -20px;
            color: var(--primary-color);
        }
        
        .treatment-step {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        
        .treatment-step-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--tertiary-color);
        }
        
        .treatment-detail {
            margin-left: 20px;
        }
        
        .info-box {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #e3f2fd;
        }
        
        .warning-box {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #fff8e1;
            border-left: 4px solid var(--quaternary-color);
        }
        
        .danger-box {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #ffebee;
            border-left: 4px solid var(--tertiary-color);
        }
        
        .referral-box {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #f1f8e9;
            border-left: 4px solid var(--secondary-color);
        }
        
        @media (max-width: 992px) {
            .container {
                flex-direction: column;
            }
            
            .progress-sidebar {
                width: 100%;
                position: relative;
                margin-bottom: 20px;
            }
            
            .progress-steps {
                display: flex;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .progress-step {
                min-width: 150px;
                margin-right: 10px;
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <header>
                <h1>Urticaria and Angioedema Management Algorithm</h1>
                <p class="subtitle">Based on NWACIN Referral and Management Pathway for Urticaria (V3, April 2024)</p>
            </header>
            
            <!-- Assessment Section -->
            <div class="step-card assessment" id="assessment">
                <div class="card-header" onclick="toggleCard('assessment-content')">
                    <div class="card-title">
                        <i class="fas fa-clipboard-list"></i>
                        Assessment
                    </div>
                    <div class="card-toggle">
                        <i class="fas fa-chevron-down" id="assessment-icon"></i>
                    </div>
                </div>
                <div class="card-content" id="assessment-content">
                    <div class="decision-tree">
                        <div class="decision-point">Initial Assessment</div>
                        <div class="decision-option">Confirm urticaria (hives/wheals) and/or angioedema (swelling) on examination or photographs</div>
                        <div class="decision-option">Determine duration of symptoms</div>
                        <div class="decision-option">Identify potential triggers</div>
                        <div class="decision-option">Assess for associated symptoms (anaphylaxis signs)</div>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Key Assessment Questions:</strong></p>
                        <ul>
                            <li>When did symptoms start?</li>
                            <li>How often do symptoms occur?</li>
                            <li>How long do individual lesions last?</li>
                            <li>Are there any identifiable triggers?</li>
                            <li>Is there angioedema without urticaria?</li>
                            <li>Is the patient taking ACE inhibitors?</li>
                            <li>Are there any features of anaphylaxis?</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <p><strong>Caution:</strong> Individual lesions lasting >24 hours with bruising or scarring may indicate urticarial vasculitis, which requires dermatology referral.</p>
                    </div>
                    
                    <div class="danger-box">
                        <p><strong>Urgent Referral Required:</strong> If there are features of anaphylaxis (bronchospasm, syncope, significant mucosal angioedema with airway obstruction).</p>
                    </div>
                </div>
            </div>
            
            <!-- Diagnosis Section -->
            <div class="step-card diagnosis" id="diagnosis">
                <div class="card-header" onclick="toggleCard('diagnosis-content')">
                    <div class="card-title">
                        <i class="fas fa-stethoscope"></i>
                        Diagnosis
                    </div>
                    <div class="card-toggle">
                        <i class="fas fa-chevron-down" id="diagnosis-icon"></i>
                    </div>
                </div>
                <div class="card-content" id="diagnosis-content">
                    <div class="decision-tree">
                        <div class="decision-point">Is urticaria present (with or without angioedema)?</div>
                        <div class="decision-option">
                            <strong>Yes:</strong> Determine if acute/intermittent or chronic
                            <div class="decision-tree" style="margin-top: 10px;">
                                <div class="decision-point">Is there angioedema only?</div>
                                <div class="decision-option">
                                    <strong>Yes:</strong> Refer to Dermatology (urgently if with systemic features)
                                </div>
                                <div class="decision-option">
                                    <strong>No:</strong> Determine if chronic (>6 weeks) or acute
                                    <div class="decision-tree" style="margin-top: 10px;">
                                        <div class="decision-point">Is the patient on ACE inhibitors?</div>
                                        <div class="decision-option">
                                            <strong>Yes:</strong> Stop ACEi and wait 3 months
                                            <span class="badge badge-caution">ACEi-induced angioedema</span>
                                        </div>
                                        <div class="decision-option">
                                            <strong>No:</strong> Continue with diagnosis
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="decision-option">
                            <strong>No:</strong> Consider other causes of swelling
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Types of Urticaria:</strong></p>
                        <ul>
                            <li><strong>Acute/Intermittent Urticaria:</strong> Lasts less than 6 weeks</li>
                            <li><strong>Chronic Spontaneous Urticaria (CSU):strong> Occurs most days for >6 weeks without specific triggers</li>
                            <li><strong>Chronic Inducible Urticaria (CIndU):strong> Triggered by physical stimuli</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <p><strong>ACE Inhibitor-Induced Angioedema:</strong></p>
                        <ul>
                            <li>Can occur at any time during therapy (hours after starting to years of stable therapy)</li>
                            <li>Typically presents with swelling of lips, tongue, upper airway, or face</li>
                            <li>Urticaria and itching are notably absent</li>
                            <li>Management: Discontinuation of ACEi and strict avoidance of all ACEi</li>
                            <li>Episodes may persist for up to 3 months after discontinuation</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Treatment Section -->
            <div class="step-card treatment" id="treatment">
                <div class="card-header" onclick="toggleCard('treatment-content')">
                    <div class="card-title">
                        <i class="fas fa-pills"></i>
                        Treatment
                    </div>
                    <div class="card-toggle">
                        <i class="fas fa-chevron-down" id="treatment-icon"></i>
                    </div>
                </div>
                <div class="card-content" id="treatment-content">
                    <div class="treatment-step">
                        <div class="treatment-step-title">Acute/Intermittent Urticaria</div>
                        <div class="treatment-detail">
                            <p>Treat symptomatically with non-sedating antihistamines:</p>
                            <ul>
                                <li>Cetirizine 10mg - cost-effective 1st line</li>
                                <li>Loratadine 10mg - cost-effective alternative</li>
                                <li>Fexofenadine 180mg - suitable alternative</li>
                            </ul>
                            <p>Use 2 tablets at first sign of symptoms and continue with 1-2 tablets once or twice daily until resolution.</p>
                        </div>
                    </div>
                    
                    <div class="treatment-step">
                        <div class="treatment-step-title">Chronic Spontaneous or Inducible Urticaria</div>
                        <div class="treatment-detail">
                            <p>Stepwise management approach:</p>
                            <ol>
                                <li>Start with regular non-sedating antihistamine (1 tablet daily)</li>
                                <li>If not controlled, increase dose incrementally up to 4 tablets daily (e.g., 2 tablets twice daily)</li>
                                <li>Leave 1-4 weeks between each dose increment</li>
                                <li>If still not controlled, add montelukast 10mg daily</li>
                                <li>Once complete control achieved, maintain for 6-8 weeks before stepping down</li>
                                <li>If symptoms recur, return to previous effective step</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Antihistamine Dosing:</strong></p>
                        <p>It is often necessary to exceed conventional doses (double, triple, or quadruple), which is safe long-term although drowsiness may occur.</p>
                    </div>
                    
                    <div class="warning-box">
                        <p><strong>Important Considerations:</strong></p>
                        <ul>
                            <li>Both NSAIDs and ACE inhibitors are associated with urticaria/angioedema and should be avoided</li>
                            <li>Occasional brief courses of oral prednisolone (20-40mg daily up to 3 days) may control severe episodes</li>
                            <li>If steroid dependency develops, consider referral</li>
                        </ul>
                    </div>
                    
                    <div class="danger-box">
                        <p><strong>Airway Compromise:</strong></p>
                        <p>If breathing difficulties, throat constriction, or lightheadedness occur, call '999' for urgent medical assistance.</p>
                    </div>
                </div>
            </div>
            
            <!-- Follow-up Section -->
            <div class="step-card followup" id="followup">
                <div class="card-header" onclick="toggleCard('followup-content')">
                    <div class="card-title">
                        <i class="fas fa-calendar-check"></i>
                        Follow-up
                    </div>
                    <div class="card-toggle">
                        <i class="fas fa-chevron-down" id="followup-icon"></i>
                    </div>
                </div>
                <div class="card-content" id="followup-content">
                    <div class="referral-box">
                        <p><strong>Refer to Specialist Urticaria Service if:</strong></p>
                        <ul>
                            <li>Urticaria is protracted and problematic despite high-dose antihistamines (loratadine or cetirizine 20mg BD or fexofenadine 360mg BD)</li>
                            <li>Complete UAS7 scoring should be included with referral</li>
                        </ul>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Specialist Services:</strong></p>
                        <ul>
                            <li>Dr Susana Marinho's service in the Wythenshawe Allergy Centre (access to omalizumab therapy)</li>
                            <li>Dr Pablo Garcia-Martinez's Tertiary Urticaria Unit in Salford Royal (access to omalizumab and immunosuppressive therapies)</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <p><strong>Prognosis:</strong></p>
                        <p>Chronic spontaneous urticaria and angioedema is self-limiting:</p>
                        <ul>
                            <li>~50% of patients have complete resolution after 6 months</li>
                            <li>~70% after 3 years</li>
                            <li>~90% after 5 years</li>
                            <li>~92% after 25 years</li>
                        </ul>
                    </div>
                    
                    <div class="decision-tree">
                        <div class="decision-point">Follow-up Plan</div>
                        <div class="decision-option">
                            <strong>If controlled:</strong> Continue current treatment for 6-8 weeks, then consider stepping down
                        </div>
                        <div class="decision-option">
                            <strong>If recurrence:</strong> Return to previous effective step and attempt stepping down 6-8 weeks later
                        </div>
                        <div class="decision-option">
                            <strong>If uncontrolled despite maximum treatment:</strong> Refer to Specialist Urticaria Service
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="progress-sidebar">
            <div class="progress-title">Algorithm Progress</div>
            <div class="progress-steps">
                <div class="progress-step active" onclick="scrollToSection('assessment')">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Assessment</span>
                </div>
                <div class="progress-step" onclick="scrollToSection('diagnosis')">
                    <i class="fas fa-stethoscope"></i>
                    <span>Diagnosis</span>
                </div>
                <div class="progress-step" onclick="scrollToSection('treatment')">
                    <i class="fas fa-pills"></i>
                    <span>Treatment</span>
                </div>
                <div class="progress-step" onclick="scrollToSection('followup')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Follow-up</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Toggle card expansion
        function toggleCard(cardId) {
            const cardContent = document.getElementById(cardId);
            const cardIcon = document.getElementById(cardId.replace('-content', '-icon'));
            
            cardContent.classList.toggle('expanded');
            
            if (cardContent.classList.contains('expanded')) {
                cardIcon.classList.remove('fa-chevron-down');
                cardIcon.classList.add('fa-chevron-up');
            } else {
                cardIcon.classList.remove('fa-chevron-up');
                cardIcon.classList.add('fa-chevron-down');
            }
        }
        
        // Scroll to specific section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Update active progress step
            const progressSteps = document.querySelectorAll('.progress-step');
            progressSteps.forEach(step => step.classList.remove('active'));
            
            const currentStep = document.querySelector(`.progress-step[onclick="scrollToSection('${sectionId}')"]`);
            if (currentStep) {
                currentStep.classList.add('active');
            }
        }
        
        // Initialize with first card expanded
        document.addEventListener('DOMContentLoaded', function() {
            toggleCard('assessment-content');
        });
        
        // Update active progress step based on scroll position
        window.addEventListener('scroll', function() {
            const sections = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const scrollPosition = window.scrollY + 100;
            
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = document.getElementById(sections[i]);
                if (section.offsetTop <= scrollPosition) {
                    const progressSteps = document.querySelectorAll('.progress-step');
                    progressSteps.forEach(step => step.classList.remove('active'));
                    
                    const currentStep = document.querySelector(`.progress-step[onclick="scrollToSection('${sections[i]}')"]`);
                    if (currentStep) {
                        currentStep.classList.add('active');
                    }
                    break;
                }
            }
        });
    </script>
</body>
</html>