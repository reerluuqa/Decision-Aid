<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menopause Management Algorithm | BMJ Best Practice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --border-color: #e9ecef;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-hover: 0 6px 16px rgba(0,0,0,0.12);
            --red-badge: #dc3545;
            --amber-badge: #fd7e14;
            --green-badge: #28a745;
            --assessment-color: #17a2b8;
            --diagnosis-color: #6f42c1;
            --treatment-color: #28a745;
            --followup-color: #fd7e14;
            --danger-text: #721c24;
            --warning-text: #856404;
            --success-text: #155724;
            --danger-bg: #f8d7da;
            --warning-bg: #fff3cd;
            --success-bg: #d4edda;
        }

        [data-theme="dark"] {
            --primary-bg: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-primary: #e9ecef;
            --text-secondary: #adb5bd;
            --border-color: #404040;
            --shadow: 0 4px 12px rgba(0,0,0,0.3);
            --shadow-hover: 0 6px 16px rgba(0,0,0,0.4);
            --danger-bg: #58151c;
            --warning-bg: #5c4800;
            --success-bg: #0a2e13;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Progress Sidebar */
        .progress-sidebar {
            width: 280px;
            background: var(--card-bg);
            padding: 2rem 1.5rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .progress-sidebar h3 {
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-size: 1.2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .progress-item.active {
            opacity: 1;
            background: linear-gradient(90deg, var(--assessment-color), transparent);
            color: white;
        }

        .progress-item.completed {
            opacity: 0.9;
            background: var(--success-bg);
            color: var(--success-text);
        }

        .progress-item i {
            margin-right: 0.8rem;
            font-size: 1.2rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            margin: 2rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--assessment-color), var(--treatment-color));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1000px;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-left: 6px solid;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color), transparent);
        }

        .card.assessment {
            --accent-color: var(--assessment-color);
            border-left-color: var(--assessment-color);
        }

        .card.diagnosis {
            --accent-color: var(--diagnosis-color);
            border-left-color: var(--diagnosis-color);
        }

        .card.treatment {
            --accent-color: var(--treatment-color);
            border-left-color: var(--treatment-color);
        }

        .card.followup {
            --accent-color: var(--followup-color);
            border-left-color: var(--followup-color);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            cursor: pointer;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-right: 1rem;
            color: var(--accent-color);
            transition: transform 0.3s ease;
        }

        .card:hover .card-icon {
            transform: scale(1.1);
        }

        .card-title {
            flex: 1;
        }

        .card-title h2 {
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 0.3rem;
        }

        .card-title p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .expand-icon {
            font-size: 1.5rem;
            color: var(--text-secondary);
            transition: transform 0.3s ease;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* Accordion Content */
        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .card.expanded .card-content {
            max-height: 3000px;
        }

        .section {
            margin-bottom: 2rem;
        }

        .section h3 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }

        .section h3 i {
            margin-right: 0.5rem;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
            text-transform: uppercase;
        }

        .badge.red {
            background: var(--danger-bg);
            color: var(--danger-text);
            border: 1px solid var(--red-badge);
        }

        .badge.amber {
            background: var(--warning-bg);
            color: var(--warning-text);
            border: 1px solid var(--amber-badge);
        }

        .badge.green {
            background: var(--success-bg);
            color: var(--success-text);
            border: 1px solid var(--green-badge);
        }

        /* Lists */
        .checklist {
            list-style: none;
            margin: 1rem 0;
        }

        .checklist li {
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: var(--primary-bg);
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            transition: all 0.3s ease;
        }

        .checklist li:hover {
            background: var(--border-color);
        }

        .checklist input[type="checkbox"] {
            margin-right: 0.8rem;
            margin-top: 0.2rem;
            cursor: pointer;
        }

        .checklist label {
            cursor: pointer;
            flex: 1;
        }

        /* Treatment Options */
        .treatment-option {
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .treatment-option:hover {
            border-color: var(--accent-color);
            box-shadow: var(--shadow);
        }

        .treatment-option h4 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .treatment-option .badge {
            margin-left: auto;
        }

        .treatment-details {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Alert Boxes */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid;
        }

        .alert.warning {
            background: var(--warning-bg);
            color: var(--warning-text);
            border-color: var(--amber-badge);
        }

        .alert.danger {
            background: var(--danger-bg);
            color: var(--danger-text);
            border-color: var(--red-badge);
        }

        .alert.success {
            background: var(--success-bg);
            color: var(--success-text);
            border-color: var(--green-badge);
        }

        /* Print Button */
        .print-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .print-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* Floating Alerts */
        .floating-alert {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--danger-bg);
            color: var(--danger-text);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 2000;
            max-width: 350px;
        }

        .floating-alert.show {
            transform: translateX(0);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }

            .progress-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 1rem;
            }

            .main-content {
                padding: 1rem;
            }
        }

        @media print {
            .progress-sidebar, .print-button, .theme-toggle, .floating-alert {
                display: none;
            }

            body {
                background: white;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ccc;
                page-break-inside: avoid;
            }

            .card-content {
                max-height: none !important;
            }
        }

        /* Loading Animation */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Highlight Effect */
        .highlight {
            background: linear-gradient(120deg, transparent 0%, var(--accent-color) 0%, var(--accent-color) 100%, transparent 100%);
            background-size: 0% 100%;
            background-repeat: no-repeat;
            transition: background-size 0.4s ease;
        }

        .highlight.active {
            background-size: 100% 100%;
            color: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="theme-toggle" onclick="toggleTheme()">
            <i class="fas fa-moon"></i> <span id="theme-text">Dark Mode</span>
        </button>
        <h1><i class="fas fa-female"></i> Menopause Management Algorithm</h1>
        <p>BMJ Best Practice Guidelines | December 2024</p>
    </div>

    <div class="container">
        <aside class="progress-sidebar">
            <h3><i class="fas fa-tasks"></i> Progress Tracker</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div class="progress-item active" data-card="assessment">
                <i class="fas fa-clipboard-list"></i>
                <span>Assessment</span>
            </div>
            <div class="progress-item" data-card="diagnosis">
                <i class="fas fa-search"></i>
                <span>Diagnosis</span>
            </div>
            <div class="progress-item" data-card="treatment">
                <i class="fas fa-pills"></i>
                <span>Treatment</span>
            </div>
            <div class="progress-item" data-card="followup">
                <i class="fas fa-calendar-check"></i>
                <span>Follow-up</span>
            </div>

            <div style="margin-top: 2rem; padding: 1rem; background: var(--primary-bg); border-radius: 8px;">
                <h4 style="margin-bottom: 0.5rem;"><i class="fas fa-exclamation-triangle"></i> Key Alerts</h4>
                <p style="font-size: 0.85rem; color: var(--text-secondary);">
                    <span id="alert-count">0</span> items require attention
                </p>
            </div>
        </aside>

        <main class="main-content">
            <!-- Assessment Card -->
            <div class="card assessment fade-in" data-card="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-clipboard-list card-icon"></i>
                    <div class="card-title">
                        <h2>Assessment</h2>
                        <p>Clinical evaluation of menopausal symptoms and risk factors</p>
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="card-content">
                    <div class="section">
                        <h3><i class="fas fa-history"></i> Key Diagnostic Factors</h3>
                        <ul class="checklist" id="assessment-checklist">
                            <li>
                                <input type="checkbox" id="amenorrhea" onchange="updateProgress()">
                                <label for="amenorrhea">
                                    <strong>Amenorrhoea >12 months</strong> 
                                    <span class="badge green">Defining Characteristic</span>
                                    <br><small>Sensitivity 94%, specificity 91% for predicting menopause within 2 years</small>
                                </label>
                            </li>
                            <li>
                                <input type="checkbox" id="hot-flushes" onchange="updateProgress()">
                                <label for="hot-flushes">
                                    <strong>Vasomotor symptoms (hot flushes/night sweats)</strong>
                                    <span class="badge green">Common</span>
                                    <br><small>Affect 24% of women aged 50-54; median duration 7.4 years</small>
                                </label>
                            </li>
                            <li>
                                <input type="checkbox" id="vaginal-symptoms" onchange="updateProgress()">
                                <label for="vaginal-symptoms">
                                    <strong>Urogenital atrophy symptoms</strong>
                                    <span class="badge green">Common</span>
                                    <br><small>Dryness, itching, dyspareunia affecting 40-45% of postmenopausal women</small>
                                </label>
                            </li>
                            <li>
                                <input type="checkbox" id="mood-changes" onchange="updateProgress()">
                                <label for="mood-changes">
                                    <strong>Mood changes & sleep disturbance</strong>
                                    <span class="badge amber">Assess Severity</span>
                                    <br><small>Irritability, anxiety, depression, insomnia</small>
                                </label>
                            </li>
                            <li>
                                <input type="checkbox" id="heavy-bleeding" onchange="checkRedFlag('heavy-bleeding', 'heavy-bleeding-alert')">
                                <label for="heavy-bleeding">
                                    <strong>Heavy menstrual bleeding</strong>
                                    <span class="badge red">Investigate</span>
                                    <br><small>May indicate endometrial polyps or malignancy</small>
                                </label>
                            </li>
                        </ul>

                        <div class="alert danger" id="heavy-bleeding-alert" style="display: none;">
                            <i class="fas fa-exclamation-circle"></i> <strong>Red Flag:</strong> Heavy or irregular bleeding requires endometrial assessment to exclude pathology.
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-heartbeat"></i> Risk Factors</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                            <div class="treatment-option">
                                <h4><i class="fas fa-exclamation-triangle"></i> Strong Risk Factors <span class="badge red">High Risk</span></h4>
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li>Age 40-60 years (median menopause age 51)</li>
                                    <li>Cancer treatment (chemotherapy/radiotherapy)</li>
                                    <li>Current smoking (2 years earlier menopause)</li>
                                    <li>Bilateral oophorectomy (surgical menopause)</li>
                                </ul>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-info-circle"></i> Additional Factors <span class="badge amber">Moderate</span></h4>
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li>Maternal age at menopause (weak predictor)</li>
                                    <li>Autoimmune disease</li>
                                    <li>Fragile X syndrome</li>
                                    <li>High stress/depressive symptoms</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-user-md"></i> Physical Examination</h3>
                        <p>May reveal:</p>
                        <ul class="checklist">
                            <li><i class="fas fa-check-circle"></i> Thinning of labia minora</li>
                            <li><i class="fas fa-check-circle"></i> Pallor of vaginal mucosa</li>
                            <li><i class="fas fa-check-circle"></i> Loss of vaginal rugae</li>
                            <li><i class="fas fa-check-circle"></i> Shrinkage of clitoris and labia</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card diagnosis fade-in" data-card="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-search card-icon"></i>
                    <div class="card-title">
                        <h2>Diagnosis</h2>
                        <p>Confirm menopause and rule out differentials</p>
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="card-content">
                    <div class="section">
                        <h3><i class="fas fa-stethoscope"></i> Diagnostic Approach</h3>
                        <div class="alert success">
                            <i class="fas fa-check-circle"></i> <strong>Clinical Diagnosis:</strong> Cessation of menses for 12 consecutive months in a woman >45 years, with menopausal symptoms. <strong>No further testing required.</strong>
                        </div>

                        <div class="alert warning">
                            <i class="fas fa-info-circle"></i> <strong>Age <40 years:</strong> Elevated FSH >30 IU/L required for diagnosis (premature ovarian insufficiency)
                        </div>

                        <div class="alert warning">
                            <i class="fas fa-info-circle"></i> <strong>Age 40-45 years:</strong> FSH testing may be helpful
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-flask"></i> Essential Investigations</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div class="treatment-option">
                                <h4><i class="fas fa-pastafarianism"></i> Pregnancy Test <span class="badge red">Mandatory</span></h4>
                                <p class="treatment-details">Exclude pregnancy in all women with amenorrhoea</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-microscope"></i> FSH Level <span class="badge amber">If <45y</span></h4>
                                <p class="treatment-details">Elevated >30 IU/L suggests menopause</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-vial"></i> Estradiol Level</h4>
                                <p class="treatment-details">Not routinely indicated; <110 pmol/L postmenopause</p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-question-circle"></i> Differential Diagnoses</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                            <div class="treatment-option">
                                <h4><i class="fas fa-baby"></i> Pregnancy</h4>
                                <p class="treatment-details">Check urine hCG >25 IU/L. Breast tenderness, nausea, abdominal enlargement</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-ovum"></i> Polycystic Ovary Syndrome</h4>
                                <p class="treatment-details">Elevated testosterone, hirsutism, acne, typically since puberty</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-fire"></i> Thyroid Dysfunction</h4>
                                <p class="treatment-details">Hyper/hypothyroidism can mimic vasomotor symptoms. Check TSH.</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-weight"></i> Anorexia Nervosa</h4>
                                <p class="treatment-details">Amenorrhoea with low BMI, bradycardia, electrolyte disturbance. No hot flushes.</p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-pills"></i> Medication Side Effects</h4>
                                <p class="treatment-details">Tamoxifen, niacin, nitrates can cause hot flushes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card treatment fade-in" data-card="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-pills card-icon"></i>
                    <div class="card-title">
                        <h2>Treatment</h2>
                        <p>Individualized management based on symptoms and risk profile</p>
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="card-content">
                    <div class="section">
                        <h3><i class="fas fa-leaf"></i> Lifestyle Modifications <span class="badge green">First Line</span></h3>
                        <ul class="checklist">
                            <li><input type="checkbox" id="weight-loss"><label for="weight-loss">Weight loss if BMI >25</label></li>
                            <li><input type="checkbox" id="exercise"><label for="exercise">Regular exercise (30 min most days)</label></li>
                            <li><input type="checkbox" id="diet"><label for="diet">Balanced diet, adequate calcium & vitamin D</label></li>
                            <li><input type="checkbox" id="avoid-triggers"><label for="avoid-triggers">Avoid triggers: spicy foods, alcohol, caffeine, heat, stress</label></li>
                            <li><input type="checkbox" id="cooling"><label for="cooling">Cooling measures: layered clothing, fans, cold drinks</label></li>
                            <li><input type="checkbox" id="smoking"><label for="smoking">Smoking cessation</label></li>
                        </ul>
                        <div class="alert success">
                            <i class="fas fa-info-circle"></i> Lifestyle changes improve cardiovascular and bone health, though impact on hot flushes may be limited.
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-venus"></i> Women WITH Uterus <span class="badge amber">Progestin Required</span></h3>
                        <p>Oestrogen therapy must be combined with progestin to protect against endometrial hyperplasia and cancer.</p>
                        
                        <div class="treatment-option">
                            <h4>1st Line: Continuous Combined HT <span class="badge red">Prescription Required</span></h4>
                            <p>Indicated for women >12 months amenorrhoea</p>
                            <div class="treatment-details">
                                <strong>Examples:</strong>
                                <ul style="margin-left: 1rem; margin-top: 0.5rem;">
                                    <li>Conjugated oestrogens/medroxyprogesterone: 0.3/1.5 mg daily</li>
                                    <li>Estradiol/norethisterone patch: 0.05/0.17 mg twice weekly</li>
                                    <li>Transdermal estradiol + oral progestin alternatives available</li>
                                </ul>
                                <p style="margin-top: 0.5rem;"><strong>Benefits:</strong> Reduces hot flushes by 80-90%, prevents bone loss</p>
                            </div>
                        </div>

                        <div class="treatment-option">
                            <h4>Perimenopausal: Sequential HT <span class="badge amber">Monthly Bleeding</span></h4>
                            <p>Progestin added for 10-14 days each cycle</p>
                            <div class="treatment-details">
                                Preferred for perimenopausal women with irregular bleeding. Produces predictable withdrawal bleed.
                            </div>
                        </div>

                        <div class="treatment-option">
                            <h4>Alternative: Conjugated Oestrogens/Bazedoxifene <span class="badge amber">Selective Modulator</span></h4>
                            <p>Approved in some countries. No progestin needed. Anti-oestrogenic effect on breast tissue.</p>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-venus-double"></i> Women WITHOUT Uterus</h3>
                        <p>Can take oestrogen alone if no contraindications.</p>
                        
                        <div class="treatment-option">
                            <h4>1st Line: Oestrogen Alone <span class="badge red">Prescription Required</span></h4>
                            <div class="treatment-details">
                                <strong>Options:</strong><br>
                                • Transdermal estradiol (patch/gel/spray) - preferred for BMI >30 or thrombotic risk<br>
                                • Oral conjugated oestrogens: 0.3-1.25 mg daily<br>
                                <p style="margin-top: 0.5rem;"><strong>Advantage:</strong> Lower risk of breast cancer compared to combined therapy</p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-ban"></i> Non-Hormonal Options <span class="badge green">For Contraindications</span></h3>
                        <p>For women unable to take HT due to contraindications or preference.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div class="treatment-option">
                                <h4><i class="fas fa-brain"></i> SSRIs/SNRIs <span class="badge green">Effective</span></h4>
                                <p class="treatment-details">
                                    <strong>Options:</strong> Paroxetine 7.5 mg, escitalopram 10-20 mg, venlafaxine 37.5-75 mg, desvenlafaxine 100 mg daily<br>
                                    <strong>Efficacy:</strong> Reduces hot flushes by ~60%
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-capsules"></i> Gabapentin <span class="badge amber">Moderate</span></h4>
                                <p class="treatment-details">
                                    <strong>Dose:</strong> 300 mg TDS (max 2400 mg/day)<br>
                                    <strong>Side Effects:</strong> Drowsiness, dizziness - may limit daytime use
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-heartbeat"></i> Clonidine <span class="badge amber">Less Effective</span></h4>
                                <p class="treatment-details">
                                    <strong>Dose:</strong> Transdermal 0.1 mg/24h weekly or oral 0.05-0.2 mg BD<br>
                                    <strong>Caution:</strong> Hypotension may be treatment-limiting
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-baby"></i> Urogenital Atrophy Only <span class="badge green">Local Treatment</span></h3>
                        
                        <div class="treatment-option">
                            <h4>1st Line: Vaginal Oestrogen <span class="badge green">Low Systemic Absorption</span></h4>
                            <div class="treatment-details">
                                <p><strong>Options:</strong></p>
                                <ul style="margin-left: 1rem;">
                                    <li>Conjugated oestrogen cream: 0.5-2g daily for 21 days, then twice weekly</li>
                                    <li>Estradiol tablets: 10 mcg daily for 2 weeks, then twice weekly</li>
                                    <li>Estradiol ring: 7.5-100 mcg/24h, replace every 3 months</li>
                                </ul>
                                <p style="margin-top: 0.5rem;"><strong>Benefits:</strong> Improves dryness, dyspareunia, urinary symptoms; reduces UTIs</p>
                                <p>No endometrial surveillance needed in women without hormone-dependent cancer history</p>
                            </div>
                        </div>

                        <div class="treatment-option">
                            <h4>2nd Line: Ospemifene <span class="badge amber">Oral SERM</span></h4>
                            <p class="treatment-details">60 mg daily for dyspareunia. May cause hot flushes (7% vs 4% placebo).</p>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-exclamation-triangle"></i> Contraindications to HT <span class="badge red">Absolute</span></h3>
                        <div class="alert danger">
                            <ul style="margin-left: 1rem;">
                                <li>Current or past breast cancer (estrogen-dependent)</li>
                                <li>Coronary heart disease</li>
                                <li>Stroke or venous thromboembolism</li>
                                <li>Active liver disease</li>
                                <li>Unexplained vaginal bleeding</li>
                                <li>Pregnancy</li>
                            </ul>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-user-injured"></i> Breast Cancer Survivors</h3>
                        <div class="alert warning">
                            <p><strong>Avoid systemic HT and vaginal oestrogen</strong> unless non-estrogen-dependent malignancy.</p>
                            <p><strong>Options:</strong> Lifestyle measures, SSRIs/SNRIs, non-hormonal therapies, vaginal moisturizers (polycarbophil gel), lidocaine for dyspareunia.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card followup fade-in" data-card="followup">
                <div class="card-header" onclick="toggleCard(this)">
                    <i class="fas fa-calendar-check card-icon"></i>
                    <div class="card-title">
                        <h2>Follow-up</h2>
                        <p>Monitoring, complications, and long-term management</p>
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="card-content">
                    <div class="section">
                        <h3><i class="fas fa-eye"></i> Monitoring Requirements</h3>
                        <ul class="checklist">
                            <li><input type="checkbox" id="annual-review"><label for="annual-review"><strong>Annual Reassessment:</strong> Review benefits vs risks, symptom control, side effects</label></li>
                            <li><input type="checkbox" id="blood-pressure"><label for="blood-pressure"><strong>Blood Pressure:</strong> Monitor at each visit, especially with clonidine</label></li>
                            <li><input type="checkbox" id="bleeding-review"><label for="bleeding-review"><strong>Abnormal Bleeding:</strong> Investigate persistent bleeding >6 months on continuous HT</label></li>
                            <li><input type="checkbox" id="mammography"><label for="mammography"><strong>Breast Screening:</strong> Ensure compliance with national mammography guidelines</label></li>
                            <li><input type="checkbox" id="bone-density"><label for="bone-density"><strong>Bone Density:</strong> DXA scan if age >65, or younger with risk factors</label></li>
                        </ul>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-exclamation-circle"></i> Complications to Monitor</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                            <div class="treatment-option">
                                <h4><i class="fas fa-tint"></i> Vaginal Bleeding <span class="badge amber">Common Early</span></h4>
                                <p class="treatment-details">
                                    <strong>Timeframe:</strong> First 4-6 months<br>
                                    <strong>Action:</strong> Add more progestin or switch to sequential regimen. Persistent bleeding requires investigation.
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-breast"></i> Breast Cancer <span class="badge red">Low Risk</span></h4>
                                <p class="treatment-details">
                                    <strong>Risk:</strong> Small increase with combined HT, related to duration<br>
                                    <strong>Action:</strong> Vigilant self-examination, regular screening
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-lungs"></i> Venous Thromboembolism <span class="badge red">Low Risk</span></h4>
                                <p class="treatment-details">
                                    <strong>Risk:</strong> Higher with oral vs transdermal oestrogen<br>
                                    <strong>High Risk:</strong> Age >60 or >10 years post-menopause
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-brain"></i> Stroke <span class="badge red">Low Risk</span></h4>
                                <p class="treatment-details">
                                    <strong>Risk:</strong> Absolute risk very low in women <60<br>
                                    <strong>Prevention:</strong> Transdermal route preferred for thrombotic risk
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-heart"></i> Cardiovascular Disease <span class="badge amber">Medium Risk</span></h4>
                                <p class="treatment-details">
                                    <strong>Note:</strong> Menopause transition accelerates CVD risk<br>
                                    <strong>Action:</strong> Manage BP, lipids, diabetes, lifestyle
                                </p>
                            </div>
                            <div class="treatment-option">
                                <h4><i class="fas fa-burn"></i> Breast Tenderness <span class="badge amber">Common Early</span></h4>
                                <p class="treatment-details">
                                    <strong>Management:</strong> Reduce oestrogen dose. Persistent symptoms require investigation.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-chart-line"></i> Prognosis</h3>
                        <div class="alert success">
                            <p><strong>Vasomotor Symptoms:</strong> Typically resolve within 5-10 years, though up to 15% may persist longer. Median duration varies by ethnicity (African-American women longest at 10.1 years).</p>
                            <p><strong>Urogenital Atrophy:</strong> May persist or worsen without treatment; responds well to local therapy.</p>
                            <p><strong>Bone Health:</strong> Continue preventive measures (calcium, vitamin D, exercise). Bone loss accelerates during transition (10-12% decline in spine/hip).</p>
                        </div>
                    </div>

                    <div class="section">
                        <h3><i class="fas fa-clock"></i> When to Discontinue HT</h3>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>No Maximum Duration:</strong> Individualize based on benefits vs risks</li>
                            <li><strong>Reassess Annually:</strong> Consider stopping if minimal symptom benefit</li>
                            <li><strong>Age Considerations:</strong> Risks increase after age 60 or >10 years post-menopause</li>
                            <li><strong>Tapering:</strong> No evidence for specific cessation method; abrupt or gradual both acceptable</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <button class="print-button" onclick="window.print()">
            <i class="fas fa-print"></i> Print Algorithm
        </button>

        <div class="floating-alert" id="floating-alert">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="alert-message"></span>
        </div>
    </div>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const html = document.documentElement;
            const themeText = document.getElementById('theme-text');
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.removeAttribute('data-theme');
                themeText.textContent = 'Dark Mode';
                themeIcon.className = 'fas fa-moon';
            } else {
                html.setAttribute('data-theme', 'dark');
                themeText.textContent = 'Light Mode';
                themeIcon.className = 'fas fa-sun';
            }
            localStorage.setItem('theme', html.getAttribute('data-theme') || 'light');
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            toggleTheme();
        }

        // Card Toggle
        function toggleCard(header) {
            const card = header.parentElement;
            const isExpanded = card.classList.contains('expanded');
            
            // Close all cards
            document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
            
            // Open clicked card if it wasn't already expanded
            if (!isExpanded) {
                card.classList.add('expanded');
                updateProgress();
                scrollToCard(card);
            }
        }

        // Scroll to card
        function scrollToCard(card) {
            setTimeout(() => {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // Progress Update
        function updateProgress() {
            const totalCheckboxes = document.querySelectorAll('input[type="checkbox"]').length;
            const checkedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const progressPercentage = (checkedCheckboxes / totalCheckboxes) * 100;
            
            document.getElementById('progress-fill').style.width = progressPercentage + '%';
            
            // Update progress sidebar
            document.querySelectorAll('.progress-item').forEach((item, index) => {
                const card = document.querySelector(`.card:nth-child(${index + 1})`);
                if (card && card.classList.contains('expanded')) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Update alert count
            updateAlertCount();
        }

        // Red Flag Alerts
        function checkRedFlag(checkboxId, alertId) {
            const checkbox = document.getElementById(checkboxId);
            const alert = document.getElementById(alertId);
            
            if (checkbox.checked) {
                alert.style.display = 'block';
                showFloatingAlert('⚠️ Red flag identified: Requires urgent investigation');
            } else {
                alert.style.display = 'none';
            }
            updateProgress();
        }

        // Floating Alert
        function showFloatingAlert(message) {
            const alertBox = document.getElementById('floating-alert');
            const alertMessage = document.getElementById('alert-message');
            
            alertMessage.textContent = message;
            alertBox.classList.add('show');
            
            setTimeout(() => {
                alertBox.classList.remove('show');
            }, 5000);
        }

        // Update Alert Count
        function updateAlertCount() {
            const redFlags = document.querySelectorAll('.alert.danger[style*="display: block"], .alert.danger:not([style])').length;
            document.getElementById('alert-count').textContent = redFlags;
        }

        // Progress Sidebar Navigation
        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                const cardName = item.dataset.card;
                const targetCard = document.querySelector(`.card.${cardName}`);
                
                // Close all cards
                document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
                
                // Open target card
                if (targetCard) {
                    targetCard.classList.add('expanded');
                    scrollToCard(targetCard);
                }
            });
        });

        // Auto-expand first card on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.card.assessment').classList.add('expanded');
                updateProgress();
            }, 500);
        });

        // Smooth scroll for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown') {
                const currentCard = document.querySelector('.card.expanded');
                const nextCard = currentCard?.nextElementSibling;
                if (nextCard?.classList.contains('card')) {
                    currentCard.classList.remove('expanded');
                    nextCard.classList.add('expanded');
                    scrollToCard(nextCard);
                }
            } else if (e.key === 'ArrowUp') {
                const currentCard = document.querySelector('.card.expanded');
                const prevCard = currentCard?.previousElementSibling;
                if (prevCard?.classList.contains('card')) {
                    currentCard.classList.remove('expanded');
                    prevCard.classList.add('expanded');
                    scrollToCard(prevCard);
                }
            }
        });

        // Print functionality
        window.addEventListener('beforeprint', () => {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.add('expanded');
            });
        });

        // Add fade-in animation to cards on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.card').forEach(card => {
            observer.observe(card);
        });

        // Highlight search functionality
        function highlightSearch(term) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(term.toLowerCase())) {
                    card.classList.add('highlight');
                    setTimeout(() => card.classList.remove('highlight'), 2000);
                }
            });
        }

        // Add search capability (Ctrl+F)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                const term = prompt('Search algorithm:');
                if (term) highlightSearch(term);
            }
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>