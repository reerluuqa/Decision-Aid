<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick-Scan: CHC Breakthrough Bleeding</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #0284c7;
            --primary-light: #e0f2fe;
            --danger-red: #dc2626;
            --danger-bg: #fef2f2;
            --success-green: #16a34a;
            --success-bg: #f0fdf4;
            --neutral-bg: #f8fafc;
            --text-dark: #1e293b;
            --text-muted: #64748b;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --card-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border-radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--neutral-bg);
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Utility Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-4 { gap: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
        .text-sm { font-size: 0.875rem; }
        .font-bold { font-weight: 700; }
        .uppercase { text-transform: uppercase; }
        .tracking-wide { letter-spacing: 0.05em; }

        /* Icons */
        .icon { width: 24px; height: 24px; display: inline-block; vertical-align: middle; }
        .icon-lg { width: 32px; height: 32px; }

        /* Header */
        header {
            background: #fff;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .header-content {
            padding: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo h1 {
            font-size: 1.25rem;
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-nav button {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            color: var(--text-muted);
            cursor: pointer;
            font-weight: 600;
            transition: color 0.2s;
        }

        .quick-nav button:hover { color: var(--primary-blue); }

        /* Hero / Dashboard */
        .hero {
            padding: 2rem 0;
        }

        .stat-card {
            background: var(--primary-light);
            color: var(--primary-blue);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Red Flags Section */
        .alert-section {
            animation: pulse-border 2s infinite;
        }

        .alert-banner {
            background-color: var(--danger-bg);
            border: 1px solid var(--danger-red);
            color: #991b1b;
            padding: 1rem;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
            .header-content { flex-direction: column; gap: 1rem; }
        }

        /* Cards */
        .card {
            background: #fff;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            height: 100%;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-hover);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #f1f5f9;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 999px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .tag-red { background: var(--danger-bg); color: var(--danger-red); }
        .tag-green { background: var(--success-bg); color: var(--success-green); }
        .tag-blue { background: var(--primary-light); color: var(--primary-blue); }

        /* Interactive Tool Elements */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .checkbox-item:hover { background: #f8fafc; }

        input[type="checkbox"] {
            margin-top: 0.3rem;
            width: 18px;
            height: 18px;
            accent-color: var(--danger-red);
        }

        .result-box {
            background: #1e293b;
            color: #fff;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-top: 1.5rem;
            text-align: center;
            display: none; /* Hidden by default */
        }

        .result-box.visible { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Tables */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        .info-table th { text-align: left; padding: 0.75rem; background: #f8fafc; color: var(--text-muted); }
        .info-table td { padding: 0.75rem; border-top: 1px solid #e2e8f0; }
        .info-table tr:hover td { background: #f8fafc; }

        /* Action Steps */
        .step-list {
            list-style: none;
            counter-reset: steps;
        }
        .step-list li {
            position: relative;
            padding-left: 2.5rem;
            margin-bottom: 1rem;
        }
        .step-list li::before {
            counter-increment: steps;
            content: counter(steps);
            position: absolute;
            left: 0;
            top: 0;
            width: 1.8rem;
            height: 1.8rem;
            background: var(--primary-blue);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 1.8rem;
            font-weight: bold;
            font-size: 0.85rem;
        }

        /* Print styles */
        @media print {
            .quick-nav, .result-box { display: none; }
            body { background: white; }
            .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <h1>
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    CHC Bleeding Reference
                </h1>
                <span class="text-sm text-muted">Based on Patient.info UK Guidelines (2025)</span>
            </div>
            <nav class="quick-nav">
                <button onclick="scrollToSection('assessment')">Assessment</button>
                <button onclick="scrollToSection('flags')">Red Flags</button>
                <button onclick="scrollToSection('management')">Management</button>
            </nav>
        </div>
    </header>

    <main class="container mt-4">

        <!-- Hero Stats -->
        <section class="hero">
            <div class="stat-card">
                <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                </svg>
                <div>
                    <h2 class="font-bold" style="font-size: 1.5rem;">Up to 20%</h2>
                    <p class="text-sm font-bold">of women experience breakthrough bleeding on CHC.</p>
                    <p class="text-sm" style="opacity: 0.9;">Usually settles with time. Recommend perseverance for 3 months.</p>
                </div>
            </div>
        </section>

        <!-- Red Flags / Immediate Actions -->
        <section id="flags" class="mb-4">
            <div class="alert-banner">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <div>
                    <strong class="uppercase tracking-wide">Immediate Concerns / Pathology</strong>
                    <div class="text-sm">Consider referral or investigation if these signs are present, especially if >3 months use.</div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card" style="border-top: 4px solid var(--danger-red);">
                    <div class="card-header">
                        <span class="card-title">Symptoms requiring action</span>
                        <span class="tag tag-red">High Priority</span>
                    </div>
                    <ul class="step-list">
                        <li><strong>Pain</strong> (associated with bleeding)</li>
                        <li><strong>Dyspareunia</strong> (painful intercourse)</li>
                        <li><strong>Abnormal vaginal discharge</strong></li>
                        <li><strong>Postcoital bleeding</strong></li>
                        <li><strong>Heavy bleeding</strong></li>
                        <li><strong>Changed bleeding pattern</strong> after years of stability</li>
                    </ul>
                </div>
                <div class="card" style="border-top: 4px solid var(--danger-red);">
                    <div class="card-header">
                        <span class="card-title">Specific Pathology Risks</span>
                        <span class="tag tag-red">Do Not Miss</span>
                    </div>
                    <table class="info-table">
                        <tr>
                            <td><strong>Infection</strong></td>
                            <td>Chlamydia / STI (Swab if risk factors present)</td>
                        </tr>
                        <tr>
                            <td><strong>Pregnancy</strong></td>
                            <td>Intrauterine or Ectopic (Test if indicated)</td>
                        </tr>
                        <tr>
                            <td><strong>Structural</strong></td>
                            <td>Polyps, Fibroids (Scan if suspected)</td>
                        </tr>
                        <tr>
                            <td><strong>Cancer</strong></td>
                            <td>Cervical or Endometrial (Refer 45y+ or <45 with RFs)</td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- Interactive Assessment Tool -->
        <section id="assessment" class="mb-4">
            <h3 class="font-bold mb-4 flex items-center gap-2">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                Quick Assessment Helper
            </h3>
            <div class="card">
                <div class="grid-2">
                    <div>
                        <p class="text-sm font-bold text-muted mb-2 uppercase">Check risk factors (If present -> Consider Pathology)</p>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" onchange="updateRisk()">
                                Pain or Dyspareunia present?
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" onchange="updateRisk()">
                                Vaginal discharge or PC bleeding?
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" onchange="updateRisk()">
                                Started > 3 months ago (Persistent)?
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" onchange="updateRisk()">
                                New onset after long period of stability?
                            </label>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm font-bold text-muted mb-2 uppercase">Common Influencing Factors (Likely Benign)</p>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox">
                                Missed pills (Poor adherence)
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox">
                                Smoker (Anti-oestrogenic)
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox">
                                Interacting meds (e.g. St John's Wort)
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox">
                                Using 20mcg EE preparation
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Result Area -->
                <div id="riskResult" class="result-box">
                    <!-- Content injected via JS -->
                </div>
            </div>
        </section>

        <!-- Management Pathways -->
        <section id="management" class="mb-4">
            <h3 class="font-bold mb-4 flex items-center gap-2">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                </svg>
                Management Algorithm
            </h3>
            
            <div class="grid-2">
                <!-- Scenario 1: Early Stage -->
                <div class="card" style="border-left: 5px solid var(--success-green);">
                    <div class="card-header">
                        <span class="card-title">Time on CHC: &lt; 3 Months</span>
                        <span class="tag tag-green">Routine</span>
                    </div>
                    <div class="flex flex-col gap-4">
                        <p class="text-sm"><strong>Most common scenario.</strong> Bleeding usually settles.</p>
                        <div style="background: var(--success-bg); padding: 1rem; border-radius: 4px;">
                            <strong>Primary Action:</strong>
                            <p>Reassure patient. Advise to persevere.</p>
                        </div>
                        <div>
                            <p class="text-sm font-bold text-muted uppercase mb-2">Counseling Points:</p>
                            <ul style="padding-left: 1.2rem; font-size: 0.9rem;">
                                <li>It is a common side effect.</li>
                                <li>Endometrium is stabilizing.</li>
                                <li>Check adherence (missed pills).</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Scenario 2: Persistent / Late Stage -->
                <div class="card" style="border-left: 5px solid var(--primary-blue);">
                    <div class="card-header">
                        <span class="card-title">Time on CHC: &gt; 3 Months</span>
                        <span class="tag tag-blue">Action Required</span>
                    </div>
                    <p class="text-sm mb-4"><strong>Persistent bleeding</strong> after excluding pathology:</p>
                    <ol style="padding-left: 1.2rem; font-size: 0.9rem;">
                        <li class="mb-2"><strong>Exclude Pregnancy/Pathology</strong> if symptoms match red flags above.</li>
                        <li class="mb-2"><strong>Change Formulation:</strong>
                            <ul class="text-muted text-sm mt-1">
                                <li>Increase EE to max 35mcg (check VTE risk).</li>
                                <li>Switch progestogen type (e.g., 3rd Gen).</li>
                                <li><strong>Recommend Vaginal Ring</strong> (Lower BTB rates than pill).</li>
                            </ul>
                        </li>
                        <li class="mb-2"><strong>Review Regimen:</strong>
                            <ul class="text-muted text-sm mt-1">
                                <li>For extended use: Tailor break (take break when bleeding starts).</li>
                            </ul>
                        </li>
                        <li><strong>Alternative:</strong> If persists despite change, consider non-CHC method.</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Formulation Factors Table -->
        <section class="mb-4">
            <h3 class="font-bold mb-4">Formulation & Cycle Influence</h3>
            <div class="card">
                <div style="overflow-x: auto;">
                    <table class="info-table">
                        <thead>
                            <tr>
                                <th>Factor</th>
                                <th>Influence on Bleeding</th>
                                <th>Clinical Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Estrogen Dose</strong></td>
                                <td>Lower dose = More disruption</td>
                                <td>20mcg EE causes more patterns than >20mcg.</td>
                            </tr>
                            <tr>
                                <td><strong>Progestogen Gen</strong></td>
                                <td>Mixed evidence</td>
                                <td>3rd Gen may be better than 1st Gen, but evidence flawed.</td>
                            </tr>
                            <tr>
                                <td><strong>Vaginal Ring</strong></td>
                                <td><span style="color:var(--success-green)">Positive</span></td>
                                <td>Lower incidence of BTB compared to COC pill.</td>
                            </tr>
                            <tr>
                                <td><strong>Patch vs Pill</strong></td>
                                <td>Neutral</td>
                                <td>No significant difference in irregular bleeding.</td>
                            </tr>
                            <tr>
                                <td><strong>Extended Regimens</strong></td>
                                <td><span style="color:var(--danger-red)">Negative initially</span></td>
                                <td>More BTB initially, but frequency decreases over time.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Mechanism (Collapsible/Compact) -->
        <section class="mb-4">
            <details style="background: #fff; padding: 1rem; border-radius: var(--border-radius); border: 1px solid #e2e8f0;">
                <summary class="font-bold text-muted" style="cursor: pointer;">View Mechanism of Action (Info)</summary>
                <div class="mt-4 text-sm text-muted">
                    <p>Normal endometrial maturation requires complex interactions between oestrogen and progesterone. Modern CHCs have lower oestrogen doses, which may be insufficient to maintain endometrial integrity. The progestogen promotes atrophy of glands and stroma.</p>
                    <p class="mt-2"><strong>Result:</strong> A thin, fragile endometrium prone to bleeding due to frail blood vessels and changes in local hormone response.</p>
                </div>
            </details>
        </section>

    </main>

    <footer class="container" style="padding: 2rem 0; text-align: center; color: var(--text-muted); font-size: 0.8rem;">
        <p>Reference: Patient.info - Breakthrough bleeding with combined hormonal contraception (Last updated Apr 2025).</p>
        <p>For Medical Professionals Only. Always use clinical judgement.</p>
    </footer>

    <script>
        // Smooth Scroll
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Interactive Assessment Logic
        function updateRisk() {
            const checkboxes = document.querySelectorAll('#assessment input[type="checkbox"]:checked');
            const resultBox = document.getElementById('riskResult');
            
            if (checkboxes.length > 0) {
                resultBox.classList.add('visible');
                
                // Logic: Check if any "Red Flag" from the first 4 checkboxes is checked
                const redFlagsChecked = Array.from(checkboxes).some(cb => 
                    cb.parentElement.innerText.includes('Pain') || 
                    cb.parentElement.innerText.includes('discharge') || 
                    cb.parentElement.innerText.includes('Persistent') || 
                    cb.parentElement.innerText.includes('New onset')
                );

                if (redFlagsChecked) {
                    resultBox.style.backgroundColor = 'var(--danger-red)';
                    resultBox.innerHTML = `
                        <h3 style="margin-bottom:0.5rem"><svg class="icon" style="vertical-align:sub" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg> Action Required</h3>
                        <p>Red flags detected. Perform exam/investigations if >3 months use or symptoms match.</p>
                    `;
                } else {
                    resultBox.style.backgroundColor = '#0284c7';
                    resultBox.innerHTML = `
                        <h3 style="margin-bottom:0.5rem">Management Advice</h3>
                        <p>Patient factors/Adherence issues detected. Address these first. If bleeding is new (<3 months), reassure and persevere.</p>
                    `;
                }
            } else {
                resultBox.classList.remove('visible');
            }
        }
    </script>
</body>
</html>