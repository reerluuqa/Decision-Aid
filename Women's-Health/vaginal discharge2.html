<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vaginal Discharge — One‑Page Clinical Algorithm (NICE CKS, Feb 2024)</title>
  <meta name="description" content="Rapid reference algorithm for assessment and management of vaginal discharge in primary care (NICE CKS, last revised Feb 2024)." />
  <style>
    :root {
      --bg: #0b1220;
      --panel: #0f172a;
      --muted: #93a4c6;
      --text: #e6ecff;
      --accent: #7c9cf5;
      --accent-2: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --card: #111827;
      --chip-bg: #1f2a44;
      --chip: #c6d3ff;
      --ring: rgba(124, 156, 245, 0.45);
    }

    /* Light mode (optional toggle) */
    .light {
      --bg: #f7fafc;
      --panel: #ffffff;
      --muted: #4b5563;
      --text: #0f172a;
      --accent: #3b82f6;
      --accent-2: #16a34a;
      --warning: #b45309;
      --danger: #dc2626;
      --card: #ffffff;
      --chip-bg: #eef2ff;
      --chip: #1f2a44;
      --ring: rgba(59, 130, 246, 0.25);
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font: 15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      background: linear-gradient(180deg, var(--bg), #0b0f1a);
      color: var(--text);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
    }

    header.topbar {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(140%) blur(8px);
      background: color-mix(in srgb, var(--bg) 75%, transparent);
      border-bottom: 1px solid color-mix(in srgb, var(--accent) 20%, transparent);
    }
    .topbar-inner {
      max-width: 1200px; margin: 0 auto; padding: 12px 24px; display: flex; gap: 16px; align-items: center; justify-content: space-between;
    }
    .brand { display: flex; gap: 12px; align-items: center; }
    .brand h1 { font-size: 18px; margin: 0; letter-spacing: 0.2px; }
    .badge { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: var(--chip-bg); color: var(--chip); border: 1px solid color-mix(in srgb, var(--accent) 20%, transparent); }

    .controls { display: flex; flex-wrap: wrap; gap: 10px; }
    .btn {
      appearance: none; border: 1px solid color-mix(in srgb, var(--accent) 28%, transparent); background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 92%, transparent), color-mix(in srgb, var(--panel) 70%, transparent));
      color: var(--text); padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 600; letter-spacing: .2px;
      box-shadow: 0 1px 0 rgba(255,255,255,0.04) inset, 0 8px 24px -12px var(--ring);
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 1px 0 rgba(255,255,255,0.05) inset, 0 14px 30px -14px var(--ring); }
    .btn:active { transform: translateY(0); }

    aside.nav {
      position: sticky; top: 64px; align-self: start;
      background: var(--panel);
      border: 1px solid color-mix(in srgb, var(--accent) 20%, transparent);
      border-radius: 16px; padding: 16px; box-shadow: 0 10px 30px -20px var(--ring);
    }
    .search { position: relative; margin-bottom: 10px; }
    .search input {
      width: 100%; padding: 10px 12px 10px 36px; border-radius: 10px; border: 1px solid color-mix(in srgb, var(--accent) 20%, transparent);
      background: var(--card); color: var(--text);
    }
    .search svg { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); opacity: .6; }

    .nav a { display: block; padding: 8px 10px; border-radius: 8px; color: var(--muted); text-decoration: none; font-weight: 600; }
    .nav a:hover, .nav a.active { background: color-mix(in srgb, var(--accent) 12%, transparent); color: var(--text); }

    main.content { display: grid; gap: 16px; }

    .card {
      background: var(--panel);
      border: 1px solid color-mix(in srgb, var(--accent) 20%, transparent);
      border-radius: 16px; overflow: clip; box-shadow: 0 10px 30px -18px var(--ring);
    }

    .card header { display: flex; align-items: center; gap: 12px; padding: 14px 16px; cursor: pointer; user-select: none; }
    .card header h2 { margin: 0; font-size: 16px; letter-spacing: .2px; }
    .card header .kicker { font-size: 12px; color: var(--muted); font-weight: 700; text-transform: uppercase; letter-spacing: .8px; }
    .card header:hover { background: color-mix(in srgb, var(--accent) 10%, transparent); }

    .icon { width: 18px; height: 18px; opacity: .8; flex-shrink: 0; }

    .body { padding: 14px 16px 18px; display: grid; gap: 10px; }
    .body ul { margin: 0; padding-left: 18px; }
    .body li { margin: 6px 0; }

    .chips { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip { background: var(--chip-bg); color: var(--chip); border: 1px solid color-mix(in srgb, var(--accent) 18%, transparent); padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; }

    .callout { border-left: 3px solid var(--accent); background: color-mix(in srgb, var(--accent) 8%, transparent); padding: 10px 12px; border-radius: 10px; }
    .callout.warn { border-left-color: var(--warning); }
    .callout.danger { border-left-color: var(--danger); }
    .muted { color: var(--muted); }

    table { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 12px; border: 1px solid color-mix(in srgb, var(--accent) 20%, transparent); }
    th, td { padding: 10px 12px; text-align: left; vertical-align: top; }
    thead th { background: color-mix(in srgb, var(--accent) 10%, transparent); }
    tbody tr:nth-child(odd) { background: color-mix(in srgb, var(--accent) 6%, transparent); }

    footer.footer { margin: 24px 0 48px; color: var(--muted); }

    /* Print */
    @media print {
      body { background: #fff; color: #000; }
      header.topbar, aside.nav, .controls { display: none !important; }
      .container { max-width: 100%; grid-template-columns: 1fr; padding: 0; }
      .card, .callout, table { box-shadow: none; border-color: #ddd; }
      .badge { color: #000; background: #f2f4f8; border: 1px solid #ddd; }
    }

    @media (max-width: 1024px) {
      .container { grid-template-columns: 1fr; }
      aside.nav { position: static; }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 20s-6-4.35-6-10a6 6 0 0 1 12 0c0 5.65-6 10-6 10z"/><circle cx="12" cy="10" r="3"/></svg>
        <h1>Vaginal Discharge — One‑Page Clinical Algorithm</h1>
        <span class="badge" title="Last revised in Feb 2024">NICE CKS · Feb 2024</span>
      </div>
      <div class="controls">
        <button class="btn" id="toggleMode" title="Toggle light/dark">Toggle Theme</button>
        <button class="btn" id="expandAll">Expand All</button>
        <button class="btn" id="collapseAll">Collapse All</button>
        <button class="btn" onclick="window.print()">Print</button>
      </div>
    </div>
  </header>

  <div class="container">
    <aside class="nav">
      <div class="search">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input id="filter" type="search" placeholder="Filter content (e.g., pH, PID, BV)…" />
      </div>
      <nav class="nav" id="toc">
        <a href="#assess">Initial Assessment</a>
        <a href="#redflags">Red Flags</a>
        <a href="#exam">Examination</a>
        <a href="#investigations">Investigations</a>
        <a href="#diagnosis">Likely Diagnosis</a>
        <a href="#management">Management</a>
        <a href="#safetynet">Safety Net</a>
      </nav>
      <p class="muted" style="margin-top:12px">Designed for rapid decision‑making in primary care. For drug regimens, see specific CKS topics (BV, Candida, Chlamydia, Gonorrhoea, PID, Trichomoniasis).</p>
    </aside>

    <main class="content">
      <!-- 1. Initial Assessment -->
      <section id="assess" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20v-6"/><path d="M6 20v-4"/><path d="M18 20v-4"/><path d="M2 20h20"/><path d="M12 14V4"/><path d="M12 4l4 4"/><path d="M12 4 8 8"/></svg>
          <div>
            <div class="kicker">Step 1</div>
            <h2>Initial Assessment</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li><strong>History:</strong> onset, duration, colour, odour, consistency; cyclical pattern; associated sx (itch, pain, dyspareunia, fever, abnormal bleeding); exacerbating factors (post‑coital); prior treatments/products (douches, washes); PMH; contraception.</li>
            <li><strong>STI risk:</strong> &lt;25y, new/multiple partners, prior STI, condoms not used with new/casual partners, Black ethnicity.</li>
          </ul>
          <div class="callout">Aim to decide: <em>physiological</em> vs <em>infective</em> vs <em>non‑infective</em>.</div>
          <div class="chips" aria-label="quick tags">
            <span class="chip">History first</span>
            <span class="chip">STI risk stratify</span>
            <span class="chip">Consider pregnancy</span>
          </div>
        </div>
      </section>

      <!-- 2. Red Flags -->
      <section id="redflags" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.3 2.3 21.7 8l-11.4 5.7V2.3Z"/><path d="M2 22v-7.5"/></svg>
          <div>
            <div class="kicker">Step 2</div>
            <h2>Red Flags → Urgent action</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li><strong>Suspected PID</strong> <em>and</em> pregnancy/ectopic concern, fever &gt;38°C or severe systemic illness, <strong>adnexal mass</strong>, or systemically unwell with uncertain dx → <strong>urgent admission</strong>.</li>
            <li><strong>Suspected gynaecological cancer</strong> (e.g., persistent unexplained discharge ± abnormal bleeding) → <strong>two‑week wait</strong>.</li>
          </ul>
          <div class="callout danger">Low threshold for empiric treatment in PID; delaying increases risk of infertility and ectopic pregnancy.</div>
        </div>
      </section>

      <!-- 3. Examination -->
      <section id="exam" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h6"/><path d="M12 9v6"/><circle cx="12" cy="12" r="10"/></svg>
          <div>
            <div class="kicker">Step 3</div>
            <h2>Examination (when indicated)</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li><strong>May omit</strong> exam &amp; treat empirically if typical <em>BV</em> or <em>candidiasis</em>, low STI risk, and <strong>no upper‑tract features</strong>.</li>
            <li><strong>If examined:</strong> vulval inspection (ulcers, vulvitis, lesions, foreign body); speculum (cervix/vagina); consider bimanual if PID suspected.</li>
            <li><strong>pH test:</strong> <span class="chip">&lt;4.5 → Candida</span> <span class="chip">≥4.5 → BV or Trichomonas</span> (does <em>not</em> differentiate BV vs TV).</li>
            <li>Under 25 with recent bilateral lower abdo pain + local tenderness (pregnancy excluded) → consider PID.</li>
          </ul>
          <div class="callout warn">Avoid speculum in pregnancy with low‑lying placenta. Offer chaperone and document consent.</div>
        </div>
      </section>

      <!-- 4. Investigations -->
      <section id="investigations" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="3"/><path d="M7 7h10v10H7z"/></svg>
          <div>
            <div class="kicker">Step 4</div>
            <h2>Investigations</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li><strong>Offer STI testing</strong> when risk/uncertain: chlamydia, gonorrhoea, trichomonas, HIV, syphilis. Strongly consider <strong>GUM referral</strong> for testing/PN.</li>
            <li><strong>High vaginal swab</strong> (reserve): atypical findings; pregnancy/postpartum/post‑abortion/miscarriage/instrumentation/pre‑/post‑gyn surgery; within 3 weeks of IUCD insertion; recurrent (≥4/year); poor/no response.</li>
            <li><strong>Additional:</strong> urine pregnancy test; urine dip if UTI suspected.</li>
          </ul>
        </div>
      </section>

      <!-- 5. Likely Diagnosis -->
      <section id="diagnosis" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v4"/><path d="m16.2 7.8 2.8-2.8"/><path d="M20 12h4"/><path d="m16.2 16.2 2.8 2.8"/><path d="M12 18v4"/><path d="m5 5 3 3"/><circle cx="12" cy="12" r="5"/></svg>
          <div>
            <div class="kicker">Step 5</div>
            <h2>Likely Diagnosis — Key Features</h2>
          </div>
        </header>
        <div class="body">
          <table>
            <thead><tr><th>Condition</th><th>Clues</th></tr></thead>
            <tbody>
              <tr><td><strong>BV</strong></td><td>Thin grey/white discharge, fishy odour, pH ≥4.5, usually no itch/soreness.</td></tr>
              <tr><td><strong>Vulvovaginal candidiasis</strong></td><td>Pruritus ± soreness; thick/curdy non‑offensive discharge; pH &lt;4.5; erythema/fissures; satellite lesions possible.</td></tr>
              <tr><td><strong>Chlamydia</strong></td><td>Often asymptomatic; ↑ discharge, IMB/PCB, dysuria, deep dyspareunia; mucopurulent cervicitis ± contact bleeding.</td></tr>
              <tr><td><strong>Gonorrhoea</strong></td><td>Altered/mucopurulent discharge; pelvic pain in ~¼; IMB/menorrhagia uncommon.</td></tr>
              <tr><td><strong>Trichomonas</strong></td><td>Frothy yellow, offensive; vulvitis/vaginitis; <em>strawberry cervix</em> (≈2%).</td></tr>
              <tr><td><strong>PID</strong></td><td>Bilat pelvic pain, deep dyspareunia, abnormal bleeding, purulent discharge; cervical/adnexal tenderness; fever &gt;38°C.</td></tr>
              <tr><td><strong>Non‑infective</strong></td><td>Inadequate hygiene; retained foreign body; irritant/allergic vaginitis; Behçet’s; desquamative inflammatory vaginitis; erosive lichen planus; fistula; gyn cancers; GSM/atrophy.</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 6. Management -->
      <section id="management" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18"/><path d="M3 6h18"/><path d="M3 18h18"/></svg>
          <div>
            <div class="kicker">Step 6</div>
            <h2>Management Pathway</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li><strong>Suspected PID:</strong> if severe/systemic, pregnant/ectopic concern, adnexal mass, or unwell + uncertain dx → <strong>urgent admission</strong>. Otherwise <strong>refer GUM</strong>.</li>
            <li><strong>Suspected cancer:</strong> urgent suspected‑cancer pathway.</li>
            <li><strong>Microbiologically confirmed</strong> chlamydia/gonorrhoea/trichomonas → <strong>GUM</strong> for treatment &amp; partner notification.</li>
            <li><strong>Cervicitis:</strong> empiric chlamydia treatment while awaiting swabs.</li>
            <li><strong>BV or Candida:</strong> treat per local/NICE CKS regimens (oral/topical options).</li>
            <li><strong>Non‑infective:</strong> remove/avoid irritants, manage underlying condition; refer where appropriate.</li>
            <li><strong>No clear cause:</strong> likely physiological — reassure; basic hygiene; avoid douches/tight synthetic clothing; safe sexual practices.</li>
            <li><strong>Refer to GUM</strong> if persistent/recurrent symptoms or diagnostic doubt.</li>
          </ul>
          <div class="chips">
            <span class="chip">Partner notification</span>
            <span class="chip">Pregnancy test</span>
            <span class="chip">Safeguarding</span>
          </div>
        </div>
      </section>

      <!-- 7. Safety Net -->
      <section id="safetynet" class="card" data-section>
        <header>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z"/></svg>
          <div>
            <div class="kicker">Step 7</div>
            <h2>Safety Net</h2>
          </div>
        </header>
        <div class="body">
          <ul>
            <li>Advise to re‑attend if symptoms <strong>persist, worsen, or recur</strong>.</li>
            <li>Document advice and provide written resources (e.g., NHS page on vaginal discharge).</li>
          </ul>
          <div class="callout">Use this algorithm as a rapid aide‑mémoire. Always apply clinical judgment and local pathways.</div>
        </div>
      </section>

      <footer class="footer">
        <p class="muted">Derived from NICE Clinical Knowledge Summaries (CKS): Vaginal discharge (last revised Feb 2024). This single‑page UI surfaces key decision points and red flags for primary care use.</p>
      </footer>
    </main>
  </div>

  <script>
    // Simple accordion behavior
    document.querySelectorAll('.card header').forEach(h => {
      h.addEventListener('click', () => {
        const body = h.parentElement.querySelector('.body');
        body.style.display = body.style.display === 'none' ? 'grid' : 'none';
      });
    });

    // Default: expanded on load
    const expandAll = () => document.querySelectorAll('.card .body').forEach(b => b.style.display = 'grid');
    const collapseAll = () => document.querySelectorAll('.card .body').forEach(b => b.style.display = 'none');
    document.getElementById('expandAll').addEventListener('click', expandAll);
    document.getElementById('collapseAll').addEventListener('click', collapseAll);

    // Filter content
    const filter = document.getElementById('filter');
    filter.addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      const cards = document.querySelectorAll('[data-section]');
      cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        card.style.display = q && !text.includes(q) ? 'none' : '';
      });
    });

    // Active link highlight on scroll
    const links = Array.from(document.querySelectorAll('#toc a'));
    const sections = links.map(a => document.querySelector(a.getAttribute('href')));
    const onScroll = () => {
      const y = window.scrollY + 100;
      let idx = 0;
      sections.forEach((sec, i) => { if (sec && sec.offsetTop <= y) idx = i; });
      links.forEach(l => l.classList.remove('active'));
      if (links[idx]) links[idx].classList.add('active');
    };
    document.addEventListener('scroll', onScroll, { passive: true });
    onScroll();

    // Theme toggle
    const root = document.documentElement;
    document.getElementById('toggleMode').addEventListener('click', () => {
      root.classList.toggle('light');
    });
  </script>
</body>
</html>