<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fibrocystic Breast Disease - Interactive Algorithm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        
        .card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, padding 0.3s ease;
        }
        
        .expandable-content.expanded {
            max-height: 2000px;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        
        .progress-bar {
            transition: all 0.5s ease;
        }
        
        .progress-item {
            transition: all 0.3s ease;
        }
        
        .progress-item.active {
            transform: scale(1.05);
        }
        
        .severity-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .icon-float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Print styles */
        @media print {
            .no-print { display: none !important; }
            .card { box-shadow: none !important; }
            .expandable-content { max-height: none !important; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .progress-sidebar {
                position: relative !important;
                width: 100% !important;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
    
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-stethoscope text-3xl text-purple-600"></i>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Fibrocystic Breast Disease</h1>
                        <p class="text-sm text-gray-600">Interactive Clinical Algorithm | BMJ Best Practice</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2 text-sm text-gray-500">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Last Updated: Nov 2023</span>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            
            <!-- Main Content -->
            <main class="flex-1 space-y-6" id="main-content">
                
                <!-- Assessment Card -->
                <div class="card bg-white rounded-xl shadow-lg overflow-hidden" id="assessment-card">
                    <div class="card-header bg-gradient-to-r from-rose-500 to-pink-600 p-6 cursor-pointer" onclick="toggleCard('assessment')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="bg-white bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-clipboard-list text-2xl text-white icon-float"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-white">Assessment</h2>
                                    <p class="text-white text-opacity-90 text-sm">Initial evaluation and history taking</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-medium severity-badge">Age 30-50 yrs</span>
                                <i class="fas fa-chevron-down text-white text-xl transition-transform duration-300" id="assessment-arrow"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="expandable-content" id="assessment-content">
                        <div class="p-6 space-y-6">
                            <!-- History Section -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-history text-rose-500 mr-2"></i>
                                    History Taking
                                </h3>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div class="flex items-start space-x-3">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <div>
                                                <p class="font-medium text-gray-800">Cyclical Mastalgia</p>
                                                <p class="text-sm text-gray-600">Bilateral pain preceding menses, dull/burning sensation</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <div>
                                                <p class="font-medium text-gray-800">Nipple Discharge</p>
                                                <p class="text-sm text-gray-600">Characterize: color, amount, unilateral/bilateral</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="space-y-3">
                                        <div class="flex items-start space-x-3">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <div>
                                                <p class="font-medium text-gray-800">Duration & Pattern</p>
                                                <p class="text-sm text-gray-600">Average 12-year course, recurrence common</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <div>
                                                <p class="font-medium text-gray-800">Reproductive History</p>
                                                <p class="text-sm text-gray-600">Nulliparity, HRT use, menopause timing</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Physical Exam -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-hand-holding-medical text-rose-500 mr-2"></i>
                                    Physical Examination
                                </h3>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3">
                                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">Expected Finding</span>
                                        <p class="text-sm text-gray-700">Diffuse symmetrical lumpiness throughout both breasts</p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-medium">Evaluate Further</span>
                                        <p class="text-sm text-gray-700">Focal asymmetry or dominant mass requires imaging/biopsy</p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-medium">Red Flag</span>
                                        <p class="text-sm text-gray-700">Skin retraction, fixation to chest wall, bloody discharge</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Risk Factors -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-amber-500 mr-2"></i>
                                    Risk Factors
                                </h3>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <h4 class="font-medium text-gray-800 mb-2">Weak Associations</h4>
                                        <ul class="space-y-1 text-sm text-gray-600">
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-circle text-xs text-amber-400"></i>
                                                <span>Obesity (higher BMI)</span>
                                            </li>
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-circle text-xs text-amber-400"></i>
                                                <span>Nulliparity</span>
                                            </li>
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-circle text-xs text-amber-400"></i>
                                                <span>Estrogen replacement therapy</span>
                                            </li>
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-circle text-xs text-amber-400"></i>
                                                <span>Late-onset menopause</span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800 mb-2">Protective Factors</h4>
                                        <ul class="space-y-1 text-sm text-gray-600">
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-check text-xs text-green-500"></i>
                                                <span>High parity</span>
                                            </li>
                                            <li class="flex items-center space-x-2">
                                                <i class="fas fa-check text-xs text-green-500"></i>
                                                <span>Tamoxifen use</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Diagnosis Card -->
                <div class="card bg-white rounded-xl shadow-lg overflow-hidden" id="diagnosis-card">
                    <div class="card-header bg-gradient-to-r from-blue-500 to-indigo-600 p-6 cursor-pointer" onclick="toggleCard('diagnosis')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="bg-white bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-microscope text-2xl text-white icon-float"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-white">Diagnosis</h2>
                                    <p class="text-white text-opacity-90 text-sm">Investigations and diagnostic criteria</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">Exclusion Dx</span>
                                <i class="fas fa-chevron-down text-white text-xl transition-transform duration-300" id="diagnosis-arrow"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="expandable-content" id="diagnosis-content">
                        <div class="p-6 space-y-6">
                            <!-- Investigations -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-flask text-blue-500 mr-2"></i>
                                    Key Investigations
                                </h3>
                                
                                <div class="space-y-4">
                                    <!-- Mammography -->
                                    <div class="bg-white rounded-lg p-4 border-l-4 border-blue-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800">Mammography</h4>
                                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">Age-appropriate</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Indicated for persistent mass, suspicious findings, or age-appropriate screening</p>
                                        <div class="text-xs text-gray-500">
                                            <p>• Dense breasts, circumscribed density</p>
                                            <p>• Not indicated for isolated mastalgia without physical findings</p>
                                        </div>
                                    </div>

                                    <!-- Ultrasound -->
                                    <div class="bg-white rounded-lg p-4 border-l-4 border-blue-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800">Breast Ultrasound</h4>
                                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">Cyst Confirmation</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Required to confirm cysts and characterize mass type</p>
                                        <div class="text-xs text-gray-500">
                                            <p>• Simple cysts: anechoic, smooth margins, posterior enhancement</p>
                                            <p>• Complex cysts: solid components, mural growth, thick septa → require biopsy</p>
                                        </div>
                                    </div>

                                    <!-- Cyst Aspiration -->
                                    <div class="bg-white rounded-lg p-4 border-l-4 border-amber-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800">Cyst Aspiration</h4>
                                            <span class="bg-amber-100 text-amber-800 px-2 py-1 rounded text-xs font-medium">Symptomatic Cases</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Indicated for symptomatic cysts or diagnostic uncertainty</p>
                                        <div class="text-xs text-gray-500 space-y-1">
                                            <p class="flex items-center space-x-2">
                                                <i class="fas fa-tint text-amber-500"></i>
                                                <span>Straw-coloured fluid: No cytology needed if cyst resolves</span>
                                            </p>
                                            <p class="flex items-center space-x-2">
                                                <i class="fas fa-tint text-red-500"></i>
                                                <span>Bloody fluid: Requires cytology or biopsy</span>
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Biopsy -->
                                    <div class="bg-white rounded-lg p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800">Breast Biopsy</h4>
                                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium">Mass/Suspicion</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Reserved for masses or suspicious imaging findings</p>
                                        <div class="text-xs text-gray-500">
                                            <p>• Exclude breast cancer or high-risk pathology</p>
                                            <p>• Histology: apocrine metaplasia, hyperplasia, cysts, fibrosis</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Differentials -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-diagnoses text-indigo-500 mr-2"></i>
                                    Key Differentials
                                </h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-white rounded p-3 border">
                                        <h4 class="font-medium text-gray-800 flex items-center justify-between">
                                            Chest Wall Pain
                                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Clinical Dx</span>
                                        </h4>
                                        <p class="text-xs text-gray-600 mt-1">Constant, non-cyclical pain elicited by chest wall palpation</p>
                                    </div>
                                    <div class="bg-white rounded p-3 border">
                                        <h4 class="font-medium text-gray-800 flex items-center justify-between">
                                            Fibroadenoma
                                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Ultrasound/Biopsy</span>
                                        </h4>
                                        <p class="text-xs text-gray-600 mt-1">Well-circumscribed mass in younger women</p>
                                    </div>
                                    <div class="bg-white rounded p-3 border">
                                        <h4 class="font-medium text-gray-800 flex items-center justify-between">
                                            Breast Cancer
                                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Urgent Referral</span>
                                        </h4>
                                        <p class="text-xs text-gray-600 mt-1">Firm mass, skin changes, fixation to chest wall</p>
                                    </div>
                                    <div class="bg-white rounded p-3 border">
                                        <h4 class="font-medium text-gray-800 flex items-center justify-between">
                                            Intracystic Papilloma
                                            <span class="bg-amber-100 text-amber-800 px-2 py-1 rounded text-xs">Biopsy Required</span>
                                        </h4>
                                        <p class="text-xs text-gray-600 mt-1">Bloody nipple discharge, small lump under nipple</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Cancer Risk Stratification -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-chart-line text-purple-500 mr-2"></i>
                                    Histological Cancer Risk Stratification
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white rounded p-4 border-l-4 border-green-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Non-proliferative (70%)</p>
                                                <p class="text-sm text-gray-600">Sclerosing adenosis, apocrine metaplasia, simple cysts</p>
                                            </div>
                                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">No ↑ Risk</span>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-amber-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Proliferative without atypia (26%)</p>
                                                <p class="text-sm text-gray-600">Usual epithelial hyperplasia</p>
                                            </div>
                                            <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">1.9x ↑ Risk</span>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Proliferative with atypia (4%)</p>
                                                <p class="text-sm text-gray-600">Atypical ductal hyperplasia</p>
                                            </div>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">5.3x ↑ Risk</span>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-red-600">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Atypia + Family History</p>
                                                <p class="text-sm text-gray-600">Combined risk multiplier</p>
                                            </div>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">11x ↑ Risk</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Treatment Card -->
                <div class="card bg-white rounded-xl shadow-lg overflow-hidden" id="treatment-card">
                    <div class="card-header bg-gradient-to-r from-green-500 to-emerald-600 p-6 cursor-pointer" onclick="toggleCard('treatment')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="bg-white bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-pills text-2xl text-white icon-float"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-white">Treatment</h2>
                                    <p class="text-white text-opacity-90 text-sm">Management strategies by symptom type</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">Symptom-Based</span>
                                <i class="fas fa-chevron-down text-white text-xl transition-transform duration-300" id="treatment-arrow"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="expandable-content" id="treatment-content">
                        <div class="p-6 space-y-6">
                            
                            <!-- Mastalgia Treatment Algorithm -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                    <i class="fas fa-heartbeat text-red-500 mr-2"></i>
                                    Mastalgia Management
                                </h3>
                                
                                <!-- Step 1 -->
                                <div class="bg-white rounded-lg p-4 mb-3 border-l-4 border-green-500">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">1st Line</span>
                                        <h4 class="font-semibold text-gray-800">Supportive Measures</h4>
                                    </div>
                                    <ul class="text-sm text-gray-700 space-y-1 ml-4">
                                        <li class="flex items-center space-x-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Reassurance and education about hormonal cycles</span>
                                        </li>
                                        <li class="flex items-center space-x-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Supportive bra</span>
                                        </li>
                                        <li class="flex items-center space-x-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>Lifestyle: caffeine/sodium restriction (evidence weak)</span>
                                        </li>
                                        <li class="flex items-center space-x-2">
                                            <i class="fas fa-check text-green-500"></i>
                                            <span>HRT modification (post-menopausal)</span>
                                        </li>
                                    </ul>
                                </div>

                                <!-- Step 2 -->
                                <div class="bg-white rounded-lg p-4 mb-3 border-l-4 border-amber-500">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold">Adjunct</span>
                                        <h4 class="font-semibold text-gray-800">Analgesia</h4>
                                    </div>
                                    <div class="grid md:grid-cols-3 gap-2 text-sm text-gray-700">
                                        <div class="bg-amber-50 p-2 rounded">
                                            <p class="font-medium">Paracetamol</p>
                                            <p class="text-xs">500-1000mg q4-6h PRN</p>
                                            <p class="text-xs">Max: 4000mg/day</p>
                                        </div>
                                        <div class="bg-amber-50 p-2 rounded">
                                            <p class="font-medium">Ibuprofen</p>
                                            <p class="text-xs">300-400mg q6-8h PRN</p>
                                            <p class="text-xs">Max: 2400mg/day</p>
                                        </div>
                                        <div class="bg-amber-50 p-2 rounded">
                                            <p class="font-medium">Aspirin</p>
                                            <p class="text-xs">300-900mg q4-6h PRN</p>
                                            <p class="text-xs">Max: 4000mg/day</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Step 3 -->
                                <div class="bg-white rounded-lg p-4 mb-3 border-l-4 border-purple-500">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-bold">Adjunct</span>
                                        <h4 class="font-semibold text-gray-800">Evening Primrose Oil (EPO)</h4>
                                    </div>
                                    <div class="text-sm text-gray-700 space-y-2">
                                        <p class="flex items-center space-x-2">
                                            <i class="fas fa-info-circle text-purple-500"></i>
                                            <span>Gamma-linolenic acid (GLA) deficiency theory</span>
                                        </p>
                                        <p class="flex items-center space-x-2">
                                            <i class="fas fa-clock text-purple-500"></i>
                                            <span>Trial: 1g/day initially, titrate to 3g/day over weeks</span>
                                        </p>
                                        <p class="flex items-center space-x-2">
                                            <i class="fas fa-calendar-alt text-purple-500"></i>
                                            <span>Duration: 3-6 months to assess effect</span>
                                        </p>
                                        <p class="flex items-center space-x-2">
                                            <i class="fas fa-exclamation-triangle text-amber-500"></i>
                                            <span>Evidence: Meta-analysis shows no clear benefit, but limited side effects</span>
                                        </p>
                                    </div>
                                </div>

                                <!-- Step 4 -->
                                <div class="bg-white rounded-lg p-4 border-l-4 border-red-500">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">2nd Line</span>
                                        <h4 class="font-semibold text-gray-800">Hormonal Therapy</h4>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Severe/Prolonged >6 months</span>
                                    </div>
                                    <div class="grid md:grid-cols-3 gap-3 text-sm">
                                        <div class="bg-red-50 p-3 rounded border">
                                            <p class="font-medium flex items-center space-x-2">
                                                <i class="fas fa-pills text-red-500"></i>
                                                <span>Tamoxifen</span>
                                            </p>
                                            <p class="text-xs text-gray-600 mt-1">10mg days 15-25 of cycle x 3 months</p>
                                            <p class="text-xs text-gray-500">Most commonly used</p>
                                        </div>
                                        <div class="bg-red-50 p-3 rounded border">
                                            <p class="font-medium flex items-center space-x-2">
                                                <i class="fas fa-pills text-red-500"></i>
                                                <span>Bromocriptine</span>
                                            </p>
                                            <p class="text-xs text-gray-600 mt-1">1.25-2.5mg twice daily</p>
                                            <p class="text-xs text-gray-500">Prolactin inhibitor</p>
                                        </div>
                                        <div class="bg-red-50 p-3 rounded border">
                                            <p class="font-medium flex items-center space-x-2">
                                                <i class="fas fa-pills text-red-500"></i>
                                                <span>Danazol</span>
                                            </p>
                                            <p class="text-xs text-gray-600 mt-1">100mg twice daily (adjusted)</p>
                                            <p class="text-xs text-gray-500">Rarely used (masculinizing effects)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Breast Cyst Management -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-tint text-blue-500 mr-2"></i>
                                    Breast Cyst Management
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white rounded p-4 border-l-4 border-blue-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Simple Asymptomatic Cysts</p>
                                                <p class="text-sm text-gray-600">Confirmed on ultrasound</p>
                                            </div>
                                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Observation</span>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-2">No intervention required unless bothersome to patient</p>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-amber-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Symptomatic Cysts</p>
                                                <p class="text-sm text-gray-600">Painful or diagnostic uncertainty</p>
                                            </div>
                                            <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">Aspiration</span>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-2">Ultrasound-guided aspiration recommended</p>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="font-medium text-gray-800">Recurrent/Complex Cysts</p>
                                                <p class="text-sm text-gray-600">Sonographically complex features</p>
                                            </div>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Biopsy/Excision</span>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-2">Rule out intracystic papilloma or cancer</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Breast Mass Management -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-dot-circle text-red-500 mr-2"></i>
                                    Breast Mass Management
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white rounded p-4 border">
                                        <div class="flex items-center justify-between mb-2">
                                            <p class="font-semibold text-gray-800">Fibrocystic Without Atypia</p>
                                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">No Further Therapy</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Routine follow-up and reassurance</p>
                                    </div>
                                    <div class="bg-red-50 rounded p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <p class="font-semibold text-gray-800">Atypical Ductal Hyperplasia</p>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Lesion Removal + Risk Reduction</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Complete excision and consider risk reduction strategies</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Nipple Discharge Algorithm -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-eye-dropper text-purple-500 mr-2"></i>
                                    Nipple Discharge Management
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white rounded p-4 border-l-4 border-green-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <div>
                                                <p class="font-medium text-gray-800">Non-suspicious Discharge</p>
                                                <p class="text-xs text-gray-500">Scant, milky/green/grey, bilateral, multiple ducts</p>
                                            </div>
                                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Reassurance</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Observe, no intervention needed</p>
                                    </div>
                                    <div class="bg-red-50 rounded p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <div>
                                                <p class="font-medium text-gray-800">Suspicious Discharge</p>
                                                <p class="text-xs text-gray-500">Bloody/watery, profuse, single duct</p>
                                            </div>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Urgent Surgery Referral</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Microductectomy or central duct excision required</p>
                                        <p class="text-xs text-red-600 mt-1">Causes: Papilloma (70%), Cancer (5%), Ductal ectasia (25%)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Follow-up Card -->
                <div class="card bg-white rounded-xl shadow-lg overflow-hidden" id="followup-card">
                    <div class="card-header bg-gradient-to-r from-purple-500 to-violet-600 p-6 cursor-pointer" onclick="toggleCard('followup')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="bg-white bg-opacity-20 p-3 rounded-full">
                                    <i class="fas fa-chart-line text-2xl text-white icon-float"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-white">Follow-up</h2>
                                    <p class="text-white text-opacity-90 text-sm">Monitoring and prognosis</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium">Long-term</span>
                                <i class="fas fa-chevron-down text-white text-xl transition-transform duration-300" id="followup-arrow"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="expandable-content" id="followup-content">
                        <div class="p-6 space-y-6">
                            
                            <!-- Monitoring -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-search text-blue-500 mr-2"></i>
                                    Monitoring Strategy
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white rounded p-4 border-l-4 border-blue-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <p class="font-medium text-gray-800">Symptom-Based Follow-up</p>
                                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">3-6 Month Intervals</span>
                                        </div>
                                        <p class="text-sm text-gray-600">For recurring/chronic pain or cysts based on severity</p>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-purple-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <p class="font-medium text-gray-800">Post-Cyst Aspiration</p>
                                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">Short Interval</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Evaluate for recurrence (may indicate papilloma/cancer)</p>
                                    </div>
                                    <div class="bg-white rounded p-4 border-l-4 border-red-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <p class="font-medium text-gray-800">Atypia on Biopsy</p>
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">Enhanced Surveillance</span>
                                        </div>
                                        <p class="text-sm text-gray-600">Risk reduction counseling and more frequent monitoring</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Complications -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-amber-500 mr-2"></i>
                                    Complications
                                </h3>
                                <div class="bg-white rounded-lg p-4 border-l-4 border-red-500">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-gray-800">Breast Cancer Development</p>
                                            <p class="text-sm text-gray-600">Long-term risk in patients with atypia</p>
                                        </div>
                                        <div class="text-right">
                                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">~4% Risk</span>
                                            <p class="text-xs text-gray-500 mt-1">Limited to atypia cases</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-xs text-gray-500">
                                        <p>• Requires risk reduction strategies and counseling</p>
                                        <p>• Annual screening participation essential</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Prognosis -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-procedures text-green-500 mr-2"></i>
                                    Prognosis
                                </h3>
                                
                                <div class="space-y-4">
                                    <div class="bg-white rounded-lg p-4">
                                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                            <i class="fas fa-heart text-red-500 mr-2"></i>
                                            Mastalgia Prognosis
                                        </h4>
                                        <div class="grid md:grid-cols-2 gap-4 text-sm">
                                            <div class="bg-green-50 p-3 rounded">
                                                <p class="font-medium text-green-800">Course</p>
                                                <p class="text-gray-700">Chronic, relapsing (average 12 years)</p>
                                                <p class="text-gray-600 text-xs">2/3 require repeated hormonal treatment</p>
                                            </div>
                                            <div class="bg-blue-50 p-3 rounded">
                                                <p class="font-medium text-blue-800">Resolution</p>
                                                <p class="text-gray-700">Menopause often causes spontaneous remission</p>
                                                <p class="text-gray-600 text-xs">Little effect on daily activities</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-white rounded-lg p-4">
                                        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
                                            <i class="fas fa-tint text-blue-500 mr-2"></i>
                                            Breast Cyst Prognosis
                                        </h4>
                                        <div class="grid md:grid-cols-2 gap-4 text-sm">
                                            <div class="bg-amber-50 p-3 rounded">
                                                <p class="font-medium text-amber-800">Recurrence Rate</p>
                                                <p class="text-gray-700">26.7% after median 1 year</p>
                                                <p class="text-gray-600 text-xs">Higher risk: previous cysts, bilateral cysts</p>
                                            </div>
                                            <div class="bg-blue-50 p-3 rounded">
                                                <p class="font-medium text-blue-800">Management</p>
                                                <p class="text-gray-700">Repeat aspiration or excision if recurrent</p>
                                                <p class="text-gray-600 text-xs">Rule out underlying pathology</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Patient Guidance -->
                            <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border-l-4 border-purple-500">
                                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-user-md text-purple-500 mr-2"></i>
                                    Patient Discussions & Counseling
                                </h3>
                                <div class="space-y-2 text-sm text-gray-700">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-bell text-purple-500"></i>
                                        <span><strong>Breast Awareness:</strong> Report any changes or new symptoms</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-calendar-check text-purple-500"></i>
                                        <span><strong>Screening:</strong> Age and risk-appropriate mammography</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-info-circle text-purple-500"></i>
                                        <span><strong>Reassurance:</strong> Fibrocystic changes do not increase cancer risk (without atypia)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

            <!-- Sticky Progress Sidebar -->
            <aside class="lg:w-80">
                <div class="progress-sidebar sticky top-24 bg-white rounded-xl shadow-lg p-6 no-print">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-route text-blue-500 mr-2"></i>
                        Algorithm Progress
                    </h3>
                    
                    <div class="space-y-3" id="progress-steps">
                        <div class="progress-item p-3 rounded-lg cursor-pointer transition-all duration-300 bg-rose-50 border-l-4 border-rose-500" onclick="scrollToCard('assessment')">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-rose-500 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                    <i class="fas fa-clipboard-list"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Assessment</p>
                                    <p class="text-xs text-gray-600">History & Physical Exam</p>
                                </div>
                            </div>
                        </div>

                        <div class="progress-item p-3 rounded-lg cursor-pointer transition-all duration-300 bg-gray-50 border-l-4 border-gray-300" onclick="scrollToCard('diagnosis')">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">
                                    <i class="fas fa-microscope"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-600">Diagnosis</p>
                                    <p class="text-xs text-gray-500">Investigations & Risk Stratification</p>
                                </div>
                            </div>
                        </div>

                        <div class="progress-item p-3 rounded-lg cursor-pointer transition-all duration-300 bg-gray-50 border-l-4 border-gray-300" onclick="scrollToCard('treatment')">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">
                                    <i class="fas fa-pills"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-600">Treatment</p>
                                    <p class="text-xs text-gray-500">Symptom-Based Management</p>
                                </div>
                            </div>
                        </div>

                        <div class="progress-item p-3 rounded-lg cursor-pointer transition-all duration-300 bg-gray-50 border-l-4 border-gray-300" onclick="scrollToCard('followup')">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-600">Follow-up</p>
                                    <p class="text-xs text-gray-500">Monitoring & Prognosis</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <h4 class="font-medium text-gray-800 mb-2">Severity Key</h4>
                        <div class="space-y-2 text-xs">
                            <div class="flex items-center space-x-2">
                                <span class="bg-red-100 text-red-800 px-2 py-1 rounded">Red</span>
                                <span class="text-gray-600">Urgent referral/action required</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-amber-100 text-amber-800 px-2 py-1 rounded">Amber</span>
                                <span class="text-gray-600">Caution/further evaluation needed</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded">Green</span>
                                <span class="text-gray-600">Routine management/stable</span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <button onclick="window.print()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2">
                            <i class="fas fa-print"></i>
                            <span>Print Algorithm</span>
                        </button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-12 py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="text-sm text-gray-600">
                    <p>Based on BMJ Best Practice Guidelines | Last Updated: November 2023</p>
                </div>
                <div class="flex items-center space-x-4 mt-2 md:mt-0">
                    <span class="text-xs text-gray-500">Educational Use Only</span>
                    <i class="fas fa-info-circle text-gray-400"></i>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Card toggle functionality
        function toggleCard(cardId) {
            const content = document.getElementById(`${cardId}-content`);
            const arrow = document.getElementById(`${cardId}-arrow`);
            
            content.classList.toggle('expanded');
            arrow.classList.toggle('rotate-180');
            
            // Update active card in sidebar
            updateProgressSidebar(cardId);
        }

        // Scroll to card functionality
        function scrollToCard(cardId) {
            const card = document.getElementById(`${cardId}-card`);
            const headerOffset = 100;
            const cardPosition = card.offsetTop - headerOffset;
            
            window.scrollTo({
                top: cardPosition,
                behavior: 'smooth'
            });
            
            // Expand the card
            const content = document.getElementById(`${cardId}-content`);
            const arrow = document.getElementById(`${cardId}-arrow`);
            if (!content.classList.contains('expanded')) {
                content.classList.add('expanded');
                arrow.classList.add('rotate-180');
            }
            
            // Update sidebar
            updateProgressSidebar(cardId);
        }

        // Update progress sidebar
        function updateProgressSidebar(activeCardId) {
            const steps = document.querySelectorAll('.progress-item');
            const cardIds = ['assessment', 'diagnosis', 'treatment', 'followup'];
            
            steps.forEach((step, index) => {
                const cardId = cardIds[index];
                const icon = step.querySelector('.w-8');
                const text = step.querySelector('.font-medium');
                const subtext = step.querySelector('.text-xs');
                
                if (cardId === activeCardId) {
                    // Active state
                    step.classList.remove('bg-gray-50', 'border-gray-300');
                    step.classList.add('bg-rose-50', 'border-rose-500');
                    icon.classList.remove('bg-gray-300', 'text-gray-600');
                    icon.classList.add('bg-rose-500', 'text-white');
                    text.classList.remove('text-gray-600');
                    text.classList.add('text-gray-800');
                    subtext.classList.remove('text-gray-500');
                    subtext.classList.add('text-gray-600');
                } else if (cardIds.indexOf(activeCardId) > index) {
                    // Completed state
                    step.classList.remove('bg-gray-50', 'border-gray-300');
                    step.classList.add('bg-green-50', 'border-green-500');
                    icon.classList.remove('bg-gray-300', 'text-gray-600');
                    icon.classList.add('bg-green-500', 'text-white');
                    text.classList.remove('text-gray-600');
                    text.classList.add('text-gray-800');
                    subtext.classList.remove('text-gray-500');
                    subtext.classList.add('text-gray-600');
                } else {
                    // Not reached state
                    step.classList.remove('bg-rose-50', 'bg-green-50', 'border-rose-500', 'border-green-500');
                    step.classList.add('bg-gray-50', 'border-gray-300');
                    icon.classList.remove('bg-rose-500', 'bg-green-500', 'text-white');
                    icon.classList.add('bg-gray-300', 'text-gray-600');
                    text.classList.remove('text-gray-800');
                    text.classList.add('text-gray-600');
                    subtext.classList.remove('text-gray-600');
                    subtext.classList.add('text-gray-500');
                }
            });
        }

        // Auto-update sidebar on scroll
        let currentActiveCard = 'assessment';
        
        window.addEventListener('scroll', () => {
            const cards = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const scrollPosition = window.scrollY + 150;
            
            cards.forEach(cardId => {
                const card = document.getElementById(`${cardId}-card`);
                if (card) {
                    const cardTop = card.offsetTop;
                    const cardBottom = cardTop + card.offsetHeight;
                    
                    if (scrollPosition >= cardTop && scrollPosition < cardBottom) {
                        if (currentActiveCard !== cardId) {
                            currentActiveCard = cardId;
                            updateProgressSidebar(cardId);
                        }
                    }
                }
            });
        });

        // Initialize first card as active
        document.addEventListener('DOMContentLoaded', () => {
            // Expand assessment card by default
            const assessmentContent = document.getElementById('assessment-content');
            const assessmentArrow = document.getElementById('assessment-arrow');
            assessmentContent.classList.add('expanded');
            assessmentArrow.classList.add('rotate-180');
            updateProgressSidebar('assessment');
            
            // Add click handlers to all progress items
            document.querySelectorAll('.progress-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Add subtle click animation
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });
        });

        // Add smooth hover effects to cards
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = '';
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const cards = ['assessment', 'diagnosis', 'treatment', 'followup'];
            const currentIndex = cards.indexOf(currentActiveCard);
            
            if (e.key === 'ArrowDown' && currentIndex < cards.length - 1) {
                e.preventDefault();
                scrollToCard(cards[currentIndex + 1]);
            } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                e.preventDefault();
                scrollToCard(cards[currentIndex - 1]);
            }
        });

        // Add subtle animation to severity badges
        setInterval(() => {
            document.querySelectorAll('.severity-badge').forEach(badge => {
                badge.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    badge.style.transform = '';
                }, 200);
            });
        }, 3000);
    </script>

</body>
</html>