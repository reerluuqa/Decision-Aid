<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Melasma Quick-Scan Reference</title>
    <style>
        :root {
            --primary-blue: #2c3e50;
            --light-blue: #eef2f5;
            --accent-blue: #3498db;
            --alert-red: #e74c3c;
            --alert-red-bg: #fadbd8;
            --safe-green: #27ae60;
            --safe-green-bg: #d5f5e3;
            --warning-yellow: #f39c12;
            --text-main: #333;
            --text-muted: #666;
            --card-shadow: 0 4px 6px rgba(0,0,0,0.1);
            --hover-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8f9fa;
            color: var(--text-main);
            line-height: 1.5;
            font-size: 16px;
        }

        /* --- Header & Nav --- */
        header {
            background-color: var(--primary-blue);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .brand h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .meta-info {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        nav {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--accent-blue);
        }

        /* --- Layout --- */
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        @media (max-width: 850px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        /* --- Utility Classes --- */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        .badge.red { background: var(--alert-red); color: white; }
        .badge.green { background: var(--safe-green); color: white; }
        .badge.blue { background: var(--accent-blue); color: white; }

        .section-title {
            font-size: 1.1rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5rem;
        }

        /* --- Cards --- */
        .card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 5px solid transparent;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
        }

        .card.highlight-blue { border-left-color: var(--accent-blue); }
        .card.highlight-red { border-left-color: var(--alert-red); background-color: #fff5f5; }
        .card.highlight-green { border-left-color: var(--safe-green); background-color: #f0fff4; }

        .card h3 {
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* --- Specific Components --- */
        
        /* Summary Sidebar */
        .summary-stats {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .stat-box {
            background: var(--light-blue);
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }
        .stat-box strong { display: block; font-size: 1.2rem; color: var(--primary-blue); }
        .stat-box small { color: var(--text-muted); font-size: 0.8rem; }

        /* Risk Factors Table */
        .risk-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        .risk-table th { text-align: left; padding: 0.5rem; color: var(--primary-blue); }
        .risk-table td { padding: 0.5rem; border-bottom: 1px solid #eee; }
        
        /* Treatment Algorithm Visualization */
        .algo-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            position: relative;
        }
        
        .algo-step {
            display: flex;
            gap: 1rem;
            align-items: stretch;
        }
        
        .step-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 60px;
        }
        
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .step-line {
            flex-grow: 1;
            width: 2px;
            background: #ccc;
            min-height: 20px;
        }

        .step-content {
            flex-grow: 1;
            background: white;
            padding: 1rem;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        .step-content.pregnant-specific {
            border: 2px solid var(--safe-green);
            background-color: var(--safe-green-bg);
        }

        /* Action Alerts (Red/Green) */
        .action-alert {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }
        .action-alert.danger {
            background-color: var(--alert-red-bg);
            border: 1px solid var(--alert-red);
        }
        .action-alert.safe {
            background-color: var(--safe-green-bg);
            border: 1px solid var(--safe-green);
        }
        .alert-icon {
            font-size: 1.5rem;
        }
        .alert-text strong { display: block; }
        .alert-text p { margin: 0; font-size: 0.9rem; }

        /* Diagnosis Grid */
        .dx-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .dx-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            border-left: 3px solid var(--accent-blue);
        }

        /* Tab Content Logic */
        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid #ddd;
            margin-top: 2rem;
        }

        /* Icons */
        .icon-svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
            vertical-align: middle;
        }
        
        /* Search */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 400px;
        }
        .search-input {
            width: 100%;
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border-radius: 20px;
            border: 1px solid #ccc;
            outline: none;
        }
        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        /* Responsive Grid for cards */
        .card-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        @media (max-width: 600px) {
            .card-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <h1>
            <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            Melasma Reference
        </h1>
        <div class="meta-info">Last Updated: Aug 11, 2022</div>
    </div>
    <nav>
        <button class="nav-btn active" onclick="switchTab('dashboard')">Overview</button>
        <button class="nav-btn" onclick="switchTab('diagnosis')">Diagnosis</button>
        <button class="nav-btn" onclick="switchTab('treatment')">Management</button>
        <button class="nav-btn" onclick="switchTab('safety')">Red Flags</button>
    </nav>
    <div class="search-container">
        <span class="search-icon">&#128269;</span>
        <input type="text" class="search-input" id="searchInput" placeholder="Quick filter..." onkeyup="filterContent()">
    </div>
</header>

<main>

    <!-- SIDEBAR: KEY STATS -->
    <aside>
        <div class="summary-stats">
            <div class="card highlight-blue">
                <h3><span class="badge blue">Profile</span></h3>
                <ul style="list-style: none; font-size: 0.9rem;">
                    <li style="margin-bottom: 0.5rem"><strong>Sex:</strong> 90% Female</li>
                    <li style="margin-bottom: 0.5rem"><strong>Skin Type:</strong> III-VI</li>
                    <li style="margin-bottom: 0.5rem"><strong>Age:</strong> Onset 20-29 (50%)</li>
                </ul>
            </div>

            <div class="card highlight-red">
                <h3><span class="badge red">Critical</span></h3>
                <p style="font-size: 0.9rem;">If blue-black pigmentation occurs, suspect Exogenous Ochronosis (Hydroquinone toxicity).</p>
                <button onclick="switchTab('safety')" style="margin-top: 10px; width: 100%; background:var(--alert-red); color:white; border:none; padding:5px; border-radius:4px; cursor:pointer;">View Safety</button>
            </div>

            <div class="card">
                <h3><span class="badge green">Safe in Pregnancy</span></h3>
                <p style="font-size: 0.9rem; font-weight: bold;">Azelaic Acid (15-20%)</p>
                <p style="font-size: 0.85rem; color: #666;">Plus broad-spectrum UV protection.</p>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <section id="content-area">

        <!-- TAB: DASHBOARD -->
        <div id="dashboard" class="tab-content active">
            <h2 class="section-title">Clinical Snapshot</h2>
            
            <div class="card-row">
                <div class="card highlight-blue">
                    <h3>Definition</h3>
                    <p>Acquired pigmentary disorder of sun-exposed areas. Muddy brown macules on malar/central face.</p>
                    <p style="margin-top:0.5rem; font-size:0.9rem;"><strong>Mechanism:</strong> Increased melanocyte activity & melanin deposition.</p>
                </div>
                <div class="card highlight-blue">
                    <h3>Key Triggers</h3>
                    <ul>
                        <li><strong>UV Radiation:</strong> Primary exacerbating factor.</li>
                        <li><strong>Hormonal:</strong> Pregnancy, OCPs, HRT.</li>
                        <li><strong>Genetics:</strong> 50% have family history.</li>
                    </ul>
                </div>
            </div>

            <h2 class="section-title" style="margin-top: 2rem;">Clinical Classification</h2>
            <div class="dx-grid">
                <div class="dx-item">
                    <strong>Centrofacial</strong><br>
                    <small>Forehead, cheeks, upper lip, nose, chin.</small>
                </div>
                <div class="dx-item">
                    <strong>Malar</strong><br>
                    <small>Upper cheek area.</small>
                </div>
                <div class="dx-item">
                    <strong>Mandibular</strong><br>
                    <small>Ramus of the mandible.</small>
                </div>
                <div class="dx-item" style="border-color: var(--safe-green);">
                    <strong>Epidermal (Wood Lamp +)</strong><br>
                    <small>Best responds to topicals.</small>
                </div>
                <div class="dx-item" style="border-color: var(--warning-yellow);">
                    <strong>Dermal (Wood Lamp -)</strong><br>
                    <small>Resistant to topicals; needs laser.</small>
                </div>
            </div>
        </div>

        <!-- TAB: DIAGNOSIS -->
        <div id="diagnosis" class="tab-content">
            <h2 class="section-title">Diagnostics & Differentials</h2>

            <div class="card highlight-blue">
                <h3>Diagnostic Approach</h3>
                <p><strong>Primary Method:</strong> Clinical Diagnosis.</p>
                <div style="margin-top: 1rem; padding: 1rem; background: #eef2f5; border-radius: 4px;">
                    <strong>Wood Lamp Examination:</strong>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li><strong>Accentuates:</strong> Epidermal Melasma.</li>
                        <li><strong>No Change:</strong> Dermal Melasma.</li>
                        <li><strong>Spotty:</strong> Mixed Type.</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h3>Key Differentials</h3>
                <table class="risk-table">
                    <thead>
                        <tr>
                            <th>Condition</th>
                            <th>Differentiating Sign</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Exogenous Ochronosis</strong></td>
                            <td>History of Hydroquinone use (>3%); blue-black deposits in dermis.</td>
                        </tr>
                        <tr>
                            <td><strong>Riehl Melanosis</strong></td>
                            <td>Pigmented contact dermatitis; patchier distribution; stops with cosmetic cessation.</td>
                        </tr>
                        <tr>
                            <td><strong>Post-inflammatory Hyperpigmentation</strong></td>
                            <td>History of erythema/dermatitis preceding pigmentation.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: TREATMENT -->
        <div id="treatment" class="tab-content">
            <h2 class="section-title">Management Algorithm</h2>
            
            <!-- Universal Action -->
            <div class="action-alert safe">
                <div class="alert-icon">☀️</div>
                <div class="alert-text">
                    <strong>MANDATORY FOR ALL PATIENTS</strong>
                    <p>Strict Sun Protection: Broad-spectrum (UVA/UVB) SPF 30+. Apply every morning, reapply every 2 hours during intense exposure.</p>
                </div>
            </div>

            <div class="algo-container">
                
                <!-- Step 1 -->
                <div class="algo-step">
                    <div class="step-label">
                        <div class="step-circle" style="background: var(--accent-blue)">1st</div>
                        <div class="step-line"></div>
                    </div>
                    <div class="step-content">
                        <h3><span class="badge blue">Topical Therapy</span> <small>(Non-Pregnant)</small></h3>
                        <p><strong>Preferred:</strong> Modified Kligman Formula (Fluocinolone 0.01% / Hydroquinone 4% / Tretinoin 0.05%)</p>
                        <p style="margin-top:0.5rem"><strong>Alternatives:</strong></p>
                        <ul style="margin-left: 1.5rem; margin-bottom: 0.5rem;">
                            <li>Hydroquinone 2-4% alone (Max 8 weeks)</li>
                            <li>Tretinoin 0.05-0.1%</li>
                            <li>Azelaic Acid 15-20%</li>
                        </ul>
                        
                        <!-- Pregnancy Branch -->
                        <div class="step-content pregnant-specific" style="margin-top: 1rem; border-radius: 4px;">
                            <strong style="color: var(--safe-green)">IF PREGNANT:</strong>
                            <p style="margin-bottom:0;">Use <strong>Azelaic Acid 15-20%</strong> + Sunscreen.</p>
                            <small>Defer other treatments if possible until postpartum.</small>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="algo-step">
                    <div class="step-label">
                        <div class="step-circle" style="background: var(--warning-yellow)">2nd</div>
                        <div class="step-line"></div>
                    </div>
                    <div class="step-content">
                        <h3><span class="badge" style="background:var(--warning-yellow); color:white">Chemical Peels</span></h3>
                        <p>If topicals ineffective. Use with caution.</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li><strong>Glycolic Acid:</strong> 50-70%</li>
                            <li><strong>Salicylic Acid:</strong> 20-35%</li>
                            <li><strong>TCA:</strong> 20-50% (Higher risk of hyperpigmentation)</li>
                        </ul>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="algo-step">
                    <div class="step-label">
                        <div class="step-circle" style="background: var(--primary-blue)">3rd</div>
                    </div>
                    <div class="step-content">
                        <h3><span class="badge blue">Procedural</span> <small>(Refractory cases)</small></h3>
                        <p><strong>Laser/Light:</strong> Q-switched Nd:YAG/Alexandrite, IPL (better for epidermal).</p>
                        <p><strong>Note:</strong> Risk of post-inflammatory hyperpigmentation. Use pre/post hydroquinone.</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- TAB: SAFETY & RED FLAGS -->
        <div id="safety" class="tab-content">
            <h2 class="section-title">Red Flags & Safety</h2>

            <div class="card highlight-red">
                <h3><span class="badge red">EMERGENCY ACTION: Ochronosis</span></h3>
                <div class="action-alert danger">
                    <div class="alert-icon">⛔</div>
                    <div class="alert-text">
                        <strong>STOP Hydroquinone Immediately</strong>
                        <p>Suspect Exogenous Ochronosis if patient reports blue-black discoloration after long-term Hydroquinone use (esp. >3% conc, dark skin types).</p>
                    </div>
                </div>
                <p><strong>Signs:</strong> Blue-black deposition in dermis.</p>
                <p><strong>Risk Factors:</strong> Fitzpatrick V-VI, High concentration HQ, Lack of sun protection.</p>
                <p><strong>Management:</strong> Discontinue HQ immediately. Condition may be permanent.</p>
            </div>

            <div class="card highlight-red" style="border-left-color: var(--warning-yellow);">
                <h3><span class="badge" style="background: var(--warning-yellow); color: white;">Warning: Steroid Overuse</span></h3>
                <p><strong>Timeframe:</strong> Long term (>12 weeks on face).</p>
                <p><strong>Complications:</strong> Skin atrophy, telangiectasias, acneiform eruption.</p>
                <p><strong>Action:</strong> Discontinue topical corticosteroids if these signs appear.</p>
            </div>

            <div class="card highlight-green">
                <h3><span class="badge green">Safe Alternatives</span></h3>
                <div class="card-row">
                    <div>
                        <strong>Azelaic Acid</strong>
                        <p style="font-size: 0.9rem;">Safe in pregnancy. Fewer side effects than HQ.</p>
                    </div>
                    <div>
                        <strong>Vitamin C (Ascorbic Acid)</strong>
                        <p style="font-size: 0.9rem;">Equivalent efficacy to 4% HQ in some trials, fewer adverse effects.</p>
                    </div>
                </div>
            </div>
        </div>

    </section>
</main>

<footer>
    <p>Disclaimer: This tool is based on BMJ Best Practice (Aug 11, 2022). It is for educational and quick-reference purposes only.</p>
    <p>© BMJ Publishing Group Ltd 2025. All rights reserved. Always consult current clinical guidelines.</p>
</footer>

<script>
    // Tab Switching Logic
    function switchTab(tabId) {
        // Hide all tab contents
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach(content => {
            content.classList.remove('active');
        });

        // Deactivate all buttons
        const buttons = document.querySelectorAll('.nav-btn');
        buttons.forEach(btn => {
            btn.classList.remove('active');
        });

        // Activate selected tab and button
        document.getElementById(tabId).classList.add('active');
        
        // Find the button that called this (approximate matching)
        const targetBtn = Array.from(buttons).find(b => b.getAttribute('onclick').includes(tabId));
        if (targetBtn) targetBtn.classList.add('active');

        // Scroll to top of content on mobile
        if(window.innerWidth < 850) {
            document.getElementById('content-area').scrollIntoView({behavior: 'smooth'});
        }
    }

    // Quick Search/Filter
    function filterContent() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const cards = document.querySelectorAll('.card, .dx-item, .action-alert, .algo-step');

        cards.forEach(card => {
            const text = card.innerText.toLowerCase();
            if(text.includes(input)) {
                card.style.display = ''; // Reset to default (flex/block based on css)
            } else {
                // Only hide if not inside a container that is visible
                card.style.display = 'none';
            }
        });
        
        // If search is empty, ensure the active tab is shown
        if (input === '') {
            const activeTabId = document.querySelector('.tab-content.active').id;
            // We force a layout refresh to ensure grid logic re-applies
            switchTab(activeTabId);
        }
    }
</script>

</body>
</html>