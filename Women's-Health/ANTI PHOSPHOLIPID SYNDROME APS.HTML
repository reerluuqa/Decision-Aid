<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APS Clinical Reference Tool</title>
    <style>
        :root {
            /* Color Palette */
            --color-bg: #f0f2f5;
            --color-card: #ffffff;
            --color-text-main: #2c3e50;
            --color-text-muted: #5f6368;
            --color-primary: #3498db; /* Blue - Info */
            --color-success: #27ae60; /* Green - Safe/Action */
            --color-danger: #c0392b; /* Red - Red Flag */
            --color-warning: #f39c12;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 16px rgba(0,0,0,0.15);
            --radius: 8px;
            --font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--color-bg);
            color: var(--color-text-main);
            line-height: 1.5;
            padding-bottom: 40px;
        }

        /* Utility Classes */
        .text-danger { color: var(--color-danger); font-weight: 700; }
        .text-success { color: var(--color-success); font-weight: 600; }
        .text-primary { color: var(--color-primary); font-weight: 600; }
        .bg-danger { background-color: var(--color-danger); color: white; }
        .bg-success { background-color: var(--color-success); color: white; }
        
        /* Layout Grid */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr 300px; /* Main Content | Management | Sidebar */
            gap: 20px;
            grid-template-areas: 
                "header header header"
                "alert alert alert"
                "diagnosis management sidebar";
        }

        /* Header */
        header {
            grid-area: header;
            background: var(--color-card);
            padding: 20px;
            border-radius: 0 0 var(--radius) var(--radius);
            box-shadow: var(--shadow-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-box {
            position: relative;
            width: 300px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box input:focus {
            border-color: var(--color-primary);
        }

        /* Red Alert Banner */
        .red-flag-banner {
            grid-area: alert;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px 20px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow-md);
            animation: slideDown 0.5s ease-out;
        }

        .alert-icon {
            font-size: 2rem;
            background: rgba(255,255,255,0.2);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .alert-content h3 { margin-bottom: 4px; }
        .alert-content p { font-size: 0.9rem; opacity: 0.9; }

        /* Main Content Areas */
        .main-col { grid-area: diagnosis; display: flex; flex-direction: column; gap: 20px; }
        .manage-col { grid-area: management; display: flex; flex-direction: column; gap: 20px; }
        .side-col { grid-area: sidebar; display: flex; flex-direction: column; gap: 20px; }

        /* Card Styles */
        .card {
            background: var(--color-card);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid transparent;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-text-main);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Specific Card Themes */
        .card.info { border-left-color: var(--color-primary); }
        .card.action { border-left-color: var(--color-success); }
        .card.risk { border-left-color: var(--color-danger); }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table th, .data-table td {
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            color: var(--color-text-muted);
            font-weight: 600;
        }

        /* Checklist / Interactive Elements */
        .checklist-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            cursor: pointer;
        }

        .checklist-item input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            accent-color: var(--color-success);
        }

        .checklist-item.checked span {
            text-decoration: line-through;
            color: var(--color-text-muted);
        }

        /* Steps / Flowchart Style */
        .step-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .step {
            display: flex;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            align-items: flex-start;
        }

        .step-number {
            background: var(--color-primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .step-content strong { display: block; margin-bottom: 2px; }
        .step-content p { font-size: 0.85rem; color: var(--color-text-muted); }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .tag.red { background: #fadbd8; color: #c0392b; }
        .tag.green { background: #d4efdf; color: #27ae60; }
        .tag.blue { background: #d6eaf8; color: #2980b9; }

        /* Disclaimer Footer */
        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--color-text-muted);
            font-size: 0.8rem;
            padding: 0 20px;
        }

        /* Animations */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr 1fr;
                grid-template-areas: 
                    "header header"
                    "alert alert"
                    "diagnosis management"
                    "sidebar sidebar";
            }
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "header"
                    "alert"
                    "diagnosis"
                    "management"
                    "sidebar";
            }
            header { flex-direction: column; gap: 10px; align-items: stretch; }
            .search-box { width: 100%; }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- HEADER -->
    <header>
        <h1>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary">
                <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
            </svg>
            APS Quick Reference
        </h1>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search (e.g., 'pregnancy', 'stroke')..." onkeyup="filterContent()">
        </div>
    </header>

    <!-- RED ALERTS -->
    <div class="red-flag-banner" id="alert-banner">
        <div class="alert-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        </div>
        <div class="alert-content">
            <h3>High Index of Suspicion Required</h3>
            <p><strong>Immediate Actions:</strong> Consider APS in any young patient (<50 yrs) with <strong>arterial thrombosis</strong> (Stroke/MI). Suspect <strong>Catastrophic APS</strong> if multiple organ failures occur rapidly.</p>
        </div>
    </div>

    <!-- LEFT COLUMN: DIAGNOSIS -->
    <div class="main-col">
        <!-- Definition Card -->
        <div class="card info fade-in searchable" data-tags="definition overview">
            <div class="card-header">
                <div class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                    Overview
                </div>
            </div>
            <p style="margin-bottom: 10px;"><strong>Antiphospholipid Syndrome (APS):</strong> An autoimmune disorder characterized by <strong>thromboses</strong> and/or <strong>pregnancy morbidity</strong> associated with persistently elevated antiphospholipid antibodies.</p>
            <div style="background: #eaf2f8; padding: 10px; border-radius: 6px; font-size: 0.9rem;">
                <strong>Key Pathophysiology:</strong> Antibodies target beta2-glycoprotein I, causing a pro-thrombotic state.
            </div>
        </div>

        <!-- Diagnostic Criteria Table -->
        <div class="card info fade-in searchable" data-tags="diagnosis criteria sapporo">
            <div class="card-header">
                <div class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                    Clinical Classification (Sapporo)
                </div>
                <span class="tag blue">At least 1 Clinical + 1 Lab</span>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Clinical Criteria</th>
                        <th>Laboratory Criteria</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Vascular Thrombosis:</strong><br>One or more episodes of arterial, venous, or small-vessel thrombosis (confirmed by imaging).</td>
                        <td><strong>Lupus Anticoagulant:</strong><br>Present on 2+ occasions, 12 weeks apart.</td>
                    </tr>
                    <tr>
                        <td><strong>Pregnancy Morbidity:</strong><br>• 3+ losses <10 wks<br>• 1+ fetal death >10 wks<br>• Premature birth <34 wks (pre-eclampsia/insufficiency)</td>
                        <td><strong>Anticardiolipin Ab:</strong><br>IgG/IgM, medium/high titer (>40 GPL/MPL), 2+ occasions, 12 wks apart.</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><strong>Anti-beta2-Glycoprotein I:</strong><br>IgG/IgM (>99th percentile), 2+ occasions, 12 wks apart.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Key Signs -->
        <div class="card info fade-in searchable" data-tags="signs symptoms presentation">
            <div class="card-header">
                <div class="card-title">Common Presentations</div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <span class="tag red">Thrombotic</span>
                    <p style="font-size: 0.9rem; margin-top: 5px;">DVT, PE, Stroke, MI, Renal TMA.</p>
                </div>
                <div>
                    <span class="tag red">Obstetric</span>
                    <p style="font-size: 0.9rem; margin-top: 5px;">Recurrent miscarriage, Pre-eclampsia.</p>
                </div>
                <div>
                    <span class="tag blue">Dermatological</span>
                    <p style="font-size: 0.9rem; margin-top: 5px;">Livedo reticularis (mottled purplish skin).</p>
                </div>
                <div>
                    <span class="tag blue">Cardiac</span>
                    <p style="font-size: 0.9rem; margin-top: 5px;">Valve thickening (Libman-Sacks endocarditis).</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MIDDLE COLUMN: MANAGEMENT -->
    <div class="manage-col">
        <!-- Treatment Algorithms -->
        <div class="card action fade-in searchable" data-tags="treatment management warfarin heparin">
            <div class="card-header">
                <div class="card-title text-success">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                    Management Algorithms
                </div>
            </div>

            <!-- Acute Thrombosis -->
            <div style="margin-bottom: 20px;">
                <h4 style="border-bottom: 2px solid #27ae60; padding-bottom: 5px; margin-bottom: 10px; color: var(--color-success);">Acute Thrombosis</h4>
                <div class="step-container">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <strong>Initial Acute Phase</strong>
                            <p>Start <strong>Unfractionated Heparin</strong> or <strong>LMWH</strong> immediately.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <strong>Long-term Anticoagulation</strong>
                            <p>Switch to <strong>Vitamin K Antagonist (Warfarin)</strong>.</p>
                            <div style="background: #eafaf1; padding: 5px; border-radius: 4px; margin-top: 4px; font-weight: bold; font-size: 0.9rem;">
                                Target INR: 2.5 (Range 2-3)
                            </div>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <strong>Duration</strong>
                            <p><strong>Indefinite</strong> for unprovoked VTE due to high recurrence risk.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pregnancy -->
            <div style="margin-bottom: 20px; border-top: 1px solid #eee; padding-top: 15px;">
                <h4 style="border-bottom: 2px solid #27ae60; padding-bottom: 5px; margin-bottom: 10px; color: var(--color-success);">Obstetric APS (Pregnancy)</h4>
                <div class="step-container">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <strong>Prophylaxis/Treatment</strong>
                            <p><strong>LMWH</strong> (Therapeutic or Prophylactic dose based on history) + <strong>Low-dose Aspirin</strong>.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <strong>Monitoring</strong>
                            <p>Regular growth scans and Doppler ultrasounds for placental insufficiency.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Refractory -->
            <div>
                <h4 style="color: var(--color-danger); border-bottom: 2px solid var(--color-danger); padding-bottom: 5px; margin-bottom: 10px;">Recurrent Events (Despite Therapy)</h4>
                <p style="font-size: 0.9rem; margin-bottom: 8px;">If thrombosis recurs while on INR 2-3:</p>
                <ul style="margin-left: 20px; font-size: 0.9rem;">
                    <li>Increase target INR to <strong>3.0 - 4.0</strong> (Controversial).</li>
                    <li>Add <strong>low-dose aspirin</strong>.</li>
                    <li>Consider <strong>Chromogenic Factor X/II</strong> testing if Lupus Anticoagulant interferes with INR.</li>
                </ul>
            </div>
        </div>

        <!-- Emergency / Catastrophic -->
        <div class="card risk fade-in searchable" data-tags="catastrophic emergency">
            <div class="card-header">
                <div class="card-title text-danger">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    Catastrophic APS
                </div>
            </div>
            <p><strong>Rarity:</strong> <span class="text-danger">< 1%</span> of patients.</p>
            <p><strong>Presentation:</strong> Multi-organ failure due to small vessel thrombosis over a short period.</p>
            <div style="margin-top: 10px; padding: 10px; background: #fdedec; border: 1px solid #fadbd8; border-radius: 4px; font-size: 0.9rem;">
                <strong>Action:</strong> Requires aggressive combination therapy: Anticoagulation + Corticosteroids + Plasma Exchange and/or IVIG.
            </div>
        </div>
    </div>

    <!-- RIGHT COLUMN: TOOLS & RISKS -->
    <div class="side-col">
        <!-- Diagnostic Checklist Tool -->
        <div class="card info fade-in searchable" data-tags="labs checklist tool">
            <div class="card-header">
                <div class="card-title">Labs Checklist</div>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 10px;">Check off once confirmed (Must be positive 12 weeks apart)</p>
            
            <div id="labList">
                <label class="checklist-item">
                    <input type="checkbox" onchange="updateLabStatus(this)">
                    <span>Lupus Anticoagulant</span>
                </label>
                <label class="checklist-item">
                    <input type="checkbox" onchange="updateLabStatus(this)">
                    <span>Anticardiolipin Ab (IgG/IgM)</span>
                </label>
                <label class="checklist-item">
                    <input type="checkbox" onchange="updateLabStatus(this)">
                    <span>Anti-beta2-Glycoprotein I</span>
                </label>
            </div>
            <div id="labStatus" style="margin-top: 10px; font-weight: bold; font-size: 0.9rem; min-height: 20px;"></div>
        </div>

        <!-- Risk Factors -->
        <div class="card info fade-in searchable" data-tags="risk factors sle">
            <div class="card-header">
                <div class="card-title">Risk Factors</div>
            </div>
            <ul style="list-style: none; font-size: 0.9rem;">
                <li style="margin-bottom: 8px; display: flex; align-items: start; gap: 8px;">
                    <span style="color: var(--color-danger);">●</span> 
                    History of SLE or Lupus-like disease
                </li>
                <li style="margin-bottom: 8px; display: flex; align-items: start; gap: 8px;">
                    <span style="color: var(--color-warning);">●</span> 
                    Other Autoimmune (Sjogren's, RA)
                </li>
                <li style="margin-bottom: 8px; display: flex; align-items: start; gap: 8px;">
                    <span style="color: var(--color-warning);">●</span> 
                    Infection/Drug exposure (Transient aPL)
                </li>
            </ul>
        </div>

        <!-- Disclaimer -->
        <div class="card" style="font-size: 0.75rem; color: #7f8c8d; border: 1px solid #eee;">
            <p><strong>Source:</strong> BMJ Best Practice (Antiphospholipid syndrome).</p>
            <p>Last updated: Oct 14, 2025</p>
            <p style="margin-top: 5px;">This tool is for reference only. Clinical judgment should always supersede algorithmic suggestions.</p>
        </div>
    </div>
</div>

<footer>
    <p>© Z.ai Internal Tool | Based on provided clinical documentation.</p>
</footer>

<script>
    // Lab Checklist Interaction
    function updateLabStatus(checkbox) {
        const list = document.getElementById('labList');
        const statusDiv = document.getElementById('labStatus');
        const checkboxes = list.querySelectorAll('input[type="checkbox"]');
        const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;

        // Toggle strikethrough styling
        const label = checkbox.parentElement;
        if(checkbox.checked) {
            label.classList.add('checked');
        } else {
            label.classList.remove('checked');
        }

        // Update status message
        if (checkedCount === 3) {
            statusDiv.innerHTML = '<span class="text-danger">TRIPLE POSITIVE (High Risk)</span>';
        } else if (checkedCount >= 1) {
            statusDiv.innerHTML = '<span class="text-primary">Positive aPL detected. Repeat in 12 weeks.</span>';
        } else {
            statusDiv.innerHTML = '';
        }
    }

    // Search Filter Function
    function filterContent() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toLowerCase();
        const cards = document.querySelectorAll('.searchable');

        cards.forEach(card => {
            const tags = card.getAttribute('data-tags');
            const text = card.innerText.toLowerCase();
            
            if (text.includes(filter) || tags.includes(filter)) {
                card.style.display = '';
                card.classList.add('fade-in'); // Re-trigger animation
            } else {
                card.style.display = 'none';
            }
        });
    }

    // Initial Animation
    document.addEventListener('DOMContentLoaded', () => {
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            setTimeout(() => {
                card.classList.add('fade-in');
            }, index * 100);
        });
    });
</script>

</body>
</html>