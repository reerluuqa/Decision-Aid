<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTI in Women - Quick Clinical Reference</title>
    <!-- Using FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts for Clinical Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Palette Definition */
            --color-urgent-bg: #fff5f5;
            --color-urgent-border: #e74c3c;
            --color-urgent-text: #c0392b;
            --color-info-bg: #f0f8ff;
            --color-info-border: #3498db;
            --color-info-text: #2980b9;
            --color-success-bg: #f0fff4;
            --color-success-border: #27ae60;
            --color-success-text: #1e8449;
            --color-warning-bg: #fffde7;
            --color-warning-border: #f39c12;
            
            --bg-body: #f4f7f6;
            --bg-card: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #7f8c8d;
            
            --shadow-card: 0 4px 6px rgba(0,0,0,0.05);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.1);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
        }

        /* --- Header --- */
        header {
            background: #fff;
            padding: 1rem 2rem;
            border-bottom: 4px solid var(--color-info-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header-title h1 {
            font-size: 1.5rem;
            color: var(--text-main);
            font-weight: 700;
        }

        .header-meta {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .last-updated {
            font-family: 'Roboto Mono', monospace;
            color: var(--color-info-text);
        }

        /* --- Main Layout --- */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            gap: 24px;
        }

        /* --- Urgent Alerts (Red Zone) --- */
        .urgent-banner {
            background-color: var(--color-urgent-bg);
            border: 2px solid var(--color-urgent-border);
            border-left: 10px solid var(--color-urgent-border);
            padding: 20px;
            border-radius: var(--radius);
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 20px;
            animation: fadeIn 0.8s ease-out;
        }

        .urgent-icon {
            font-size: 3rem;
            color: var(--color-urgent-text);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .urgent-content h2 {
            color: var(--color-urgent-text);
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .urgent-checklist {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .urgent-item {
            background: rgba(255,255,255,0.8);
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 0.95rem;
            border-left: 3px solid transparent;
            transition: all 0.2s;
            cursor: pointer;
        }

        .urgent-item:hover {
            border-left-color: var(--color-urgent-text);
            transform: translateX(5px);
        }

        .urgent-item strong {
            display: block;
            color: var(--color-urgent-text);
        }

        /* --- Diagnostic Tool (Interactive) --- */
        .diagnostic-section {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .diagnostic-section {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-card);
            padding: 20px;
            border-top: 4px solid transparent;
            transition: box-shadow 0.3s;
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-main);
        }

        /* Tabs for Age Groups */
        .age-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: #eee;
            padding: 5px;
            border-radius: 8px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: white;
            color: var(--color-info-border);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .symptom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .symptom-chip {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .symptom-chip:hover {
            background: #f8f9fa;
        }

        .symptom-chip input[type="checkbox"] {
            margin-right: 10px;
            accent-color: var(--color-info-border);
            width: 18px;
            height: 18px;
        }

        .symptom-chip.checked {
            background-color: var(--color-info-bg);
            border-color: var(--color-info-border);
            color: var(--color-info-text);
            font-weight: 600;
        }

        .result-box {
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
            display: none;
            animation: slideUp 0.3s ease-out;
        }

        .result-likely {
            background-color: var(--color-success-bg);
            border: 1px solid var(--color-success-border);
            color: var(--color-success-text);
        }

        .result-investigate {
            background-color: var(--color-warning-bg);
            border: 1px solid var(--color-warning-border);
            color: #d35400;
        }

        /* --- Sidebar / Reference Tables --- */
        .sidebar-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .info-list {
            list-style: none;
        }

        .info-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
            font-size: 0.9rem;
        }

        .info-list li::before {
            content: "•";
            color: var(--color-info-border);
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* --- Bottom Grid: Risk & Aetiology --- */
        .bottom-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .bottom-grid {
                grid-template-columns: 1fr;
            }
        }

        .risk-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .risk-strong { background: #ffebee; color: #c62828; }
        .risk-weak { background: #f5f5f5; color: #616161; }

        /* Table Styles */
        .clean-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .clean-table th, .clean-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .clean-table th {
            color: var(--color-info-text);
            font-weight: 600;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        .pulse-active {
            animation: pulse-red 2s infinite;
        }

        /* Tooltips / Help */
        .tooltip-trigger {
            cursor: help;
            border-bottom: 1px dotted #999;
        }

    </style>
</head>
<body>

    <header>
        <div class="header-title">
            <h1><i class="fa-solid fa-notes-medical" style="color: var(--color-info-border);"></i> UTI in Women</h1>
        </div>
        <div class="header-meta">
            <div>BMJ Best Practice Summary</div>
            <div class="last-updated">Last Updated: May 13, 2025</div>
        </div>
    </header>

    <main>

        <!-- SECTION 1: URGENT RED FLAGS -->
        <section class="urgent-banner" id="urgent">
            <div class="urgent-icon pulse-active">
                <i class="fa-solid fa-truck-medical"></i>
            </div>
            <div class="urgent-content">
                <h2>IMMEDIATE ACTIONS & RED FLAGS</h2>
                <div class="urgent-checklist">
                    <div class="urgent-item">
                        <strong><i class="fa-solid fa-virus"></i> Sepsis Risk</strong>
                        Acute deterioration? Use NEWS2. Refer if high risk or neutropenic. Send culture <strong>before</strong> antibiotics.
                    </div>
                    <div class="urgent-item">
                        <strong><i class="fa-solid fa-kidneys"></i> Pyelonephritis</strong>
                        Look for: Kidney pain, fever >37.9°C (or <36°C in >65y), rigors, nausea/vomiting. Send culture.
                    </div>
                    <div class="urgent-item">
                        <strong><i class="fa-solid fa-baby"></i> Pregnancy</strong>
                        Risk of preterm delivery. Call obstetric team if signs of labour. Always culture urine.
                    </div>
                    <div class="urgent-item">
                        <strong><i class="fa-solid fa-user-doctor"></i> Cancer Referral (2-week wait)</strong>
                        >45y: Unexplained visible haematuria (or persistent after Tx). <br>
                        >60y: Non-visible haematuria + dysuria/WCC, OR recurrent unexplained UTI.
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: INTERACTIVE DIAGNOSTIC TOOL -->
        <section class="diagnostic-section">
            <!-- Left: Interactive Logic -->
            <div class="card" style="border-top-color: var(--color-info-border);">
                <div class="card-header">
                    <span class="card-title">Diagnostic Assistant</span>
                    <div class="age-tabs">
                        <button class="tab-btn active" onclick="setAgeGroup('under65')">Under 65</button>
                        <button class="tab-btn" onclick="setAgeGroup('over65')">Over 65</button>
                        <button class="tab-btn" onclick="setAgeGroup('catheter')">Catheter</button>
                    </div>
                </div>

                <!-- Content for Under 65 -->
                <div id="content-under65" class="age-content">
                    <p style="margin-bottom: 15px; color: #666;">Select <strong>2 or more</strong> key symptoms to diagnose UTI clinically (82% prob).</p>
                    <div class="symptom-grid">
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Dysuria
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New Nocturia
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Cloudy Urine
                        </label>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.85rem; color: #888;">
                        <em>Tip: If only 1 symptom, perform dipstick. If none, check for other severe signs (urgency, frequency, haematuria, suprapubic tenderness).</em>
                    </div>
                </div>

                <!-- Content for Over 65 -->
                <div id="content-over65" class="age-content" style="display: none;">
                    <p style="margin-bottom: 15px; color: #666;">Diagnose if <strong>New Dysuria</strong> present, OR <strong>2+</strong> of the following:</p>
                    <div class="symptom-grid">
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New Onset Dysuria
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Fever (≥37.9°C or ↑1.5°C)
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New Frequency/Urgency
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New Incontinence
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New/Worsening Delirium
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Suprapubic Pain
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Visible Haematuria
                        </label>
                    </div>
                    <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; font-size: 0.85rem;">
                        <i class="fa-solid fa-triangle-exclamation"></i> <strong>Investigation:</strong> Send Culture in ALL patients >65 before antibiotics. Dipstick is unreliable; use only as supplement.
                    </div>
                </div>

                <!-- Content for Catheter -->
                <div id="content-catheter" class="age-content" style="display: none;">
                    <p style="margin-bottom: 15px; color: #666;"><strong>Signs are non-specific.</strong> Do not diagnose on cloudy/odorous urine or pyuria alone.</p>
                    <div class="symptom-grid" style="grid-template-columns: 1fr 1fr;">
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> New/Worsening Fever
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Rigors
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Altered Mental State
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Flank Pain
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Pelvic Discomfort
                        </label>
                        <label class="symptom-chip" onclick="toggleSymptom(this)">
                            <input type="checkbox"> Acute Haematuria
                        </label>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem;">
                        <strong>Protocol:</strong> If febrile/symptomatic, send Culture from sampling port (aseptic). Do not use dipstick.
                    </div>
                </div>

                <!-- Dynamic Result -->
                <div id="diagnosis-result" style="margin-top: 20px;">
                    <!-- JS injects result here -->
                </div>

            </div>

            <!-- Right: Reference Info -->
            <div class="sidebar-card card" style="border-top-color: var(--color-success-border);">
                <div class="card-header">
                    <span class="card-title">Investigation Guide</span>
                </div>
                
                <h4 style="color: var(--color-success-text); margin-bottom: 10px;">Urine Dipstick Logic</h4>
                <div style="background: var(--color-success-bg); padding: 10px; border-radius: 6px; margin-bottom: 20px;">
                    <table class="clean-table" style="font-size: 0.85rem;">
                        <tr>
                            <td><strong>Nitrite +</strong></td>
                            <td>UTI Likely</td>
                        </tr>
                        <tr>
                            <td><strong>Leukocyte + only</strong></td>
                            <td>Equivocal / Review</td>
                        </tr>
                        <tr>
                            <td><strong>Negative</strong></td>
                            <td>UTI Unlikely</td>
                        </tr>
                    </table>
                </div>

                <h4 style="color: var(--color-info-text); margin-bottom: 10px;">When to Culture (Always if...)</h4>
                <ul class="info-list">
                    <li>Pregnant</li>
                    <li>Men (obviously)</li>
                    <li>Age > 65</li>
                    <li>Catheter present</li>
                    <li>Suspected Pyelonephritis/Sepsis</li>
                    <li>Recurrent UTI (2 in 6m / 3 in 12m)</li>
                    <li>Risk of Resistance (Care home, recent hosp, recent abx)</li>
                    <li>Atypical symptoms (Sterile pyuria)</li>
                </ul>
            </div>
        </section>

        <!-- SECTION 3: AETIOLOGY & RISK FACTORS -->
        <section class="bottom-grid">
            <!-- Risk Factors -->
            <div class="card" style="border-top-color: #9b59b6;">
                <div class="card-header">
                    <span class="card-title">Risk Factors</span>
                    <i class="fa-solid fa-dna" style="color: #9b59b6;"></i>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div class="risk-badge risk-strong">Strong Association</div>
                        <ul class="info-list">
                            <li><strong>Sexual Activity:</strong> Strongest factor.</li>
                            <li><strong>Spermicide Use:</strong> Decreases lactobacilli.</li>
                            <li><strong>Post-Menopause:</strong> Lack of estrogen (atrophy). <br><em>Use topical estrogen, not systemic.</em></li>
                            <li><strong>Family History:</strong> Mother with UTI = 2-4x risk.</li>
                            <li><strong>Previous UTI:</strong> History of recurrence.</li>
                            <li><strong>Foreign Body:</strong> Catheters, stones, mesh.</li>
                        </ul>
                    </div>
                    <div>
                        <div class="risk-badge risk-weak">Weaker/Precipitating</div>
                        <ul class="info-list">
                            <li>Insulin-treated Diabetes (older women).</li>
                            <li>Recent Antibiotic use.</li>
                            <li>Poor bladder emptying (Stasis).</li>
                            <li>Increasing Age.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Aetiology -->
            <div class="card" style="border-top-color: #e67e22;">
                <div class="card-header">
                    <span class="card-title">Common Pathogens</span>
                    <i class="fa-solid fa-bacterium" style="color: #e67e22;"></i>
                </div>
                <table class="clean-table">
                    <thead>
                        <tr>
                            <th>Organism</th>
                            <th>Frequency (Uncomplicated)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><em>Escherichia coli</em></td>
                            <td>70% - 95%</td>
                        </tr>
                        <tr>
                            <td><em>Staphylococcus saprophyticus</em></td>
                            <td>5% - 20%</td>
                        </tr>
                        <tr>
                            <td><em>Proteus mirabilis</em> / <em>Klebsiella</em></td>
                            <td>Occasional</td>
                        </tr>
                        <tr>
                            <td><em>Enterococci</em>, Group B Strep, Pseudomonas</td>
                            <td>Rare (Uncomplicated)</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 15px; font-size: 0.85rem; color: #e67e22;">
                    <strong>Note:</strong> Check local susceptibility patterns. Resistance to gram-negative strains is increasing globally.
                </div>
            </div>
        </section>

    </main>

    <script>
        // State
        let currentGroup = 'under65';

        // DOM Elements
        const contents = {
            'under65': document.getElementById('content-under65'),
            'over65': document.getElementById('content-over65'),
            'catheter': document.getElementById('content-catheter')
        };
        const buttons = document.querySelectorAll('.tab-btn');
        const resultBox = document.getElementById('diagnosis-result');

        // Function to switch tabs
        function setAgeGroup(group) {
            currentGroup = group;
            
            // Hide all contents
            Object.values(contents).forEach(el => el.style.display = 'none');
            
            // Show selected content
            contents[group].style.display = 'block';
            
            // Update buttons
            buttons.forEach(btn => btn.classList.remove('active'));
            // Find the button that called this (based on text or index logic, simplified here by re-querying)
            // A simpler way for this inline example:
            const btns = Array.from(buttons);
            if(group === 'under65') btns[0].classList.add('active');
            if(group === 'over65') btns[1].classList.add('active');
            if(group === 'catheter') btns[2].classList.add('active');

            // Reset results
            resultBox.style.display = 'none';
            
            // Uncheck all boxes in new tab for clean slate
            document.querySelectorAll('.symptom-chip.checked').forEach(chip => {
                chip.classList.remove('checked');
                chip.querySelector('input').checked = false;
            });
        }

        // Function to handle checkbox clicking and visual feedback
        function toggleSymptom(element) {
            const checkbox = element.querySelector('input');
            // Toggle logic
            // If we click the div, we might trigger twice if not careful, but the input click handles the state.
            // We use setTimeout to let the input change state first if clicked directly
            setTimeout(() => {
                if (checkbox.checked) {
                    element.classList.add('checked');
                } else {
                    element.classList.remove('checked');
                }
                calculateDiagnosis();
            }, 10);
        }

        // Core Logic Engine based on BMJ text
        function calculateDiagnosis() {
            let checkedCount = 0;
            let hasDysuria = false;
            let checkboxes = [];

            if (currentGroup === 'under65') {
                checkboxes = contents['under65'].querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => { if(cb.checked) checkedCount++; });
                
                // Logic: If women have all 3, 82% prob. If 2 or more, 74% prob.
                if (checkedCount >= 2) {
                    showResult('UTI Likely (High Probability)', 'likely');
                } else if (checkedCount === 1) {
                    showResult('Perform Urine Dipstick to confirm.', 'investigate');
                } else {
                    showResult('Low Probability. Consider differential.', 'investigate');
                }

            } else if (currentGroup === 'over65') {
                checkboxes = contents['over65'].querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => { 
                    if(cb.checked) {
                        checkedCount++;
                        // Check specifically for dysuria label
                        if(cb.parentElement.innerText.includes("Dysuria")) hasDysuria = true;
                    }
                });

                // Logic: New dysuria alone = UTI likely. OR 2 or more of the list.
                if (hasDysuria || checkedCount >= 2) {
                    showResult('UTI Likely. Send Culture.', 'likely');
                } else {
                    showResult('Investigate further (e.g. Delirium PINCH ME, Infection elsewhere).', 'investigate');
                }

            } else if (currentGroup === 'catheter') {
                checkboxes = contents['catheter'].querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => { if(cb.checked) checkedCount++; });
                
                // Logic: Non-specific. If any symptoms + fever usually.
                // We will keep it simple: Any symptom checked warrants investigation
                if (checkedCount > 0) {
                    showResult('Symptomatic. Send Urine Culture (Aseptic technique).', 'investigate');
                } else {
                    showResult('Asymptomatic Bacteriuria? Do NOT treat if no symptoms.', 'investigate');
                }
            }
        }

        function showResult(message, type) {
            resultBox.style.display = 'block';
            resultBox.className = 'result-box ' + (type === 'likely' ? 'result-likely' : 'result-investigate');
            
            // Icon selection
            const icon = type === 'likely' ? '<i class="fa-solid fa-check-circle"></i>' : '<i class="fa-solid fa-magnifying-glass"></i>';
            
            resultBox.innerHTML = `${icon} ${message}`;
        }

    </script>
</body>
</html>