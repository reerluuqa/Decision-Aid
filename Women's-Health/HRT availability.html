<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRT Clinical Reference Tool</title>
    <style>
        :root {
            /* Palette */
            --primary: #2563eb;       /* Blue - General/Info */
            --primary-dark: #1e40af;
            --success: #16a34a;      /* Green - Safe/Positive */
            --success-bg: #dcfce7;
            --danger: #dc2626;       /* Red - Alert/Risk */
            --danger-bg: #fee2e2;
            --warning: #ca8a04;      /* Amber - Caution */
            --warning-bg: #fef9c3;
            --bg-page: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;

            /* Spacing & Radius */
            --radius: 8px;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            line-height: 1.5;
            padding-bottom: 40px;
        }

        /* --- Header & Nav --- */
        header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .brand {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-pills {
            display: flex;
            gap: 0.5rem;
        }

        .nav-btn {
            background: transparent;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-muted);
            transition: all 0.2s ease;
        }

        .nav-btn:hover {
            background-color: var(--primary);
            color: white;
        }

        .nav-btn.active {
            background-color: var(--primary);
            color: white;
        }

        /* --- Layout --- */
        main {
            max-width: 1200px;
            margin: 1.5rem auto;
            padding: 0 1rem;
        }

        .view-section {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .view-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Alert Banners --- */
        .alert {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            border-left: 5px solid transparent;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .alert-danger {
            background-color: var(--danger-bg);
            border-left-color: var(--danger);
            color: #7f1d1d;
        }

        .alert-success {
            background-color: var(--success-bg);
            border-left-color: var(--success);
            color: #14532d;
        }

        .alert-warning {
            background-color: var(--warning-bg);
            border-left-color: var(--warning);
            color: #713f12;
        }

        .alert-icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
        }

        /* --- Cards & Grid --- */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        .card-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-main);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* --- Tables --- */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            background: white;
        }

        th {
            background-color: #f1f5f9;
            text-align: left;
            padding: 0.75rem 1rem;
            font-weight: 600;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover td {
            background-color: #f8fafc;
        }

        .dose-cell {
            font-weight: 700;
            color: var(--primary);
            font-size: 1rem;
        }

        /* --- Utility Tags --- */
        .tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .tag-red { background: var(--danger-bg); color: var(--danger); }
        .tag-green { background: var(--success-bg); color: var(--success); }
        .tag-blue { background: #dbeafe; color: var(--primary); }
        .tag-grey { background: #f1f5f9; color: #64748b; }

        .off-license {
            font-style: italic;
            color: var(--text-muted);
            font-size: 0.85em;
        }

        /* --- Footer / Disclaimer --- */
        footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 0.8rem;
            text-align: center;
        }
        
        .accordion {
            background: #f1f5f9;
            color: var(--text-muted);
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 0.9rem;
            transition: 0.3s;
            border-radius: 4px;
            margin-top: 1rem;
        }
        
        .panel {
            padding: 0 18px;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            text-align: left;
            font-size: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 0 0 4px 4px;
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .nav-btn span { display: none; } /* Hide text on small screens, keep icon */
            .nav-btn::after { content: attr(data-icon); font-size: 1.2rem; }
            header { padding: 0.75rem 1rem; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
        HRT GEMS Tool
    </div>
    <nav class="nav-pills">
        <button class="nav-btn active" onclick="switchTab('workflow')" data-icon="âš¡">Workflow</button>
        <button class="nav-btn" onclick="switchTab('dosing')" data-icon="âš–ï¸">Dosing</button>
        <button class="nav-btn" onclick="switchTab('formulary')" data-icon="ðŸ’Š">Formulary</button>
    </nav>
</header>

<main>

    <!-- ========================
         VIEW: WORKFLOW
         ======================== -->
    <section id="workflow" class="view-section active">
        
        <div class="alert alert-danger">
            <svg class="alert-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
            <div>
                <strong>Critical Safety Checks</strong><br>
                Avoid Oral preparations in higher-risk women (>60y, overweight, migraine) due to increased VTE & Stroke risk. Prefer Transdermal.
            </div>
        </div>

        <div class="card" style="margin-bottom: 2rem; border-left: 5px solid var(--primary);">
            <h2 class="card-header">Step 1: Identify HRT Type</h2>
            <div class="grid-2">
                <div style="background: #eff6ff; padding: 1rem; border-radius: 8px;">
                    <strong style="display:block; font-size:1.2rem; margin-bottom:0.5rem;">Oestrogen-Only</strong>
                    <p style="margin-bottom: 0.5rem; color: #64748b;">Patient has had hysterectomy or Mirena IUS in situ.</p>
                    <button onclick="highlightSection('estrogen-only')" style="background:var(--primary); color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">View Options</button>
                </div>
                <div style="background: #fff7ed; padding: 1rem; border-radius: 8px;">
                    <strong style="display:block; font-size:1.2rem; margin-bottom:0.5rem;">Combined HRT</strong>
                    <p style="margin-bottom: 0.5rem; color: #64748b;">Patient has uterus. Requires Oestrogen + Progestogen.</p>
                    <button onclick="highlightSection('combined')" style="background:var(--warning); color:black; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">View Options</button>
                </div>
            </div>
        </div>

        <!-- Estrogen Only Logic -->
        <div id="estrogen-only" class="card" style="border-left: 5px solid var(--primary);">
            <h2 class="card-header">Estrogen-Only Troubleshooting</h2>
            
            <div class="grid-2">
                <!-- Oral Column -->
                <div>
                    <h3 style="margin-bottom:0.5rem; color:var(--primary);">Oral Options</h3>
                    <ul style="padding-left: 1.2rem; margin-bottom: 1rem;">
                        <li>Make <strong>direct switch</strong> to another oral preparation of equivalent dose.</li>
                        <li>Consider switch to transdermal (often safer profile).</li>
                    </ul>
                    <div class="alert alert-warning" style="padding: 0.5rem;">
                        <strong>Warning:</strong> If switching from Transdermal <strong>TO</strong> Oral, reassess suitability (VTE/Stroke risk).
                    </div>
                </div>

                <!-- Transdermal Column -->
                <div>
                    <h3 style="margin-bottom:0.5rem; color:var(--success);">Transdermal Options</h3>
                    <ul style="padding-left: 1.2rem;">
                        <li>Swap to <strong>any</strong> transdermal oestrogen of equivalent dose.</li>
                        <li><strong>Patches may be cut</strong> to give required dose (off-licence).</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="margin: 1.5rem 0;"></div>

        <!-- Combined HRT Logic -->
        <div id="combined" class="card" style="border-left: 5px solid var(--warning);">
            <h2 class="card-header">Combined HRT Troubleshooting</h2>
            
            <div class="grid-3">
                <!-- Strategy 1 -->
                <div style="border-right: 1px solid var(--border); padding-right: 1rem;">
                    <h4 style="margin-bottom:0.5rem;">1. Switch Oral</h4>
                    <p style="font-size: 0.9rem; margin-bottom: 0.5rem;">Match progestogen if possible.</p>
                    <ul style="font-size: 0.85rem; padding-left: 1.2rem;">
                        <li>If Norethisterone unavailable: Choose different progestogen.</li>
                    </ul>
                </div>
                <!-- Strategy 2 -->
                <div style="border-right: 1px solid var(--border); padding-right: 1rem;">
                    <h4 style="margin-bottom:0.5rem;">2. Switch Patch</h4>
                    <p style="font-size: 0.9rem; margin-bottom: 0.5rem;">Both patches have same oestrogen dose.</p>
                    <ul style="font-size: 0.85rem; padding-left: 1.2rem;">
                        <li><strong>Evorel Sequi</strong> = Norethisterone</li>
                        <li><strong>Femseven Sequi</strong> = Levonorgestrel</li>
                    </ul>
                </div>
                <!-- Strategy 3 -->
                <div>
                    <h4 style="margin-bottom:0.5rem;">3. Split Regimen</h4>
                    <p style="font-size: 0.9rem; margin-bottom: 0.5rem;">Use separate Oestrogen + Progestogen.</p>
                    <ul style="font-size: 0.85rem; padding-left: 1.2rem;">
                        <li>e.g. Oestrogel + Provera</li>
                    </ul>
                </div>
            </div>

            <div class="alert alert-danger" style="margin-top: 1rem;">
                <strong>Progestogen Duration:</strong> Sequential regimens < <strong>10 days/month</strong> increase endometrial hyperplasia risk. 
                <strong>BMS Recommendation:</strong> Give progestogen days 1â€“14 of calendar month.
            </div>
        </div>

    </section>

    <!-- ========================
         VIEW: DOSING TABLES
         ======================== -->
    <section id="dosing" class="view-section">
        
        <h2 style="margin-bottom: 1rem;">Oestrogen Equivalence</h2>
        <div class="card">
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Oral (Oestradiol)</th>
                            <th>Patch (Oestradiol/24h)</th>
                            <th>Gel (Oestrogel)</th>
                            <th>Spray (Lenzetto)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="tag tag-blue">Ultra-low</span></td>
                            <td class="dose-cell">0.5mg</td>
                            <td class="dose-cell">12.5mcg</td>
                            <td class="dose-cell">1/2 pump</td>
                            <td class="dose-cell">1 spray</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-blue">Low</span></td>
                            <td class="dose-cell">1mg</td>
                            <td class="dose-cell">25mcg</td>
                            <td class="dose-cell">1 pump</td>
                            <td class="dose-cell">2 sprays</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-blue">Standard</span></td>
                            <td class="dose-cell">2mg</td>
                            <td class="dose-cell">50mcg</td>
                            <td class="dose-cell">2 pumps</td>
                            <td class="dose-cell">3 sprays</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-blue">Moderate</span></td>
                            <td class="dose-cell">3mg</td>
                            <td class="dose-cell">75mcg</td>
                            <td class="dose-cell">3 pumps</td>
                            <td class="dose-cell">4â€“5 sprays</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-blue">High</span></td>
                            <td class="dose-cell">4mg</td>
                            <td class="dose-cell">100mcg</td>
                            <td class="dose-cell">4 pumps</td>
                            <td class="dose-cell">6 sprays</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">
                * Gel doses refer to 0.06% Oestrogel. Sandrena 0.1% doses differ (see formulary).
            </div>
        </div>

        <h2 style="margin: 2rem 0 1rem;">Progestogen Dosing (Endometrial Protection)</h2>
        <div class="grid-2">
            <!-- Sequential -->
            <div class="card">
                <div class="card-header">
                    <span>Sequential (12â€“14 days/month)</span>
                    <span class="tag tag-grey">Cyclical</span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Dose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Micronised Progesterone</strong><br><span class="off-license">Utrogestan/Gepretix</span></td>
                            <td class="dose-cell">200mg daily</td>
                        </tr>
                        <tr>
                            <td><strong>Medroxyprogesterone Acetate</strong></td>
                            <td class="dose-cell">10mg daily</td>
                        </tr>
                        <tr>
                            <td><strong>Norethisterone</strong></td>
                            <td class="dose-cell">5mg daily</td>
                        </tr>
                        <tr>
                            <td><strong>IUS (Mirena/Levosert)</strong></td>
                            <td class="dose-cell">Up to 5y</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Continuous -->
            <div class="card">
                <div class="card-header">
                    <span>Continuous (Daily)</span>
                    <span class="tag tag-green">No Bleed</span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Dose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Micronised Progesterone</strong><br><span class="off-license">BMS recommends daily</span></td>
                            <td class="dose-cell">100mg daily</td>
                        </tr>
                        <tr>
                            <td><strong>Medroxyprogesterone Acetate</strong></td>
                            <td>
                                <small>Low-dose Oest: 2.5mg</small><br>
                                <small>Std/Mod Oest: 5mg</small>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Norethisterone</strong></td>
                            <td class="dose-cell">1mg daily</td>
                        </tr>
                        <tr>
                            <td><strong>POP Alternative</strong><br><span class="off-license">3x Noriday daily</span></td>
                            <td class="dose-cell">1.05mg total</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="alert alert-danger">
            <strong>Note on Norethisterone:</strong> Associated with VTE risk. Avoid in higher-risk women. Micronised progesterone is often first line (safest).
        </div>

    </section>

    <!-- ========================
         VIEW: FORMULARY
         ======================== -->
    <section id="formulary" class="view-section">
        
        <h2 style="margin-bottom: 1rem;">Available Formulations</h2>
        
        <div class="card">
            <h3 class="card-header">Oestrogen-Only</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Route</th>
                            <th>Name</th>
                            <th>Dose Options</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Oral</td><td>Elleste Solo, Progynova, Zumenon</td><td>1â€“2mg</td></tr>
                        <tr><td>Patch</td><td>Evorel, Estraderm MX, Estradot, Femseven</td><td>25â€“100mcg/24h</td></tr>
                        <tr><td>Gel</td><td>Oestrogel</td><td>1â€“4 pumps (1.25â€“3mg)</td></tr>
                        <tr><td>Spray</td><td>Lenzetto</td><td>1â€“3 sprays</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="grid-2" style="margin-top: 1.5rem;">
            <div class="card">
                <h3 class="card-header">Sequential Combined</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Content</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Femoston</td><td>Oestradiol 1-2mg + Dydrogesterone</td></tr>
                            <tr><td>Elleste Duet</td><td>Oestradiol 1mg + Norethisterone</td></tr>
                            <tr><td>Novofem</td><td>Oestradiol Valerate + Norethisterone</td></tr>
                            <tr><td>Trisequens</td><td>Phasic Oestradiol + Norethisterone</td></tr>
                            <tr><td><strong>Evorel Sequi</strong></td><td>Patch: Oestradiol 50mcg + Norethisterone</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3 class="card-header">Continuous Combined</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Content</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Kliovance</td><td>Oestradiol 1mg + Norethisterone 0.5mg</td></tr>
                            <tr><td>Elleste Duet Conti</td><td>Oestradiol 2mg + Norethisterone 1mg</td></tr>
                            <tr><td>Femoston Conti</td><td>Oestradiol 0.5-1mg + Dydrogesterone</td></tr>
                            <tr><td>Indivina</td><td>Oestradiol 1-2mg + MPA</td></tr>
                            <tr><td><strong>Bijuve</strong></td><td>Oestradiol 1mg + Progesterone 100mg</td></tr>
                            <tr><td><strong>Evorel Conti</strong></td><td>Patch: Oestradiol 50mcg + Norethisterone</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
            <h3 class="card-header">Tibolone & Other</h3>
            <div class="table-container">
                <table>
                    <tbody>
                        <tr>
                            <td><strong>Livial / Generic Tibolone</strong></td>
                            <td>2.5mg daily. A low-risk oral alternative to continuous combined HRT.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </section>

    <button class="accordion">Show Legal & Disclaimer Information</button>
    <div class="panel">
        <p><strong>Disclaimer:</strong> The information presented herein should not replace your own good clinical judgement. We make every effort to ensure accuracy, but it is of necessity brief and general. Always check drug doses, side-effects, and interactions with the British National Formulary (BNF).</p>
        <p style="margin-top:0.5rem"><strong>Off-License Use:</strong> Where a licensed preparation is available, it should be used in preference to an off-license drug (GMC guidance). Doses in italics within this tool are off-licence.</p>
        <p style="margin-top:0.5rem"><strong>Source:</strong> BMS Tools for Clinicians: Progestogens and endometrial protection, HRT preparations and equivalent alternatives; BMS guideline on management of unscheduled bleeding on HRT, 2024.</p>
    </div>

</main>

<script>
    // Tab Switching Logic
    function switchTab(tabId) {
        // Hide all sections
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        // Deactivate all buttons
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        
        // Show target section
        document.getElementById(tabId).classList.add('active');
        
        // Activate button (simple logic finding the button that calls this function)
        const btns = document.querySelectorAll('.nav-btn');
        if(tabId === 'workflow') btns[0].classList.add('active');
        if(tabId === 'dosing') btns[1].classList.add('active');
        if(tabId === 'formulary') btns[2].classList.add('active');
    }

    // Smooth scroll to specific logic section
    function highlightSection(id) {
        // Ensure we are on workflow tab
        switchTab('workflow');
        
        const element = document.getElementById(id);
        if(element) {
            // Add a temporary highlight class
            element.style.transition = "background-color 0.5s";
            const originalBg = element.style.backgroundColor;
            
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            element.style.backgroundColor = "#fef9c3"; // Light yellow highlight
            setTimeout(() => {
                element.style.backgroundColor = ""; // Revert to CSS default
            }, 1500);
        }
    }

    // Accordion Logic
    const acc = document.getElementsByClassName("accordion");
    acc[0].addEventListener("click", function() {
        this.classList.toggle("active");
        const panel = this.nextElementSibling;
        if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
        } else {
            panel.style.maxHeight = panel.scrollHeight + "px";
        }
    });

</script>

</body>
</html>