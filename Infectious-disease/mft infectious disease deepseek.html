<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GP Microbiology Sample Collection Guide</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f9fc;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #005eb8;
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 0 0 10px 10px;
            margin-bottom: 30px;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo {
            font-size: 2.5rem;
            background-color: white;
            color: #005eb8;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .search-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        #searchInput {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.3s;
        }
        
        #searchInput:focus {
            outline: none;
            border-color: #005eb8;
        }
        
        .quick-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-link {
            background-color: #e8f0fe;
            color: #005eb8;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .quick-link:hover {
            background-color: #d0e2ff;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .test-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        
        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }
        
        .test-card h3 {
            color: #005eb8;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #e8f0fe;
            padding-bottom: 8px;
        }
        
        .test-card p {
            margin-bottom: 10px;
            color: #555;
        }
        
        .test-card .category {
            display: inline-block;
            background-color: #e8f0fe;
            color: #005eb8;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 15px;
        }
        
        .detail-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            display: none;
        }
        
        .detail-container.active {
            display: block;
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .back-button {
            background-color: #f0f0f0;
            color: #333;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        
        .back-button:hover {
            background-color: #e0e0e0;
        }
        
        .info-section {
            margin-bottom: 25px;
        }
        
        .info-section h4 {
            color: #005eb8;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .info-row {
            display: grid;
            grid-template-columns: 1fr 2fr;
            margin-bottom: 8px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .info-row:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .info-label {
            font-weight: 600;
            color: #555;
        }
        
        .warning {
            background-color: #fff8e6;
            border-left: 4px solid #ffb900;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .rejection-reasons {
            background-color: #ffe6e6;
            border-left: 4px solid #d93025;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .rejection-reasons h4 {
            color: #d93025;
        }
        
        .key-points {
            background-color: #e6f7ff;
            border-left: 4px solid #0078d4;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .key-points h4 {
            color: #0078d4;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #e0e0e0;
            margin-top: 30px;
        }
        
        .highlight {
            background-color: #fffacd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .contact-info {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .contact-info h4 {
            color: #005eb8;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .info-row {
                grid-template-columns: 1fr;
                margin-bottom: 15px;
            }
            
            .info-label {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <div class="logo">GP</div>
                <div>
                    <h1>Microbiology Sample Collection Guide</h1>
                    <p class="subtitle">Based on MMMP User Manual (2024 Edition)</p>
                </div>
            </div>
            <p>Essential information for GPs to ensure proper specimen collection and avoid rejections</p>
        </div>
    </header>
    
    <div class="container">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search for a test, specimen type, or container...">
            <div class="quick-links">
                <div class="quick-link" data-search="blood culture">Blood Culture</div>
                <div class="quick-link" data-search="urine">Urine Culture</div>
                <div class="quick-link" data-search="swab">Swabs</div>
                <div class="quick-link" data-search="faeces">Faeces</div>
                <div class="quick-link" data-search="CSF">CSF</div>
                <div class="quick-link" data-search="virology">Virology</div>
                <div class="quick-link" data-search="rejection">Avoid Rejection</div>
            </div>
        </div>
        
        <div class="test-grid" id="testGrid">
            <!-- Test cards will be generated by JavaScript -->
        </div>
        
        <div class="detail-container" id="detailContainer">
            <div class="detail-header">
                <h2 id="detailTitle">Test Details</h2>
                <button class="back-button" id="backButton">Back to All Tests</button>
            </div>
            <div id="detailContent">
                <!-- Detail content will be populated by JavaScript -->
            </div>
        </div>
        
        <div class="contact-info">
            <h4>MMMP Contact Information</h4>
            <p><strong>Main Telephone:</strong> 0161 276 8788</p>
            <p><strong>Microbiology Advice (9am-5pm):</strong> 0161 276 8788/8854</p>
            <p><strong>Out of Hours (via switchboard):</strong> 0161 276 1234</p>
            <p><strong>Postal Address:</strong> Manchester Medical Microbiology Partnership, Clinical Sciences Centre, Manchester Royal Infirmary, Oxford Road, Manchester M13 9WL</p>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>This guide is based on the Manchester Medical Microbiology Partnership User Manual (Edition 21, 29th October 2024).</p>
            <p>Always refer to the latest MMMP guidelines for current procedures.</p>
        </div>
    </footer>

    <script>
        // Data extracted from the MMMP user manual
        const testData = [
            {
                id: "blood-culture",
                name: "Blood Culture",
                category: "Bacteriology",
                container: "BD Bactec bottles: Aerobic (Silver/Blue Top) and Anaerobic (Purple Top) bottles. For infants/neonates: Peds aerobic bottle (Pink Top).",
                specimenType: "Venous blood, arterial blood, peripheral blood, sterile fluids",
                volume: "Adults: 8-10mL per bottle. Children: Up to 3mL in Peds bottle. Neonates: 1-2mL in Peds bottle.",
                transport: "Do NOT refrigerate. Incubate within 4 hours of collection.",
                specialInstructions: "Take two consecutive sets from two separate venepuncture sites during any 24hr period for each septic episode. For suspected infective endocarditis: take at least three sets during a 24hr period.",
                rejectionReasons: ["Refrigerated samples", "Insufficient volume", "Exceeded maximum volume", "Expired bottles", "Bulging/damaged bottles"],
                keyPoints: ["Never refrigerate blood cultures", "Use aseptic technique", "Label with time of collection", "Notify lab if urgent"]
            },
            {
                id: "urine-culture",
                name: "Urine Culture",
                category: "Bacteriology",
                container: "Sterile universal container with boric acid preservative (yellow top) or plain sterile container if processed within 4 hours.",
                specimenType: "Mid-stream urine (MSU), catheter urine, suprapubic aspirate",
                volume: "Minimum 10mL, ideally 20-30mL",
                transport: "Refrigerate if not processed within 4 hours. Boric acid containers can be stored at room temperature for up to 24 hours.",
                specialInstructions: "Clean-catch mid-stream sample after thorough cleansing of genital area. First morning urine is preferred. For catheter samples, collect from port using aseptic technique.",
                rejectionReasons: ["Non-sterile container", "Insufficient volume (<10mL)", "No preservative and >4 hours old", "Leaking container", "Improperly labeled"],
                keyPoints: ["MSU requires proper cleansing technique", "Use boric acid containers for transport", "Process within 4 hours or refrigerate", "Label with collection time"]
            },
            {
                id: "wound-swab",
                name: "Wound Swab / Abscess",
                category: "Bacteriology",
                container: "Liquid eSwab (1mL liquid present). For Oxford Road Campus: single liquid eSwab only.",
                specimenType: "Pus, wound exudate, abscess fluid, deep-seated pus",
                volume: "Minimum 1mL of pus or well-soaked swab",
                transport: "Refrigerate if delay >2 hours. Process within 48 hours.",
                specialInstructions: "Pus samples preferred over swabs. Sample deepest part of wound avoiding superficial flora. Do not discard liquid from eSwab. Samples with <1mL liquid will be discarded.",
                rejectionReasons: ["Dry swab", "Insufficient liquid in eSwab (<1mL)", ">48 hours old", "Wrong container", "No clinical information"],
                keyPoints: ["Pus samples better than swabs", "Use eSwab with liquid", "Sample deep wound areas", "Provide clinical context"]
            },
            {
                id: "faeces-culture",
                name: "Faeces Culture",
                category: "Bacteriology",
                container: "CE marked leak-proof container (usually universal container)",
                specimenType: "Fresh faeces",
                volume: "Liquid specimen: 2mL. Solid specimen: 2g (pea-sized)",
                transport: "Refrigerate if delay >2 hours. Process within 48 hours.",
                specialInstructions: "Collect before antimicrobial therapy if possible. Avoid contamination with urine or toilet water. Do not send multiple samples from same 24-hour period. Provide travel history.",
                rejectionReasons: ["Formed stool for C. difficile testing", "Contaminated with urine/water", ">48 hours old", "No travel history when relevant", "Residual soap/disinfectant in sample"],
                keyPoints: ["Liquid stool for C. difficile", "Provide travel history", "Avoid contamination", "Process promptly"]
            },
            {
                id: "csf",
                name: "CSF (Cerebrospinal Fluid)",
                category: "Bacteriology",
                container: "Sterile universal container or small screw-capped vial",
                specimenType: "Cerebrospinal fluid",
                volume: "Routine: minimum 1mL. For TB: at least 6mL where possible.",
                transport: "Process immediately. Never refrigerate. Do not use padded bags.",
                specialInstructions: "Always contact lab before sending CSF. Send sample 3 (or last sample if >3 taken) to Microbiology. Outside hours: contact on-call Biomedical Scientist via switchboard.",
                rejectionReasons: ["Refrigerated", "Clotted sample", "Insufficient volume", "No prior notification", "Padded transport bag"],
                keyPoints: ["Always phone lab first", "Send promptly", "Do not refrigerate", "Use sample 3 for microbiology"]
            },
            {
                id: "throat-swab",
                name: "Throat Swab",
                category: "Bacteriology",
                container: "Liquid eSwab",
                specimenType: "Throat swab",
                volume: "Swab well soaked, with 1mL liquid in eSwab",
                transport: "Refrigerate if delay >2 hours. Process within 48 hours.",
                specialInstructions: "Swab tonsillar area and posterior pharynx, avoiding tongue and uvula. For pertussis: use pernasal swab with charcoal Amies (blue top).",
                rejectionReasons: ["Dry swab", "Insufficient liquid in eSwab", ">48 hours old", "Contaminated with oral antiseptic"],
                keyPoints: ["Swab tonsils and pharynx", "Avoid tongue", "Use eSwab with liquid", "For pertussis: pernasal swab"]
            },
            {
                id: "virology-serology",
                name: "Virology Serology",
                category: "Virology",
                container: "6mL clotted blood tube (gold/serum separator tube)",
                specimenType: "Venous blood",
                volume: "Minimum 2mL serum",
                transport: "Room temperature. Refrigerate if delay >24 hours.",
                specialInstructions: "For antenatal screening: syphilis, hepatitis B, HIV antibodies. Rubella immunity not routine - must indicate reason if required.",
                rejectionReasons: ["Haemolysed sample", "Insufficient volume", "Wrong container", "Lipemic sample"],
                keyPoints: ["Use clotted blood tubes", "Avoid haemolysis", "Antenatal screen includes syphilis, Hep B, HIV", "Rubella only if indicated"]
            },
            {
                id: "virology-pcr",
                name: "Virology PCR (Molecular)",
                category: "Virology/Molecular",
                container: "Varies by test: EDTA blood tube, virus transport medium, specific PCR media tubes",
                specimenType: "Varies: blood, swabs, CSF, urine, faeces",
                volume: "Minimum 500μL",
                transport: "Ambient or refrigerated. Specific requirements vary by test.",
                specialInstructions: "Check specific test requirements. Some tests have specific media (e.g., cobas® PCR media for STI tests). For COVID-19: use virus transport medium.",
                rejectionReasons: ["Wrong container/media", "Insufficient volume", "Expired transport media", ">72 hours old for some tests"],
                keyPoints: ["Check specific test requirements", "Use correct transport media", "Minimum 500μL volume", "Process promptly"]
            },
            {
                id: "sti-naat",
                name: "STI NAAT (Chlamydia/Gonorrhoea)",
                category: "Molecular Microbiology",
                container: "cobas® PCR media tube or cobas® PCR Dual Swab Collection Kit",
                specimenType: "Urine, vaginal/endocervical swab, urethral swab, rectal/throat swab",
                volume: "Urine: 2mL filling between black lines on tube. Swab: use correct swab from kit.",
                transport: "Room temperature (2-30°C). Stable for up to 3 months.",
                specialInstructions: "Patient consent required for both Chlamydia and Gonorrhoea testing. Single tests not accepted. Use correct swab: woven polyester for vaginal/rectal/throat, flocked for endocervical.",
                rejectionReasons: ["No consent for both tests", "Wrong swab type", "Urine outside fill lines", "Expired media", ">3 months old"],
                keyPoints: ["Consent for both tests required", "Use correct swab type", "Urine must fill between lines", "Stable at room temperature"]
            },
            {
                id: "mrsa-screen",
                name: "MRSA Screen",
                category: "Bacteriology",
                container: "Double eSwab for nose+groin, Single eSwab for wounds",
                specimenType: "Swab from nose, groin, perineum, wounds",
                volume: "1mL liquid in eSwab must remain",
                transport: "Refrigerate if delay >2 hours. Process within 48 hours.",
                specialInstructions: "Double eSwab: pink swab for groin (discard after use), white swab for nose (keep in tube). Dampen swab with saline before collection. Do not use liquid from eSwab.",
                rejectionReasons: ["Pink swab sent to lab", "Insufficient liquid in eSwab", "Dry swab", ">48 hours old"],
                keyPoints: ["Double eSwab: nose+groin only", "Discard pink swab after groin sample", "White swab stays in tube", "Dampen with saline before collection"]
            }
        ];

        // General rejection reasons from the manual
        const generalRejectionReasons = [
            "Less than 4 identifiers: District Number, Surname, Forename, Date of Birth",
            "Mismatch between sample and request form details",
            "Illegible information",
            "Leaking or hazardous sample (e.g., sharps attached)",
            "Incorrect sample type or container",
            "Incorrect transportation conditions",
            "Unlabeled or incorrectly labeled sample",
            "Multiple patient samples in one bag",
            "Samples >3 days old (except CF samples up to 5 days)",
            "Pre-labeled tubes (must label at time of collection)"
        ];

        // Key general instructions from the manual
        const generalKeyPoints = [
            "Label samples at time of collection with 4 identifiers: District No, Surname, Forename, DOB",
            "Never pre-label tubes - increases misidentification risk",
            "One patient, one specimen, one bag",
            "Provide clinical information: symptoms, travel history, antibiotic use",
            "For high-risk samples: use 'Danger of Infection' stickers on specimen, bag and form",
            "Transport samples promptly: most should be processed within 48 hours",
            "Blood cultures: NEVER refrigerate",
            "Use electronic requesting (EPIC) where available",
            "For urgent samples: phone lab in advance"
        ];

        // DOM elements
        const testGrid = document.getElementById('testGrid');
        const detailContainer = document.getElementById('detailContainer');
        const detailTitle = document.getElementById('detailTitle');
        const detailContent = document.getElementById('detailContent');
        const backButton = document.getElementById('backButton');
        const searchInput = document.getElementById('searchInput');
        const quickLinks = document.querySelectorAll('.quick-link');

        // Initialize the app
        function initApp() {
            renderTestCards();
            setupEventListeners();
        }

        // Render all test cards
        function renderTestCards(filter = '') {
            testGrid.innerHTML = '';
            
            const filteredTests = testData.filter(test => {
                if (!filter) return true;
                const searchTerm = filter.toLowerCase();
                return test.name.toLowerCase().includes(searchTerm) ||
                       test.category.toLowerCase().includes(searchTerm) ||
                       test.specimenType.toLowerCase().includes(searchTerm) ||
                       test.container.toLowerCase().includes(searchTerm);
            });
            
            if (filteredTests.length === 0) {
                testGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">No tests found matching your search.</p>';
                return;
            }
            
            filteredTests.forEach(test => {
                const card = document.createElement('div');
                card.className = 'test-card';
                card.dataset.id = test.id;
                
                card.innerHTML = `
                    <span class="category">${test.category}</span>
                    <h3>${test.name}</h3>
                    <p><strong>Container:</strong> ${truncateText(test.container, 80)}</p>
                    <p><strong>Specimen:</strong> ${truncateText(test.specimenType, 80)}</p>
                    <p><strong>Volume:</strong> ${truncateText(test.volume, 80)}</p>
                `;
                
                testGrid.appendChild(card);
            });
            
            // Add a general guidance card
            const guidanceCard = document.createElement('div');
            guidanceCard.className = 'test-card';
            guidanceCard.dataset.id = 'general-guidance';
            guidanceCard.innerHTML = `
                <span class="category">General Guidance</span>
                <h3>Avoiding Sample Rejection</h3>
                <p><strong>Key Requirements:</strong> 4 identifiers, correct container, timely transport</p>
                <p><strong>Common Errors:</strong> Pre-labeled tubes, insufficient volume, wrong container</p>
                <p><strong>Transport:</strong> Most samples need refrigeration if delay >2 hours</p>
            `;
            testGrid.appendChild(guidanceCard);
        }

        // Truncate text for display in cards
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '...';
        }

        // Show test details
        function showTestDetails(testId) {
            if (testId === 'general-guidance') {
                showGeneralGuidance();
                return;
            }
            
            const test = testData.find(t => t.id === testId);
            if (!test) return;
            
            // Update UI
            detailTitle.textContent = test.name;
            detailContainer.classList.add('active');
            
            // Scroll to details
            detailContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Build detail content
            let html = `
                <div class="info-section">
                    <h4>Test Information</h4>
                    <div class="info-row">
                        <div class="info-label">Category:</div>
                        <div>${test.category}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Specimen Type:</div>
                        <div>${test.specimenType}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Container:</div>
                        <div>${test.container}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Minimum Volume:</div>
                        <div>${test.volume}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Transport:</div>
                        <div>${test.transport}</div>
                    </div>
                </div>
                
                <div class="info-section">
                    <h4>Special Instructions</h4>
                    <p>${test.specialInstructions}</p>
                </div>
            `;
            
            // Add rejection reasons
            if (test.rejectionReasons && test.rejectionReasons.length > 0) {
                html += `
                    <div class="rejection-reasons">
                        <h4>Common Reasons for Rejection</h4>
                        <ul>
                            ${test.rejectionReasons.map(reason => `<li>${reason}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            // Add key points
            if (test.keyPoints && test.keyPoints.length > 0) {
                html += `
                    <div class="key-points">
                        <h4>Key Points to Remember</h4>
                        <ul>
                            ${test.keyPoints.map(point => `<li>${point}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            detailContent.innerHTML = html;
        }

        // Show general guidance
        function showGeneralGuidance() {
            detailTitle.textContent = "General Guidance - Avoiding Sample Rejection";
            detailContainer.classList.add('active');
            
            // Scroll to details
            detailContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            let html = `
                <div class="info-section">
                    <h4>Mandatory Labeling Requirements</h4>
                    <p>ALL samples MUST have 4 unique identifiers:</p>
                    <ol>
                        <li>District Number</li>
                        <li>Surname</li>
                        <li>Forename</li>
                        <li>Date of Birth</li>
                    </ol>
                    <div class="warning">
                        <p><strong>Important:</strong> Label at time of collection. Pre-labeling tubes is poor practice and increases misidentification risk.</p>
                    </div>
                </div>
                
                <div class="rejection-reasons">
                    <h4>Top Reasons for Sample Rejection</h4>
                    <ul>
                        ${generalRejectionReasons.map(reason => `<li>${reason}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="key-points">
                    <h4>Essential Guidelines for All Samples</h4>
                    <ul>
                        ${generalKeyPoints.map(point => `<li>${point}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="info-section">
                    <h4>High-Risk Samples</h4>
                    <p>For patients with suspected/confirmed:</p>
                    <ul>
                        <li>HIV, Hepatitis B/C</li>
                        <li>E.coli O157, TB, Typhoid</li>
                        <li>Hazard Group 3/4 organisms</li>
                        <li>IV drug use</li>
                        <li>Recent foreign travel with unexplained fever</li>
                    </ul>
                    <div class="warning">
                        <p><strong>Must:</strong> Label with "Danger of Infection" stickers on specimen, bag and form. Double bag and seal. Fold form for confidentiality.</p>
                    </div>
                </div>
                
                <div class="info-section">
                    <h4>Transport Guidelines</h4>
                    <div class="info-row">
                        <div class="info-label">Routine samples:</div>
                        <div>Transport ASAP after collection. Refrigerate if delay >2 hours (except blood cultures).</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Urgent samples:</div>
                        <div>Phone lab in advance. Use pneumatic tube if available (except HG3 samples, glassware, respiratory samples, CSF).</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Out of hours:</div>
                        <div>Contact on-call Biomedical Scientist via switchboard (0161 276 1234) BEFORE sending sample.</div>
                    </div>
                </div>
            `;
            
            detailContent.innerHTML = html;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Test card clicks
            testGrid.addEventListener('click', (e) => {
                const card = e.target.closest('.test-card');
                if (card) {
                    const testId = card.dataset.id;
                    showTestDetails(testId);
                }
            });
            
            // Back button
            backButton.addEventListener('click', () => {
                detailContainer.classList.remove('active');
                testGrid.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Search input
            searchInput.addEventListener('input', (e) => {
                renderTestCards(e.target.value);
            });
            
            // Quick links
            quickLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const searchTerm = link.dataset.search;
                    searchInput.value = searchTerm;
                    renderTestCards(searchTerm);
                });
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>