<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Melanoma — Primary Care One‑Page Algorithm (NICE CKS 2022)</title>
<style>
  :root{
    --bg:#f7fafc;            /* light neutral background */
    --card:#ffffff;          /* card background */
    --ink:#0f172a;           /* primary text (slate-900) */
    --muted:#475569;         /* secondary text */
    --brand:#2563eb;         /* brand blue */
    --brand-weak:#dbeafe;    /* very light blue */
    --accent:#06b6d4;        /* cyan accents */
    --ok:#16a34a;            /* green for positive actions */
    --ok-weak:#dcfce7;       /* light green bg */
    --warn:#dc2626;          /* red for red flags */
    --warn-weak:#fee2e2;     /* light red bg */
    --amber:#f59e0b;         /* amber for cautions */
    --border:#e2e8f0;        /* borders */
    --chip:#eef2ff;          /* soft indigo chip */
  }
  html,body{ height:100%; background:var(--bg); color:var(--ink); }
  body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; line-height:1.4; }

  /* Layout */
  .container{ max-width:1100px; margin:0 auto; padding: 1.25rem; }
  header{
    position:sticky; top:0; z-index:50;
    background: rgba(255,255,255,0.9); backdrop-filter: saturate(180%) blur(8px);
    border-bottom:1px solid var(--border);
  }
  .header-inner{ display:flex; align-items:center; gap:1rem; padding: .75rem 1.25rem; max-width:1100px; margin:0 auto; }
  .title{ font-weight:800; font-size: clamp(1.1rem, 2.5vw, 1.6rem); letter-spacing:.2px; }
  .subtitle{ color:var(--muted); font-size:.9rem; }

  /* Controls */
  .controls{ margin-left:auto; display:flex; gap:.5rem; flex-wrap:wrap; }
  .btn{ border:1px solid var(--border); background:var(--card); padding:.55rem .8rem; border-radius:12px; cursor:pointer; font-weight:600; font-size:.9rem; }
  .btn:hover{ border-color:#cbd5e1; box-shadow:0 1px 0 rgba(0,0,0,.04); }
  .btn-primary{ background:var(--brand); border-color:var(--brand); color:white; }
  .btn-primary:hover{ filter:brightness(.97); }

  /* Sections */
  section{ margin: 1rem 0 1.25rem; }
  .card{ background:var(--card); border:1px solid var(--border); border-radius:18px; padding:1rem; box-shadow: 0 1px 0 rgba(15,23,42,.03); }
  .card h2{ margin:.2rem 0 .75rem; font-size:1.1rem; letter-spacing:.2px; }
  .grid{ display:grid; gap:1rem; }
  @media(min-width:900px){ .grid.cols-3{ grid-template-columns:repeat(3,1fr); } }
  @media(min-width:900px){ .grid.cols-2{ grid-template-columns:repeat(2,1fr); } }

  /* Chips & badges */
  .chip{ display:inline-flex; align-items:center; gap:.4rem; background:var(--chip); color:#3730a3; padding:.35rem .55rem; border-radius:999px; font-weight:700; font-size:.75rem; border:1px solid #e0e7ff; }
  .badge-ok{ background:var(--ok-weak); color:var(--ok); border:1px solid #bbf7d0; }
  .badge-warn{ background:var(--warn-weak); color:var(--warn); border:1px solid #fecaca; }
  .badge-amber{ background:#fef3c7; color:#b45309; border:1px solid #fde68a; }

  /* Lists */
  ul{ margin:.25rem 0 .5rem 1rem; padding:0; }
  li{ margin:.25rem 0; }

  /* Tables */
  table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:14px; border:1px solid var(--border); }
  thead th{ text-align:left; font-size:.9rem; background:var(--brand-weak); color:#1e3a8a; padding:.6rem .7rem; border-bottom:1px solid var(--border); }
  tbody td{ padding:.55rem .7rem; border-bottom:1px solid var(--border); }
  tbody tr:last-child td{ border-bottom:none; }

  .hint{ font-size:.85rem; color:var(--muted); }
  .note{ background:#ecfeff; border:1px dashed #bae6fd; padding:.6rem .75rem; border-radius:12px; font-size:.9rem; }
  .redflag{ border-left:6px solid var(--warn); background:var(--warn-weak); padding:.7rem .8rem; border-radius:12px; }
  .greenflag{ border-left:6px solid var(--ok); background:var(--ok-weak); padding:.7rem .8rem; border-radius:12px; }

  /* Flow line accents */
  .flow{ position:relative; padding-left:1.1rem; }
  .flow:before{ content:""; position:absolute; left:.35rem; top:.3rem; bottom:.3rem; width:3px; background:linear-gradient(var(--brand), var(--accent)); border-radius:3px; }
  .flow h3{ margin:.25rem 0; font-size:1rem; }

  /* Footer */
  footer{ color:var(--muted); font-size:.8rem; text-align:center; padding:1rem 0 2rem; }

  /* Print */
  @media print{
    header{ position:static; background:white; }
    .controls{ display:none; }
    body{ background:white; }
    .container{ max-width:none; padding:0; }
    .card{ break-inside:avoid; box-shadow:none; }
    a[href]::after{ content:" (" attr(href) ")"; font-size:.75em; color:#64748b; }
  }
</style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div style="display:flex; gap:.75rem; align-items:center;">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="#2563eb" stroke-width="2"/><path d="M12 7v6" stroke="#dc2626" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="16.5" r="1.25" fill="#dc2626"/></svg>
        <div>
          <div class="title">Melanoma — Primary Care One‑Page Algorithm</div>
          <div class="subtitle">NICE CKS (Jul 2022) summary for rapid consultation</div>
        </div>
      </div>
      <div class="controls">
        <button class="btn" id="toggleCompact" title="Toggle compact density">Compact</button>
        <button class="btn" id="expandAll" title="Expand all sections">Expand</button>
        <button class="btn" id="collapseAll" title="Collapse all sections">Collapse</button>
        <button class="btn btn-primary" onclick="window.print()" title="Print or save to PDF">Print</button>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- Summary callouts -->
    <section class="grid cols-3">
      <div class="card greenflag">
        <div class="chip badge-ok">Action</div>
        <div style="margin-top:.35rem; font-weight:700;">Do not biopsy/excise in primary care if melanoma suspected</div>
        <div class="hint">Use the 2‑week suspected cancer pathway for urgent assessment.</div>
      </div>
      <div class="card redflag">
        <div class="chip badge-warn">Red Flags</div>
        <div style="margin-top:.35rem; font-weight:700;">Any lesion with 7‑point score ≥ 3, nodular features, or new nail pigmentation</div>
        <div class="hint">Refer urgently (2‑week).</div>
      </div>
      <div class="card">
        <div class="chip">Scope</div>
        <div style="margin-top:.35rem; font-weight:700;">Primary‑care assessment, referral, prevention & patient advice</div>
        <div class="hint">Based on NICE CKS, SIGN, BAD, BMJ Best Practice.</div>
      </div>
    </section>

    <!-- 1. Initial Assessment -->
    <section class="card">
      <h2>1) Initial Assessment</h2>
      <div class="grid cols-2">
        <div>
          <div class="flow">
            <h3>History — ask about:</h3>
            <ul>
              <li>Onset & evolution (size / shape / colour change)</li>
              <li>Ulceration, bleeding, pruritus</li>
              <li>Personal or family history of melanoma</li>
              <li>Sun exposure, sunbeds, blistering sunburn (esp. in childhood)</li>
              <li>Risk factors: fair skin/hair/eyes, high freckle density, numerous/giant naevi, immunosuppression, outdoor work, age</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="flow">
            <h3>Examination — do this for all suspicious lesions:</h3>
            <ul>
              <li>Inspect entire skin incl. scalp & mucosae; compare with nearby moles ("ugly duckling" sign)</li>
              <li>Assess regional lymph nodes</li>
              <li>Use dermoscopy only if trained</li>
            </ul>
          </div>
          <div class="note">Document <strong>site, size, elevation, colour/pigmentation, borders, ulceration</strong> and symptoms.</div>
        </div>
      </div>
    </section>

    <!-- 2. Weighted 7-point checklist -->
    <section class="card">
      <h2>2) Weighted 7‑Point Checklist <span class="chip badge-warn">≥ 3 → Urgent 2‑week referral</span></h2>
      <table aria-label="7 point weighted checklist">
        <thead>
          <tr><th>Major features (2 points each)</th><th>Minor features (1 point each)</th></tr>
        </thead>
        <tbody>
          <tr><td>Change in size</td><td>Diameter ≥ 7 mm</td></tr>
          <tr><td>Irregular shape</td><td>Inflammation</td></tr>
          <tr><td>Irregular colour</td><td>Oozing</td></tr>
          <tr><td></td><td>Change in sensation (e.g., itch)</td></tr>
        </tbody>
      </table>
      <p class="hint">Do not attempt primary‑care excision if checklist or clinical suspicion suggests melanoma.</p>
    </section>

    <!-- 3. Referral Criteria -->
    <section class="card">
      <h2>3) Referral Criteria — Suspected Cancer Pathway (2‑Week)</h2>
      <div class="grid cols-2">
        <div>
          <div class="redflag" style="margin-bottom:.6rem;">
            <strong>Refer urgently</strong> if any of:
            <ul>
              <li>7‑point score ≥ 3</li>
              <li>Dermoscopy suggests melanoma</li>
              <li>New pigmented nail line or subungual lesion</li>
              <li>New persistent pigmented/vascular lesion with unclear diagnosis</li>
              <li>Any doubt about the lesion or recent change</li>
              <li>Biopsy already confirmed melanoma</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="greenflag" style="margin-bottom:.6rem;">
            <strong>Consider 2‑week referral</strong> if:
            <ul>
              <li>Lesion suggests <em>nodular</em> melanoma (may lack ABCDE)</li>
              <li>Any <em>major</em> 7‑point feature or ABCDE feature present</li>
            </ul>
          </div>
          <div class="note">
            <strong>Include with referral:</strong> duration, changes, symptoms; location, size, elevation, pigmentation, ulceration; lymph nodes; risk factors; <em>attach pathology report</em> if available.
          </div>
        </div>
      </div>
    </section>

    <!-- 4. Differentials -->
    <section class="card">
      <h2>4) Common Differentials</h2>
      <div class="grid cols-3">
        <div>
          <ul>
            <li>Naevi (common/atypical, Spitz, halo, blue, congenital)</li>
            <li>Seborrhoeic keratosis</li>
            <li>Dermatofibroma</li>
          </ul>
        </div>
        <div>
          <ul>
            <li>Pyogenic granuloma</li>
            <li>Pigmented basal cell carcinoma</li>
            <li>Lentigines, freckles</li>
          </ul>
        </div>
        <div>
          <ul>
            <li>Subungual haematoma / melanonychia</li>
            <li>Kaposi's sarcoma (multifocal)</li>
          </ul>
        </div>
      </div>
      <p class="hint">For lesion examples, see DermNet NZ image library.</p>
    </section>

    <!-- 5. High-risk groups -->
    <section class="card">
      <h2>5) People at Increased / High Risk</h2>
      <div class="grid cols-2">
        <div>
          <div class="note">
            <strong>Advise all higher‑risk patients:</strong>
            <ul>
              <li>Monthly self‑examination (use mirrors/partner); know their pattern of moles</li>
              <li>What changes to look for; when to seek review</li>
              <li>They may develop new and different skin cancers</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="greenflag">
            <strong>Routinely refer (non‑urgent) to dermatology/genetics if:</strong>
            <ul>
              <li>Giant congenital pigmented hairy naevus &gt; 20 cm</li>
              <li>Family history of ≥ 3 melanoma cases (consider if ≥ 2 with multiple primaries)</li>
            </ul>
            <div class="hint">Explain need for long‑term specialist follow‑up.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 6. Prevention & Self-care -->
    <section class="card">
      <h2>6) Prevention & Patient Advice</h2>
      <div class="grid cols-2">
        <div>
          <ul>
            <li><span class="chip badge-ok">Do</span> Seek shade 11:00–15:00; protective clothing & wide‑brim hat</li>
            <li><span class="chip badge-ok">Do</span> Sunscreen <strong>SPF ≥ 15</strong> with ≥ 4★ UVA; apply liberally <em>30 min before</em> and reapply frequently</li>
            <li><span class="chip badge-ok">Do</span> Use ~35 mL (6–8 tsp) for full‑body coverage; reapply after swimming/towel‑drying</li>
            <li><span class="chip badge-ok">Do</span> Short, regular sun for vitamin D (time to make vitamin D is less than time to burn)</li>
            <li><span class="chip badge-amber">Consider</span> More time needed to make vitamin D in darker skin types</li>
          </ul>
        </div>
        <div>
          <ul>
            <li><span class="chip badge-warn">Avoid</span> Sunburn and <strong>sunbeds</strong></li>
            <li><strong>Seek medical advice</strong> if mole:</li>
            <ul>
              <li>Has any <strong>ABCDE</strong> feature: <em>Asymmetry, Border irregularity, Colour variegation, Diameter &gt;6 mm, Evolving</em></li>
              <li>Becomes itchy/painful, bleeds or crusts, or looks inflamed</li>
            </ul>
          </ul>
        </div>
      </div>
    </section>

    <!-- 7. Prognosis Facts -->
    <section class="card">
      <h2>7) Prognosis — Key Facts</h2>
      <div class="grid cols-3">
        <div class="note"><strong>Stage I:</strong> ~100% 5‑yr survival when &le;2 mm and no spread.</div>
        <div class="note"><strong>Stage IV:</strong> ~30% 5‑yr survival.</div>
        <div class="greenflag"><strong>In‑situ melanoma:</strong> &gt;99% cured with simple excision.</div>
      </div>
      <p class="hint">Most recurrences occur within 3 years; risk relates to Breslow thickness and node status.</p>
    </section>

    <!-- References -->
    <section class="card">
      <h2>References (source of summary)</h2>
      <ul>
        <li>NICE CKS: Melanoma (Last revised Jul 2022)</li>
        <li>SIGN (2023) Cutaneous melanoma</li>
        <li>BMJ Best Practice: Melanoma (2022)</li>
        <li>BAD guidance & CRUK patient info (for prevention messages)</li>
      </ul>
      <p class="hint">This page condenses your provided guidance for quick chair‑side use.</p>
    </section>

    <footer>
      Designed for light theme, print‑friendly. Use the buttons above to compact, expand, or print.
    </footer>

  </main>

<script>
  // Simple accordion behaviour: collapse/expand cards (except summary row)
  const cards = Array.from(document.querySelectorAll('main .card'));
  const header = document.querySelector('header');
  const expandBtn = document.getElementById('expandAll');
  const collapseBtn = document.getElementById('collapseAll');
  const compactBtn = document.getElementById('toggleCompact');

  // Create toggles for each card body
  cards.forEach(card => {
    const h2 = card.querySelector('h2');
    if(!h2) return; // skip top summary cards
    h2.style.cursor='pointer';
    const contentNodes = Array.from(card.childNodes).filter(n => n !== h2);
    const contentWrap = document.createElement('div');
    contentWrap.className = 'card-body';
    contentNodes.forEach(n=>contentWrap.appendChild(n));
    card.appendChild(contentWrap);

    const icon = document.createElement('span');
    icon.textContent = '▾';
    icon.style.marginLeft = '.4rem';
    icon.style.fontSize = '0.95rem';
    icon.setAttribute('aria-hidden','true');
    h2.appendChild(icon);

    h2.addEventListener('click', ()=>{
      const open = card.getAttribute('data-open') !== 'false';
      card.setAttribute('data-open', open ? 'false' : 'true');
      contentWrap.style.display = open ? 'none' : '';
      icon.textContent = open ? '▸' : '▾';
    });

    // start expanded
    card.setAttribute('data-open','true');
  });

  expandBtn.addEventListener('click', ()=>{
    cards.forEach(card=>{
      const body = card.querySelector('.card-body');
      const h2 = card.querySelector('h2 span');
      if(body){ body.style.display=''; card.setAttribute('data-open','true'); if(h2) h2.textContent='▾'; }
    });
    // smooth scroll a touch to acknowledge action
    window.scrollBy({top:1, behavior:'smooth'});
  });

  collapseBtn.addEventListener('click', ()=>{
    cards.forEach(card=>{
      const body = card.querySelector('.card-body');
      const h2 = card.querySelector('h2 span');
      if(body){ body.style.display='none'; card.setAttribute('data-open','false'); if(h2) h2.textContent='▸'; }
    });
  });

  let compact=false;
  compactBtn.addEventListener('click', ()=>{
    compact = !compact;
    document.body.style.setProperty('line-height', compact ? '1.25' : '1.4');
    document.querySelectorAll('.card').forEach(el=>{
      el.style.padding = compact ? '.75rem' : '1rem';
    });
    document.querySelectorAll('ul li').forEach(li=>{
      li.style.margin = compact ? '.15rem 0' : '.25rem 0';
    });
    compactBtn.classList.toggle('btn-primary', compact);
  });
</script>
</body>
</html>
