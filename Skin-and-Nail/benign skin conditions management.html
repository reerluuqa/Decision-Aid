<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DermaRef | Benign Skin Lesion Clinical Guide</title>
    <style>
        :root {
            /* Color Palette - Functional Medical Theme */
            --bg-primary: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-light: #e2e8f0;

            /* Urgency Colors */
            --urgent-red: #dc2626;
            --urgent-red-bg: #fef2f2;
            --urgent-red-border: #fecaca;
            --safe-green: #059669;
            --safe-green-bg: #f0fdf4;
            --safe-green-border: #bbf7d0;
            --info-blue: #0284c7;
            --info-blue-bg: #f0f9ff;
            --info-blue-border: #bae6fd;
            --warning-amber: #d97706;
            --warning-amber-bg: #fffbeb;
            --warning-amber-border: #fde68a;

            /* Shadows & Effects */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--info-blue) 0%, #0369a1 100%);
            color: white;
            padding: var(--spacing-lg) var(--spacing-xl);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-md);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--info-blue);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .logo span {
            font-size: 0.85rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .search-container {
            flex: 1;
            max-width: 400px;
            min-width: 250px;
        }

        .search-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            box-shadow: var(--shadow-sm);
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .header-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .btn-light {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .btn-light:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg) var(--spacing-xl);
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: var(--spacing-lg);
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 120px;
            height: fit-content;
            background: var(--bg-card);
            border-radius: 12px;
            padding: var(--spacing-md);
            box-shadow: var(--shadow-md);
        }

        .sidebar-title {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
            padding: 0 var(--spacing-sm);
        }

        .category-filters {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .filter-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-light);
            background: var(--bg-card);
            border-radius: 6px;
            cursor: pointer;
            text-align: left;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filter-btn:hover {
            background: var(--info-blue-bg);
            border-color: var(--info-blue);
        }

        .filter-btn.active {
            background: var(--info-blue);
            color: white;
            border-color: var(--info-blue);
        }

        .filter-count {
            background: var(--bg-primary);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .filter-btn.active .filter-count {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        /* Quick Reference Panel */
        .quick-ref {
            margin-top: var(--spacing-lg);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-light);
        }

        .quick-ref-btn {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--warning-amber-bg);
            border: 1px solid var(--warning-amber-border);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--warning-amber);
            transition: all 0.2s ease;
        }

        .quick-ref-btn:hover {
            background: var(--warning-amber-border);
        }

        /* Main Content */
        .main-content {
            min-width: 0;
        }

        .results-info {
            margin-bottom: var(--spacing-md);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Condition Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: var(--spacing-md);
        }

        /* Condition Card */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-light);
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card-urgent {
            border-left: 4px solid var(--urgent-red);
        }

        .card-monitor {
            border-left: 4px solid var(--warning-amber);
        }

        .card-safe {
            border-left: 4px solid var(--safe-green);
        }

        /* Card Header */
        .card-header {
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .card-header:hover {
            background: var(--bg-primary);
        }

        .card-title-section {
            flex: 1;
        }

        .card-category {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xs);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .card-synonyms {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .card-badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .badge-urgent {
            background: var(--urgent-red-bg);
            color: var(--urgent-red);
        }

        .badge-monitor {
            background: var(--warning-amber-bg);
            color: var(--warning-amber);
        }

        .badge-safe {
            background: var(--safe-green-bg);
            color: var(--safe-green);
        }

        /* Red Flag Banner */
        .red-flag-banner {
            background: var(--urgent-red-bg);
            border-top: 1px solid var(--urgent-red-border);
            border-bottom: 1px solid var(--urgent-red-border);
            padding: var(--spacing-sm) var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .red-flag-icon {
            width: 24px;
            height: 24px;
            background: var(--urgent-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            animation: pulse 2s infinite;
        }

        .red-flag-text {
            color: var(--urgent-red);
            font-weight: 500;
            font-size: 0.9rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Card Body */
        .card-body {
            padding: var(--spacing-md) var(--spacing-lg);
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            font-size: 0.9rem;
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 0.8rem;
        }

        .feature-icon-blue {
            background: var(--info-blue-bg);
            color: var(--info-blue);
        }

        .feature-icon-green {
            background: var(--safe-green-bg);
            color: var(--safe-green);
        }

        .feature-label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .feature-value {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Quick Actions Table */
        .quick-actions {
            margin-bottom: var(--spacing-md);
        }

        .quick-actions-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .action-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .action-table td {
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid var(--border-light);
        }

        .action-table tr:last-child td {
            border-bottom: none;
        }

        .action-label {
            color: var(--text-secondary);
            width: 40%;
        }

        .action-value {
            font-weight: 500;
        }

        /* Management Section */
        .management-section {
            background: var(--safe-green-bg);
            border: 1px solid var(--safe-green-border);
            border-radius: 8px;
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .management-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .management-icon {
            width: 24px;
            height: 24px;
            background: var(--safe-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .management-title {
            font-weight: 600;
            color: var(--safe-green);
        }

        .management-text {
            font-size: 0.9rem;
            color: var(--text-primary);
            line-height: 1.7;
        }

        .management-list {
            margin-top: var(--spacing-sm);
            padding-left: var(--spacing-lg);
        }

        .management-list li {
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
        }

        /* Patient Education */
        .patient-ed {
            background: var(--info-blue-bg);
            border: 1px solid var(--info-blue-border);
            border-radius: 8px;
            padding: var(--spacing-md);
        }

        .patient-ed-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .patient-ed-icon {
            width: 24px;
            height: 24px;
            background: var(--info-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
        }

        .patient-ed-title {
            font-weight: 600;
            color: var(--info-blue);
        }

        .patient-ed-text {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        /* Card Footer */
        .card-footer {
            padding: var(--spacing-sm) var(--spacing-lg);
            border-top: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .expand-btn {
            background: none;
            border: none;
            color: var(--info-blue);
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: color 0.2s ease;
        }

        .expand-btn:hover {
            color: #0369a1;
        }

        .expand-icon {
            transition: transform 0.3s ease;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* Expanded Content */
        .expanded-content {
            display: none;
            padding: var(--spacing-md) var(--spacing-lg);
            border-top: 1px solid var(--border-light);
            background: var(--bg-primary);
        }

        .card.expanded .expanded-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .expanded-section {
            margin-bottom: var(--spacing-md);
        }

        .expanded-section:last-child {
            margin-bottom: 0;
        }

        .expanded-section-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .expanded-section-content {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-card);
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--bg-primary);
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--urgent-red-bg);
            color: var(--urgent-red);
        }

        .modal-body {
            padding: var(--spacing-lg);
        }

        .abcd-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
        }

        .abcd-item {
            background: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: 8px;
            border-left: 3px solid var(--info-blue);
        }

        .abcd-letter {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--info-blue);
            margin-bottom: var(--spacing-xs);
        }

        .abcd-title {
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .abcd-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-md);
            opacity: 0.5;
        }

        /* Print Styles */
        @media print {
            .header, .sidebar, .card-footer, .expand-btn {
                display: none !important;
            }

            .container {
                display: block;
                padding: 0;
            }

            .main-content {
                width: 100%;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .card {
                break-inside: avoid;
                page-break-inside: avoid;
                border: 1px solid #000;
                box-shadow: none;
                margin-bottom: 1rem;
            }

            .expanded-content {
                display: block !important;
            }

            .card-header {
                background: #f0f0f0;
            }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
            }

            .category-filters {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .filter-btn {
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .search-container {
                max-width: 100%;
                width: 100%;
            }

            .header-actions {
                width: 100%;
                justify-content: center;
            }

            .container {
                padding: var(--spacing-md);
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">DR</div>
                <div>
                    <h1>DermaRef</h1>
                    <span>Benign Skin Lesion Clinical Guide</span>
                </div>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search lesions, symptoms, features..." id="searchInput">
            </div>
            <div class="header-actions">
                <button class="btn btn-light" onclick="showABCDModal()">
                    <span>&#128269;</span> ABCD Guide
                </button>
                <button class="btn btn-light" onclick="window.print()">
                    <span>&#128424;</span> Print
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-title">Categories</div>
            <div class="category-filters">
                <button class="filter-btn active" data-category="all">
                    <span>All Conditions</span>
                    <span class="filter-count">10</span>
                </button>
                <button class="filter-btn" data-category="pigmented">
                    <span>Pigmented Lesions</span>
                    <span class="filter-count">3</span>
                </button>
                <button class="filter-btn" data-category="growths">
                    <span>Epithelial Growths</span>
                    <span class="filter-count">3</span>
                </button>
                <button class="filter-btn" data-category="cysts">
                    <span>Cysts & Lumps</span>
                    <span class="filter-count">2</span>
                </button>
                <button class="filter-btn" data-category="vascular">
                    <span>Vascular Lesions</span>
                    <span class="filter-count">2</span>
                </button>
            </div>
            <div class="quick-ref">
                <button class="quick-ref-btn" onclick="showABCDModal()">
                    &#9888; ABCD Assessment Quick Reference
                </button>
            </div>
        </aside>

        <main class="main-content">
            <div class="results-info" id="resultsInfo">Showing all 10 conditions</div>
            <div class="cards-grid" id="cardsGrid">
                <!-- Cards will be dynamically generated -->
            </div>
        </main>
    </div>

    <!-- ABCD Modal -->
    <div class="modal-overlay" id="abcdModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">ABCD Assessment Framework</h2>
                <button class="modal-close" onclick="hideABCDModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: var(--spacing-lg); color: var(--text-secondary);">
                    Use this framework to assess pigmented lesions and identify concerning features that warrant referral.
                </p>
                <div class="abcd-grid">
                    <div class="abcd-item">
                        <div class="abcd-letter">A</div>
                        <div class="abcd-title">Asymmetry</div>
                        <div class="abcd-desc">One half of the lesion does not match the other half</div>
                    </div>
                    <div class="abcd-item">
                        <div class="abcd-letter">B</div>
                        <div class="abcd-title">Border</div>
                        <div class="abcd-desc">Edges are irregular, ragged, or blurred</div>
                    </div>
                    <div class="abcd-item">
                        <div class="abcd-letter">C</div>
                        <div class="abcd-title">Color</div>
                        <div class="abcd-desc">Variation in color within the lesion (multiple shades of brown, black, red, white, blue)</div>
                    </div>
                    <div class="abcd-item">
                        <div class="abcd-letter">D</div>
                        <div class="abcd-title">Diameter</div>
                        <div class="abcd-desc">Lesion larger than 6mm (pencil eraser size) - though melanoma can be smaller</div>
                    </div>
                </div>
                <div style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--urgent-red-bg); border-radius: 8px; border-left: 4px solid var(--urgent-red);">
                    <strong style="color: var(--urgent-red);">E = Evolving</strong>
                    <p style="margin-top: var(--spacing-sm); font-size: 0.9rem; color: var(--text-secondary);">
                        The most important red flag. Any change in size, shape, color, elevation, or new symptoms (itch, pain, bleeding). Urgent referral if evolving.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Clinical Data - All 10 Conditions
        const conditions = [
            {
                id: 'seborrheic-keratosis',
                name: 'Seborrheic Keratosis',
                synonyms: 'Barnacles of Aging, SK, Seb K',
                category: 'pigmented',
                urgency: 'safe',
                features: [
                    { label: 'Appearance', value: '"Stuck-on" waxy, stuck-on appearance' },
                    { label: 'Surface', value: 'Warty, greasy, crumbly texture' },
                    { label: 'Color', value: 'Variable: flesh, tan, brown, black' },
                    { label: 'Size', value: '1mm to several cm' },
                    { label: 'Common Sites', value: 'Face, chest, back, shoulders, scalp' },
                    { label: 'Atypical Sites', value: 'Palms, soles, mucous membranes - REFER' }
                ],
                redFlag: 'MELANOMA MIMIC: Variable pigmentation with black areas may represent melanoma arising within SK. Refer any lesion with atypical features or uncertain diagnosis.',
                redFlagLink: 'Melanoma',
                management: {
                    text: 'Observation is appropriate for typical lesions. Treatment indicated for symptomatic relief, cosmetic concerns, or diagnostic uncertainty.',
                    actions: [
                        'Observe if classic "stuck-on" appearance with consistent pigmentation',
                        'Shave excision with histology if diagnostic uncertainty',
                        'Cryotherapy for multiple lesions (less common)',
                        'Laser therapy available privately'
                    ]
                },
                patientEd: 'Benign age-related growths, not contagious. Related to sun damage and aging. No malignant potential themselves, but monitor for changes. "Mature spots" rather than aging spots.',
                epidemiology: 'Prevalence >90% in patients over 60. Male predominance.'
            },
            {
                id: 'actinic-keratosis',
                name: 'Actinic Keratosis',
                synonyms: 'Solar Keratosis, AK, Precancer',
                category: 'pigmented',
                urgency: 'urgent',
                features: [
                    { label: 'Appearance', value: 'Rough, scaly, sandpaper-like patch' },
                    { label: 'Texture', value: 'Tactile quality - palpable' },
                    { label: 'Color', value: 'Pink to red; may be pigmented in skin of color' },
                    { label: 'Size', value: 'Usually <1cm' },
                    { label: 'Common Sites', value: 'Face, scalp, ears, forearms, dorsum of hands' },
                    { label: 'Symptoms', value: 'Often asymptomatic, may be itchy' }
                ],
                redFlag: 'SCC RISK: 60% of SCCs arise from AK. Cumulative risk of progression to SCC is 5-15% over 5 years. Treat all AKs - do not observe. Field cancerization present.',
                redFlagLink: 'Squamous Cell Carcinoma',
                management: {
                    text: 'Active treatment required for all AKs. Field therapy preferred for multiple lesions. Individual lesion treatment for isolated AKs.',
                    actions: [
                        'Cryotherapy for individual lesions',
                        '5-Fluorouracil cream (Efudix) - field therapy',
                        'Imiquimod cream (Aldara) - field therapy',
                        'Ingenol mebutate (Picato) - short course field therapy',
                        'Photodynamic Therapy (PDT) - excellent cosmetic outcomes',
                        'Shave excision for biopsy if diagnosis uncertain'
                    ]
                },
                patientEd: 'Caused by sun damage over time. These are precancerous - treatment prevents progression to skin cancer. Sun protection essential. Multiple lesions indicate significant sun damage across an area (field cancerization).',
                epidemiology: 'Common in fair-skinned individuals with chronic sun exposure. More prevalent in elderly. Associated with outdoor occupations and living in sunny climates.'
            },
            {
                id: 'cherry-angioma',
                name: 'Cherry Angioma',
                synonyms: 'Campbell de Morgan Spot, Senile Angioma',
                category: 'vascular',
                urgency: 'safe',
                features: [
                    { label: 'Appearance', value: 'Bright red to dark red dome-shaped papule' },
                    { label: 'Size', value: '1-5mm diameter' },
                    { label: 'Color', value: 'Cherry red to purple-red' },
                    { label: 'Distribution', value: 'Trunk, upper and lower extremities' },
                    { label: 'Onset', value: 'Typically 3rd-4th decade' },
                    { label: 'Evolution', value: 'Slowly enlarge over years, stable' }
                ],
                redFlag: 'ERUPTIVE ANGIOMATOSIS: Sudden onset of multiple angiomas may indicate underlying conditions (HIV, immunosuppressive disorders, or systemic illness).',
                redFlagLink: 'Eruptive Angiomatosis',
                management: {
                    text: 'Observation is appropriate for typical lesions. Treatment indicated for bleeding, irritation, or cosmetic concerns.',
                    actions: [
                        'Observe - benign and stable',
                        'Electrocoagulation for symptomatic lesions',
                        'Laser therapy (pulsed dye laser)',
                        'Shave excision if needed',
                        'Apply pressure for bleeding lesions - they bleed profusely when traumatized'
                    ]
                },
                patientEd: 'Benign age-related vascular growths. Completely harmless. No malignant potential. May bleed if scratched or injured - apply pressure. No treatment needed unless bothering you.',
                epidemiology: '>85% of adults over 40 have at least one. Progressive increase in number with age. Equal gender distribution.'
            },
            {
                id: 'sebaceous-cyst',
                name: 'Sebaceous Cyst',
                synonyms: 'Epidermal Cyst, Keratin Cyst, Sebocyst',
                category: 'cysts',
                urgency: 'monitor',
                features: [
                    { label: 'Appearance', value: 'Flesh-colored or yellowish dome-shaped nodule' },
                    { label: 'Key Feature', value: 'Central punctum (pathognomonic when present)' },
                    { label: 'Contents', value: 'Cheesy, white/yellow, malodorous keratin' },
                    { label: 'Size', value: 'Few mm to several cm' },
                    { label: 'Consistency', value: 'Firm, rubbery, mobile, may be fluctuant' },
                    { label: 'Common Sites', value: 'Face, neck, trunk, genitals' }
                ],
                redFlag: 'INFECTION: Signs of infection (redness, warmth, pain, drainage) require antibiotics BEFORE excision. Incision and drainage during infection risks recurrence. COMPLETE EXCISION required for definitive cure.',
                redFlagLink: 'Infected Cyst',
                management: {
                    text: 'Management depends on size, symptoms, and whether infected.',
                    actions: [
                        'Observe if <2cm, asymptomatic, no cosmetic concern',
                        'Antibiotics if infected (warmth, redness, pain)',
                        'Incision and drainage if fluctuant and infected',
                        'WAIT 4-6 weeks after infection settles before excision',
                        'Complete surgical excision with sac (prevents recurrence)',
                        'MOHS surgery rarely needed only for facial cysts'
                    ]
                },
                patientEd: 'Blocked oil gland pore - completely benign. Do NOT squeeze or poke. If it becomes red, painful, or drains, see your doctor for antibiotics. Surgery removes the entire sac to prevent it coming back.',
                epidemiology: 'Common throughout adult life. May be related to acne, trauma, or genetic factors.'
            },
            {
                id: 'lipoma',
                name: 'Lipoma',
                synonyms: 'Benign Fatty Tumor',
                category: 'cysts',
                urgency: 'monitor',
                features: [
                    { label: 'Appearance', value: 'Soft, doughy, mobile subcutaneous lump' },
                    { label: 'Key Feature', value: '"Slip sign" - slips under fingers' },
                    { label: 'Size', value: 'Usually 1-10cm, can be larger' },
                    { label: 'Consistency', value: 'Soft, rubbery, compressible' },
                    { label: 'Common Sites', value: 'Back, shoulders, neck, arms, abdomen' },
                    { label: 'Symptoms', value: 'Usually asymptomatic, painless' }
                ],
                redFlag: 'SARCOMA WARNING: Fixed, hard, tethered to deep structures, rapid growth, or pain warrants URGENT REFERRAL to rule out LIPOSARCOMA. Multiple lipomas (>5) may indicate familial lipomatosis or Gardner syndrome (associated with colon polyps).',
                redFlagLink: 'Liposarcoma',
                management: {
                    text: 'Observation is appropriate for typical lipomas. Intervention for diagnostic uncertainty, symptoms, or cosmetic concerns.',
                    actions: [
                        'Observe if classic features: soft, mobile, painless, slip sign positive',
                        'Ultrasound if diagnostic uncertainty (recommended for atypical features)',
                        'Surgical excision if large, growing, painful, or concerning features',
                        'Refer to relevant specialty (general surgery, plastics) based on location',
                        'FNA cytology rarely needed',
                        'Screen for Gardner syndrome if multiple lipomas: GI review, family history'
                    ]
                },
                patientEd: 'Benign fatty lump that grows slowly over years. Harmless but can be annoying if in awkward places. Very rarely cancerous. See your doctor if it changes, grows quickly, becomes painful, or feels different.',
                epidemiology: 'Present in ~2% of population. Peak incidence 40-50 years. Male predominance. Multiple lipomas in 5-10% of cases may indicate familial pattern.'
            },
            {
                id: 'dermatofibroma',
                name: 'Dermatofibroma',
                synonyms: 'Benign Fibrous Histiocytoma, Histiocytoma',
                category: 'growths',
                urgency: 'safe',
                features: [
                    { label: 'Appearance', value: 'Firm, pigmented papule or nodule' },
                    { label: 'Key Feature', value: '"Dimple sign" - indents when pinched' },
                    { label: 'Color', value: 'Brown, reddish-brown, sometimes flesh-colored' },
                    { label: 'Size', value: '3-10mm diameter' },
                    { label: 'Common Sites', value: 'Lower legs (heavily favored), arms' },
                    { label: 'Origin', value: 'May follow minor trauma, insect bite' }
                ],
                redFlag: 'DFSP WARNING: Dermatofibrosarcoma Protuberans is a rare sarcoma that can mimic dermatofibroma. REFER if lesion is atypical, large, or changing. DFSP requires wide local excision due to local invasion risk.',
                redFlagLink: 'DFSP',
                management: {
                    text: 'Observation is appropriate for typical lesions. Excision for diagnostic certainty or concerning features.',
                    actions: [
                        'Observe if classic: dimple sign positive, <1cm, stable',
                        'Excisional biopsy if any diagnostic uncertainty',
                        'Shave excision NOT recommended - use full thickness excision',
                        'Cryotherapy has limited effectiveness',
                        'Long-term follow-up if cellular variant (rare recurrence risk)'
                    ]
                },
                patientEd: 'Benign spot caused by overgrowth of fibrous tissue in the skin. Often appears after minor injury. Harmless. May fade over time but usually permanent. No treatment needed unless changing or bothering you.',
                epidemiology: 'Common in adults. More frequent in females. Often appears on lower legs.'
            },
            {
                id: 'skin-tags',
                name: 'Skin Tag',
                synonyms: 'Acrochordon, Papilloma, Fibroepithelial Polyp',
                category: 'growths',
                urgency: 'safe',
                features: [
                    { label: 'Appearance', value: 'Soft, flesh-colored, pedunculated papule' },
                    { label: 'Size', value: '1-5mm, rarely larger' },
                    { label: 'Color', value: 'Flesh-colored, may be hyperpigmented' },
                    { label: 'Common Sites', value: 'Neck, axillae, groin, eyelids' },
                    { label: 'Distribution', value: 'Multiple, often in skin folds' },
                    { label: 'Attachment', value: 'Narrow stalk (peduncle)' }
                ],
                redFlag: 'METABOLIC SYNDROME: >5 skin tags may indicate increased risk of diabetes/metabolic syndrome. GENITAL SKIN TAGS: May indicate HPV infection - refer to GUM clinic for assessment as HPV causes VIN and vaginal cancer.',
                redFlagLink: 'HPV/Metabolic',
                management: {
                    text: 'Observation is appropriate. Treatment for irritation, cosmetic concerns, or functional impairment (e.g., eyelid involvement).',
                    actions: [
                        'Observe if asymptomatic',
                        'Snip excision with sterile scissors (in rooms)',
                        'Cryotherapy for multiple lesions',
                        'Electrocautery for larger tags',
                        'Refer eyelid tags to ophthalmology if interfering with vision',
                        'Consider diabetes screening if numerous tags'
                    ]
                },
                patientEd: 'Harmless skin growths. Related to friction, weight gain, hormones, and sometimes genetics. Not contagious. May get caught on jewelry or clothing. Treatment simple if bothersome.',
                epidemiology: 'Very common. Associated with obesity, diabetes, pregnancy, and genetics. More frequent with age.'
            },
            {
                id: 'milia',
                name: 'Milia',
                synonyms: 'Milk Spots, Epstein Pearls (neonatal)',
                category: 'growths',
                urgency: 'safe',
                features: [
                    { label: 'Appearance', value: 'Tiny, firm, white dome-shaped papules' },
                    { label: 'Size', value: '1-2mm' },
                    { label: 'Color', value: 'White to yellow' },
                    { label: 'Distribution', value: 'Face (especially cheeks, forehead, nose), genitals in neonates' },
                    { label: 'Contents', value: 'Keratin-filled epidermal inclusion cyst' },
                    { label: 'Symptoms', value: 'Completely asymptomatic' }
                ],
                redFlag: 'NO RED FLAGS: Completely benign. In neonates, may be called Epstein pearls or Bohn nodules - normal finding. In older patients, may occur secondary to skin injury or disease.',
                redFlagLink: null,
                management: {
                    text: 'No treatment required. Spontaneous resolution is common, especially in neonates. Treatment purely cosmetic if desired.',
                    actions: [
                        'Observe - spontaneous resolution common',
                        'Primary milia: usually resolve within weeks in neonates',
                        'Secondary milia: may persist longer',
                        'Deroofing with sterile needle if patient requests removal',
                        'Topical retinoids for persistent cases (cosmetic)',
                        'Laser ablation if multiple and bothersome'
                    ]
                },
                patientEd: 'Tiny harmless cysts filled with keratin (skin protein). In babies, completely normal and will go away on their own. In adults, may appear after skin injury or with certain skin conditions. No treatment needed.',
                epidemiology: 'Common in newborns (up to 50%). Primary milia in neonates. Secondary milia can occur at any age, often following skin injury, burns, or resurfacing procedures.'
            },
            {
                id: 'solar-lentigo',
                name: 'Solar Lentigo',
                synonyms: 'Sun Spot, Age Spot, Liver Spot (misnomer)',
                category: 'pigmented',
                urgency: 'monitor',
                features: [
                    { label: 'Appearance', value: 'Flat, well-defined tan to brown macule' },
                    { label: 'Color', value: 'Light to dark brown, pink in fair skin' },
                    { label: 'Size', value: '5mm to 2cm' },
                    { label: 'Shape', value: 'Round to oval, usually regular' },
                    { label: 'Common Sites', value: 'Sun-exposed areas: face, hands, forearms, chest' },
                    { label: 'Surface', value: 'Smooth, flat, non-palpable' }
                ],
                redFlag: 'LENTIGO MALIGNA: Any irregular, changing, or pigmented lesion on sun-damaged skin requires DERMATOSCOPY to rule out Lentigo Maligna (melanoma in situ). Flat pigmented lesions on face need expert assessment.',
                redFlagLink: 'Lentigo Maligna',
                management: {
                    text: 'Observation with sun protection. Treatment for cosmetic concerns. Referral if any atypical features.',
                    actions: [
                        'Observe if typical appearance and stable',
                        'Sun protection counseling - mainstay of prevention',
                        'Topical bleaching agents (hydroquinone) for cosmetic lightening',
                        'Cryotherapy for individual spots',
                        'Laser therapy for multiple lesions',
                        'REFER if irregular borders, color variation, or changing'
                    ]
                },
                patientEd: 'Sun spots caused by sun damage over years. Benign but indicate sun-damaged skin. Harmless but protect your skin from more sun damage. Monitor for any changes - if a spot looks different, get it checked.',
                epidemiology: 'Very common in fair-skinned individuals over 40. >70% prevalence in skin types I-III. More common with cumulative UV exposure. Less common in skin of color.'
            },
            {
                id: 'keratoacanthoma',
                name: 'Keratoacanthoma',
                synonyms: 'KA, Self-Healing Squamous Cell Carcinoma',
                category: 'growths',
                urgency: 'urgent',
                features: [
                    { label: 'Appearance', value: 'Dome-shaped nodule with central crater' },
                    { label: 'Key Feature', value: '"Volcano" morphology - keratin core' },
                    { label: 'Size', value: '1-2cm, can be larger' },
                    { label: 'Color', value: 'Flesh-colored to pink to red' },
                    { label: 'Common Sites', value: 'Sun-exposed areas: face, arms, legs' },
                    { label: 'Growth', value: 'Rapid growth over weeks to months' }
                ],
                redFlag: 'CLINICALLY INDISTINGUISHABLE FROM SCC: Treat as SCC until proven otherwise. Most dermatologists consider KA a variant of well-differentiated SCC. URGENT EXCISION required. Do not observe - rapid growth phase followed by potential spontaneous regression, but cannot risk missing SCC.',
                redFlagLink: 'SCC',
                management: {
                    text: 'URGENT REFERRAL AND EXCISION. Do not observe. Treat as squamous cell carcinoma.',
                    actions: [
                        'URGENT 2-week referral to dermatology',
                        'Complete surgical excision with margins',
                        'Send for histology - mandatory',
                        'If KA confirmed: prognosis excellent after excision',
                        'If SCC confirmed: further management per SCC protocols',
                        'Alternative: Mohs micrographic surgery for high-risk locations',
                        'Radiation for patients unfit for surgery'
                    ]
                },
                patientEd: 'A rapidly growing spot that looks alarming but can be completely cured with simple surgery. It grows quickly over weeks but surgery removes it completely. Think of it like a mole that needs to be checked and removed.',
                epidemiology: 'More common in fair-skinned, elderly individuals with significant sun exposure. Male predominance. Associated with chronic sun damage and immunosuppression.'
            }
        ];

        // Render Functions
        function renderCards(filter = 'all', searchTerm = '') {
            const grid = document.getElementById('cardsGrid');
            const resultsInfo = document.getElementById('resultsInfo');

            let filteredConditions = conditions;

            // Apply category filter
            if (filter !== 'all') {
                filteredConditions = filteredConditions.filter(c => c.category === filter);
            }

            // Apply search filter
            if (searchTerm) {
                const term = searchTerm.toLowerCase();
                filteredConditions = filteredConditions.filter(c =>
                    c.name.toLowerCase().includes(term) ||
                    c.synonyms.toLowerCase().includes(term) ||
                    c.features.some(f =>
                        f.label.toLowerCase().includes(term) ||
                        f.value.toLowerCase().includes(term)
                    ) ||
                    c.management.text.toLowerCase().includes(term)
                );
            }

            resultsInfo.textContent = `Showing ${filteredConditions.length} of ${conditions.length} conditions`;

            if (filteredConditions.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">&#128269;</div>
                        <h3>No conditions found</h3>
                        <p>Try adjusting your search or filter criteria</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredConditions.map(condition => createCardHTML(condition)).join('');
        }

        function createCardHTML(condition) {
            const urgencyClass = condition.urgency === 'urgent' ? 'card-urgent' :
                                 condition.urgency === 'monitor' ? 'card-monitor' : 'card-safe';
            const badgeClass = condition.urgency === 'urgent' ? 'badge-urgent' :
                              condition.urgency === 'monitor' ? 'badge-monitor' : 'badge-safe';
            const badgeText = condition.urgency === 'urgent' ? 'Urgent Referral' :
                             condition.urgency === 'monitor' ? 'Monitor' : 'Safe/Benign';

            const featuresHTML = condition.features.map(f => `
                <div class="feature-item">
                    <span class="feature-icon feature-icon-blue">&#8227;</span>
                    <div>
                        <span class="feature-label">${f.label}:</span>
                        <span class="feature-value">${f.value}</span>
                    </div>
                </div>
            `).join('');

            const managementActions = condition.management.actions.map(action =>
                `<li>${action}</li>`
            ).join('');

            return `
                <div class="card ${urgencyClass}" id="card-${condition.id}" onclick="toggleCard('${condition.id}')">
                    <div class="card-header">
                        <div class="card-title-section">
                            <div class="card-category">${condition.category.replace('-', ' ')}</div>
                            <h3 class="card-title">${condition.name}</h3>
                            <div class="card-synonyms">${condition.synonyms}</div>
                        </div>
                        <span class="card-badge ${badgeClass}">${badgeText}</span>
                    </div>

                    ${condition.redFlag ? `
                        <div class="red-flag-banner">
                            <div class="red-flag-icon">!</div>
                            <span class="red-flag-text">${condition.redFlag}</span>
                        </div>
                    ` : ''}

                    <div class="card-body">
                        <div class="features-grid">
                            ${featuresHTML}
                        </div>

                        <div class="management-section">
                            <div class="management-header">
                                <div class="management-icon">&#10003;</div>
                                <span class="management-title">Management Plan</span>
                            </div>
                            <p class="management-text">${condition.management.text}</p>
                            <ul class="management-list">
                                ${managementActions}
                            </ul>
                        </div>

                        <div class="patient-ed">
                            <div class="patient-ed-header">
                                <div class="patient-ed-icon">&#128172;</div>
                                <span class="patient-ed-title">Patient Education Points</span>
                            </div>
                            <p class="patient-ed-text">${condition.patientEd}</p>
                        </div>
                    </div>

                    <div class="card-footer">
                        <button class="expand-btn" onclick="event.stopPropagation(); toggleCardExpand('${condition.id}')">
                            <span>Show Details</span>
                            <span class="expand-icon">&#9660;</span>
                        </button>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">${condition.epidemiology}</span>
                    </div>

                    <div class="expanded-content">
                        <div class="expanded-section">
                            <div class="expanded-section-title">
                                <span style="color: var(--info-blue);">&#128196;</span>
                                Clinical Assessment Notes
                            </div>
                            <div class="expanded-section-content">
                                <strong>Key Diagnostic Features:</strong><br>
                                ${condition.features.slice(0, 3).map(f => ` ${f.label}: ${f.value}`).join('<br>')}
                                <br><br>
                                <strong>Differential Diagnosis Considerations:</strong><br>
                                ${condition.urgency === 'urgent' ? 'High concern - treat as malignant until proven otherwise' :
                                  condition.urgency === 'monitor' ? 'Monitor for changes; consider investigation if atypical features' :
                                  'Typical features reassure benign nature; however, maintain vigilance'}
                            </div>
                        </div>
                        <div class="expanded-section">
                            <div class="expanded-section-title">
                                <span style="color: var(--safe-green);">&#128203;</span>
                                Follow-up Recommendations
                            </div>
                            <div class="expanded-section-content">
                                ${condition.urgency === 'urgent' ?
                                  'Urgent 2-week referral. Do not delay. Excision required.' :
                                  condition.urgency === 'monitor' ?
                                  'Review if changes observed. Consider ultrasound if diagnostic uncertainty. Refer if red flag features develop.' :
                                  'Routine follow-up not required unless patient concerned or changes noted. Advise patient to return if any evolution.'}
                            </div>
                        </div>
                        <div class="expanded-section">
                            <div class="expanded-section-title">
                                <span style="color: var(--warning-amber);">&#9888;</span>
                                When to Escalate
                            </div>
                            <div class="expanded-section-content">
                                ${condition.redFlag ?
                                  `Red flag features present: ${condition.redFlag.split(':')[1].trim()}` :
                                  'No specific red flags. Escalate if ABCD criteria met or lesion evolves.'}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function toggleCard(cardId) {
            // Card header click - could expand specific section if needed
        }

        function toggleCardExpand(cardId) {
            const card = document.getElementById(`card-${cardId}`);
            const btn = card.querySelector('.expand-btn');

            card.classList.toggle('expanded');

            if (card.classList.contains('expanded')) {
                btn.querySelector('span:first-child').textContent = 'Hide Details';
            } else {
                btn.querySelector('span:first-child').textContent = 'Show Details';
            }
        }

        function showABCDModal() {
            document.getElementById('abcdModal').classList.add('active');
        }

        function hideABCDModal() {
            document.getElementById('abcdModal').classList.remove('active');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            renderCards();

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const activeCategory = document.querySelector('.filter-btn.active').dataset.category;
                renderCards(activeCategory, e.target.value);
            });

            // Category filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    const category = this.dataset.category;
                    const searchTerm = searchInput.value;
                    renderCards(category, searchTerm);
                });
            });

            // Close modal on outside click
            document.getElementById('abcdModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideABCDModal();
                }
            });

            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideABCDModal();
                }
            });
        });
    </script>
</body>
</html>
