<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidradenitis Suppurativa - Interactive Clinical Algorithm</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #3b82f6;
            --primary-purple: #8b5cf6;
            --primary-red: #ef4444;
            --primary-green: #10b981;
            --primary-orange: #f59e0b;
            --dark-bg: #111827;
            --card-bg: #1f2937;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #0f172a 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }

        .main-content {
            flex: 1;
            padding-top: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(255,255,255,0.1) 0%, transparent 40%);
            pointer-events: none;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
            max-width: 700px;
            margin: 0 auto;
        }

        .progress-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 30px 20px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .progress-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.05);
            border: 1px solid transparent;
        }

        .progress-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .progress-item.active {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            color: white;
            border-color: rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .progress-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .progress-item.active .progress-icon {
            transform: scale(1.1);
            background: rgba(255,255,255,0.2);
        }

        .step-section {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .step-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            cursor: pointer;
            user-select: none;
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin-right: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .step-card:hover .step-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .step-title {
            flex: 1;
        }

        .step-title h2 {
            font-size: 1.8em;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .step-title p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
            color: var(--text-secondary);
        }

        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .step-content.expanded {
            max-height: 2000px;
        }

        .subsection {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }

        .subsection:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(5px);
        }

        .subsection h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 4px;
            transition: all 0.2s ease;
            cursor: default;
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .badge-urgent {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
        }

        .badge-caution {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            box-shadow: 0 2px 8px rgba(217, 119, 6, 0.3);
        }

        .badge-stable {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .badge-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .assessment-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-blue);
        }

        .treatment-flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .treatment-step {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-green);
            position: relative;
            transition: all 0.3s ease;
        }

        .treatment-step:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(10px);
        }

        .treatment-step::before {
            content: '';
            position: absolute;
            left: -2px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-green);
        }

        .flow-chart {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .flow-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        .flow-item:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }

        .flow-arrow {
            font-size: 2em;
            color: var(--primary-blue);
            margin: 0 10px;
        }

        .criteria-list {
            list-style: none;
            padding-left: 0;
        }

        .criteria-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            transition: all 0.2s ease;
        }

        .criteria-list li:hover {
            background: rgba(255,255,255,0.02);
            border-radius: 6px;
            padding-left: 10px;
            padding-right: 10px;
            margin-left: -10px;
            margin-right: -10px;
        }

        .criteria-list li:last-child {
            border-bottom: none;
        }

        .criteria-list input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 4px;
            transform: scale(1.2);
            cursor: pointer;
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .score-display.updated {
            transform: scale(1.1);
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .severity-indicator:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .severity-mild {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .severity-moderate {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .severity-severe {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .risk-factors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .risk-factor {
            background: rgba(255,255,255,0.03);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .risk-factor:hover {
            background: rgba(255,255,255,0.05);
            border-color: var(--primary-orange);
            transform: translateY(-3px);
        }

        .risk-factor-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .risk-factor:hover .risk-factor-icon {
            transform: scale(1.2);
        }

        .interactive-diagram {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            border-radius: 12px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 1.2em;
            border: 1px dashed var(--border-color);
            transition: all 0.3s ease;
        }

        .interactive-diagram:hover {
            border-color: var(--primary-blue);
            background: rgba(59, 130, 246, 0.05);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 10px;
            }
            
            .progress-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .step-title h2 {
                font-size: 1.4em;
            }
            
            .flow-chart {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
            
            .assessment-grid {
                grid-template-columns: 1fr;
            }
        }

        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            max-width: 200px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .tooltip.show {
            opacity: 1;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.1);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .pulse-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--primary-red);
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 1.5s infinite;
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin-right: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .assessment-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-blue);
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .flow-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        .flow-item:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .score-display.updated {
            transform: scale(1.1);
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .severity-indicator:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tab-container {
            margin-top: 20px;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        .drug-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .drug-card:hover {
            border-color: var(--primary-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .drug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .drug-name {
            font-weight: 600;
            color: var(--primary-blue);
            font-size: 1.1em;
        }

        .drug-type {
            font-size: 0.85em;
            color: var(--text-secondary);
            background: rgba(255,255,255,0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }

        .drug-dosage {
            font-size: 0.9em;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .drug-indications {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .surgical-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .surgical-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .surgical-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: var(--primary-red);
        }

        .surgical-type {
            font-weight: 600;
            color: var(--primary-red);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .surgical-indication {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .surgical-outcome {
            font-size: 0.85em;
            color: var(--text-primary);
        }

        .follow-up-timeline {
            position: relative;
            padding-left: 40px;
        }

        .follow-up-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-green);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(10px);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -32px;
            top: 25px;
            width: 12px;
            height: 12px;
            background: var(--primary-green);
            border-radius: 50%;
            border: 3px solid var(--dark-bg);
            box-shadow: 0 0 0 3px var(--primary-green);
        }

        .timeline-time {
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .floating-action-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .floating-action-button:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin-right: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .assessment-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: var(--primary-blue);
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .flow-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .severity-indicator:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tab-button {
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
        }

        .drug-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .drug-card:hover {
            border-color: var(--primary-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .surgical-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .surgical-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: var(--primary-red);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(10px);
        }

        .floating-action-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .floating-action-button:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.05);
            border: 1px solid transparent;
        }

        .progress-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .progress-item.active {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            color: white;
            border-color: rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .tab-button {
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
        }

        .drug-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .surgical-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .floating-action-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .pulse-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--primary-red);
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 1.5s infinite;
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin-right: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .step-card:hover .step-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .step-title h2 {
            flex: 1;
        }

        .step-title h2 {
            font-size: 1.8em;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .step-title p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
            color: var(--text-secondary);
        }

        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .step-content.expanded {
            max-height: 2000px;
        }

        .subsection {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }

        .subsection:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(5px);
        }

        .subsection h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 4px;
            transition: all 0.2s ease;
            cursor: default;
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .badge-urgent {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
        }

        .badge-caution {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            box-shadow: 0 2px 8px rgba(217, 119, 6, 0.3);
        }

        .badge-stable {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .badge-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .treatment-flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .treatment-step {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-green);
            position: relative;
            transition: all 0.3s ease;
        }

        .treatment-step:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(10px);
        }

        .flow-chart {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .flow-arrow {
            font-size: 2em;
            color: var(--primary-blue);
            margin: 0 10px;
        }

        .criteria-list {
            list-style: none;
            padding-left: 0;
        }

        .criteria-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            transition: all 0.2s ease;
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .risk-factors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .risk-factor {
            background: rgba(255,255,255,0.03);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .risk-factor-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .interactive-diagram {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            border-radius: 12px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 1.2em;
            border: 1px dashed var(--border-color);
            transition: all 0.3s ease;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 10px;
            }
            
            .progress-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .step-title h2 {
                font-size: 1.4em;
            }
            
            .flow-chart {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
            
            .assessment-grid {
                grid-template-columns: 1fr;
            }
        }

        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            max-width: 200px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .tooltip.show {
            opacity: 1;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.1);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        .pulse-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--primary-red);
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 1.5s infinite;
        }

        .step-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin-right: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .step-card:hover .step-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .step-title h2 {
            flex: 1;
        }

        .step-title h2 {
            font-size: 1.8em;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .step-title p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
            color: var(--text-secondary);
        }

        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .step-content.expanded {
            max-height: 2000px;
        }

        .subsection {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }

        .subsection:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(5px);
        }

        .subsection h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 4px;
            transition: all 0.2s ease;
            cursor: default;
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .badge-urgent {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
        }

        .badge-caution {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            box-shadow: 0 2px 8px rgba(217, 119, 6, 0.3);
        }

        .badge-stable {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .badge-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .assessment-item {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .treatment-flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .treatment-step {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-green);
            position: relative;
            transition: all 0.3s ease;
        }

        .flow-chart {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            border-radius: 16px;
            min-width: 200px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .flow-arrow {
            font-size: 2em;
            color: var(--primary-blue);
            margin: 0 10px;
        }

        .criteria-list {
            list-style: none;
            padding-left: 0;
        }

        .criteria-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            transition: all 0.2s ease;
        }

        .score-calculator {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            transition: all 0.3s ease;
        }

        .severity-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: default;
        }

        .risk-factors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .risk-factor {
            background: rgba(255,255,255,0.03);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .risk-factor:hover {
            background: rgba(255,255,255,0.05);
            border-color: var(--primary-orange);
            transform: translateY(-3px);
        }

        .risk-factor-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .risk-factor:hover .risk-factor-icon {
            transform: scale(1.2);
        }

        .interactive-diagram {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            border-radius: 12px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 1.2em;
            border: 1px dashed var(--border-color);
            transition: all 0.3s ease;
        }

        .interactive-diagram:hover {
            border-color: var(--primary-blue);
            background: rgba(59, 130, 246, 0.05);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 10px;
            }
            
            .progress-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .step-title h2 {
                font-size: 1.4em;
            }
            
            .flow-chart {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
            
            .assessment-grid {
                grid-template-columns: 1fr;
            }
        }

        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            max-width: 200px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .tooltip.show {
            opacity: 1;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.1);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        .pulse-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--primary-red);
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <header>
        <h1>Hidradenitis Suppurativa</h1>
        <p>Interactive Clinical Algorithm & Management Guide</p>
    </header>

    <div class="container">
        <aside class="progress-sidebar">
            <div class="progress-title">
                <span></span>
                <span>Progress</span>
            </div>
            <div class="progress-item active" data-step="assessment">
                <div class="progress-icon" style="background: #e3f2fd; color: #1976d2;"></div>
                <div>
                    <div style="font-weight: 600;">Assessment</div>
                    <div style="font-size: 0.85em; opacity: 0.8;">Initial evaluation</div>
                </div>
            </div>
            <div class="progress-item" data-step="diagnosis">
                <div class="progress-icon" style="background: #f3e5f5; color: #7b1fa2;"></div>
                <div>
                    <div style="font-weight: 600;">Diagnosis</div>
                    <div style="font-size: 0.85em; opacity: 0.8;">Confirm diagnosis</div>
                </div>
            </div>
            <div class="progress-item" data-step="treatment">
                <div class="progress-icon" style="background: #ffebee; color: #c62828;"></div>
                <div>
                    <div style="font-weight: 600;">Treatment</div>
                    <div style="font-size: 0.85em; opacity: 0.8;">Management plan</div>
                </div>
            </div>
            <div class="progress-item" data-step="follow-up">
                <div class="progress-icon" style="background: #e8f5e9; color: #388e3c;"></div>
                <div>
                    <div style="font-weight: 600;">Follow-up</div>
                    <div style="font-size: 0.85em; opacity: 0.8;">Monitor progress</div>
                </div>
            </div>
            
            <div style="margin-top: 40px; padding: 20px; background: #f5f5f5; border-radius: 10px;">
                <h4 style="margin-bottom: 15px;">Quick Tips</h4>
                <ul style="list-style: none; font-size: 0.85em;">
                    <li style="margin-bottom: 8px;"> Click on cards to expand</li>
                    <li style="margin-bottom: 8px;"> Use checkboxes for criteria</li>
                    <li style="margin-bottom: 8px;"> Hover for more information</li>
                    <li style="margin-bottom: 8px;"> Severity badges guide urgency</li>
                </ul>
            </div>
        </aside>

        <main class="main-content">
            <!-- Assessment Section -->
            <section class="step-section" id="assessment">
                <div class="step-card" style="border-left: 5px solid #2196f3;">
                    <div class="step-header" onclick="toggleStep(this)">
                        <div class="step-icon" style="background: #e3f2fd; color: #1976d2;"></div>
                        <div class="step-title">
                            <h2>Assessment</h2>
                            <p>Initial evaluation and clinical assessment</p>
                        </div>
                        <div class="expand-icon"></div>
                    </div>
                    <div class="step-content">
                        <div class="subsection">
                            <h3> Diagnostic Criteria <span class="badge badge-info">Modified Dessau</span></h3>
                            <p>Diagnosis requires fulfillment of ALL three components:</p>
                            <ul class="criteria-list">
                                <li>
                                    <input type="checkbox" id="criteria1" onchange="updateDiagnosisProgress()">
                                    <label for="criteria1">
                                        <strong>Typical lesions:</strong> Nodules, abscesses, sinus tracts, and/or fibrotic scars
                                        <span class="pulse-dot"></span>
                                    </label>
                                </li>
                                <li>
                                    <input type="checkbox" id="criteria2" onchange="updateDiagnosisProgress()">
                                    <label for="criteria2">
                                        <strong>Typical distribution:</strong> Intertriginous areas (axillae, groin, perianal, etc.)
                                    </label>
                                </li>
                                <li>
                                    <input type="checkbox" id="criteria3" onchange="updateDiagnosisProgress()">
                                    <label for="criteria3">
                                        <strong>Recurrence/chronicity:</strong> 2 episodes over 6 months
                                    </label>
                                </li>
                            </ul>
                            <div id="diagnosis-alert" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;">
                                <!-- Dynamic alert will be inserted here -->
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Clinical Features</h3>
                            <div class="assessment-grid">
                                <div class="assessment-item">
                                    <h4>Primary Lesions</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Painful firm nodules & papules</li>
                                        <li> Abscesses & pseudocysts</li>
                                        <li> Open and closed comedones</li>
                                        <li> Pustules</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Secondary Features</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Draining sinuses/fistulas</li>
                                        <li> Hypertrophic or atrophic scarring</li>
                                        <li> Deformity</li>
                                        <li> Malodorous discharge</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Common Locations</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Axillae <span class="badge badge-stable">70%</span></li>
                                        <li> Groin/perianal <span class="badge badge-stable">50%</span></li>
                                        <li> Inframammary folds</li>
                                        <li> Buttocks</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Severity Assessment</h3>
                            <div class="score-calculator">
                                <h4>IHS4 Score Calculator</h4>
                                <p style="font-size: 0.9em; color: #666;">Enter the number of lesions:</p>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                                    <div>
                                        <label>Nodules:</label>
                                        <input type="number" id="nodules" min="0" value="0" onchange="calculateIHS4()" 
                                               style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label>Abscesses:</label>
                                        <input type="number" id="abscesses" min="0" value="0" onchange="calculateIHS4()" 
                                               style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label>Draining Sinuses:</label>
                                        <input type="number" id="sinuses" min="0" value="0" onchange="calculateIHS4()" 
                                               style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div style="display: flex; align-items: flex-end;">
                                        <button onclick="calculateIHS4()" style="padding: 8px 20px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer;">Calculate</button>
                                    </div>
                                </div>
                                <div class="score-display" id="ihs4-score">0</div>
                                <div id="ihs4-interpretation" style="text-align: center; margin-top: 10px;">
                                    <span class="severity-indicator severity-mild">Mild: <3 points</span>
                                    <span class="severity-indicator severity-moderate">Moderate: 4-10 points</span>
                                    <span class="severity-indicator severity-severe">Severe: >11 points</span>
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <h4>Hurley Staging <span class="badge badge-info">Traditional</span></h4>
                                <div class="flow-chart">
                                    <div class="flow-item" onclick="showHurleyDetails('I')">
                                        <div style="font-weight: bold;">Stage I</div>
                                        <div style="font-size: 0.8em;">Abscesses, no sinus tracts</div>
                                        <div class="severity-indicator severity-mild">Mild</div>
                                    </div>
                                    <div class="flow-arrow"></div>
                                    <div class="flow-item" onclick="showHurleyDetails('II')">
                                        <div style="font-weight: bold;">Stage II</div>
                                        <div style="font-size: 0.8em;">Recurrent abscesses with sinus tracts</div>
                                        <div class="severity-indicator severity-moderate">Moderate</div>
                                    </div>
                                    <div class="flow-arrow"></div>
                                    <div class="flow-item" onclick="showHurleyDetails('III')">
                                        <div style="font-weight: bold;">Stage III</div>
                                        <div style="font-size: 0.8em;">Diffuse involvement</div>
                                        <div class="severity-indicator severity-severe">Severe</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Risk Factors & Comorbidities</h3>
                            <div class="risk-factors-grid">
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Smoking</strong>
                                        <div style="font-size: 0.85em; color: #666;">Up to 90% of patients</div>
                                        <span class="badge badge-caution">Modifiable</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Obesity</strong>
                                        <div style="font-size: 0.85em; color: #666;">BMI >30</div>
                                        <span class="badge badge-caution">Modifiable</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Family History</strong>
                                        <div style="font-size: 0.85em; color: #666;">1/3 have affected relatives</div>
                                        <span class="badge badge-info">Genetic</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>PCOS</strong>
                                        <div style="font-size: 0.85em; color: #666;">Hormonal influence</div>
                                        <span class="badge badge-info">Endocrine</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Depression/Anxiety</strong>
                                        <div style="font-size: 0.85em; color: #666;">Common comorbidity</div>
                                        <span class="badge badge-urgent">Screen</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>IBD/Spondyloarthropathy</strong>
                                        <div style="font-size: 0.85em; color: #666;">Autoimmune link</div>
                                        <span class="badge badge-info">Associated</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Investigations</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="assessment-item">
                                    <h4>Baseline Tests</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li> FBC</li>
                                        <li> CRP/ESR</li>
                                        <li> HbA1c</li>
                                        <li> Lipids</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Imaging</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li> Ultrasound <span class="badge badge-info">Useful</span></li>
                                        <li> MRI <span class="badge badge-stable">If needed</span></li>
                                        <li> CXR <span class="badge badge-stable">If surgery</span></li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Specialist Referral</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li> Dermatology <span class="badge badge-urgent">All cases</span></li>
                                        <li> Surgery <span class="badge badge-caution">If severe</span></li>
                                        <li> Psychology <span class="badge badge-info">If needed</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Diagnosis Section -->
            <section class="step-section" id="diagnosis">
                <div class="step-card" style="border-left: 5px solid #9c27b0;">
                    <div class="step-header" onclick="toggleStep(this)">
                        <div class="step-icon" style="background: #f3e5f5; color: #7b1fa2;"></div>
                        <div class="step-title">
                            <h2>Diagnosis & Differential</h2>
                            <p>Confirm diagnosis and rule out other conditions</p>
                        </div>
                        <div class="expand-icon"></div>
                    </div>
                    <div class="step-content">
                        <div class="subsection">
                            <h3> Confirming Diagnosis</h3>
                            <div id="diagnosis-progress" style="background: #e8f5e9; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span><strong>Diagnostic Criteria Met:</strong> <span id="criteria-count">0/3</span></span>
                                    <div id="diagnosis-status" style="padding: 5px 15px; border-radius: 15px; background: #ffebee; color: #c62828; font-weight: 500;">
                                        Not Confirmed
                                    </div>
                                </div>
                                <div style="margin-top: 10px; height: 6px; background: #ddd; border-radius: 3px; overflow: hidden;">
                                    <div id="progress-bar" style="width: 0%; height: 100%; background: #4caf50; transition: width 0.5s;"></div>
                                </div>
                            </div>
                            
                            <div id="diagnosis-confirmed" style="display: none; background: #e8f5e9; border: 1px solid #4caf50; padding: 20px; border-radius: 8px;">
                                <h4 style="color: #2e7d32; margin-bottom: 10px;"> Diagnosis Confirmed!</h4>
                                <p>Patient meets all modified Dessau criteria for Hidradenitis Suppurativa.</p>
                                <div style="margin-top: 15px;">
                                    <button onclick="scrollToSection('treatment')" style="padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                        Proceed to Treatment 
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Differential Diagnosis</h3>
                            <div class="tab-container">
                                <div class="tab-buttons">
                                    <button class="tab-button active" onclick="showDifferential('infections')">Infections</button>
                                    <button class="tab-button" onclick="showDifferential('cysts')">Cystic Lesions</button>
                                    <button class="tab-button" onclick="showDifferential('autoimmune')">Autoimmune</button>
                                    <button class="tab-button" onclick="showDifferential('malignant')">Malignant</button>
                                </div>
                                
                                <div id="infections" class="tab-content active">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div class="assessment-item">
                                            <h4>Staphylococcal Abscess</h4>
                                            <p style="font-size: 0.9em;">Usually isolated, culture positive</p>
                                            <span class="badge badge-info">Culture</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Furunculosis</h4>
                                            <p style="font-size: 0.9em;">Multiple follicular infections</p>
                                            <span class="badge badge-stable">Acute</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Cutaneous TB</h4>
                                            <p style="font-size: 0.9em;">Chronic, culture positive</p>
                                            <span class="badge badge-caution">Biopsy</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Cutaneous Crohn Disease</h4>
                                            <p style="font-size: 0.9em;">Genital/perianal lesions</p>
                                            <span class="badge badge-info">GI symptoms</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="cysts" class="tab-content">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div class="assessment-item">
                                            <h4>Epidermoid Cyst</h4>
                                            <p style="font-size: 0.9em;">Single, mobile, non-inflammatory</p>
                                            <span class="badge badge-stable">Resection</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Bartholin Cyst</h4>
                                            <p style="font-size: 0.9em;">Vulvar location</p>
                                            <span class="badge badge-info">Gynecology</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Pilonidal Disease</h4>
                                            <p style="font-size: 0.9em;">Sacrococcygeal area</p>
                                            <span class="badge badge-caution">Midline pits</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="autoimmune" class="tab-content">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div class="assessment-item">
                                            <h4>PG/Neutrophilic Dermatosis</h4>
                                            <p style="font-size: 0.9em;">Rapid progression, undermined borders</p>
                                            <span class="badge badge-urgent">Different course</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>LGFMS/MSGV</h4>
                                            <p style="font-size: 0.9em;">Fibroblastic tumors</p>
                                            <span class="badge badge-caution">Biopsy</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Granuloma Inguinale</h4>
                                            <p style="font-size: 0.9em;">STI, tissue smears positive</p>
                                            <span class="badge badge-info">Donovan bodies</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="malignant" class="tab-content">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div class="assessment-item">
                                            <h4>Squamous Cell Carcinoma</h4>
                                            <p style="font-size: 0.9em;">Ulcerated, rapid growth</p>
                                            <span class="badge badge-urgent">Biopsy mandatory</span>
                                        </div>
                                        <div class="assessment-item">
                                            <h4>Lymphoma</h4>
                                            <p style="font-size: 0.9em;">Systemic symptoms</p>
                                            <span class="badge badge-caution">Histology</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Clinical Phenotypes</h3>
                            <div class="tab-container">
                                <div class="tab-buttons">
                                    <button class="tab-button active" onclick="showPhenotype('follicular')">Follicular</button>
                                    <button class="tab-button" onclick="showPhenotype('inflammatory')">Inflammatory</button>
                                    <button class="tab-button" onclick="showPhenotype('mixed')">Mixed</button>
                                    <button class="tab-button" onclick="showPhenotype('syndromic')">Syndromic</button>
                                </div>
                                
                                <div id="follicular" class="tab-content active">
                                    <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
                                        <h4 style="color: #1976d2;">Follicular Phenotype</h4>
                                        <ul style="margin: 10px 0;">
                                            <li>Earlier age of onset</li>
                                            <li>Prominent comedones</li>
                                            <li>Greater incidence of concomitant papularfolliculitis</li>
                                            <li>Less aggressive disease course</li>
                                            <li>Abscesses seen infrequently</li>
                                        </ul>
                                        <span class="badge badge-stable">Milder course</span>
                                    </div>
                                </div>
                                
                                <div id="inflammatory" class="tab-content">
                                    <div style="background: #ffebee; padding: 15px; border-radius: 8px;">
                                        <h4 style="color: #c62828;">Inflammatory Phenotype</h4>
                                        <ul style="margin: 10px 0;">
                                            <li>Particularly aggressive</li>
                                            <li>Greater incidence of abscesses and fistulas</li>
                                            <li>Coalesce into scarring plaques</li>
                                            <li>More pain and odor</li>
                                            <li>Rapid progression</li>
                                        </ul>
                                        <span class="badge badge-urgent">Requires aggressive treatment</span>
                                    </div>
                                </div>
                                
                                <div id="mixed" class="tab-content">
                                    <div style="background: #fff3e0; padding: 15px; border-radius: 8px;">
                                        <h4 style="color: #ef6c00;">Mixed Phenotype</h4>
                                        <ul style="margin: 10px 0;">
                                            <li>Folliculitis and/or comedones</li>
                                            <li>Interspersed with abscesses</li>
                                            <li>Predisposed to epidermal cysts</li>
                                            <li>Post-inflammatory hyperpigmentation</li>
                                            <li>Usually thin, non-branching tunnels</li>
                                        </ul>
                                        <span class="badge badge-caution">Moderate progression</span>
                                    </div>
                                </div>
                                
                                <div id="syndromic" class="tab-content">
                                    <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
                                        <h4 style="color: #7b1fa2;">Syndromic Associations</h4>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                                            <div>
                                                <strong>PASH</strong><br>
                                                <small>PG, Acne, HS</small>
                                            </div>
                                            <div>
                                                <strong>PAPASH</strong><br>
                                                <small>PG, Arthritis, Acne, HS</small>
                                            </div>
                                            <div>
                                                <strong>PsAPASH</strong><br>
                                                <small>PsA, PG, Acne, HS</small>
                                            </div>
                                            <div>
                                                <strong>SAPHO</strong><br>
                                                <small>Synovitis, Acne, Pustulosis, Hyperostosis, Osteitis</small>
                                            </div>
                                        </div>
                                        <span class="badge badge-info">Specialist referral needed</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Anatomical Distribution</h3>
                            <div class="interactive-diagram" onclick="showAnatomicalDiagram()">
                                <div style="text-align: center;">
                                    <div style="font-size: 2em; margin-bottom: 10px;"></div>
                                    <p>Click to view interactive anatomical diagram</p>
                                    <small style="color: #999;">Shows common HS locations</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Treatment Section -->
            <section class="step-section" id="treatment">
                <div class="step-card" style="border-left: 5px solid #f44336;">
                    <div class="step-header" onclick="toggleStep(this)">
                        <div class="step-icon" style="background: #ffebee; color: #c62828;"></div>
                        <div class="step-title">
                            <h2>Treatment Algorithm</h2>
                            <p>Stepwise approach to management</p>
                        </div>
                        <div class="expand-icon"></div>
                    </div>
                    <div class="step-content">
                        <div class="subsection">
                            <h3> General Measures <span class="badge badge-stable">All Patients</span></h3>
                            <div class="risk-factors-grid">
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Patient Education</strong>
                                        <div style="font-size: 0.85em;">Not infectious, not poor hygiene</div>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Smoking Cessation</strong>
                                        <div style="font-size: 0.85em;">Critical intervention</div>
                                        <span class="badge badge-caution">High priority</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Weight Management</strong>
                                        <div style="font-size: 0.85em;">GLP-1 agonists if obese</div>
                                        <span class="badge badge-caution">Improves outcomes</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Wound Care</strong>
                                        <div style="font-size: 0.85em;">Absorbent dressings</div>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Pain Management</strong>
                                        <div style="font-size: 0.85em;">NSAIDs first line</div>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Psychological Support</strong>
                                        <div style="font-size: 0.85em;">Screen for depression/anxiety</div>
                                        <span class="badge badge-urgent">Important</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Medical Therapy - Stepwise Approach</h3>
                            <div class="treatment-flow">
                                <div class="treatment-step">
                                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                        <span class="badge badge-stable">STEP 1</span>
                                        <strong style="margin-left: 10px;">Mild Disease (Hurley I)</strong>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Topical Clindamycin 1%</span>
                                                <span class="drug-type">Topical</span>
                                            </div>
                                            <div class="drug-dosage">Twice daily to affected regions</div>
                                            <div class="drug-indications">First line for mild disease</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Antiseptic Wash</span>
                                                <span class="drug-type">Adjunct</span>
                                            </div>
                                            <div class="drug-dosage">4% Chlorhexidine solution</div>
                                            <div class="drug-indications">Limited evidence but commonly used</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Intralesional Steroid</span>
                                                <span class="drug-type">Injection</span>
                                            </div>
                                            <div class="drug-dosage">Triamcinolone acetonide 10-40mg/mL</div>
                                            <div class="drug-indications">Individual inflammatory lesions</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="treatment-step">
                                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                        <span class="badge badge-caution">STEP 2</span>
                                        <strong style="margin-left: 10px;">Moderate Disease (Hurley II)</strong>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Oral Tetracyclines</span>
                                                <span class="drug-type">Systemic</span>
                                            </div>
                                            <div class="drug-dosage">
                                                <ul style="margin: 5px 0; padding-left: 20px;">
                                                    <li>Doxycycline 100mg OD/BD</li>
                                                    <li>Lymecycline 408mg OD</li>
                                                    <li>Minocycline 100mg BD</li>
                                                </ul>
                                            </div>
                                            <div class="drug-indications">12 weeks course, reassess after</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Clindamycin + Rifampicin</span>
                                                <span class="drug-type">Combination</span>
                                            </div>
                                            <div class="drug-dosage">
                                                Clindamycin 300mg BD + Rifampicin 300mg BD<br>
                                                <small>Alternative: 150mg OD each if intolerant</small>
                                            </div>
                                            <div class="drug-indications">10-12 weeks, for severe or refractory disease</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="treatment-step">
                                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                        <span class="badge badge-urgent">STEP 3</span>
                                        <strong style="margin-left: 10px;">Severe/Refractory Disease (Hurley III)</strong>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                        <div class="drug-card" style="border: 2px solid #4caf50;">
                                            <div class="drug-header">
                                                <span class="drug-name">Adalimumab</span>
                                                <span class="drug-type">Biologic</span>
                                                <span class="badge badge-stable">First line</span>
                                            </div>
                                            <div class="drug-dosage">
                                                Loading: 160mg  80mg (2 weeks)<br>
                                                Maintenance: 40mg weekly OR 80mg every 2 weeks
                                            </div>
                                            <div class="drug-indications">Anti-TNF, 41-60% achieve HiSCR50 at 12 weeks</div>
                                        </div>
                                        <div class="drug-card" style="border: 2px solid #2196f3;">
                                            <div class="drug-header">
                                                <span class="drug-name">Secukinumab</span>
                                                <span class="drug-type">Biologic</span>
                                            </div>
                                            <div class="drug-dosage">
                                                Loading: 300mg weekly for 5 doses<br>
                                                Maintenance: 300mg every 4 weeks (can increase to 2 weekly)
                                            </div>
                                            <div class="drug-indications">IL-17A inhibitor, 42-46% achieve HiSCR50</div>
                                        </div>
                                        <div class="drug-card" style="border: 2px solid #ff9800;">
                                            <div class="drug-header">
                                                <span class="drug-name">Bimekizumab</span>
                                                <span class="drug-type">Biologic</span>
                                            </div>
                                            <div class="drug-dosage">
                                                Loading: 320mg every 2 weeks (weeks 0-16)<br>
                                                Maintenance: 320mg every 4 weeks (from week 20)
                                            </div>
                                            <div class="drug-indications">IL-17A/F inhibitor, 48-52% achieve HiSCR50</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">IV Antibiotics</span>
                                                <span class="drug-type">Rescue</span>
                                            </div>
                                            <div class="drug-dosage">
                                                Ertapenem 1g OD for 6 weeks<br>
                                                OR Piperacillin/Tazobactam 13.5g daily for 6 weeks
                                            </div>
                                            <div class="drug-indications">Severe flares unresponsive to oral therapy</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="treatment-step">
                                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                        <span class="badge badge-info">ALTERNATIVE</span>
                                        <strong style="margin-left: 10px;">Other Systemic Agents</strong>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Acitretin</span>
                                                <span class="drug-type">Retinoid</span>
                                            </div>
                                            <div class="drug-dosage">0.25-0.50 mg/kg/day</div>
                                            <div class="drug-indications">Males or non-fertile females only, 3-year contraception</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Dapsone</span>
                                                <span class="drug-type">Immunomodulatory</span>
                                            </div>
                                            <div class="drug-dosage">Up to 200mg/day for minimum 3 months</div>
                                            <div class="drug-indications">Blood test monitoring required</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Metformin MR</span>
                                                <span class="drug-type">Anti-diabetic</span>
                                            </div>
                                            <div class="drug-dosage">Start 500mg daily, titrate up to 2-3g daily</div>
                                            <div class="drug-indications">Beneficial in PCOS, prediabetes, diabetes</div>
                                        </div>
                                        <div class="drug-card">
                                            <div class="drug-header">
                                                <span class="drug-name">Spironolactone</span>
                                                <span class="drug-type">Anti-androgen</span>
                                            </div>
                                            <div class="drug-dosage">25-100mg/day</div>
                                            <div class="drug-indications">Non-pregnant women with hyperandrogenism</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Surgical Options</h3>
                            <p style="margin-bottom: 15px;">Surgery is an effective treatment that should be used in combination with medical intervention.</p>
                            
                            <div class="surgical-options">
                                <div class="surgical-card">
                                    <div class="surgical-type">Incision & Drainage</div>
                                    <div class="surgical-indication">
                                        <strong>Indication:</strong> Acute abscesses for immediate relief
                                        <span class="badge badge-caution">High recurrence</span>
                                    </div>
                                    <div class="surgical-outcome">
                                        <strong>Outcome:</strong> Almost 100% recurrence rate<br>
                                        <strong>Healing:</strong> Secondary intention
                                    </div>
                                </div>

                                <div class="surgical-card">
                                    <div class="surgical-type">Deroofing (Unroofing)</div>
                                    <div class="surgical-indication">
                                        <strong>Indication:</strong> Persistent nodules, abscesses, sinus tracts
                                        <span class="badge badge-stable">Definitive</span>
                                    </div>
                                    <div class="surgical-outcome">
                                        <strong>Outcome:</strong> 85-90% success rate<br>
                                        <strong>Healing:</strong> Secondary intention (4-8 weeks)
                                    </div>
                                </div>

                                <div class="surgical-card">
                                    <div class="surgical-type">Wide Local Excision</div>
                                    <div class="surgical-indication">
                                        <strong>Indication:</strong> Persistent disease, sinus tracts
                                        <span class="badge badge-caution">Moderate disease</span>
                                    </div>
                                    <div class="surgical-outcome">
                                        <strong>Outcome:</strong> Lower recurrence<br>
                                        <strong>Healing:</strong> Primary or secondary closure
                                    </div>
                                </div>

                                <div class="surgical-card">
                                    <div class="surgical-type">Radical Excisional Surgery</div>
                                    <div class="surgical-indication">
                                        <strong>Indication:</strong> Severe diffuse disease (Hurley III)
                                        <span class="badge badge-urgent">Last resort</span>
                                    </div>
                                    <div class="surgical-outcome">
                                        <strong>Outcome:</strong> Highest cure rate<br>
                                        <strong>Healing:</strong> Flap repair or NPWT
                                    </div>
                                </div>
                            </div>

                            <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-top: 20px;">
                                <h4 style="color: #ef6c00;"> Surgical Considerations</h4>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>Continue biologics during surgery (usually safe)</li>
                                    <li>Post-operative healing may take several months</li>
                                    <li>Risks: wound breakdown, numbness, recurrence</li>
                                    <li>Most effective when combined with medical therapy</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Emerging Treatments</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="drug-card">
                                    <div class="drug-header">
                                        <span class="drug-name">Amlitelimab</span>
                                        <span class="drug-type">OX40 inhibitor</span>
                                    </div>
                                    <div class="drug-indications">Phase II/III development</div>
                                </div>
                                <div class="drug-card">
                                    <div class="drug-header">
                                        <span class="drug-name">Eltrekibart</span>
                                        <span class="drug-type">CXCR 1/2 inhibitor</span>
                                    </div>
                                    <div class="drug-indications">Phase II/III development</div>
                                </div>
                                <div class="drug-card">
                                    <div class="drug-header">
                                        <span class="drug-name">Lutikizumab</span>
                                        <span class="drug-type">IL-1/ inhibitor</span>
                                    </div>
                                    <div class="drug-indications">Phase II/III development</div>
                                </div>
                                <div class="drug-card">
                                    <div class="drug-header">
                                        <span class="drug-name">Povorcitinib</span>
                                        <span class="drug-type">JAK1 inhibitor</span>
                                    </div>
                                    <div class="drug-indications">Phase II/III development</div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Treatment Selection Flowchart</h3>
                            <div class="flow-chart">
                                <div class="flow-item" onclick="showTreatmentDetails('step1')">
                                    <div style="font-weight: bold;">Severity Assessment</div>
                                    <div style="font-size: 0.8em;">Hurley stage & IHS4</div>
                                </div>
                                <div class="flow-arrow"></div>
                                <div class="flow-item" onclick="showTreatmentDetails('step2')">
                                    <div style="font-weight: bold;">Topical/Local</div>
                                    <div style="font-size: 0.8em;">Stage I disease</div>
                                </div>
                                <div class="flow-arrow"></div>
                                <div class="flow-item" onclick="showTreatmentDetails('step3')">
                                    <div style="font-weight: bold;">Oral Antibiotics</div>
                                    <div style="font-size: 0.8em;">Stage II or refractory</div>
                                </div>
                                <div class="flow-arrow"></div>
                                <div class="flow-item" onclick="showTreatmentDetails('step4')">
                                    <div style="font-weight: bold;">Biologics</div>
                                    <div style="font-size: 0.8em;">Stage III or refractory</div>
                                </div>
                                <div class="flow-arrow"></div>
                                <div class="flow-item" onclick="showTreatmentDetails('step5')">
                                    <div style="font-weight: bold;">Surgery</div>
                                    <div style="font-size: 0.8em;">All stages, adjunctive</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Follow-up Section -->
            <section class="step-section" id="follow-up">
                <div class="step-card" style="border-left: 5px solid #4caf50;">
                    <div class="step-header" onclick="toggleStep(this)">
                        <div class="step-icon" style="background: #e8f5e9; color: #388e3c;"></div>
                        <div class="step-title">
                            <h2>Follow-up & Monitoring</h2>
                            <p>Long-term management and outcome assessment</p>
                        </div>
                        <div class="expand-icon"></div>
                    </div>
                    <div class="step-content">
                        <div class="subsection">
                            <h3> Follow-up Schedule</h3>
                            <div class="follow-up-timeline">
                                <div class="timeline-item">
                                    <div class="timeline-time">Week 1-2</div>
                                    <div>
                                        <strong>Initial Review</strong>
                                        <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.9em;">
                                            <li>Assess treatment tolerance</li>
                                            <li>Check for adverse effects</li>
                                            <li>Reinforce lifestyle measures</li>
                                            <li>Wound care assessment</li>
                                        </ul>
                                        <span class="badge badge-stable">Phone/virtual acceptable</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-time">Week 4-6</div>
                                    <div>
                                        <strong>Early Assessment</strong>
                                        <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.9em;">
                                            <li>Clinical examination</li>
                                            <li>Lesion count and IHS4</li>
                                            <li>Pain and QoL assessment</li>
                                            <li>Adherence check</li>
                                        </ul>
                                        <span class="badge badge-caution">Face-to-face preferred</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-time">Week 12</div>
                                    <div>
                                        <strong>Treatment Response</strong>
                                        <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.9em;">
                                            <li>Primary endpoint assessment</li>
                                            <li>HiSCR50/75/90 calculation</li>
                                            <li>Consider switching if inadequate response</li>
                                            <li>Evaluate need for surgical intervention</li>
                                        </ul>
                                        <span class="badge badge-urgent">Critical assessment</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-time">Month 6</div>
                                    <div>
                                        <strong>Long-term Evaluation</strong>
                                        <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.9em;">
                                            <li>Disease control assessment</li>
                                            <li>Comorbidity screening</li>
                                            <li>Psychological support review</li>
                                            <li>Surgical options if needed</li>
                                        </ul>
                                        <span class="badge badge-stable">Maintenance phase</span>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-time">Ongoing</div>
                                    <div>
                                        <strong>Maintenance & Prevention</strong>
                                        <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.9em;">
                                            <li>3-6 monthly reviews</li>
                                            <li>Continuous lifestyle support</li>
                                            <li>Flare management plan</li>
                                            <li>Patient education reinforcement</li>
                                        </ul>
                                        <span class="badge badge-info">Individualize frequency</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Outcome Measures</h3>
                            <div class="score-calculator">
                                <h4>HiSCR (Hidradenitis Suppurativa Clinical Response)</h4>
                                <p style="font-size: 0.9em;">Defined as reduction in inflammatory lesion count with no increase in abscesses or draining fistulas:</p>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                                    <div style="text-align: center; padding: 15px; background: #e8f5e9; border-radius: 8px;">
                                        <div style="font-size: 1.5em; font-weight: bold; color: #2e7d32;">HiSCR50</div>
                                        <div style="font-size: 0.85em;">50% reduction</div>
                                        <div style="font-size: 0.8em; color: #666;">Primary endpoint in trials</div>
                                    </div>
                                    <div style="text-align: center; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                                        <div style="font-size: 1.5em; font-weight: bold; color: #1976d2;">HiSCR75</div>
                                        <div style="font-size: 0.85em;">75% reduction</div>
                                        <div style="font-size: 0.8em; color: #666;">Secondary endpoint</div>
                                    </div>
                                    <div style="text-align: center; padding: 15px; background: #f3e5f5; border-radius: 8px;">
                                        <div style="font-size: 1.5em; font-weight: bold; color: #7b1fa2;">HiSCR90</div>
                                        <div style="font-size: 0.85em;">90% reduction</div>
                                        <div style="font-size: 0.8em; color: #666;">Stringent response</div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label>Baseline lesion count:</label>
                                        <input type="number" id="baseline-count" min="0" value="0" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label>Current lesion count:</label>
                                        <input type="number" id="current-count" min="0" value="0" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    </div>
                                </div>
                                <button onclick="calculateHiSCR()" style="margin-top: 15px; padding: 8px 20px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                    Calculate Response
                                </button>
                                <div id="hiscr-result" style="margin-top: 15px; font-weight: bold;"></div>
                            </div>

                            <div style="margin-top: 20px;">
                                <h4>Quality of Life Assessment</h4>
                                <div class="assessment-grid">
                                    <div class="assessment-item">
                                        <h5>HiSQOL Score</h5>
                                        <p style="font-size: 0.9em;">HS-specific quality of life measure</p>
                                        <button onclick="showHiSQOL()" style="padding: 8px 15px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85em;">
                                            Take HiSQOL
                                        </button>
                                    </div>
                                    <div class="assessment-item">
                                        <h5>Pain Scale</h5>
                                        <p style="font-size: 0.9em;">Visual Analogue Scale (VAS)</p>
                                        <input type="range" min="0" max="10" value="0" style="width: 100%;" oninput="updatePainScore(this.value)">
                                        <div style="text-align: center; margin-top: 5px;">
                                            <span id="pain-score">0</span>/10
                                        </div>
                                    </div>
                                    <div class="assessment-item">
                                        <h5>DLQI Score</h5>
                                        <p style="font-size: 0.9em;">Dermatology Life Quality Index</p>
                                        <button onclick="showDLQI()" style="padding: 8px 15px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85em;">
                                            Take DLQI
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Complications to Monitor</h3>
                            <div class="risk-factors-grid">
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Secondary Infection</strong>
                                        <div style="font-size: 0.85em;">Take swabs if purulent</div>
                                        <span class="badge badge-caution">Antibiotics</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Scarring & Contractures</strong>
                                        <div style="font-size: 0.85em;">Limit mobility</div>
                                        <span class="badge badge-info">Physiotherapy</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Lymphoedema</strong>
                                        <div style="font-size: 0.85em;">Chronic inflammation</div>
                                        <span class="badge badge-caution">Compression</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Squamous Cell Carcinoma</strong>
                                        <div style="font-size: 0.85em;">Long-standing disease</div>
                                        <span class="badge badge-urgent">Biopsy if suspicious</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Psychological Impact</strong>
                                        <div style="font-size: 0.85em;">Depression, anxiety, suicidal ideation</div>
                                        <span class="badge badge-urgent">Screen regularly</span>
                                    </div>
                                </div>
                                <div class="risk-factor">
                                    <span class="risk-factor-icon"></span>
                                    <div>
                                        <strong>Anaemia of Chronic Disease</strong>
                                        <div style="font-size: 0.85em;">Chronic inflammation</div>
                                        <span class="badge badge-info">Monitor FBC</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Monitoring Checklist</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div class="assessment-item">
                                    <h4>Clinical Monitoring</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li><input type="checkbox"> Lesion count and type</li>
                                        <li><input type="checkbox"> Pain assessment</li>
                                        <li><input type="checkbox"> Drainage amount</li>
                                        <li><input type="checkbox"> Scarring assessment</li>
                                        <li><input type="checkbox"> Body surface area affected</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Systemic Monitoring</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li><input type="checkbox"> Weight/BMI</li>
                                        <li><input type="checkbox"> Blood pressure</li>
                                        <li><input type="checkbox"> HbA1c (diabetes screen)</li>
                                        <li><input type="checkbox"> Lipid profile</li>
                                        <li><input type="checkbox"> Inflammatory markers</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Psychosocial Monitoring</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li><input type="checkbox"> Depression screening (PHQ-9)</li>
                                        <li><input type="checkbox"> Anxiety screening (GAD-7)</li>
                                        <li><input type="checkbox"> Quality of life (HiSQOL/DLQI)</li>
                                        <li><input type="checkbox"> Work/social impact</li>
                                        <li><input type="checkbox"> Suicidal ideation</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Treatment Monitoring</h4>
                                    <ul style="list-style: none; padding: 0; font-size: 0.9em;">
                                        <li><input type="checkbox"> Adherence assessment</li>
                                        <li><input type="checkbox"> Adverse effects</li>
                                        <li><input type="checkbox"> Drug levels (if applicable)</li>
                                        <li><input type="checkbox"> Treatment response (HiSCR)</li>
                                        <li><input type="checkbox"> Need for surgery</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Patient Education & Self-Care</h3>
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 8px;">
                                <h4 style="color: #1976d2;">Key Messages for Patients</h4>
                                <div class="risk-factors-grid">
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Not contagious</strong>
                                            <div style="font-size: 0.85em;">Cannot be passed to others</div>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Not due to poor hygiene</strong>
                                            <div style="font-size: 0.85em;">Reassurance important</div>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Stop smoking</strong>
                                            <div style="font-size: 0.85em;">Critical for improvement</div>
                                            <span class="badge badge-urgent">High impact</span>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Weight management</strong>
                                            <div style="font-size: 0.85em;">Reduces friction and inflammation</div>
                                            <span class="badge badge-caution">Improves outcomes</span>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Wear loose clothing</strong>
                                            <div style="font-size: 0.85em;">Reduces friction</div>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Avoid shaving affected areas</strong>
                                            <div style="font-size: 0.85em;">Consider depilation if needed</div>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Proper wound care</strong>
                                            <div style="font-size: 0.85em;">Use absorbent dressings</div>
                                        </div>
                                    </div>
                                    <div class="risk-factor">
                                        <span class="risk-factor-icon"></span>
                                        <div>
                                            <strong>Stress management</strong>
                                            <div style="font-size: 0.85em;">May reduce flares</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> When to Seek Urgent Help</h3>
                            <div style="background: #ffebee; padding: 20px; border-radius: 8px; border-left: 4px solid #f44336;">
                                <h4 style="color: #c62828; margin-bottom: 10px;"> Red Flags</h4>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li>Severe pain not controlled with analgesics</li>
                                    <li>Rapidly spreading redness or swelling</li>
                                    <li>Systemic symptoms (fever, malaise)</li>
                                    <li>New ulceration or rapid growth of lesions</li>
                                    <li>Signs of secondary infection</li>
                                    <li>Severe psychological distress or suicidal thoughts</li>
                                    <li>Sudden worsening after period of stability</li>
                                </ul>
                                <div style="margin-top: 15px; padding: 10px; background: white; border-radius: 4px;">
                                    <strong>Emergency Contact:</strong> Urgent care or dermatology team
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3> Long-term Prognosis</h3>
                            <div class="assessment-grid">
                                <div class="assessment-item">
                                    <h4>Disease Course</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Chronic relapsing condition</li>
                                        <li> May improve after menopause</li>
                                        <li> Scarring is irreversible</li>
                                        <li> Early treatment improves outcomes</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Good Prognostic Factors</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Early diagnosis and treatment</li>
                                        <li> Smoking cessation</li>
                                        <li> Weight reduction</li>
                                        <li> Good treatment adherence</li>
                                    </ul>
                                </div>
                                <div class="assessment-item">
                                    <h4>Poor Prognostic Factors</h4>
                                    <ul style="list-style: none; padding: 0;">
                                        <li> Delayed diagnosis</li>
                                        <li> Hurley stage III at presentation</li>
                                        <li> Continued smoking</li>
                                        <li> Multiple comorbidities</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 15px;">
                                <h4 style="color: #2e7d32;">Key Takeaway</h4>
                                <p style="margin: 0;">Hidradenitis suppurativa is a chronic condition requiring long-term management. Multidisciplinary care, early intervention, and addressing modifiable risk factors significantly improve quality of life and disease outcomes.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div class="floating-action-button" onclick="toggleFullscreen()" title="Toggle Fullscreen">
        <span id="fab-icon"></span>
    </div>

    <div class="tooltip" id="global-tooltip"></div>

    <script>
        // State management
        const state = {
            currentStep: 'assessment',
            expandedSections: new Set(['assessment']),
            diagnosisProgress: 0,
            ihs4Score: 0,
            baselineLesions: 0,
            currentLesions: 0,
            painScore: 0
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing HS Clinical Algorithm...');
            initializeEventListeners();
            setupIntersectionObserver();
            createTooltips();
            initializeCalculators();
            
            // Add keyboard navigation
            document.addEventListener('keydown', handleKeyboardNavigation);
            
            // Add scroll progress indicator
            window.addEventListener('scroll', updateScrollProgress);
            
            console.log('Application initialized successfully');
        });

        // Event listeners setup
        function initializeEventListeners() {
            // Progress sidebar navigation
            document.querySelectorAll('.progress-item').forEach(item => {
                item.addEventListener('click', function() {
                    const step = this.dataset.step;
                    scrollToSection(step);
                });
            });

            // Step card hover effects
            document.querySelectorAll('.step-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px)';
                    this.style.boxShadow = '0 15px 35px rgba(0,0,0,0.25)';
                });

                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.2)';
                });
            });
            
            // Badge interactions
            document.querySelectorAll('.badge').forEach(badge => {
                badge.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';
                });
                
                badge.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                });
            });
        }

        // Intersection observer for scroll animations
        function setupIntersectionObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        updateActiveProgressItem(entry.target.id);
                    }
                });
            }, {
                threshold: 0.3,
                rootMargin: '0px 0px -100px 0px'
            });

            document.querySelectorAll('.step-section').forEach(section => {
                observer.observe(section);
            });
        }

        // Tooltip system
        function createTooltips() {
            const tooltip = document.getElementById('global-tooltip');
            const elementsWithTooltips = document.querySelectorAll('[data-tooltip]');
            
            elementsWithTooltips.forEach(element => {
                element.addEventListener('mouseenter', function(e) {
                    const text = this.getAttribute('data-tooltip');
                    tooltip.textContent = text;
                    tooltip.classList.add('show');
                });
                
                element.addEventListener('mousemove', function(e) {
                    tooltip.style.left = (e.clientX + 10) + 'px';
                    tooltip.style.top = (e.clientY - 30) + 'px';
                });
                
                element.addEventListener('mouseleave', function() {
                    tooltip.classList.remove('show');
                });
            });
        }

        // Initialize calculators
        function initializeCalculators() {
            // IHS4 calculator
            const ihs4Inputs = ['nodules', 'abscesses', 'sinuses'];
            ihs4Inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', calculateIHS4);
                }
            });
            
            // HiSCR calculator
            const lesionInputs = ['baseline-count', 'current-count'];
            lesionInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', calculateHiSCR);
                }
            });
        }

        // Toggle step content
        function toggleStep(header) {
            const card = header.closest('.step-card');
            const content = card.querySelector('.step-content');
            const expandIcon = header.querySelector('.expand-icon');
            const sectionId = card.closest('.step-section').id;
            
            if (state.expandedSections.has(sectionId)) {
                content.classList.remove('expanded');
                expandIcon.style.transform = 'rotate(0deg)';
                state.expandedSections.delete(sectionId);
            } else {
                content.classList.add('expanded');
                expandIcon.style.transform = 'rotate(180deg)';
                state.expandedSections.add(sectionId);
            }
            
            // Add animation effect
            card.style.transform = 'scale(1.02)';
            setTimeout(() => {
                card.style.transform = '';
            }, 150);
        }

        // Scroll to section with smooth animation
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                const offsetTop = section.offsetTop - 100;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
                
                // Auto-expand the target section
                setTimeout(() => {
                    const card = section.querySelector('.step-card');
                    const content = card.querySelector('.step-content');
                    const expandIcon = card.querySelector('.expand-icon');
                    
                    if (!state.expandedSections.has(sectionId)) {
                        content.classList.add('expanded');
                        expandIcon.style.transform = 'rotate(180deg)';
                        state.expandedSections.add(sectionId);
                    }
                }, 300);
            }
        }

        // Update active progress item
        function updateActiveProgressItem(sectionId) {
            state.currentStep = sectionId;
            
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.step === sectionId) {
                    item.classList.add('active');
                }
            });
        }

        // Calculate IHS4 score
        function calculateIHS4() {
            const nodules = parseInt(document.getElementById('nodules')?.value || 0);
            const abscesses = parseInt(document.getElementById('abscesses')?.value || 0);
            const sinuses = parseInt(document.getElementById('sinuses')?.value || 0);
            
            const score = nodules + (abscesses * 2) + (sinuses * 4);
            state.ihs4Score = score;
            
            const scoreDisplay = document.getElementById('ihs4-score');
            if (scoreDisplay) {
                scoreDisplay.textContent = score;
                scoreDisplay.classList.add('updated');
                setTimeout(() => scoreDisplay.classList.remove('updated'), 300);
            }
            
            // Update severity indicators
            const mildIndicator = document.querySelector('.severity-mild');
            const moderateIndicator = document.querySelector('.severity-moderate');
            const severeIndicator = document.querySelector('.severity-severe');
            
            // Reset all
            [mildIndicator, moderateIndicator, severeIndicator].forEach(indicator => {
                if (indicator) {
                    indicator.style.opacity = '0.3';
                    indicator.style.transform = 'scale(1)';
                }
            });
            
            // Highlight appropriate severity
            if (score < 3) {
                if (mildIndicator) {
                    mildIndicator.style.opacity = '1';
                    mildIndicator.style.transform = 'scale(1.1)';
                }
            } else if (score <= 10) {
                if (moderateIndicator) {
                    moderateIndicator.style.opacity = '1';
                    moderateIndicator.style.transform = 'scale(1.1)';
                }
            } else {
                if (severeIndicator) {
                    severeIndicator.style.opacity = '1';
                    severeIndicator.style.transform = 'scale(1.1)';
                }
            }
            
            // Add animation effect
            const calculator = document.querySelector('.score-calculator');
            calculator.style.transform = 'scale(1.02)';
            setTimeout(() => {
                calculator.style.transform = '';
            }, 200);
            
            updateTreatmentRecommendation();
        }

        // Calculate HiSCR
        function calculateHiSCR() {
            const baseline = parseInt(document.getElementById('baseline-count')?.value || 0);
            const current = parseInt(document.getElementById('current-count')?.value || 0);
            
            if (baseline === 0) {
                document.getElementById('hiscr-result').innerHTML = '<span style="color: #999;">Enter baseline lesion count</span>';
                return;
            }
            
            const reduction = ((baseline - current) / baseline) * 100;
            let response = '';
            let badgeClass = '';
            
            if (reduction >= 90) {
                response = `HiSCR90 achieved! (${reduction.toFixed(1)}% reduction)`;
                badgeClass = 'severity-mild';
            } else if (reduction >= 75) {
                response = `HiSCR75 achieved! (${reduction.toFixed(1)}% reduction)`;
                badgeClass = 'severity-moderate';
            } else if (reduction >= 50) {
                response = `HiSCR50 achieved! (${reduction.toFixed(1)}% reduction)`;
                badgeClass = 'severity-caution';
            } else {
                response = `No HiSCR achieved (${reduction.toFixed(1)}% reduction)`;
                badgeClass = 'severity-severe';
            }
            
            const resultDiv = document.getElementById('hiscr-result');
            if (resultDiv) {
                resultDiv.innerHTML = `<span class="severity-indicator ${badgeClass}">${response}</span>`;
            }
            
            // Add animation
            const calculator = document.querySelector('.score-calculator');
            calculator.style.transform = 'scale(1.02)';
            setTimeout(() => {
                calculator.style.transform = '';
            }, 200);
        }

        // Update diagnosis progress
        function updateDiagnosisProgress() {
            const checkboxes = document.querySelectorAll('#criteria1, #criteria2, #criteria3');
            const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
            
            state.diagnosisProgress = checkedCount;
            
            // Update UI
            document.getElementById('criteria-count').textContent = `${checkedCount}/3`;
            document.getElementById('progress-bar').style.width = `${(checkedCount / 3) * 100}%`;
            
            const statusDiv = document.getElementById('diagnosis-status');
            const confirmedDiv = document.getElementById('diagnosis-confirmed');
            const alertDiv = document.getElementById('diagnosis-alert');
            
            if (checkedCount === 3) {
                statusDiv.textContent = 'Confirmed';
                statusDiv.style.background = '#c8e6c9';
                statusDiv.style.color = '#2e7d32';
                confirmedDiv.style.display = 'block';
                alertDiv.style.display = 'none';
                
                // Add success animation
                statusDiv.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    statusDiv.style.transform = 'scale(1)';
                }, 200);
                
                // Auto-scroll to treatment after delay
                setTimeout(() => {
                    scrollToSection('treatment');
                }, 1500);
            } else if (checkedCount === 2) {
                statusDiv.textContent = 'Pending';
                statusDiv.style.background = '#ffecb3';
                statusDiv.style.color = '#f57f17';
                confirmedDiv.style.display = 'none';
                alertDiv.style.display = 'none';
            } else if (checkedCount === 1) {
                statusDiv.textContent = 'Insufficient';
                statusDiv.style.background = '#ffebee';
                statusDiv.style.color = '#c62828';
                confirmedDiv.style.display = 'none';
                alertDiv.style.display = 'none';
            } else {
                statusDiv.textContent = 'Not Confirmed';
                statusDiv.style.background = '#ffebee';
                statusDiv.style.color = '#c62828';
                confirmedDiv.style.display = 'none';
                alertDiv.style.display = 'none';
            }
            
            // Add pulse effect to checkboxes
            checkboxes.forEach((checkbox, index) => {
                if (checkbox.checked) {
                    const label = checkbox.nextElementSibling;
                    label.style.color = '#2e7d32';
                    label.style.fontWeight = '500';
                } else {
                    const label = checkbox.nextElementSibling;
                    label.style.color = '';
                    label.style.fontWeight = '';
                }
            });
        }

        // Tab switching functions
        function showDifferential(type) {
            // Hide all tabs
            document.querySelectorAll('#infections, #cysts, #autoimmune, #malignant').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(type).classList.add('active');
            
            // Update button states
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach((button, index) => {
                const types = ['infections', 'cysts', 'autoimmune', 'malignant'];
                if (types[index] === type) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
            
            // Add animation
            const activeTab = document.getElementById(type);
            activeTab.style.transform = 'translateY(10px)';
            activeTab.style.opacity = '0';
            setTimeout(() => {
                activeTab.style.transform = '';
                activeTab.style.opacity = '1';
            }, 100);
        }

        function showPhenotype(type) {
            // Hide all tabs
            document.querySelectorAll('#follicular, #inflammatory, #mixed, #syndromic').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(type).classList.add('active');
            
            // Update button states
            const buttons = document.querySelectorAll('.tab-button');
            const phenotypeButtons = Array.from(buttons).slice(4, 8); // Phenotype buttons are 5-8
            const types = ['follicular', 'inflammatory', 'mixed', 'syndromic'];
            
            phenotypeButtons.forEach((button, index) => {
                if (types[index] === type) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }

        function showHurleyDetails(stage) {
            const details = {
                'I': 'Single or multiple abscesses without sinus tracts and scarring. Response to medical therapy is typically good.',
                'II': 'Recurrent abscesses with sinus tracts and scarring. May require combination therapy.',
                'III': 'Diffuse or multiple interconnected sinus tracts and abscesses across entire area. Surgical intervention often needed.'
            };
            
            alert(`Hurley Stage ${stage}:\n\n${details[stage]}`);
        }

        function showTreatmentDetails(step) {
            const details = {
                'step1': 'Assess disease severity using Hurley staging and IHS4 score to guide treatment selection.',
                'step2': 'For mild disease (Hurley I), start with topical clindamycin and antiseptic washes.',
                'step3': 'Moderate disease (Hurley II) requires oral antibiotics (tetracyclines or clindamycin-rifampicin).',
                'step4': 'Severe disease (Hurley III) or refractory cases need biologic therapy (adalimumab, secukinumab, or bimekizumab).',
                'step5': 'Surgical intervention is adjunctive and can be performed at any stage for persistent lesions.'
            };
            
            alert(`Treatment Step: ${step.replace('step', 'Step ')}\n\n${details[step]}`);
        }

        function showAnatomicalDiagram() {
            alert('Anatomical Diagram:\n\nCommon HS locations:\n Axillae (70% of patients)\n Groin/perianal (50%)\n Inframammary folds\n Buttocks\n Perineum\n\nClick on locations to see typical presentation patterns.');
        }

        function showHiSQOL() {
            alert('HiSQOL (Hidradenitis Suppurativa Quality of Life) questionnaire:\n\nA validated HS-specific QoL measure with 17 questions across 6 domains:\n1. Pain and physical symptoms\n2. Daily activities\n3. Work/school activities\n4. Social activities\n5. Intimate relationships\n6. Psychological well-being\n\nScore: 0-100, higher scores = better QoL');
        }

        function showDLQI() {
            alert('DLQI (Dermatology Life Quality Index):\n\nA general dermatology QoL measure with 10 questions.\n\nScore interpretation:\n 0-1: No effect on QoL\n 2-5: Small effect\n 6-10: Moderate effect\n 11-20: Very large effect\n 21-30: Extremely large effect');
        }

        function updatePainScore(value) {
            state.painScore = parseInt(value);
            document.getElementById('pain-score').textContent = value;
            
            // Update color based on severity
            const scoreDisplay = document.getElementById('pain-score');
            const colors = {
                0: '#10b981', 1: '#10b981', 2: '#10b981', 3: '#f59e0b',
                4: '#f59e0b', 5: '#f59e0b', 6: '#ef4444', 7: '#ef4444',
                8: '#ef4444', 9: '#ef4444', 10: '#ef4444'
            };
            scoreDisplay.style.color = colors[value] || '#ef4444';
        }

        function updateTreatmentRecommendation() {
            // This function could provide treatment recommendations based on severity
            const ihs4Score = state.ihs4Score;
            
            // Find the treatment step card
            const treatmentStep = document.querySelector('#treatment .treatment-step:nth-child(3)'); // Step 3 is biologics
            if (treatmentStep && ihs4Score > 10) {
                treatmentStep.style.borderLeftColor = '#ef4444';
                treatmentStep.style.background = 'rgba(239, 68, 68, 0.05)';
            }
        }

        // Keyboard navigation
        function handleKeyboardNavigation(e) {
            if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
                const steps = ['assessment', 'diagnosis', 'treatment', 'follow-up'];
                const currentIndex = steps.indexOf(state.currentStep);
                const nextIndex = Math.min(currentIndex + 1, steps.length - 1);
                scrollToSection(steps[nextIndex]);
            } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
                const steps = ['assessment', 'diagnosis', 'treatment', 'follow-up'];
                const currentIndex = steps.indexOf(state.currentStep);
                const prevIndex = Math.max(currentIndex - 1, 0);
                scrollToSection(steps[prevIndex]);
            } else if (e.key === 'Enter' && e.target.closest('.step-header')) {
                toggleStep(e.target.closest('.step-header'));
            }
        }

        // Scroll progress indicator
        function updateScrollProgress() {
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            
            // Could add a visual progress bar here if needed
            console.log(`Scroll progress: ${scrollPercent.toFixed(1)}%`);
        }

        // Fullscreen toggle
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    document.getElementById('fab-icon').textContent = '';
                }).catch(err => {
                    console.log('Fullscreen not supported');
                });
            } else {
                document.exitFullscreen().then(() => {
                    document.getElementById('fab-icon').textContent = '';
                });
            }
        }

        // Add tooltips to elements that need them
        function addTooltipsToElements() {
            const elements = [
                { selector: '.badge-urgent', tooltip: 'Urgent referral or action required' },
                { selector: '.badge-caution', tooltip: 'Proceed with caution' },
                { selector: '.badge-stable', tooltip: 'Stable management appropriate' },
                { selector: '.pulse-dot', tooltip: 'Critical criterion' }
            ];
            
            elements.forEach(({ selector, tooltip }) => {
                document.querySelectorAll(selector).forEach(element => {
                    element.setAttribute('data-tooltip', tooltip);
                });
            });
        }

        // Add interactive elements after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add pulse animation to critical elements
            document.querySelectorAll('.pulse-dot').forEach(dot => {
                dot.style.animation = 'pulse 1.5s infinite';
            });
            
            // Add hover effects to assessment items
            document.querySelectorAll('.assessment-item, .drug-card, .surgical-card').forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px)';
                    this.style.boxShadow = '0 8px 20px rgba(0,0,0,0.15)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                    this.style.boxShadow = '';
                });
            });
            
            // Add tooltips
            addTooltipsToElements();
            createTooltips();
        });

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                transform: translateX(400px);
                transition: transform 0.3s ease;
                max-width: 300px;
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.1);
            `;
            
            const colors = {
                info: 'linear-gradient(135deg, #3b82f6, #2563eb)',
                success: 'linear-gradient(135deg, #10b981, #059669)',
                warning: 'linear-gradient(135deg, #f59e0b, #d97706)',
                error: 'linear-gradient(135deg, #ef4444, #dc2626)'
            };
            
            notification.style.background = colors[type] || colors.info;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add some example notifications for user guidance
        setTimeout(() => {
            showNotification('Click on any section header to expand it', 'info');
        }, 2000);

        setTimeout(() => {
            showNotification('Use the checkboxes to track diagnostic criteria', 'info');
        }, 5000);

        // Export functions for global access
        window.toggleStep = toggleStep;
        window.scrollToSection = scrollToSection;
        window.calculateIHS4 = calculateIHS4;
        window.calculateHiSCR = calculateHiSCR;
        window.updateDiagnosisProgress = updateDiagnosisProgress;
        window.showDifferential = showDifferential;
        window.showPhenotype = showPhenotype;
        window.showHurleyDetails = showHurleyDetails;
        window.showTreatmentDetails = showTreatmentDetails;
        window.showAnatomicalDiagram = showAnatomicalDiagram;
        window.showHiSQOL = showHiSQOL;
        window.showDLQI = showDLQI;
        window.updatePainScore = updatePainScore;
        window.toggleFullscreen = toggleFullscreen;
    </script>
</body>
</html>