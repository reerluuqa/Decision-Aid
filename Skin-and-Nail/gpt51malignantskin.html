<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Malignant Skin Ulcer ‚Äì Interactive Algorithm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #0f172a;
      --bg-elevated: #020617;
      --border-subtle: rgba(148, 163, 184, 0.25);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --accent-blue: #3b82f6;
      --accent-purple: #a855f7;
      --accent-teal: #14b8a6;
      --accent-amber: #f97316;
      --accent-red: #ef4444;
      --accent-green: #22c55e;
      --card-radius: 18px;
      --transition-fast: 180ms ease-out;
      --transition-med: 260ms ease;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.8);
      --sidebar-width: 280px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2933 0, #020617 55%);
      color: var(--text-main);
      scroll-behavior: smooth;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    .app-shell {
      display: flex;
      max-width: 1200px;
      width: 100%;
      padding: 20px;
      gap: 20px;
    }

    /* Sidebar */

    .sidebar {
      position: sticky;
      top: 12px;
      align-self: flex-start;
      width: var(--sidebar-width);
      background: linear-gradient(150deg, #020617, #020617 60%, #0b1120);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow-soft);
    }

    .sidebar-title {
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 0 4px;
    }

    .sidebar-chip {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .sidebar-subtitle {
      margin: 4px 0 14px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .sidebar-progress {
      list-style: none;
      padding: 0;
      margin: 0 0 16px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #1e293b, #020617);
      border: 1px solid rgba(148, 163, 184, 0.4);
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 6px;
    }

    .sidebar-step {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 7px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.8rem;
      color: var(--text-muted);
      transition: background var(--transition-fast), color var(--transition-fast),
        transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .sidebar-step-bullet {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 2px solid rgba(148, 163, 184, 0.5);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.6rem;
    }

    .sidebar-step.active {
      background: linear-gradient(
        120deg,
        rgba(59, 130, 246, 0.15),
        rgba(129, 140, 248, 0.35)
      );
      color: #e5e7eb;
      box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.7);
      transform: translateX(1px);
    }

    .sidebar-step.active .sidebar-step-bullet {
      border-color: rgba(191, 219, 254, 0.9);
      background: radial-gradient(circle, #93c5fd, #1d4ed8);
      color: #0b1120;
    }

    .sidebar-step:hover:not(.active) {
      background: rgba(15, 23, 42, 0.8);
      color: #e5e7eb;
      transform: translateX(1px);
    }

    .sidebar-legend {
      border-top: 1px dashed rgba(148, 163, 184, 0.4);
      padding-top: 10px;
      margin-top: 6px;
    }

    .legend-title {
      text-transform: uppercase;
      font-size: 0.7rem;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .legend-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.7rem;
      color: var(--text-muted);
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
    }

    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
    }

    .dot-red {
      background: var(--accent-red);
    }

    .dot-amber {
      background: var(--accent-amber);
    }

    .dot-green {
      background: var(--accent-green);
    }

    /* Main content */

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 14px;
      max-width: 820px;
    }

    .page-header {
      padding: 14px 18px;
      border-radius: 22px;
      background: radial-gradient(circle at top left, #111827 0, #020617 55%);
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow: var(--shadow-soft);
    }

    .page-title {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 6px;
    }

    .page-title h1 {
      font-size: 1.2rem;
      margin: 0;
      letter-spacing: 0.02em;
    }

    .page-pill {
      font-size: 0.7rem;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    .page-header p {
      margin: 2px 0 0;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Cards */

    .card {
      border-radius: var(--card-radius);
      background: linear-gradient(145deg, #020617, #020617 55%, #02051b);
      border: 1px solid var(--border-subtle);
      overflow: hidden;
      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.9);
      transform-origin: center top;
      transition: box-shadow var(--transition-med), transform var(--transition-med),
        border-color var(--transition-med), background var(--transition-med);
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 48px rgba(15, 23, 42, 0.9);
      border-color: rgba(148, 163, 184, 0.65);
    }

    .card-header {
      width: 100%;
      border: none;
      background: transparent;
      color: inherit;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .card-header-left {
      display: flex;
      align-items: center;
      gap: 12px;
      text-align: left;
    }

    .icon-circle {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      background: radial-gradient(circle, #f9fafb, #e5e7eb);
      color: #020617;
      flex-shrink: 0;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.15);
    }

    .card-title {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .card-title-main {
      font-size: 0.96rem;
      font-weight: 600;
    }

    .card-title-sub {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .card-header-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .badge {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 3px 7px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      border: 1px solid transparent;
      background: rgba(15, 23, 42, 0.5);
      color: var(--text-muted);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
        filter var(--transition-fast);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: currentColor;
    }

    .badge-red {
      background: rgba(127, 29, 29, 0.9);
      border-color: rgba(239, 68, 68, 0.8);
      color: #fee2e2;
    }

    .badge-amber {
      background: rgba(120, 53, 15, 0.9);
      border-color: rgba(251, 146, 60, 0.8);
      color: #ffedd5;
    }

    .badge-green {
      background: rgba(20, 83, 45, 0.9);
      border-color: rgba(52, 211, 153, 0.8);
      color: #dcfce7;
    }

    .badge:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.18);
      filter: brightness(1.05);
    }

    .chevron {
      font-size: 0.85rem;
      transform: rotate(0deg);
      transition: transform var(--transition-med);
      opacity: 0.75;
    }

    .card.expanded .chevron {
      transform: rotate(180deg);
      opacity: 1;
    }

    .card-body {
      padding: 0 16px 10px;
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(-6px);
      transition: max-height 320ms ease, opacity 220ms ease-out,
        transform 220ms ease-out;
    }

    .card.expanded .card-body {
      max-height: 1000px;
      opacity: 1;
      transform: translateY(0);
    }

    .card-section {
      padding-top: 10px;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 10px;
      border-bottom: 1px dashed rgba(55, 65, 81, 0.7);
      margin-bottom: 8px;
    }

    .card-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 4px;
    }

    .section-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .section-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 3px;
    }

    .section-body {
      font-size: 0.8rem;
      color: #d1d5db;
      line-height: 1.45;
    }

    .section-body ul {
      margin: 4px 0 4px 18px;
      padding: 0;
    }

    .section-body li {
      margin-bottom: 2px;
    }

    .section-side {
      font-size: 0.78rem;
      color: var(--text-muted);
      background: radial-gradient(circle at top right, #111827, #020617);
      border-radius: 14px;
      padding: 8px 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .section-side strong {
      color: #e5e7eb;
    }

    /* Score boxes */

    .score-box {
      margin-top: 6px;
      padding: 6px 9px;
      border-radius: 12px;
      background: radial-gradient(circle at top left, #1d2640, #020617);
      border: 1px solid rgba(96, 165, 250, 0.85);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9),
        0 8px 20px rgba(15, 23, 42, 0.9);
      font-size: 0.78rem;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #dbeafe;
    }

    .score-chip {
      font-size: 0.7rem;
      padding: 3px 7px;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      background: rgba(37, 99, 235, 0.2);
      border: 1px solid rgba(129, 140, 248, 0.9);
      color: #bfdbfe;
    }

    .score-value {
      font-weight: 600;
      font-variant-numeric: tabular-nums;
    }

    .score-box.highlight-good {
      border-color: rgba(52, 211, 153, 0.9);
      background: radial-gradient(circle at top left, #064e3b, #020617);
      color: #bbf7d0;
    }

    .score-box.highlight-bad {
      border-color: rgba(248, 113, 113, 0.95);
      background: radial-gradient(circle at top left, #7f1d1d, #020617);
      color: #fee2e2;
    }

    /* Card-type accents */

    .card.assessment {
      border-top: 3px solid rgba(59, 130, 246, 0.9);
    }

    .card.diagnosis {
      border-top: 3px solid rgba(168, 85, 247, 0.9);
    }

    .card.treatment {
      border-top: 3px solid rgba(45, 212, 191, 0.9);
    }

    .card.followup {
      border-top: 3px solid rgba(249, 115, 22, 0.9);
    }

    .card.assessment .section-label {
      color: rgba(96, 165, 250, 0.9);
    }

    .card.diagnosis .section-label {
      color: rgba(192, 132, 252, 0.9);
    }

    .card.treatment .section-label {
      color: rgba(45, 212, 191, 0.9);
    }

    .card.followup .section-label {
      color: rgba(251, 191, 36, 0.9);
    }

    /* Responsive */

    @media (max-width: 960px) {
      .app-shell {
        flex-direction: column;
        padding: 10px;
      }

      .sidebar {
        position: static;
        width: 100%;
        order: -1;
      }

      .sidebar-progress {
        flex-direction: row;
        overflow-x: auto;
      }

      .sidebar-step {
        white-space: nowrap;
      }
    }

    @media (max-width: 720px) {
      .card-section {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 460px) {
      .card-header-left {
        flex: 1;
      }

      .card-header-right {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Sticky progress sidebar -->
    <aside class="sidebar">
      <div class="sidebar-title">
        <span>Malignant Skin Ulcer</span>
        <span class="sidebar-chip">Palliative</span>
      </div>
      <p class="sidebar-subtitle">
        Interactive primary care pathway for adults (‚â•16&nbsp;years) with a malignant
        skin ulcer.
      </p>

      <ol class="sidebar-progress">
        <li class="sidebar-step active" data-target="card-assessment">
          <span class="sidebar-step-bullet">1</span>
          <span>Assessment</span>
        </li>
        <li class="sidebar-step" data-target="card-diagnosis">
          <span class="sidebar-step-bullet">2</span>
          <span>Diagnosis</span>
        </li>
        <li class="sidebar-step" data-target="card-treatment">
          <span class="sidebar-step-bullet">3</span>
          <span>Treatment</span>
        </li>
        <li class="sidebar-step" data-target="card-followup">
          <span class="sidebar-step-bullet">4</span>
          <span>Follow-up</span>
        </li>
      </ol>

      <div class="sidebar-legend">
        <div class="legend-title">Severity badges</div>
        <div class="legend-row">
          <span class="legend-item">
            <span class="legend-dot dot-red"></span> Urgent referral
          </span>
          <span class="legend-item">
            <span class="legend-dot dot-amber"></span> Caution / monitor
          </span>
          <span class="legend-item">
            <span class="legend-dot dot-green"></span> Stable / routine
          </span>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main">
      <header class="page-header">
        <div class="page-title">
          <h1>Card-based Clinical Algorithm</h1>
          <span class="page-pill">Step through the pathway</span>
        </div>
        <p>
          Expand each step to view key actions. Use the coloured badges to gauge
          severity and highlight when urgent oncology or palliative care input is needed.
        </p>
      </header>

      <section class="cards">
        <!-- Assessment -->
        <article class="card assessment expanded" id="card-assessment">
          <button class="card-header" type="button">
            <div class="card-header-left">
              <div class="icon-circle">üîç</div>
              <div class="card-title">
                <span class="card-title-main">Assessment</span>
                <span class="card-title-sub">
                  Location, morphology, complications, and patient priorities
                </span>
              </div>
            </div>
            <div class="card-header-right">
              <span class="badge badge-red">
                <span class="badge-dot"></span> Red flags
              </span>
              <span class="badge badge-amber">
                <span class="badge-dot"></span> Monitor closely
              </span>
              <span class="badge badge-green">
                <span class="badge-dot"></span> Stable
              </span>
              <span class="chevron">‚ñæ</span>
            </div>
          </button>

          <div class="card-body">
            <div class="card-section">
              <div>
                <div class="section-label">Step 1</div>
                <div class="section-title">Clarify goals &amp; context</div>
                <div class="section-body">
                  <ul>
                    <li>Identify the person‚Äôs treatment priorities and main concerns.</li>
                    <li>
                      Explain that complete healing is unlikely; aim is comfort and quality
                      of life.
                    </li>
                    <li>
                      Involve a professional with wound expertise (district nurse,
                      tissue-viability or palliative care nurse) early.
                    </li>
                  </ul>
                  <div class="score-box">
                    <span class="score-chip">Quality of life score</span>
                    <span class="score-value">7 / 10</span>
                    <span>Patient-reported; use to track trend over time.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>Documentation tip</strong><br />
                Capture baseline photos (with consent), record impact on sleep,
                mobility, and social interaction. Note any advance care plans.
              </div>
            </div>

            <div class="card-section">
              <div>
                <div class="section-label">Step 2</div>
                <div class="section-title">Examine the ulcer</div>
                <div class="section-body">
                  <ul>
                    <li>Describe location, size, and whether ulcerative or proliferative.</li>
                    <li>
                      Assess amount of necrotic tissue, exudate, odour, and surrounding
                      skin condition.
                    </li>
                    <li>
                      Screen for complications: pain, infection, bleeding, itch, and
                      psychosocial distress.
                    </li>
                  </ul>

                  <div class="score-box highlight-bad">
                    <span class="score-chip">Pain score</span>
                    <span class="score-value">8 / 10</span>
                    <span>Severe &mdash; optimise analgesia before dressing changes.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>Red badge (urgent)</strong><br />
                <span class="badge badge-red">
                  <span class="badge-dot"></span> URGENT REFERRAL
                </span>
                <ul>
                  <li>Heavy or brisk bleeding.</li>
                  <li>Airway compromise or vessel compression.</li>
                  <li>
                    Rapidly enlarging mass with concern about local obstruction.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- Diagnosis -->
        <article class="card diagnosis" id="card-diagnosis">
          <button class="card-header" type="button">
            <div class="card-header-left">
              <div class="icon-circle">üß¨</div>
              <div class="card-title">
                <span class="card-title-main">Diagnosis</span>
                <span class="card-title-sub">
                  Confirm malignancy, exclude other causes, recognise complications
                </span>
              </div>
            </div>
            <div class="card-header-right">
              <span class="badge badge-amber">
                <span class="badge-dot"></span> Diagnostic uncertainty
              </span>
              <span class="chevron">‚ñæ</span>
            </div>
          </button>

          <div class="card-body">
            <div class="card-section">
              <div>
                <div class="section-label">Step 3</div>
                <div class="section-title">Confirm malignant skin ulcer</div>
                <div class="section-body">
                  <ul>
                    <li>
                      Check oncology history (primary tumour: breast, head &amp; neck,
                      skin, vulval, etc.).
                    </li>
                    <li>
                      Consider biopsy if diagnosis is uncertain and consistent with goals
                      of care.
                    </li>
                    <li>
                      Differentiate from pressure injury, infection, or benign chronic
                      ulcers.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section-side">
                <strong>Green badge (stable)</strong><br />
                <span class="badge badge-green">
                  <span class="badge-dot"></span> STABLE DISEASE
                </span>
                <ul>
                  <li>Known malignancy with expected ulcer behaviour.</li>
                  <li>No new systemic symptoms or rapid local change.</li>
                </ul>
              </div>
            </div>

            <div class="card-section">
              <div>
                <div class="section-label">Step 4</div>
                <div class="section-title">Identify complications &amp; need for referral</div>
                <div class="section-body">
                  <ul>
                    <li>
                      Screen for infection (fever, cellulitis, increased exudate or
                      odour).
                    </li>
                    <li>
                      Assess bleeding risk (anticoagulants, friable tissue, previous
                      episodes).
                    </li>
                    <li>
                      Evaluate psychological impact: anxiety, low mood, social withdrawal.
                    </li>
                  </ul>
                  <div class="score-box highlight-good">
                    <span class="score-chip">Distress thermometer</span>
                    <span class="score-value">3 / 10</span>
                    <span>Mild distress &mdash; offer routine support, monitor trend.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>When to involve specialists</strong><br />
                <span class="badge badge-red">
                  <span class="badge-dot"></span> PALLIATIVE / ONCOLOGY
                </span>
                <ul>
                  <li>Complicated bleeding, infection, or exudate not controlled.</li>
                  <li>
                    Large necrotic burden where surgical or larval debridement may help.
                  </li>
                  <li>Potential for radiotherapy, chemotherapy, or surgery.</li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- Treatment -->
        <article class="card treatment" id="card-treatment">
          <button class="card-header" type="button">
            <div class="card-header-left">
              <div class="icon-circle">üíä</div>
              <div class="card-title">
                <span class="card-title-main">Treatment</span>
                <span class="card-title-sub">
                  Symptom-focused care: dressings, pain, infection, exudate, odour
                </span>
              </div>
            </div>
            <div class="card-header-right">
              <span class="badge badge-red">
                <span class="badge-dot"></span> Bleeding risk
              </span>
              <span class="badge badge-amber">
                <span class="badge-dot"></span> Infection
              </span>
              <span class="chevron">‚ñæ</span>
            </div>
          </button>

          <div class="card-body">
            <div class="card-section">
              <div>
                <div class="section-label">Step 5</div>
                <div class="section-title">Select dressings &amp; protect skin</div>
                <div class="section-body">
                  <ul>
                    <li>
                      Match dressing to ulcer type, site and exudate (e.g. alginate or
                      foam for high exudate).
                    </li>
                    <li>
                      Use non-adherent options if pain at dressing changes; soak off
                      adherent dressings with saline.
                    </li>
                    <li>
                      Protect surrounding skin with barrier film/cream where macerated.
                    </li>
                    <li>
                      Change dressings often enough to control pain, exudate and odour,
                      but avoid unnecessary trauma.
                    </li>
                  </ul>
                  <div class="score-box">
                    <span class="score-chip">Exudate level</span>
                    <span class="score-value">High</span>
                    <span>Consider alginate / hydrofibre + secondary absorbent pad.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>Amber badge (caution)</strong><br />
                <span class="badge badge-amber">
                  <span class="badge-dot"></span> DRESSING BURDEN
                </span>
                <ul>
                  <li>Very frequent dressing changes needed.</li>
                  <li>Bulky dressings impair mobility or self-image.</li>
                  <li>Consider specialist advice or alternative devices (e.g. pouches).</li>
                </ul>
              </div>
            </div>

            <div class="card-section">
              <div>
                <div class="section-label">Step 6</div>
                <div class="section-title">Manage pain, infection, exudate &amp; odour</div>
                <div class="section-body">
                  <ul>
                    <li>
                      <strong>Pain:</strong> optimise systemic analgesia; give short-acting
                      opioid 30&nbsp;min before dressing change. Consider topical opioid
                      gel with specialist advice.
                    </li>
                    <li>
                      <strong>Infection:</strong> diagnose clinically; use appropriate
                      dressings and systemic antibiotics for cellulitis.
                    </li>
                    <li>
                      <strong>Exudate:</strong> choose highly absorbent dressings; refer if
                      copious or affecting nutrition (consider dietitian).
                    </li>
                    <li>
                      <strong>Odour:</strong> optimise dressings; use topical or oral
                      metronidazole for anaerobic infection; consider environmental
                      measures (e.g. odour absorbers).
                    </li>
                  </ul>

                  <div class="score-box highlight-bad">
                    <span class="score-chip">Odour impact</span>
                    <span class="score-value">Severe</span>
                    <span>Major effect on social contact &mdash; prioritise control.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>Bleeding management</strong><br />
                <span class="badge badge-red">
                  <span class="badge-dot"></span> ACUTE BLEED
                </span>
                <ul>
                  <li>Apply gentle pressure with moist non-adherent dressing.</li>
                  <li>
                    For heavy bleeding, maintain pressure and seek urgent specialist
                    advice; consider transfer if appropriate.
                  </li>
                  <li>
                    Review anticoagulants / antiplatelets; consider dose change or stop
                    in advanced disease.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- Follow-up -->
        <article class="card followup" id="card-followup">
          <button class="card-header" type="button">
            <div class="card-header-left">
              <div class="icon-circle">üìÖ</div>
              <div class="card-title">
                <span class="card-title-main">Follow-up</span>
                <span class="card-title-sub">
                  Reassess symptoms, review goals, plan for end-of-life needs
                </span>
              </div>
            </div>
            <div class="card-header-right">
              <span class="badge badge-green">
                <span class="badge-dot"></span> Routine review
              </span>
              <span class="badge badge-amber">
                <span class="badge-dot"></span> Escalate if worse
              </span>
              <span class="chevron">‚ñæ</span>
            </div>
          </button>

          <div class="card-body">
            <div class="card-section">
              <div>
                <div class="section-label">Step 7</div>
                <div class="section-title">Plan review and monitoring</div>
                <div class="section-body">
                  <ul>
                    <li>
                      Agree realistic review intervals based on symptoms and community
                      nursing support.
                    </li>
                    <li>
                      Track key scores over time (pain, odour impact, quality of life).
                    </li>
                    <li>
                      Ensure person and carers know how to access urgent help for bleeding
                      or uncontrolled symptoms.
                    </li>
                  </ul>
                  <div class="score-box">
                    <span class="score-chip">Overall stability</span>
                    <span class="score-value">Stable</span>
                    <span>Symptoms controlled; maintain current regimen.</span>
                  </div>
                </div>
              </div>
              <div class="section-side">
                <strong>Use scores to guide change</strong><br />
                Rising pain / odour or falling quality-of-life scores should trigger an
                earlier review, dressing change, or specialist input.
              </div>
            </div>

            <div class="card-section">
              <div>
                <div class="section-label">Step 8</div>
                <div class="section-title">End-of-life considerations</div>
                <div class="section-body">
                  <ul>
                    <li>
                      Recognise when the person is entering the last days of life and
                      adjust goals of care.
                    </li>
                    <li>
                      Create an individualised care plan including symptom control and
                      anticipatory prescribing.
                    </li>
                    <li>
                      Address psychosocial and spiritual needs of the person and their
                      family; consider bereavement support.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="section-side">
                <strong>Communication focus</strong><br />
                Revisit preferences for place of care, resuscitation decisions and
                involvement of family/carers. Coordinate with community and specialist
                palliative care teams.
              </div>
            </div>
          </div>
        </article>
      </section>
    </main>
  </div>

  <script>
    // Expand/collapse behaviour for cards
    const cards = document.querySelectorAll(".card");
    const headers = document.querySelectorAll(".card-header");

    headers.forEach((header) => {
      header.addEventListener("click", (evt) => {
        const card = header.closest(".card");
        const clickedChevron = evt.target.closest(".chevron");

        // If chevron or header clicked, toggle the card
        if (!card) return;
        const expanded = card.classList.contains("expanded");
        if (expanded && !clickedChevron) {
          // Allow clicking inside header to keep expanded if already open
          // but still scroll into view
        }
        card.classList.toggle("expanded");

        // Smooth scroll card into view when opened
        if (!expanded) {
          card.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    // Sidebar navigation + active step tracking
    const sidebarSteps = document.querySelectorAll(".sidebar-step");

    sidebarSteps.forEach((step) => {
      step.addEventListener("click", () => {
        const targetId = step.getAttribute("data-target");
        const card = document.getElementById(targetId);
        if (!card) return;

        // Expand the card when navigating to it
        cards.forEach((c) => c.classList.remove("expanded"));
        card.classList.add("expanded");

        card.scrollIntoView({ behavior: "smooth", block: "start" });

        sidebarSteps.forEach((s) => s.classList.remove("active"));
        step.classList.add("active");
      });
    });

    // Highlight sidebar step based on scroll position
    const stepMap = {};
    sidebarSteps.forEach((step) => {
      const targetId = step.getAttribute("data-target");
      stepMap[targetId] = step;
    });

    const observer = new IntersectionObserver(
      (entries) => {
        let mostVisible = null;
        let maxRatio = 0;

        entries.forEach((entry) => {
          if (entry.intersectionRatio > maxRatio) {
            maxRatio = entry.intersectionRatio;
            mostVisible = entry.target;
          }
        });

        if (mostVisible && mostVisible.id && stepMap[mostVisible.id]) {
          sidebarSteps.forEach((s) => s.classList.remove("active"));
          stepMap[mostVisible.id].classList.add("active");
        }
      },
      {
        threshold: [0.25, 0.5, 0.75],
        rootMargin: "-80px 0px -50% 0px",
      }
    );

    cards.forEach((card) => observer.observe(card));
  </script>
</body>
</html>
