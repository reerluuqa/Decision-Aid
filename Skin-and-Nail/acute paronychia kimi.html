<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acute Paronychia - Clinical Decision Guide</title>
    <style>
        :root {
            --urgent-red: #dc2626;
            --warning-amber: #f59e0b;
            --action-green: #059669;
            --info-blue: #0284c7;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --radius: 0.75rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Sticky Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow-md);
            padding: 1rem 0;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: var(--info-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.25rem;
        }

        .title h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .title .subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Emergency Mode Toggle */
        .mode-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background: var(--bg-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .mode-toggle:hover {
            border-color: var(--urgent-red);
        }

        .mode-toggle.active {
            background: var(--urgent-red);
            color: white;
            border-color: var(--urgent-red);
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 0.25rem;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tab-nav::-webkit-scrollbar {
            display: none;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            border-radius: var(--radius);
            transition: all 0.2s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-button:hover {
            background: var(--bg-secondary);
        }

        .tab-button.active {
            background: var(--info-blue);
            color: white;
        }

        /* Search Bar */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 2.5rem 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--info-blue);
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--info-blue), #0369a1);
            color: white;
            padding: 2rem;
            border-radius: var(--radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .hero h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: var(--radius);
            backdrop-filter: blur(4px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* Card Components */
        .card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            margin-bottom: 1rem;
            overflow: hidden;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            font-size: 1.125rem;
        }

        .card-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.875rem;
        }

        .urgent .card-icon { background: var(--urgent-red); }
        .warning .card-icon { background: var(--warning-amber); }
        .action .card-icon { background: var(--action-green); }
        .info .card-icon { background: var(--info-blue); }

        .card-toggle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            transition: transform 0.2s;
        }

        .card.expanded .card-toggle {
            transform: rotate(180deg);
        }

        .card-content {
            padding: 1.5rem;
            display: none;
        }

        .card.expanded .card-content {
            display: block;
        }

        /* Alert Components */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            border-left: 4px solid;
        }

        .alert-urgent {
            background: #fef2f2;
            border-color: var(--urgent-red);
            color: #991b1b;
        }

        .alert-warning {
            background: #fffbeb;
            border-color: var(--warning-amber);
            color: #92400e;
        }

        .alert-info {
            background: #eff6ff;
            border-color: var(--info-blue);
            color: #1e40af;
        }

        .alert-icon {
            font-size: 1.25rem;
            margin-top: 0.125rem;
        }

        /* Lists */
        .checklist {
            list-style: none;
        }

        .checklist li {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checklist li:hover {
            background: var(--bg-secondary);
        }

        .checklist li.completed {
            color: var(--text-secondary);
            text-decoration: line-through;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .checkbox.checked {
            background: var(--action-green);
            border-color: var(--action-green);
            color: white;
        }

        /* Medication Cards */
        .med-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .med-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.25rem;
            transition: all 0.2s;
            cursor: pointer;
        }

        .med-card:hover {
            border-color: var(--info-blue);
            box-shadow: var(--shadow-md);
        }

        .med-name {
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .med-class {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .med-dose {
            background: var(--bg-secondary);
            padding: 0.75rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .med-indications {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .indication-tag {
            background: var(--info-blue);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Step Counter */
        .step-counter {
            position: sticky;
            top: 80px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-sm);
            z-index: 50;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--action-green);
            transition: width 0.3s;
        }

        .step-count {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 56px;
            height: 56px;
            background: var(--urgent-red);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.2s;
            z-index: 1000;
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .fab-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: var(--bg-primary);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            display: none;
            min-width: 200px;
        }

        .fab-menu.active {
            display: block;
        }

        .fab-option {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .fab-option:last-child {
            border-bottom: none;
        }

        .fab-option:hover {
            background: var(--bg-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }

            .tab-nav {
                order: 3;
                width: 100%;
            }

            .container {
                padding: 1rem;
            }

            .hero h2 {
                font-size: 1.5rem;
            }

            .hero-stats {
                grid-template-columns: 1fr 1fr;
            }

            .med-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Emergency Mode */
        body.emergency-mode {
            --bg-secondary: #fef2f2;
            --border-color: #fecaca;
        }

        body.emergency-mode .alert-urgent {
            position: sticky;
            top: 120px;
            z-index: 90;
            box-shadow: var(--shadow-md);
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: var(--shadow-md); }
            50% { box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.2); }
        }

        /* Print Styles */
        @media print {
            .header, .fab, .step-counter, .mode-toggle {
                display: none;
            }

            .card-content {
                display: block !important;
            }

            .card {
                page-break-inside: avoid;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        .text-urgent { color: var(--urgent-red); font-weight: 700; }
        .text-warning { color: var(--warning-amber); font-weight: 600; }
        .text-action { color: var(--action-green); font-weight: 600; }
        .text-info { color: var(--info-blue); font-weight: 600; }

        .font-mono {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            background: var(--bg-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tag-urgent { background: var(--urgent-red); color: white; }
        .tag-warning { background: var(--warning-amber); color: white; }
        .tag-action { background: var(--action-green); color: white; }
        .tag-info { background: var(--info-blue); color: white; }
    </style>
</head>
<body>
    <!-- Sticky Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">AP</div>
                <div class="title">
                    <h1>Acute Paronychia Guide</h1>
                    <div class="subtitle">NICE CKS v2025.02 | Primary Care</div>
                </div>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search guide..." id="searchInput">
                <div class="search-icon">üîç</div>
            </div>

            <button class="mode-toggle" id="emergencyToggle">
                <span>üö®</span>
                <span>Emergency Mode</span>
            </button>
            
            <nav class="tab-nav">
                <button class="tab-button active" data-tab="overview">Overview</button>
                <button class="tab-button" data-tab="diagnosis">Diagnosis</button>
                <button class="tab-button" data-tab="management">Management</button>
                <button class="tab-button" data-tab="prescribing">Prescribing</button>
                <button class="tab-button" data-tab="redflags">üö® Red Flags</button>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Overview Tab -->
        <div class="tab-content active" id="overview">
            <div class="hero">
                <h2>Rapid Access Guide</h2>
                <p>Evidence-based management of acute paronychia for primary care clinicians. Last updated February 2025.</p>
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-number">5-7</div>
                        <div class="stat-label">Days of antibiotics</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">3x</div>
                        <div class="stat-label">More common in women</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">70%</div>
                        <div class="stat-label">Cases resolve without I&D</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">‚ö†Ô∏è</div>
                        <div class="stat-label">Red flags identified</div>
                    </div>
                </div>
            </div>

            <div class="alert alert-urgent">
                <div class="alert-icon">üö®</div>
                <div>
                    <strong>Immediate Action Required:</strong> If patient is systemically unwell, has spreading cellulitis, or is immunocompromised ‚Üí URGENT referral
                </div>
            </div>

            <div class="card info expanded">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üìã</div>
                        <span>Quick Summary</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <ul class="checklist" id="overviewChecklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Warm soaks</strong> 10-15 min, 3-4x/day</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Consider I&D</strong> if fluctuant abscess present</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Topical antibiotics</strong> for minor localized infection</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Oral antibiotics</strong> if I&D not performed or extensive</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Swab</strong> if recurrent, not responding, or systemically unwell</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div><strong>Follow-up advice</strong> provided</div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card warning">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">‚ö†Ô∏è</div>
                        <span>Antimicrobial Stewardship</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p>Many cases <strong>resolve without antibiotics</strong>. Educate patients on:</p>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>Self-limiting nature of minor infections</li>
                        <li>Adverse effects of unnecessary antibiotics</li>
                        <li>Importance of completing course if prescribed</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Diagnosis Tab -->
        <div class="tab-content" id="diagnosis">
            <div class="card info expanded">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üîç</div>
                        <span>Clinical Presentation</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <h4>History</h4>
                    <ul class="checklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Pain & swelling at nail fold (usually single finger)</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Recent trauma (2-5 days prior)</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Risk factors: manicuring, water exposure, nail biting</div>
                        </li>
                    </ul>

                    <h4 style="margin-top: 1.5rem;">Examination</h4>
                    <ul class="checklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Red, tender, swollen nail folds</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Visible pus collection if present</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Digital pressure test if abscess uncertain</div>
                        </li>
                    </ul>

                    <div class="alert alert-info" style="margin-top: 1rem;">
                        <div class="alert-icon">üí°</div>
                        <div>
                            <strong>Digital Pressure Test:</strong> Ask patient to oppose thumb and affected finger. Increased pressure demarcates pus.
                        </div>
                    </div>
                </div>
            </div>

            <!-- FIXED: Added onclick="toggleCard(this)" -->
            <div class="card warning">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">ü©∫</div>
                        <span>Differential Diagnosis</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <ul style="padding-left: 1.5rem;">
                        <li><strong>Herpetic Whitlow:</strong> Lancinating pain, vesicles, no pus</li>
                        <li><strong>Candidiasis:</strong> Consider in chronic cases</li>
                        <li><strong>Contact Dermatitis:</strong> Itch dominates</li>
                        <li><strong>Fungal Nail Infection:</strong> Onycholysis, scaling</li>
                        <li><strong>Melanoma:</strong> Pigmented, irregular</li>
                        <li><strong>Psoriasis:</strong> Pitting, other nail changes</li>
                    </ul>
                </div>
            </div>

            <!-- FIXED: Added onclick="toggleCard(this)" -->
            <div class="card action">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üìä</div>
                        <span>When to Swab</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <ul class="checklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Enlarging or not responding (2-3 days)</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Recurrent infection</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Systemically unwell</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>History of MRSA</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Immunocompromised or diabetic</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Management Tab -->
        <div class="tab-content" id="management">
            <div class="step-counter">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                </div>
                <div class="step-count">
                    <span id="completedSteps">0</span> of <span id="totalSteps">8</span> steps completed
                </div>
            </div>

            <div class="card action">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">1Ô∏è‚É£</div>
                        <span>Step 1: Conservative Management</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p><strong>All patients:</strong> Advise warm soaks</p>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>Duration: 10-15 minutes</li>
                        <li>Frequency: 3-4 times daily</li>
                        <li>Purpose: Alleviate pain, localize infection</li>
                    </ul>
                    <p style="margin-top: 0.5rem;">Most infections will drain spontaneously</p>
                </div>
            </div>

            <div class="card action">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">2Ô∏è‚É£</div>
                        <span>Step 2: Assess for Abscess</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p>Look for fluctuance or visible pus collection</p>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>If <strong>fluctuant</strong> ‚Üí Proceed to I&D</li>
                        <li>If <strong>not fluctuant</strong> ‚Üí Continue warm soaks, consider topical antibiotics</li>
                        <li>If <strong>uncertain</strong> ‚Üí Digital pressure test</li>
                    </ul>
                </div>
            </div>

            <div class="card urgent">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üéØ</div>
                        <span>Step 3: Incision & Drainage</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p><strong>Indication:</strong> Fluctuant abscess present</p>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>Can be performed in primary care if expertise available</li>
                        <li>Otherwise: Refer to surgical unit/ED per local protocol</li>
                        <li>Send pus for culture if performed</li>
                    </ul>
                    <div class="alert alert-urgent" style="margin-top: 1rem;">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div><strong>Do not delay antibiotics</strong> if I&D not immediately available and infection is severe</div>
                    </div>
                </div>
            </div>

            <div class="card action">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">4Ô∏è‚É£</div>
                        <span>Step 4: Consider Topical Antibiotics</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p><strong>Indication:</strong> Minor, localized infection without abscess</p>
                    <p><strong>First line:</strong> Fusidic acid cream</p>
                    <ul style="padding-left: 1.5rem;">
                        <li>Apply 3-4 times daily for 7 days</li>
                        <li>Do not use >10 days (resistance risk)</li>
                    </ul>
                </div>
            </div>

            <div class="card warning">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">5Ô∏è‚É£</div>
                        <span>Step 5: Oral Antibiotics</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p><strong>Indications:</strong></p>
                    <ul style="padding-left: 1.5rem;">
                        <li>I&D not performed</li>
                        <li>Significant pain or extensive involvement</li>
                        <li>Cellulitis signs or fever</li>
                        <li>Comorbidities (diabetes, immunosuppression)</li>
                        <li>Post-I&D with severe infection</li>
                    </ul>
                    <p style="margin-top: 0.5rem;"><strong>Duration:</strong> 5-7 days</p>
                    <div class="alert alert-warning" style="margin-top: 0.5rem;">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div>Review local resistance patterns. Seek specialist advice for MRSA.</div>
                    </div>
                </div>
            </div>

            <div class="card info">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">6Ô∏è‚É£</div>
                        <span>Step 6: Self-Care Advice</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <ul class="checklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Keep affected area clean and dry</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Avoid further trauma or nail manipulation</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Trim hang nails to semi-lunar edge</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Paracetamol/NSAID for pain relief</div>
                        </li>
                    </ul>
                    
                    <h4 style="margin-top: 1rem;">For Wet Work Exposure:</h4>
                    <ul style="padding-left: 1.5rem;">
                        <li>Wear cotton-lined gloves</li>
                        <li>Dry thoroughly after washing</li>
                        <li>Apply antibacterial moisturizer</li>
                        <li>Treatment unlikely to succeed if exposure continues</li>
                    </ul>
                </div>
            </div>

            <div class="card info">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">7Ô∏è‚É£</div>
                        <span>Step 7: Follow-up</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <p><strong>Routine follow-up not usually necessary</strong></p>
                    <ul style="padding-left: 1.5rem;">
                        <li>Advise return if becomes fluctuant or doesn't improve</li>
                        <li>Seek urgent advice if systemically unwell or cellulitis develops</li>
                    </ul>
                </div>
            </div>

            <div class="card urgent">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üîÑ</div>
                        <span>Recurrent Paronychia</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <ul class="checklist">
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Consider alternative diagnosis (herpetic whitlow)</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Examine for trauma or water exposure habits</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Swab for culture & sensitivities</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Treat with appropriate antibiotics (7 days, extend if slow response)</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Check for Staphylococcus aureus carriage if confirmed</div>
                        </li>
                        <li onclick="toggleChecklistItem(this)">
                            <div class="checkbox">‚òê</div>
                            <div>Consider X-ray if refractory (osteomyelitis risk)</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Prescribing Tab -->
        <div class="tab-content" id="prescribing">
            <div class="alert alert-info">
                <div class="alert-icon">üíä</div>
                <div>
                    <strong>Antibiotic duration:</strong> 5-7 days for all agents. Review local guidelines and resistance patterns.
                </div>
            </div>

            <div class="med-grid">
                <div class="med-card" onclick="selectMedication(this)" data-med="flucloxacillin">
                    <div class="med-name">Flucloxacillin</div>
                    <div class="med-class">Penicillin (first-line)</div>
                    <div class="med-dose">
                        Adults: 250-500 mg QDS<br>
                        Children: 125-250 mg QDS (adjust for age)
                    </div>
                    <div class="med-indications">
                        <span class="indication-tag">First-line</span>
                        <span class="indication-tag">No penicillin allergy</span>
                    </div>
                </div>

                <div class="med-card" onclick="selectMedication(this)" data-med="clarithromycin">
                    <div class="med-name">Clarithromycin</div>
                    <div class="med-class">Macrolide (alternative)</div>
                    <div class="med-dose">
                        Adults: 250-500 mg BD<br>
                        Children: 7.5 mg/kg BD (max 500 mg)
                    </div>
                    <div class="med-indications">
                        <span class="indication-tag">Penicillin allergy</span>
                        <span class="indication-tag">Pregnancy caution</span>
                    </div>
                </div>

                <div class="med-card" onclick="selectMedication(this)" data-med="erythromycin">
                    <div class="med-name">Erythromycin</div>
                    <div class="med-class">Macrolide (pregnancy)</div>
                    <div class="med-dose">
                        Adults: 250-500 mg QDS<br>
                        Children: 125-250 mg QDS (adjust for age)
                    </div>
                    <div class="med-indications">
                        <span class="indication-tag">Pregnancy preferred</span>
                        <span class="indication-tag">QT prolongation risk</span>
                    </div>
                </div>

                <div class="med-card" onclick="selectMedication(this)" data-med="fusidic-acid">
                    <div class="med-name">Fusidic Acid Cream</div>
                    <div class="med-class">Topical</div>
                    <div class="med-dose">
                        Apply 3-4x daily for 7 days<br>
                        Max 10 days (resistance)
                    </div>
                    <div class="med-indications">
                        <span class="indication-tag">Minor infection</span>
                        <span class="indication-tag">No abscess</span>
                    </div>
                </div>
            </div>

            <div class="card warning" id="interactionCard" style="display: none;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon">‚ö†Ô∏è</div>
                        <span>Drug Interactions & Cautions</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content" id="interactionContent">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Red Flags Tab -->
        <div class="tab-content" id="redflags">
            <div class="alert alert-urgent">
                <div class="alert-icon">üö®</div>
                <div>
                    <strong class="text-urgent">URGENT REFERRAL INDICATORS</strong><br>
                    Any of these signs require immediate specialist input
                </div>
            </div>

            <div class="grid-2" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1rem;">
                <div class="card urgent">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üö®</div>
                            <span>Systemic Signs</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <ul style="padding-left: 1.5rem; list-style: none;">
                            <li style="margin-bottom: 0.5rem;">‚û§ Fever or rigors</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Malaise or confusion</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Tachycardia</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Immunocompromised state</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Diabetic with poor control</li>
                        </ul>
                    </div>
                </div>

                <div class="card urgent">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üî•</div>
                            <span>Local Complications</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <ul style="padding-left: 1.5rem; list-style: none;">
                            <li style="margin-bottom: 0.5rem;">‚û§ Spreading cellulitis</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Septic tenosynovitis</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Subungual abscess ("floating nail")</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Runaround infection</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Osteomyelitis risk (refractory cases)</li>
                        </ul>
                    </div>
                </div>

                <div class="card warning">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">‚ö†Ô∏è</div>
                            <span>Treatment Failure</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <ul style="padding-left: 1.5rem; list-style: none;">
                            <li style="margin-bottom: 0.5rem;">‚û§ No improvement after 2-3 days</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Recurrent infections</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Swab grows MRSA</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Extensive periungual involvement</li>
                        </ul>
                    </div>
                </div>

                <div class="card warning">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üéØ</div>
                            <span>Special Populations</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <ul style="padding-left: 1.5rem; list-style: none;">
                            <li style="margin-bottom: 0.5rem;">‚û§ Pregnancy complications</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Pediatric finger-sucking cases</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Chemotherapy patients</li>
                            <li style="margin-bottom: 0.5rem;">‚û§ Epidermal growth factor inhibitor therapy</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- FIXED: Added onclick="toggleCard(this)" -->
            <div class="card urgent">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üè•</div>
                        <span>Referral Pathways</span>
                    </div>
                    <div class="card-toggle">‚ñº</div>
                </div>
                <div class="card-content">
                    <h4>Same Day / Emergency:</h4>
                    <ul style="padding-left: 1.5rem;">
                        <li>Systemic illness + local infection</li>
                        <li>Rapidly spreading cellulitis</li>
                        <li>Septic tenosynovitis suspected</li>
                        <li>Immunocompromised with severe infection</li>
                    </ul>
                    
                    <h4 style="margin-top: 1rem;">Urgent (24-48h):</h4>
                    <ul style="padding-left: 1.5rem;">
                        <li>I&D needed but no primary care expertise</li>
                        <li>Refractory infection (no response to treatment)</li>
                        <li>Suspected osteomyelitis</li>
                        <li>MRSA infection requiring IV therapy</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="fab" onclick="toggleFabMenu()">
        <span>üö®</span>
        <div class="fab-menu" id="fabMenu">
            <div class="fab-option" onclick="emergencyReferral()">
                <span>üìû</span> Emergency Referral
            </div>
            <div class="fab-option" onclick="copyPrescription()">
                <span>üìã</span> Copy Prescription
            </div>
            <div class="fab-option" onclick="printGuide()">
                <span>üñ®Ô∏è</span> Print Guide
            </div>
            <div class="fab-option" onclick="resetProgress()">
                <span>üîÑ</span> Reset Progress
            </div>
        </div>
    </button>

    <script>
        // Tab Navigation
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                button.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Card Toggle
        function toggleCard(header) {
            const card = header.parentElement;
            card.classList.toggle('expanded');
        }

        // Checklist functionality
        function toggleChecklistItem(item) {
            item.classList.toggle('completed');
            const checkbox = item.querySelector('.checkbox');
            checkbox.classList.toggle('checked');
            checkbox.textContent = checkbox.classList.contains('checked') ? '‚úì' : '‚òê';
            
            updateProgress();
        }

        // Progress tracking
        function updateProgress() {
            const activeContent = document.querySelector('.tab-content.active');
            const totalCheckboxes = activeContent.querySelectorAll('.checkbox').length;
            const checkedCheckboxes = activeContent.querySelectorAll('.checkbox.checked').length;
            
            if (totalCheckboxes > 0) {
                const progress = (checkedCheckboxes / totalCheckboxes) * 100;
                document.getElementById('progressBar').style.width = progress + '%';
                document.getElementById('completedSteps').textContent = checkedCheckboxes;
                document.getElementById('totalSteps').textContent = totalCheckboxes;
            }
        }

        // Medication selection and interaction display
        const interactionData = {
            'flucloxacillin': `
                <h4>Key Interactions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li><strong>Methotrexate:</strong> Monitor toxicity risk</li>
                    <li><strong>Warfarin:</strong> Monitor INR</li>
                    <li><strong>Live vaccines:</strong> Reduced efficacy</li>
                </ul>
                <h4 style="margin-top: 1rem;">Cautions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li>Penicillin allergy (1-10% reaction rate)</li>
                    <li>Hepatic impairment (jaundice risk)</li>
                    <li>Severe renal impairment (dose adjust)</li>
                </ul>
            `,
            'clarithromycin': `
                <h4>Key Interactions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li><strong>Colchicine:</strong> Contraindicated</li>
                    <li><strong>Statins (simvastatin, lovastatin):</strong> Contraindicated</li>
                    <li><strong>Warfarin/DOACs:</strong> Bleeding risk</li>
                    <li><strong>Ivabradine:</strong> Contraindicated</li>
                    <li><strong>QT prolonging drugs:</strong> Avoid</li>
                </ul>
                <h4 style="margin-top: 1rem;">Cautions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li>Hepatic/renal impairment (dose adjust)</li>
                    <li>QT prolongation risk</li>
                    <li>Myasthenia gravis</li>
                </ul>
            `,
            'erythromycin': `
                <h4>Key Interactions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li><strong>QT prolonging drugs:</strong> Contraindicated</li>
                    <li><strong>Cisapride, domperidone:</strong> Contraindicated</li>
                    <li><strong>Colchicine:</strong> Toxicity risk</li>
                    <li><strong>Statins:</strong> Myopathy risk</li>
                    <li><strong>Corticosteroids:</strong> Levels increased</li>
                </ul>
                <h4 style="margin-top: 1rem;">Cautions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li>Hepatic impairment</li>
                    <li>QT prolongation risk</li>
                    <li>Electrolyte disturbances</li>
                    <li>Porphyria (contraindicated)</li>
                </ul>
            `,
            'fusidic-acid': `
                <h4>Interactions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li>Minimal systemic absorption</li>
                    <li>No significant drug interactions</li>
                </ul>
                <h4 style="margin-top: 1rem;">Cautions:</h4>
                <ul style="padding-left: 1.5rem;">
                    <li>Avoid contact with flames (fire accelerant)</li>
                    <li>Do not use >10 days (resistance)</li>
                    <li>Hypersensitivity to ingredients</li>
                </ul>
                <p style="margin-top: 1rem;"><strong>Side effects:</strong> Skin reactions, pruritus</p>
            `
        };

        function selectMedication(card) {
            document.querySelectorAll('.med-card').forEach(c => c.style.border = '1px solid var(--border-color)');
            card.style.border = '2px solid var(--info-blue)';
            
            const med = card.getAttribute('data-med');
            const interactionCard = document.getElementById('interactionCard');
            const interactionContent = document.getElementById('interactionContent');
            
            interactionContent.innerHTML = interactionData[med];
            interactionCard.style.display = 'block';
        }

        // Emergency mode
        const emergencyToggle = document.getElementById('emergencyToggle');
        emergencyToggle.addEventListener('click', () => {
            document.body.classList.toggle('emergency-mode');
            emergencyToggle.classList.toggle('active');
            
            if (document.body.classList.contains('emergency-mode')) {
                document.querySelectorAll('.alert-urgent').forEach(alert => {
                    alert.style.animation = 'pulse 2s infinite';
                });
            } else {
                document.querySelectorAll('.alert-urgent').forEach(alert => {
                    alert.style.animation = 'none';
                });
            }
        });

        // FAB menu
        function toggleFabMenu() {
            document.getElementById('fabMenu').classList.toggle('active');
        }

        // FAB actions
        function emergencyReferral() {
            alert('Emergency Referral Protocol:\n\n1. Call surgical unit/ED\n2. State "Acute paronychia with red flags"\n3. Mention systemic signs if present\n4. Arrange immediate transfer');
        }

        function copyPrescription() {
            const prescription = `Acute Paronychia Treatment:

1st Line (no pen allergy):
Flucloxacillin 500mg PO QDS for 5-7 days

Alternative (pen allergy):
Clarithromycin 500mg PO BD for 5-7 days

Topical (minor):
Fusidic acid cream 3-4x/day for 7 days

Self-care: Warm soaks 10-15min 3-4x/day`;
            
            navigator.clipboard.writeText(prescription).then(() => {
                alert('Prescription template copied to clipboard!');
            });
        }

        function printGuide() {
            window.print();
        }

        function resetProgress() {
            document.querySelectorAll('.checkbox').forEach(cb => {
                cb.classList.remove('checked');
                cb.textContent = '‚òê';
            });
            document.querySelectorAll('.checklist li').forEach(item => {
                item.classList.remove('completed');
            });
            updateProgress();
            alert('All progress has been reset!');
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const activeContent = document.querySelector('.tab-content.active');
            
            if (searchTerm === '') {
                activeContent.querySelectorAll('.card').forEach(card => {
                    card.style.display = 'block';
                });
                return;
            }
            
            activeContent.querySelectorAll('.card').forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });

        // Close FAB menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.fab')) {
                document.getElementById('fabMenu').classList.remove('active');
            }
        });

        // Initialize progress
        updateProgress();

        // Add visual feedback to drug cards
        document.querySelectorAll('.med-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px)';
                card.style.boxShadow = 'var(--shadow-lg)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0)';
                card.style.boxShadow = 'var(--shadow-sm)';
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        document.querySelector('[data-tab="overview"]').click();
                        break;
                    case '2':
                        e.preventDefault();
                        document.querySelector('[data-tab="diagnosis"]').click();
                        break;
                    case '3':
                        e.preventDefault();
                        document.querySelector('[data-tab="management"]').click();
                        break;
                    case '4':
                        e.preventDefault();
                        document.querySelector('[data-tab="prescribing"]').click();
                        break;
                    case '5':
                        e.preventDefault();
                        document.querySelector('[data-tab="redflags"]').click();
                        break;
                    case 'e':
                        e.preventDefault();
                        document.getElementById('emergencyToggle').click();
                        break;
                    case 'p':
                        e.preventDefault();
                        printGuide();
                        break;
                }
            }
        });

        // Show keyboard shortcuts on load
        setTimeout(() => {
            console.log('Keyboard shortcuts: Ctrl+1-5 for tabs, Ctrl+E for emergency mode, Ctrl+P to print');
        }, 1000);

        // Auto-save preferences
        window.addEventListener('beforeunload', () => {
            const preferences = {
                emergencyMode: document.body.classList.contains('emergency-mode'),
                completedSteps: Array.from(document.querySelectorAll('.checkbox.checked')).map(cb => {
                    const item = cb.closest('li');
                    return item.textContent.trim().substring(0, 30);
                })
            };
            localStorage.setItem('paronychiaGuide', JSON.stringify(preferences));
        });

        // Load preferences
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('paronychiaGuide');
            if (saved) {
                const preferences = JSON.parse(saved);
                if (preferences.emergencyMode) {
                    document.getElementById('emergencyToggle').click();
                }
            }
        });
    </script>
</body>
</html>