<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemphigus: Clinical Quick-Scan Tool</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #0ea5e9;      /* General Info */
            --primary-dark: #0369a1;
            --danger-red: #dc2626;        /* Red Flags / Emergency */
            --danger-bg: #fef2f2;
            --success-green: #16a34a;     /* Safe / Positive Action */
            --success-bg: #f0fdf4;
            --neutral-gray: #64748b;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #0f172a;
            --border-radius: 12px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.5;
            padding-bottom: 40px;
        }

        /* --- Header & Navigation --- */
        header {
            background: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
        }

        .brand {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand span { color: var(--primary-blue); }

        nav button {
            background: transparent;
            border: none;
            padding: 0.5rem 1rem;
            font-weight: 600;
            color: var(--neutral-gray);
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 6px;
        }

        nav button:hover, nav button.active {
            background: var(--primary-blue);
            color: white;
        }

        /* --- Layout Utilities --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-main);
            border-left: 5px solid var(--primary-blue);
            padding-left: 10px;
        }

        /* --- Card Styles --- */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* --- Badges & Visual Cues --- */
        .badge {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 999px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.danger { background: var(--danger-bg); color: var(--danger-red); border: 1px solid rgba(220, 38, 38, 0.2); }
        .badge.success { background: var(--success-bg); color: var(--success-green); border: 1px solid rgba(22, 163, 74, 0.2); }
        .badge.info { background: #e0f2fe; color: var(--primary-blue); }

        /* --- Emergency Section --- */
        .emergency-banner {
            background: linear-gradient(135deg, var(--danger-red), #b91c1c);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            box-shadow: var(--shadow-md);
            animation: pulse-border 2s infinite;
        }

        .emergency-icon {
            min-width: 30px;
            height: 30px;
            fill: white;
        }

        .emergency-content h3 { margin-bottom: 5px; font-size: 1.2rem; }
        .emergency-content p { opacity: 0.9; font-size: 0.95rem; }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }

        /* --- Classification Cards --- */
        .type-card {
            border-top: 4px solid transparent;
        }
        .type-card.pv { border-top-color: var(--primary-blue); }
        .type-card.pf { border-top-color: #f59e0b; }
        .type-card.pnp { border-top-color: var(--danger-red); }

        .symptom-list {
            list-style: none;
            margin-top: 10px;
        }
        .symptom-list li {
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
            font-size: 0.9rem;
            color: var(--neutral-gray);
        }
        .symptom-list li::before {
            content: "‚Ä¢";
            color: var(--primary-blue);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .symptom-list li.red-flag::before { color: var(--danger-red); content: "!"; }

        /* --- Diagnostic Table/Cards --- */
        .diag-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        .diag-row:last-child { border-bottom: none; }
        .diag-label { font-weight: 600; width: 40%; }
        .diag-value { width: 60%; color: var(--neutral-gray); }
        .diag-value.highlight { color: var(--success-green); font-weight: 600; }
        .diag-value.alert { color: var(--danger-red); font-weight: 600; }

        /* --- Interactive Elements --- */
        .action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.2s;
            margin-top: 10px;
        }
        .action-btn:hover { background: var(--primary-dark); }
        .action-btn.secondary { background: white; color: var(--text-main); border: 1px solid #e2e8f0; }
        .action-btn.secondary:hover { background: #f8fafc; }

        /* --- Search Bar --- */
        .search-container {
            margin-bottom: 20px;
            position: relative;
        }
        .search-input {
            width: 100%;
            padding: 15px 20px;
            padding-left: 45px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--neutral-gray);
        }

        /* --- Utility for filtering --- */
        .hidden { display: none !important; }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: var(--neutral-gray);
            font-size: 0.8rem;
            margin-top: 40px;
            border-top: 1px solid #e2e8f0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            nav { display: none; } /* Simplified for mobile demo */
            header { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
        </svg>
        Pemphigus<span>Ref</span>
    </div>
    <nav>
        <button onclick="scrollToSection('overview')" class="active">Overview</button>
        <button onclick="scrollToSection('diagnosis')">Diagnosis</button>
        <button onclick="scrollToSection('red-flags')">Red Flags</button>
        <button onclick="scrollToSection('management')">Management</button>
    </nav>
    <button class="action-btn secondary" style="width: auto; padding: 8px 15px; margin:0;" onclick="toggleContrast()">Focus Mode</button>
</header>

<main class="container">

    <!-- Search -->
    <div class="search-container">
        <span class="search-icon">üîç</span>
        <input type="text" class="search-input" id="searchBar" placeholder="Quick scan symptoms (e.g., 'oral', 'lung', 'biopsy')..." onkeyup="filterContent()">
    </div>

    <!-- Emergency Banner -->
    <div class="emergency-banner" id="red-flags">
        <svg class="emergency-icon" viewBox="0 0 24 24">
            <path d="M12 2L1 21h22M12 9v6m0 4h.01"/>
        </svg>
        <div class="emergency-content">
            <h3>CRITICAL ALERT: Paraneoplastic Pemphigus (PNP)</h3>
            <p><strong>Immediate Action:</strong> Assess for pulmonary involvement (Bronchiolitis obliterans). Respiratory failure is the leading cause of death. Screen for underlying malignancy (Lymphoma, CLL, Castleman's).</p>
        </div>
    </div>

    <!-- Overview Section -->
    <section id="overview">
        <div class="section-title">Clinical Classification</div>
        <div class="grid-3">
            <!-- PV -->
            <div class="card type-card pv">
                <div class="card-header">
                    Pemphigus Vulgaris (PV)
                    <span class="badge info">Most Common (~70%)</span>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 10px;">Autoantibodies: <strong>Anti-Desmoglein 3</strong> (Mucosal) & <strong>Desmoglein 1</strong> (Skin).</p>
                <ul class="symptom-list">
                    <li class="red-flag"><strong>Oral Mucosa:</strong> Often initial presentation. Painful erosions, buccal/gingival.</li>
                    <li><strong>Skin:</strong> Flaccid blisters, post-bullous erosions.</li>
                    <li><strong>Areas:</strong> Scalp, face, chest, intertriginous.</li>
                    <li><strong>Sign:</strong> Nikolsky sign (+) (shearing force separates skin).</li>
                </ul>
            </div>

            <!-- PF -->
            <div class="card type-card pf">
                <div class="card-header">
                    Pemphigus Foliaceus (PF)
                    <span class="badge info">Skin Only</span>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 10px;">Autoantibodies: <strong>Anti-Desmoglein 1</strong>.</p>
                <ul class="symptom-list">
                    <li><strong>Skin Only:</strong> No mucosal involvement (Mouth spared).</li>
                    <li><strong>Lesions:</strong> Superficial, crusted erosions.</li>
                    <li><strong>Areas:</strong> Seborrheic distribution (Scalp, Face, Upper trunk).</li>
                    <li><strong>Note:</strong> Endemic in Brazil (Fogo selvagem).</li>
                </ul>
            </div>

            <!-- PNP -->
            <div class="card type-card pnp">
                <div class="card-header">
                    Paraneoplastic (PNP)
                    <span class="badge danger">Life Threatening</span>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 10px;">Autoantibodies: <strong>Plakin family</strong> + Desmogleins. Associated with malignancy.</p>
                <ul class="symptom-list">
                    <li class="red-flag"><strong>Lungs:</strong> Bronchiolitis obliterans (Dyspnea).</li>
                    <li class="red-flag"><strong>Mucosa:</strong> Severe, intractable stomatitis (Lips/Tongue).</li>
                    <li><strong>Skin:</strong> Polymorphic (Lichen planus-like, EM-like, PV-like).</li>
                    <li class="red-flag"><strong>Cancer:</strong> Rule out Non-Hodgkin Lymphoma, CLL.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Diagnosis Section -->
    <section id="diagnosis" style="margin-top: 40px;">
        <div class="section-title">Diagnostic Algorithm</div>
        
        <div class="grid-2">
            <!-- Clinical -->
            <div class="card">
                <div class="card-header" style="color: var(--primary-blue);">
                    1. Clinical Assessment
                </div>
                <div class="diag-row">
                    <span class="diag-label">History</span>
                    <span class="diag-value">Chronic erosive blisters, weight loss, dysphagia, pain.</span>
                </div>
                <div class="diag-row">
                    <span class="diag-label">Nikolsky Sign</span>
                    <span class="diag-value">Positive (Lateral pressure causes desquamation).</span>
                </div>
                <div class="diag-row">
                    <span class="diag-label">Rule Out</span>
                    <span class="diag-value">Drugs (Penicillamine, ACEi), Bullous Pemphigoid, Herpes.</span>
                </div>
            </div>

            <!-- Lab -->
            <div class="card" style="border-left: 5px solid var(--success-green);">
                <div class="card-header" style="color: var(--success-green);">
                    2. Lab Confirmation
                </div>
                <div class="diag-row">
                    <span class="diag-label">Biopsy (H&E)</span>
                    <span class="diag-value">Suprabasilar acantholysis (Tombstone appearance).</span>
                </div>
                <div class="diag-row">
                    <span class="diag-label">DIF (Gold Standard)</span>
                    <span class="diag-value highlight">IgG / C3 deposits on keratinocyte surface.</span>
                </div>
                <div class="diag-row">
                    <span class="diag-label">ELISA</span>
                    <span class="diag-value">Anti-Dsg1 / Anti-Dsg3 titers (Correlate with activity).</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Management Section -->
    <section id="management" style="margin-top: 40px;">
        <div class="section-title">Management Approach</div>
        <div class="card" style="margin-bottom: 20px;">
            <div class="grid-2">
                <div>
                    <h4 style="color: var(--primary-blue); margin-bottom: 10px;">Primary Goal</h4>
                    <p>Reduce pathogenic autoantibodies and control blistering.</p>
                    <div style="margin-top: 15px; padding: 10px; background: #f1f5f9; border-radius: 8px;">
                        <strong style="display:block; margin-bottom: 5px;">Standard Regimen</strong>
                        Systemic Corticosteroids (e.g., Prednisone) + Steroid-Sparing Immunosuppressant (Azathioprine, Mycophenolate mofetil).
                    </div>
                </div>
                <div>
                    <h4 style="color: var(--danger-red); margin-bottom: 10px;">Complications</h4>
                    <ul class="symptom-list">
                        <li><strong>Infection:</strong> Secondary bacterial/yeast skin infection.</li>
                        <li><strong>Iatrogenic:</strong> Side effects from long-term steroids.</li>
                        <li><strong>Prognosis:</strong> PNP has poor prognosis; PV/PF manageable with modern therapy.</li>
                    </ul>
                </div>
            </div>
        </div>

        <button class="action-btn" onclick="alert('Simulated: Opening detailed Treatment Algorithm PDF...')">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
            View Detailed Treatment Algorithm
        </button>
    </section>

    <!-- Differential Quick Look -->
    <section style="margin-top: 40px;">
        <div class="section-title">Key Differentials</div>
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-sm);">
            <thead style="background: #f8fafc; text-align: left;">
                <tr>
                    <th style="padding: 15px;">Condition</th>
                    <th style="padding: 15px;">Key Differentiator</th>
                    <th style="padding: 15px;">DIF Finding</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 15px; font-weight: 600;">Bullous Pemphigoid</td>
                    <td style="padding: 15px; color: var(--neutral-gray);">Tense blisters, rare oral involvement, pruritic.</td>
                    <td style="padding: 15px;"><span class="badge info">Linear</span> basement membrane zone.</td>
                </tr>
                <tr style="border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 15px; font-weight: 600;">Hailey-Hailey</td>
                    <td style="padding: 15px; color: var(--neutral-gray);">Flexural areas, family history, no mucosa.</td>
                    <td style="padding: 15px;"><span class="badge success">Negative</span> immunoreactants.</td>
                </tr>
                <tr>
                    <td style="padding: 15px; font-weight: 600;">Erythema Multiforme</td>
                    <td style="padding: 15px; color: var(--neutral-gray);">Targetoid plaques, rapid onset, associated HSV.</td>
                    <td style="padding: 15px;">Interface dermatitis, fibrin deposition.</td>
                </tr>
            </tbody>
        </table>
    </section>

</main>

<footer>
    <p>Content based on BMJ Best Practice Pemphigus (last updated May 20, 2025). <br>For educational use only. Always verify with current guidelines.</p>
</footer>

<script>
    // --- Navigation Logic ---
    function scrollToSection(id) {
        const element = document.getElementById(id);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // Update active state
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
    }

    // --- Focus Mode (High Contrast) ---
    let focusMode = false;
    function toggleContrast() {
        focusMode = !focusMode;
        const body = document.body;
        const cards = document.querySelectorAll('.card, .type-card');
        
        if (focusMode) {
            // High Contrast Dark Mode for Focus
            body.style.background = '#111827';
            body.style.color = '#f3f4f6';
            
            cards.forEach(card => {
                card.style.background = '#1f2937';
                card.style.borderColor = '#374151';
                card.style.color = '#e5e7eb';
            });
            document.querySelector('header').style.background = '#1f2937';
            document.querySelector('header').style.borderColor = '#374151';
            document.querySelector('.brand span').style.color = '#38bdf8';
        } else {
            // Reset to default light theme
            body.style.background = '#f8fafc';
            body.style.color = '#0f172a';
            
            cards.forEach(card => {
                card.style.background = '#ffffff';
                card.style.borderColor = '#e2e8f0';
                card.style.color = 'inherit';
            });
            document.querySelector('header').style.background = '#ffffff';
            document.querySelector('header').style.borderColor = '#e2e8f0';
            document.querySelector('.brand span').style.color = '#0ea5e9';
        }
    }

    // --- Search/Filter Logic ---
    function filterContent() {
        const input = document.getElementById('searchBar').value.toLowerCase();
        const cards = document.querySelectorAll('.card, table tr');
        const emergency = document.querySelector('.emergency-banner');

        // Always keep Emergency Banner visible if relevant, 
        // but if user searches for something specific, we can dim it (optional)
        // Here we just filter cards/rows
        
        cards.forEach(item => {
            const text = item.innerText.toLowerCase();
            if(text.includes(input)) {
                item.classList.remove('hidden');
                // Highlight the card slightly if matching
                if(input.length > 2) item.style.boxShadow = "0 0 0 2px var(--primary-blue)";
                else item.style.boxShadow = "";
            } else {
                item.classList.add('hidden');
                item.style.boxShadow = "";
            }
        });

        // Special handling for table rows (hide tbody if all tr hidden)
        const tableRows = document.querySelectorAll('tbody tr');
        let anyRowVisible = false;
        tableRows.forEach(row => {
            if (!row.classList.contains('hidden')) anyRowVisible = true;
        });
        const table = document.querySelector('table');
        if (table) {
            if (!anyRowVisible && input !== '') table.classList.add('hidden');
            else table.classList.remove('hidden');
        }
    }

    // Initialize animations on load
    document.addEventListener('DOMContentLoaded', () => {
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
                card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });
</script>

</body>
</html>