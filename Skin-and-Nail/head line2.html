<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Quick-Scan: Pediculosis Capitis</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --color-primary: #0056b3; /* Clinical Blue */
            --color-primary-light: #e3f2fd;
            --color-success: #2e7d32; /* Safe/Action Green */
            --color-success-bg: #e8f5e9;
            --color-warning: #f57f17; /* Caution Orange */
            --color-warning-bg: #fff3e0;
            --color-danger: #c62828; /* Red Flag Red */
            --color-danger-bg: #ffebee;
            --color-text: #263238;
            --color-text-light: #546e7a;
            --color-border: #cfd8dc;
            --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --radius: 8px;
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: #f8f9fa;
            color: var(--color-text);
            line-height: 1.5;
        }

        /* --- LAYOUT UTILITIES --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
        }

        .flex-row { display: flex; align-items: center; gap: 10px; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        .mt-2 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        
        /* --- HEADER & NAV --- */
        header {
            background: white;
            border-bottom: 4px solid var(--color-primary);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { font-size: 1.5rem; color: var(--color-primary); font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        .subtitle { font-size: 0.9rem; color: var(--color-text-light); }

        nav button {
            background: none;
            border: none;
            padding: 10px 15px;
            font-weight: 600;
            color: var(--color-text-light);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        nav button.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        /* --- RED FLAG BANNERS --- */
        .alert-box {
            padding: 15px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            border-left: 6px solid;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            animation: slideIn 0.5s ease-out;
        }

        .alert-danger {
            background: var(--color-danger-bg);
            border-color: var(--color-danger);
            color: var(--color-danger);
        }

        .alert-info {
            background: var(--color-primary-light);
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        /* --- CLINICAL CALCULATOR (The Tool) --- */
        .tool-panel {
            background: white;
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-card);
            border: 2px solid var(--color-primary);
            margin-bottom: 30px;
        }

        .tool-header { font-size: 1.2rem; font-weight: bold; margin-bottom: 15px; color: var(--color-primary); display: flex; align-items: center; gap: 10px; }
        
        .age-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .age-btn {
            background: white;
            border: 2px solid var(--color-border);
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .age-btn:hover { border-color: var(--color-primary); }
        .age-btn.selected {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-primary-light);
        }

        #treatment-result {
            background: var(--color-success-bg);
            border: 1px solid var(--color-success);
            padding: 20px;
            border-radius: var(--radius);
            display: none; /* Hidden by default */
        }

        .result-title { font-weight: bold; color: var(--color-success); font-size: 1.1rem; margin-bottom: 10px; }
        .result-drug { font-size: 1.4rem; font-weight: 800; color: var(--color-text); margin-bottom: 5px; }
        .result-notes { font-size: 0.9rem; color: var(--color-text-light); }

        /* --- CARDS & TABLES --- */
        .card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow-card);
            margin-bottom: 20px;
            transition: transform 0.2s;
            border-top: 4px solid var(--color-border);
        }

        .card:hover { transform: translateY(-3px); }

        .card-blue { border-top-color: var(--color-primary); }
        .card-green { border-top-color: var(--color-success); }
        .card-yellow { border-top-color: var(--color-warning); }

        .card-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        
        .badge {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: 700;
        }
        .badge-resist { background: var(--color-warning-bg); color: var(--color-warning); }
        .badge-safe { background: var(--color-success-bg); color: var(--color-success); }
        .badge-toxic { background: var(--color-danger-bg); color: var(--color-danger); }

        /* --- DIAGNOSIS VISUALS --- */
        .diagnosis-row {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 15px;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .diagnosis-row:last-child { border-bottom: none; }

        .visual-icon {
            width: 80px;
            height: 80px;
            background: #eee;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        .icon-lice { background: var(--color-success-bg); color: var(--color-success); }
        .icon-nit { background: var(--color-warning-bg); color: var(--color-warning); }
        .icon-danger { background: var(--color-danger-bg); color: var(--color-danger); }

        /* --- INTERACTIVE CHECKLIST --- */
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: #f1f3f4;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .checklist-item:hover { background: #e8eaed; }
        .checklist-item.completed {
            background: var(--color-success-bg);
            text-decoration: line-through;
            opacity: 0.7;
        }
        .checkbox-circle {
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-text-light);
            border-radius: 50%;
        }
        .checklist-item.completed .checkbox-circle {
            background: var(--color-success);
            border-color: var(--color-success);
        }

        /* --- ANIMATIONS --- */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- PRINT STYLES --- */
        @media print {
            header, nav, .tool-panel { display: none; }
            .container { max-width: 100%; }
            body { background: white; }
        }
    </style>
</head>
<body>

<!-- RED FLAGS / WARNINGS BAR -->
<div class="container" style="margin-top: 20px;">
    <div class="alert-box alert-danger">
        <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
        <div>
            <strong>TOXICITY ALERT:</strong> Lindane is neurotoxic and banned in many regions. Do NOT use. Be aware of resistance to Permethrin/Pyrethrins in your area.
        </div>
    </div>
    <div class="alert-box alert-danger">
        <div style="font-size: 1.5rem;">ü¶†</div>
        <div>
            <strong>SECONDARY INFECTION:</strong> Watch for impetigo (honey-coloured crusts) or cervical lymphadenopathy. Treat bacterial infection if present.
        </div>
    </div>
</div>

<header>
    <div class="container header-content">
        <div>
            <h1>Pediculosis Capitis</h1>
            <div class="subtitle">Quick-Scan Clinical Reference</div>
        </div>
        <nav>
            <button class="active" onclick="switchTab('diagnosis')">Diagnosis</button>
            <button onclick="switchTab('treatment')">Treatment</button>
            <button onclick="switchTab('algorithm')">Algorithm</button>
            <button onclick="switchTab('prevention')">Prevention</button>
        </nav>
    </div>
</header>

<main class="container">

    <!-- TREATMENT CALCULATOR TOOL -->
    <section class="tool-panel">
        <div class="tool-header">ü©∫ Treatment Selector</div>
        <p class="mb-1">Select patient age group to see recommended 1st & 2nd line therapies:</p>
        
        <div class="age-selector">
            <button class="age-btn" onclick="selectAge('infant', this)">< 2 months</button>
            <button class="age-btn" onclick="selectAge('toddler', this)">2 mo - 2 years</button>
            <button class="age-btn selected" onclick="selectAge('child', this)">‚â• 2 years & Adult</button>
            <button class="age-btn" onclick="selectAge('pregnant', this)">Pregnant/Lactating</button>
        </div>

        <div id="treatment-result" style="display: block;">
            <div class="result-title">1st Line Recommendation</div>
            <div class="result-drug" id="drug-name">Dimeticones (Physical Mode)</div>
            <div class="result-notes" id="drug-notes">Non-toxic, low resistance risk. If unavailable: Permethrin 1% (check resistance) or Spinosad/Ivermectin (US specific).</div>
            <hr style="margin: 10px 0; border: 0; border-top: 1px solid #ccc;">
            <div style="font-size: 0.9rem;">
                <strong>Mechanism:</strong> <span id="drug-mech" style="color: var(--color-success);">Physical (Suffocation/Osmotic)</span><br>
                <strong>Dosing:</strong> <span id="drug-dose">2 treatments, Days 0 and 9 (or 8-10)</span>
            </div>
        </div>
    </section>

    <!-- SECTION: DIAGNOSIS -->
    <div id="diagnosis" class="tab-content">
        <div class="grid-2">
            <div class="card card-blue">
                <div class="card-title">üîç Diagnostic Criteria</div>
                <div class="diagnosis-row">
                    <div class="visual-icon icon-lice">üêú</div>
                    <div>
                        <strong>Live Louse (Pathognomonic)</strong><br>
                        <small>Confirm with wet combing. Crawl quickly. Sesame seed size.</small>
                    </div>
                </div>
                <div class="diagnosis-row">
                    <div class="visual-icon icon-nit">ü•ö</div>
                    <div>
                        <strong>Nits < 6mm from Scalp</strong><br>
                        <small>Suggests viable egg. Confirm live louse if possible.</small>
                    </div>
                </div>
                <div class="diagnosis-row">
                    <div class="visual-icon" style="background:#eee; color:#999;">ü•ö</div>
                    <div>
                        <strong>Nits > 1cm from Scalp</strong><br>
                        <small>Empty casings (Past infestation). <strong>Do not treat</strong> based solely on this.</small>
                    </div>
                </div>
            </div>

            <div class="card card-green">
                <div class="card-title">‚úÖ Gold Standard: Wet Combing</div>
                <p style="font-size:0.9rem; color: #666; margin-bottom: 15px;">Visual inspection underestimates prevalence by 3.5x. Use conditioner to slow lice down.</p>
                
                <div id="combing-checklist">
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Wash hair with ordinary shampoo.</span>
                    </div>
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Apply ample conditioner (slows lice).</span>
                    </div>
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Comb from scalp to ends with fine-tooth nit comb.</span>
                    </div>
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Wipe comb on tissue after every stroke.</span>
                    </div>
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Check comb/tissue for live lice.</span>
                    </div>
                    <div class="checklist-item" onclick="toggleCheck(this)">
                        <div class="checkbox-circle"></div>
                        <span>Rinse hair. Repeat process.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION: TREATMENT -->
    <div id="treatment" class="tab-content" style="display:none;">
        <h2 class="mb-1" style="color: var(--color-primary);">Pharmacological Options</h2>
        <p class="mb-1">Consult local guidelines regarding resistance.</p>

        <div class="grid-2">
            <!-- Dimeticones -->
            <div class="card card-green">
                <div class="flex-between mb-1">
                    <div class="card-title" style="color: var(--color-success);">Dimeticones</div>
                    <span class="badge badge-safe">PHYSICAL MODE</span>
                </div>
                <p>Silicone oils that coat louse, block spiracles, and disrupt water balance. Non-toxic.</p>
                <hr style="border:0; border-top:1px solid #eee; margin: 10px 0;">
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>Pros:</strong> Low resistance risk, non-neurotoxic, ovicidal activity possible.</li>
                    <li><strong>Cons:</strong> Not available in US (Primary UK/Europe option).</li>
                </ul>
            </div>

            <!-- Permethrin -->
            <div class="card card-yellow">
                <div class="flex-between mb-1">
                    <div class="card-title" style="color: var(--color-warning);">Permethrin 1%</div>
                    <span class="badge badge-resist">RESISTANCE RISK</span>
                </div>
                <p>Synthetic pyrethroid. Neurotoxic mode of action.</p>
                <hr style="border:0; border-top:1px solid #eee; margin: 10px 0;">
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>Pros:</strong> Widely available OTC.</li>
                    <li><strong>Cons:</strong> Widespread resistance. Not ovicidal. Avoid in chrysanthemum allergy.</li>
                </ul>
            </div>

            <!-- Malathion -->
            <div class="card card-yellow">
                <div class="flex-between mb-1">
                    <div class="card-title">Malathion 0.5%</div>
                    <span class="badge badge-resist">3rd LINE / FLAMMABLE</span>
                </div>
                <p>Organophosphate. Cholinesterase inhibitor.</p>
                <hr style="border:0; border-top:1px solid #eee; margin: 10px 0;">
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>Note:</strong> Highly flammable. Resistance common in UK, less in US.</li>
                    <li><strong>Age:</strong> ‚â• 6 years only.</li>
                </ul>
            </div>

            <!-- Ivermectin/Spinosad -->
            <div class="card card-blue">
                <div class="card-title">Ivermectin Lotion / Spinosad</div>
                <p>Prescription options for resistant cases.</p>
                <hr style="border:0; border-top:1px solid #eee; margin: 10px 0;">
                <ul style="padding-left: 20px; font-size: 0.9rem;">
                    <li><strong>Ivermectin:</strong> Single dose often effective (no ovicidal, but binds to hair).</li>
                    <li><strong>Spinosad:</strong> Ovicidal. Low resistance.</li>
                    <li><strong>Age:</strong> ‚â• 6 months.</li>
                </ul>
            </div>
        </div>

        <div class="alert-box alert-danger mt-2">
            <strong>AVOID:</strong> Lindane (Neurotoxic), Essential Oils (Unregulated/Safety unknown), Gasoline/Kerosene (Extreme fire risk/Toxic).
        </div>
    </div>

    <!-- SECTION: ALGORITHM -->
    <div id="algorithm" class="tab-content" style="display:none;">
        <div class="card card-blue" style="border:none; background: #f4f8fb;">
            <h2 class="mb-1">Management Flow</h2>
            
            <div style="display: flex; flex-direction: column; gap: 15px;">
                <!-- Step 1 -->
                <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid var(--color-primary);">
                    <strong>1. Confirm Active Infestation</strong><br>
                    Find live lice via wet combing. Do not treat for nits alone.
                </div>

                <!-- Arrow -->
                <div style="text-align: center; color: var(--color-primary); font-size: 1.5rem;">‚Üì</div>

                <!-- Step 2 -->
                <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid var(--color-success);">
                    <strong>2. First-Line Treatment</strong><br>
                    Apply Dimeticones (Physical) OR Permethrin 1% (if local resistance is low).<br>
                    <em>Repeat treatment in 8-10 days to kill hatchlings.</em>
br>
                </div>

                <!-- Arrow -->
                <div style="text-align: center; color: var(--color-primary); font-size: 1.5rem;">‚Üì</div>

                <!-- Step 3 -->
                <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid var(--color-warning);">
                    <strong>3. Check at Day 9-12</strong><br>
                    <ul>
                        <li>If Live Lice persist: Likely Resistance. Switch class (e.g., Physical ‚Üí Neurotoxic or vice versa).</li>
                        <li>If Eggs only: No active infestation. Monitor.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION: PREVENTION -->
    <div id="prevention" class="tab-content" style="display:none;">
        <div class="grid-2">
            <div class="card card-green">
                <div class="card-title">‚úÖ Do's</div>
                <ul style="padding-left: 20px;">
                    <li>Treat close contacts (bedmates, family) if infested.</li>
                    <li>Notify parents/school so they can check others.</li>
                    <li>Screen weekly using wet combing if exposed.</li>
                    <li>Use mechanical removal (nit comb) to augment pediculicides.</li>
                </ul>
            </div>
            <div class="card card-yellow">
                <div class="card-title">‚õî Don'ts</div>
                <ul style="padding-left: 20px;">
                    <li><strong>No "No Nit" policies:</strong> Nits >1cm from scalp are not active. Excluding children is ineffective.</li>
                    <li><strong>Don't over-clean environment:</strong> Fomite transmission is rare. Lice die <24hrs off-head. Focus on the head.</li>
                    <li><strong>Don't use fumigation sprays:</strong> Unnecessary and toxic.</li>
                </ul>
            </div>
        </div>
    </div>

</main>

<footer style="background: #263238; color: white; padding: 40px 20px; margin-top: 50px;">
    <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
        <div>
            <strong>Reference:</strong> BMJ Best Practice - Pediculosis Capitis (Last updated Apr 23, 2025).
        </div>
        <div style="font-size: 0.8rem; opacity: 0.7;">
            For educational and clinical support purposes only.
        </div>
    </div>
</footer>

<script>
    // --- TAB LOGIC ---
    function switchTab(tabId) {
        // Hide all contents
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach(el => el.style.display = 'none');
        
        // Show selected
        document.getElementById(tabId).style.display = 'block';

        // Update buttons
        const buttons = document.querySelectorAll('nav button');
        buttons.forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }

    // --- CALCULATOR LOGIC ---
    const treatmentData = {
        'infant': {
            drug: 'Mechanical Removal (Physical)',
            notes: 'Head lice rare in this age. Remove by hand/comb. No pediculicides recommended.',
            mech: 'N/A',
            dose: 'As needed manually',
            color: 'var(--color-warning)'
        },
        'toddler': {
            drug: 'Dimeticone OR Permethrin 1%',
            notes: 'Dimeticones preferred (Physical mode). Permethrin used if local resistance low.',
            mech: 'Physical or Neurotoxic',
            dose: 'Days 0 and 8-10',
            color: 'var(--color-success)'
        },
        'child': {
            drug: 'Dimeticone OR Permethrin 1%',
            notes: 'Dimeticone (Physical) is 1st line in UK/Europe. Permethrin 1% common in US (watch for resistance).',
            mech: 'Physical or Neurotoxic',
            dose: 'Days 0 and 8-10',
            color: 'var(--color-success)'
        },
        'pregnant': {
            drug: 'Mechanical Removal OR Dimeticone',
            notes: 'Most pediculicides low toxicity, but caution advised in lactation. Physical mode is safest option.',
            mech: 'Physical',
            dose: 'As needed',
            color: 'var(--color-success)'
        }
    };

    function selectAge(group, btnElement) {
        // UI Update
        document.querySelectorAll('.age-btn').forEach(b => b.classList.remove('selected'));
        btnElement.classList.add('selected');

        // Data Update
        const data = treatmentData[group];
        const resultBox = document.getElementById('treatment-result');
        
        // Fade effect
        resultBox.style.opacity = 0;
        
        setTimeout(() => {
            document.getElementById('drug-name').innerText = data.drug;
            document.getElementById('drug-notes').innerText = data.notes;
            document.getElementById('drug-mech').innerText = data.mech;
            document.getElementById('drug-mech').style.color = data.color;
            document.getElementById('drug-dose').innerText = data.dose;
            
            resultBox.style.opacity = 1;
        }, 200);
    }

    // --- CHECKLIST INTERACTION ---
    function toggleCheck(element) {
        element.classList.toggle('completed');
    }

    // Initialize calculator
    selectAge('child', document.querySelector('.age-btn.selected'));

</script>

</body>
</html>