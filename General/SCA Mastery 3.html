
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCA Exam Revision Companion</title>
    <style>
        :root {
            --primary: #0284c7; /* Medical Blue */
            --primary-dark: #0369a1;
            --accent: #0ea5e9;
            --success: #22c55e;
            --warning: #eab308;
            --danger: #ef4444;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header & Nav */
        header {
            background-color: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            font-size: 1.25rem;
            color: var(--primary-dark);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        nav {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 2px; /* Scrollbar spacing */
        }

        button.nav-btn {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-muted);
            border-radius: 6px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        button.nav-btn:hover {
            background-color: var(--bg);
            color: var(--primary);
        }

        button.nav-btn.active {
            background-color: var(--primary);
            color: white;
        }

        /* Main Content Area */
        main {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
        }

        .view-section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .view-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- SECTION: DASHBOARD & OVERVIEW --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .card h3 {
            font-size: 1rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .card .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .card.highlight {
            border-left: 5px solid var(--danger);
            background-color: #fff1f2;
        }

        .card.highlight .value {
            color: var(--danger);
        }

        .golden-rules ul {
            list-style: none;
        }

        .golden-rules li {
            background: #fff;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            border-left: 4px solid var(--success);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        /* --- SECTION: TIMER --- */
        .timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }

        .timer-display {
            font-size: 6rem;
            font-weight: 800;
            font-variant-numeric: tabular-nums;
            color: var(--text-main);
            line-height: 1;
            margin: 1rem 0;
        }

        .timer-phase {
            font-size: 1.5rem;
            font-weight: 600;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            background: var(--bg);
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: var(--bg); color: var(--text-main); border: 1px solid var(--border); }

        /* --- SECTION: PHRASES --- */
        .search-bar {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        .phrase-category {
            margin-bottom: 2rem;
        }

        .category-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            color: var(--primary-dark);
        }

        .phrase-item {
            background: var(--surface);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .phrase-item:hover {
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .phrase-text {
            font-weight: 500;
            color: var(--text-main);
        }

        .phrase-context {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
            font-style: italic;
        }

        .mnemonic-tag {
            display: inline-block;
            background: #e0f2fe;
            color: var(--primary-dark);
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            margin-top: 0.5rem;
            font-weight: 600;
        }

        /* --- SECTION: FLASHCARDS --- */
        .flashcard-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            perspective: 1000px;
            height: 400px;
            margin-top: 2rem;
        }

        .flashcard {
            width: 100%;
            max-width: 500px;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .flashcard-front {
            background: var(--surface);
            border: 2px solid var(--primary);
            color: var(--primary-dark);
        }

        .flashcard-back {
            background: var(--primary-dark);
            color: white;
            transform: rotateY(180deg);
        }

        .flashcard h4 { font-size: 1.25rem; margin-bottom: 1rem; }
        .flashcard p { font-size: 1.1rem; }
        .flashcard-label { 
            position: absolute; 
            top: 1rem; 
            left: 1rem; 
            font-size: 0.75rem; 
            text-transform: uppercase; 
            opacity: 0.7; 
        }

        .flashcard-controls {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            .timer-display { font-size: 4rem; }
            header { flex-direction: column; align-items: flex-start; }
            nav { width: 100%; }
        }

        /* Utility for copy feedback */
        .copied-feedback {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--text-main);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 100;
        }
        .copied-feedback.show { opacity: 1; }
    </style>
</head>
<body>

<header>
    <h1>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>
        SCA Revision
    </h1>
    <nav>
        <button class="nav-btn active" onclick="switchTab('overview')">Overview & Tips</button>
        <button class="nav-btn" onclick="switchTab('phrases')">Phrase Bank</button>
        <button class="nav-btn" onclick="switchTab('timer')">Consultation Timer</button>
        <button class="nav-btn" onclick="switchTab('flashcards')">Flashcards</button>
    </nav>
</header>

<main>
    <!-- SECTION: OVERVIEW -->
    <section id="overview" class="view-section active">
        <div class="stats-grid">
            <div class="card">
                <h3>Exam Duration</h3>
                <div class="value">12 Minutes</div>
                <div style="font-size: 0.9rem; color: #64748b;">Per station (9 video, 3 telephone)</div>
            </div>
            <div class="card highlight">
                <h3>Critical Switch Point</h3>
                <div class="value">6.5 - 7 Min</div>
                <div style="font-size: 0.9rem; color: #ef4444;">Move to Management NOW</div>
            </div>
            <div class="card">
                <h3>Management Weight</h3>
                <div class="value">43%</div>
                <div style="font-size: 0.9rem; color: #64748b;">Highest Marked Domain</div>
            </div>
            <div class="card">
                <h3>Pass Standard</h3>
                <div class="value">Independent GP</div>
                <div style="font-size: 0.9rem; color: #64748b;">Newly Qualified Level</div>
            </div>
        </div>

        <div class="card">
            <h3>The "Neighbor" Model (3-Part Structure)</h3>
            <ul style="list-style: none; margin-top: 1rem;">
                <li style="margin-bottom: 0.5rem;"><strong>1. Patient's Part (0 - ~6.5m):</strong> Open questions, Story, Impact, ICE. <em>"Shut up and listen."</em></li>
                <li style="margin-bottom: 0.5rem;"><strong>2. Doctor's Part (~6.5m - 7m):</strong> Medical questions, Red flags, Closed questions. <em>Keep this tight!</em></li>
                <li style="margin-bottom: 0.5rem;"><strong>3. Shared Part (7m - 12m):</strong> Management, Safety netting, Follow-up. <em>Think out loud.</em></li>
            </ul>
        </div>

        <div style="margin-top: 2rem;">
            <h3 style="margin-bottom: 1rem;">Golden Rules & Mnemonics</h3>
            <div class="golden-rules">
                <ul>
                    <li><strong>ICE (Ideas, Concerns, Expectations):</strong> Ask them, but more importantly, <strong>ADDRESS</strong> them in your management plan to get marks.</li>
                    <li><strong>Safety Netting:</strong> "If X happens, do Y." Never miss this. It's free marks if running out of time.</li>
                    <li><strong>Think Out Loud:</strong> Solves uncertainty. "I'm weighing up a couple of options..."</li>
                    <li><strong>Two-Part Steer:</strong> "Thank you for X, but now I need to ask about Y." Polite control.</li>
                    <li><strong>Results Cases:</strong> Give results early. Don't waffle. Ask "What's going through your mind right now?"</li>
                    <li><strong>When Stuck:</strong> Explain the dilemma honestly. "This is a bit of a puzzle..."</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- SECTION: PHRASES -->
    <section id="phrases" class="view-section">
        <input type="text" id="phraseSearch" class="search-bar" placeholder="Search phrases (e.g., 'opening', 'safety netting', 'ice')..." onkeyup="filterPhrases()">
        
        <div id="phraseContainer">
            <!-- Content injected via JS -->
        </div>
    </section>

    <!-- SECTION: TIMER -->
    <section id="timer" class="view-section">
        <div class="card timer-container">
            <div id="timerPhase" class="timer-phase">Ready to Start</div>
            <div id="timerDisplay" class="timer-display">12:00</div>
            
            <div style="margin-bottom: 1.5rem; color: var(--text-muted);">
                <p>Target: Switch to Management by <strong style="color:var(--danger)">06:30</strong></p>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="startTimer()">Start Consultation</button>
                <button class="btn btn-secondary" onclick="pauseTimer()">Pause</button>
                <button class="btn btn-secondary" onclick="resetTimer()">Reset</button>
            </div>
        </div>

        <div style="margin-top: 2rem;">
            <h3>Time Management Internal Dialogue</h3>
            <div class="card" style="margin-top: 1rem;">
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                        <span><strong>03:00</strong></span>
                        <span>Check: Am I still in Patient's Part? (Good)</span>
                    </li>
                    <li style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                        <span><strong>06:00</strong></span>
                        <span>Warning: I MUST move to management in 30 seconds.</span>
                    </li>
                    <li style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                        <span><strong>07:00</strong></span>
                        <span style="color: var(--danger); font-weight: bold;">ALERT: If not in management now, I am in trouble.</span>
                    </li>
                    <li style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                        <span><strong>10:00</strong></span>
                        <span>Check: Have I done safety netting yet?</span>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <!-- SECTION: FLASHCARDS -->
    <section id="flashcards" class="view-section">
        <div style="text-align: center;">
            <p>Test your recall of the Framework and Difficult Scenarios.</p>
        </div>
        
        <div class="flashcard-container">
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div class="flashcard-face flashcard-front">
                    <span class="flashcard-label">Scenario</span>
                    <h4 id="fcQuestion">Loading...</h4>
                </div>
                <div class="flashcard-face flashcard-back">
                    <span class="flashcard-label">Key Phrase / Action</span>
                    <p id="fcAnswer">...</p>
                </div>
            </div>
        </div>

        <div class="flashcard-controls">
            <button class="btn btn-secondary" onclick="prevCard()">&#8592; Previous</button>
            <button class="btn btn-secondary" onclick="nextCard()">Next &#8594;</button>
        </div>
    </section>

</main>

<div id="toast" class="copied-feedback">Copied to clipboard!</div>

<script>
    // --- DATA: PHRASES ---
    const phraseData = [
        {
            category: "Opening the Consultation",
            phrases: [
                { text: "Hello [Name], I'm Dr [Your name]. Before we start, can I just confirm your date of birth?", context: "Video: Identity Check", mnemonic: "Safety First" },
                { text: "What would you prefer me to call you?", context: "Video: Rapport" },
                { text: "So, how can I help you today?", context: "Video: Opening" },
                { text: "Hello, this is Dr [Name] calling from [Practice]. Am I speaking with [Patient name]?", context: "Phone: Identity Check" },
                { text: "Is now a convenient time to talk? Is there anyone with you?", context: "Phone: Safety/Confidentiality" },
                { text: "What can I do for you today?", context: "Phone: Opening" }
            ]
        },
        {
            category: "Patient's Part - Getting the Story",
            phrases: [
                { text: "Tell me more about that...", context: "Open Question", mnemonic: "LIFO" },
                { text: "Talk me through this from the beginning...", context: "Open Question" },
                { text: "How is this affecting you?", context: "Impact", mnemonic: "ICE" },
                { text: "What's this doing to your daily life?", context: "Impact" },
                { text: "What do you think might be causing this?", context: "Ideas", mnemonic: "ICE" },
                { text: "What's worrying you most about this?", context: "Concerns", mnemonic: "ICE" },
                { text: "What were you hoping I might be able to do today?", context: "Expectations", mnemonic: "ICE" },
                { text: "I noticed you said [X]... tell me more about that?", context: "Picking up Cues" },
                { text: "You seemed [worried] when you mentioned [X]...", context: "Picking up Cues" }
            ]
        },
        {
            category: "Transitioning to Doctor's Part",
            phrases: [
                { text: "Okay, so let me make sure I've understood correctly. You've been having [symptoms], this has been affecting [impact], and you're particularly concerned about [worry]. Is that right?", context: "Summarizing" },
                { text: "Before I ask my questions, is there anything else you wanted to tell me?", context: "The 'Golden Question'", mnemonic: "Neighbor's Rule" },
                { text: "Now I'd like to ask you some specific questions to help me understand this better, is that okay?", context: "Signposting" }
            ]
        },
        {
            category: "Doctor's Part - Medical Questions",
            phrases: [
                { text: "To help me rule out anything serious, can I ask...", context: "Reasoning" },
                { text: "I just need to check - have you had any [red flag symptom]?", context: "Red Flags" },
                { text: "Thank you for telling me about [X], but now I'd like to ask you about [Y]...", context: "Two-Part Steer", mnemonic: "Polite Control" }
            ]
        },
        {
            category: "Transitioning to Management (Critical Move)",
            phrases: [
                { text: "Okay, I think I've got the picture now. So let's talk about how we're going to help you with this...", context: "Signposting Management", mnemonic: "Time to Switch" },
                { text: "Have I got the full picture, or is there anything else I should know before we discuss what to do?", context: "Final Check" }
            ]
        },
        {
            category: "Shared Part - Management & Thinking Out Loud",
            phrases: [
                { text: "So, here's how this looks to me... I think [diagnosis], which is why I'd like to suggest [management]. Does that make sense?", context: "Thinking Out Loud", mnemonic: "Shared Understanding" },
                { text: "I'm not entirely sure what's going on here, so I think the safest thing would be...", context: "Uncertainty" },
                { text: "You mentioned you were worried about [concern]. The good news is...", context: "Addressing ICE in Mx", mnemonic: "Easy Marks" },
                { text: "I know you thought this might be [their idea]. Actually, I think it's [your diagnosis], because...", context: "Addressing Ideas" },
                { text: "There are a couple of options... Which appeals to you more?", context: "Shared Decision Making" }
            ]
        },
        {
            category: "Safety Netting & Closing",
            phrases: [
                { text: "If [X happens], you need to [action]...", context: "Safety Netting", mnemonic: "Critical Marks" },
                { text: "Warning signs to watch for would be [symptoms]...", context: "Red Flags" },
                { text: "If things aren't improving by [timeframe], then [action]...", context: "Follow-up" },
                { text: "I'd like to see you again in [timeframe] to...", context: "Follow-up" },
                { text: "So just to recap: we're going to [plan], and if [warning sign] you need to [action]. How does that sound?", context: "Summary" }
            ]
        },
        {
            category: "Difficult Situations",
            phrases: [
                { text: "I understand why you're asking for [X], but here's the difficulty...", context: "Unreasonable Requests" },
                { text: "Actually, I should have asked about [X] earlier - can I check that now?", context: "Mistake Recovery" },
                { text: "I'm finding this quite complex, so let me think this through with you...", context: "Stuck" },
                { text: "I'm afraid the results show...", context: "Breaking Bad News", mnemonic: "Direct & Honest" },
                { text: "What's going through your mind right now?", context: "After Bad News", mnemonic: "The Golden Question" }
            ]
        }
    ];

    // --- RENDER PHRASES ---
    const phraseContainer = document.getElementById('phraseContainer');

    function renderPhrases(filter = "") {
        phraseContainer.innerHTML = "";
        const lowerFilter = filter.toLowerCase();

        phraseData.forEach((cat, index) => {
            // Filter phrases
            const matchingPhrases = cat.phrases.filter(p => 
                p.text.toLowerCase().includes(lowerFilter) || 
                p.context.toLowerCase().includes(lowerFilter) ||
                cat.category.toLowerCase().includes(lowerFilter)
            );

            if (matchingPhrases.length > 0) {
                const catDiv = document.createElement('div');
                catDiv.className = 'phrase-category';
                
                const catTitle = document.createElement('h3');
                catTitle.className = 'category-title';
                catTitle.innerText = cat.category;
                catDiv.appendChild(catTitle);

                matchingPhrases.forEach(p => {
                    const pItem = document.createElement('div');
                    pItem.className = 'phrase-item';
                    pItem.onclick = () => copyToClipboard(p.text);
                    
                    let mnemonicHTML = p.mnemonic ? `<span class="mnemonic-tag">Tip: ${p.mnemonic}</span>` : '';

                    pItem.innerHTML = `
                        <div class="phrase-text">"${p.text}"</div>
                        <div class="phrase-context">${p.context}</div>
                        ${mnemonicHTML}
                    `;
                    catDiv.appendChild(pItem);
                });

                phraseContainer.appendChild(catDiv);
            }
        });

        if(phraseContainer.innerHTML === "") {
            phraseContainer.innerHTML = `<p style="text-align:center; color: var(--text-muted);">No phrases found matching "${filter}".</p>`;
        }
    }

    function filterPhrases() {
        const input = document.getElementById('phraseSearch').value;
        renderPhrases(input);
    }

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            const toast = document.getElementById('toast');
            toast.innerText = `Copied: "${text.substring(0, 30)}..."`;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        });
    }

    // --- TAB LOGIC ---
    function switchTab(tabId) {
        // Update buttons
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active'); // Assumes onclick passes event context roughly
        
        // Find the button specifically (more robust if events bubble weirdly)
        const buttons = Array.from(document.querySelectorAll('.nav-btn'));
        const activeBtn = buttons.find(b => b.getAttribute('onclick').includes(tabId));
        if(activeBtn) {
            buttons.forEach(b => b.classList.remove('active'));
            activeBtn.classList.add('active');
        }

        // Update sections
        document.querySelectorAll('.view-section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
    }

    // --- TIMER LOGIC ---
    let timerInterval;
    let timeLeft = 720; // 12 minutes in seconds
    let isRunning = false;

    function formatTime(seconds) {
        const m = Math.floor(seconds / 60).toString().padStart(2, '0');
        const s = (seconds % 60).toString().padStart(2, '0');
        return `${m}:${s}`;
    }

    function updateTimerUI() {
        const display = document.getElementById('timerDisplay');
        const phase = document.getElementById('timerPhase');
        
        display.innerText = formatTime(timeLeft);

        // Color Coding
        if (timeLeft > 390) { // > 6:30
            display.style.color = "var(--success)";
            phase.innerText = "Patient's Part (History/ICE)";
            phase.style.background = "#dcfce7";
            phase.style.color = "#166534";
        } else if (timeLeft > 120) { // 6:30 to 2:00
            display.style.color = "var(--warning)";
            phase.innerText = "MANAGEMENT (Plan & Safety Netting)";
            phase.style.background = "#fef9c3";
            phase.style.color = "#854d0e";
            
            // Flash border subtly
            if(timeLeft % 2 === 0) {
                 document.querySelector('.timer-container').style.borderColor = "var(--warning)";
            }
        } else { // < 2:00
            display.style.color = "var(--danger)";
            phase.innerText = "WRAP UP NOW";
            phase.style.background = "#fee2e2";
            phase.style.color = "#991b1b";
        }
    }

    function startTimer() {
        if (!isRunning) {
            isRunning = true;
            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateTimerUI();
                } else {
                    clearInterval(timerInterval);
                    isRunning = false;
                    alert("Time's up! End consultation.");
                }
            }, 1000);
        }
    }

    function pauseTimer() {
        clearInterval(timerInterval);
        isRunning = false;
    }

    function resetTimer() {
        pauseTimer();
        timeLeft = 720;
        updateTimerUI();
        document.querySelector('.timer-container').style.borderColor = "var(--border)";
    }

    // --- FLASHCARD LOGIC ---
    const flashcards = [
        { q: "Patient says 'I'm worried it's cancer'. How do you address this in management?", a: "Link ICE to Mx: 'You mentioned you were worried about cancer. The good news is [explain benign signs], but to be safe...'" },
        { q: "You are stuck and don't know the diagnosis. What do you say?", a: "Think out loud: 'This is a bit of a puzzle, so here's what I suggest we do...'" },
        { q: "You realize you forgot to ask a crucial red flag question. What do you say?", a: "Own it: 'Actually, I should have asked about [X] earlier - can I check that now?'" },
        { q: "The patient is rambling and you need to move to medical questions.", a: "Two-part steer: 'Thank you for telling me about [X], but now I'd like to ask you about [Y]...'" },
        { q: "How do you give abnormal results?", a: "Give clearly early: 'I'm afraid the results show...'. Pause. Ask: 'What's going through your mind right now?'" },
        { q: "How do you close the consultation efficiently?", a: "So just to recap: we're going to [plan], see you in [time], and if [worse] come back. Any questions?" },
        { q: "Patient demands antibiotics for a viral illness.", a: "Empathy + Reality: 'I understand why you want antibiotics, but here's the difficulty... they don't work for viruses...'" },
        { q: "It is exactly 6.5 minutes. What must you do?", a: "Signpost: 'Okay, I think I've got the picture now. So let's talk about how we're going to help you with this...'" }
    ];

    let currentCardIndex = 0;
    const fcQuestion = document.getElementById('fcQuestion');
    const fcAnswer = document.getElementById('fcAnswer');
    const fcElement = document.getElementById('flashcard');

    function loadCard(index) {
        fcElement.classList.remove('flipped');
        // Small delay to allow flip back before changing content
        setTimeout(() => {
            fcQuestion.innerText = flashcards[index].q;
            fcAnswer.innerText = flashcards[index].a;
        }, 200);
    }

    function nextCard() {
        currentCardIndex = (currentCardIndex + 1) % flashcards.length;
        loadCard(currentCardIndex);
    }

    function prevCard() {
        currentCardIndex = (currentCardIndex - 1 + flashcards.length) % flashcards.length;
        loadCard(currentCardIndex);
    }

    function flipCard() {
        fcElement.classList.toggle('flipped');
    }

    // --- INITIALIZATION ---
    renderPhrases();
    loadCard(0);

</script>

</body>
</html>
