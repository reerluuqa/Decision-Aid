<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whooping Cough Management Algorithm</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%);
            color: #2c3e50;
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1a5276 0%, #2c3e50 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            gap: 2rem;
            padding: 2rem;
        }

        .progress-sidebar {
            position: sticky;
            top: 2rem;
            width: 280px;
            height: fit-content;
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border: 1px solid #e1e8ed;
        }

        .progress-sidebar h3 {
            color: #1a5276;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
        }

        .progress-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .progress-item.active {
            background: linear-gradient(135deg, #1a5276 0%, #2c3e50 100%);
            color: white;
            box-shadow: 0 4px 10px rgba(26, 82, 118, 0.3);
        }

        .progress-item.completed {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .progress-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.8rem;
        }

        .progress-item.active .progress-icon {
            background: rgba(255,255,255,0.2);
        }

        .progress-item.completed .progress-icon {
            background: #4caf50;
            color: white;
        }

        .main-content {
            flex: 1;
        }

        .step-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid #e1e8ed;
        }

        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .step-header {
            padding: 1.5rem;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .step-header:hover {
            filter: brightness(1.1);
        }

        .step-header.assessment {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
        }

        .step-header.diagnosis {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .step-header.treatment {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
        }

        .step-header.followup {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        .step-title {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .step-icon {
            font-size: 1.8rem;
        }

        .expand-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .step-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .step-card.expanded .step-content {
            max-height: 3000px;
        }

        .content-section {
            padding: 1.5rem;
            border-bottom: 1px solid #f0f4f8;
        }

        .content-section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0.3rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .badge-red {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .badge-amber {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .badge-green {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .info-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            background: #f0f7ff;
            transform: translateY(-3px);
        }

        .info-card h4 {
            color: #1a5276;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-card ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .info-card li {
            margin-bottom: 0.5rem;
            position: relative;
        }

        .info-card li::before {
            content: "•";
            color: #3498db;
            font-weight: bold;
            position: absolute;
            left: -1rem;
        }

        .drug-card {
            background: #f0f7ff;
            border: 1px solid #d6eaf8;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1rem 0;
            transition: all 0.3s ease;
        }

        .drug-card:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .drug-name {
            font-weight: 600;
            color: #1a5276;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .drug-info {
            font-size: 0.9rem;
            color: #546e7a;
        }

        .alert-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #fdcb6e;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
        }

        .alert-box i {
            color: #e67e22;
            margin-top: 0.2rem;
        }

        .alert-box.red {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-color: #ef9a9a;
        }

        .alert-box.red i {
            color: #c62828;
        }

        .alert-box.green {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-color: #a5d6a7;
        }

        .alert-box.green i {
            color: #2e7d32;
        }

        .phase-timeline {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1rem 0;
        }

        .phase-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .phase-item:hover {
            background: #f0f7ff;
            transform: translateX(5px);
        }

        .phase-duration {
            background: #1a5276;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .phase-content {
            flex: 1;
        }

        .phase-content h5 {
            color: #1a5276;
            margin-bottom: 0.5rem;
        }

        .contact-groups {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .contact-group {
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .contact-group.group-1 {
            background: #ffebee;
            border-left-color: #c62828;
        }

        .contact-group.group-2 {
            background: #fff3e0;
            border-left-color: #ef6c00;
        }

        .contact-group h5 {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .group-1 h5 {
            color: #c62828;
        }

        .group-2 h5 {
            color: #ef6c00;
        }

        .search-container {
            position: sticky;
            top: 1rem;
            margin-bottom: 1.5rem;
            z-index: 5;
        }

        .search-box {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #d6eaf8;
            border-radius: 25px;
            font-size: 0.9rem;
            outline: none;
            transition: all 0.3s ease;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .search-box:focus {
            border-color: #3498db;
            box-shadow: 0 2px 15px rgba(52, 152, 219, 0.2);
        }

        .highlight {
            background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%);
            color: #333;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 1rem;
            }

            .progress-sidebar {
                position: relative;
                width: 100%;
                top: 0;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-lungs-virus"></i> Whooping Cough Management</h1>
        <p>Clinical Decision Support Tool | NICE CKS Guidelines (October 2024)</p>
    </div>

    <div class="container">
        <aside class="progress-sidebar">
            <div class="search-container">
                <input type="text" class="search-box" placeholder="Search algorithm..." id="searchInput">
            </div>
            
            <h3><i class="fas fa-tasks"></i> Progress</h3>
            <div class="progress-item active" data-step="assessment">
                <div class="progress-icon"><i class="fas fa-clipboard-check"></i></div>
                <span>Assessment</span>
            </div>
            <div class="progress-item" data-step="diagnosis">
                <div class="progress-icon"><i class="fas fa-microscope"></i></div>
                <span>Diagnosis</span>
            </div>
            <div class="progress-item" data-step="treatment">
                <div class="progress-icon"><i class="fas fa-pills"></i></div>
                <span>Treatment</span>
            </div>
            <div class="progress-item" data-step="followup">
                <div class="progress-icon"><i class="fas fa-user-md"></i></div>
                <span>Follow-up</span>
            </div>
        </aside>

        <main class="main-content">
            <!-- Assessment Card -->
            <div class="step-card expanded fade-in" id="assessment">
                <div class="step-header assessment" onclick="toggleCard(this)">
                    <div class="step-title">
                        <i class="fas fa-clipboard-check step-icon"></i>
                        Assessment
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="step-content">
                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-exclamation-triangle"></i> Red Flags & High-Risk Groups</h4>
                        <div class="alert-box red">
                            <i class="fas fa-ambulance"></i>
                            <div>
                                <strong>Immediate Hospital Admission:</strong>
                                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                    <li>Significant breathing difficulties (apnoea, severe paroxysms, cyanosis)</li>
                                    <li>Significant complications (seizures, pneumonia)</li>
                                    <li>Infants aged ≤6 months (low threshold for admission)</li>
                                    <li>Apnoeic attacks in young infants</li>
                                </ul>
                            </div>
                        </div>
                        <span class="badge badge-red"><i class="fas fa-hospital"></i> Urgent Referral Required</span>
                        <span class="badge badge-amber"><i class="fas fa-baby"></i> High-Risk Infant</span>
                        <span class="badge badge-amber"><i class="fas fa-heartbeat"></i> Pregnant Women</span>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-clock"></i> Clinical Phases</h4>
                        <div class="phase-timeline">
                            <div class="phase-item">
                                <div class="phase-duration">7-10 days</div>
                                <div class="phase-content">
                                    <h5><i class="fas fa-head-side-cough"></i> Catarrhal Phase (1-2 weeks)</h5>
                                    <ul>
                                        <li>Rhinorrhoea, malaise, mild cough</li>
                                        <li>Sore throat, conjunctivitis</li>
                                        <li>Low-grade fever (uncommon)</li>
                                        <li><strong>Most infectious stage</strong></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="phase-item">
                                <div class="phase-duration">1-6 weeks</div>
                                <div class="phase-content">
                                    <h5><i class="fas fa-wind"></i> Paroxysmal Phase</h5>
                                    <ul>
                                        <li>Rapid, violent coughing fits</li>
                                        <li>Characteristic 'whoop' (less common in adults & infants <3 months)</li>
                                        <li>Post-tussive vomiting</li>
                                        <li>15 attacks per 24 hours average</li>
                                        <li>Triggered by cold, noise, or other stimuli</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="phase-item">
                                <div class="phase-duration">2-3 weeks</div>
                                <div class="phase-content">
                                    <h5><i class="fas fa-chart-line"></i> Convalescent Phase</h5>
                                    <ul>
                                        <li>Gradual improvement in cough</li>
                                        <li>Paroxysms may recur with subsequent respiratory infections</li>
                                        <li>Cough may persist for months</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-bell"></i> Notification Requirements</h4>
                        <div class="alert-box red">
                            <i class="fas fa-file-medical"></i>
                            <div>
                                <strong>Notifiable Disease:</strong> Complete notification form within 3 days and send to local UKHSA health protection team
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="step-card fade-in" id="diagnosis">
                <div class="step-header diagnosis" onclick="toggleCard(this)">
                    <div class="step-title">
                        <i class="fas fa-microscope step-icon"></i>
                        Diagnosis
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="step-content">
                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-stethoscope"></i> Clinical Suspicion</h4>
                        <p><strong>Suspect whooping cough if:</strong></p>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-calendar-alt"></i> Cough Duration</h4>
                                <ul>
                                    <li>Acute cough lasting ≥14 days</li>
                                    <li>PLUS one or more of the following:</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-check-circle"></i> Key Features</h4>
                                <ul>
                                    <li>Paroxysmal cough</li>
                                    <li>Inspiratory 'whoop'</li>
                                    <li>Post-tussive vomiting</li>
                                    <li>Apnoeic attacks (young infants)</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-users"></i> Contact History</h4>
                                <ul>
                                    <li>Contact with confirmed case within 21 days</li>
                                    <li>Part of outbreak investigation</li>
                                </ul>
                            </div>
                        </div>
                        <span class="badge badge-amber"><i class="fas fa-search"></i> Clinical Diagnosis</span>
                        <span class="badge badge-green"><i class="fas fa-info"></i> Atypical Presentation Possible</span>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-vial"></i> Laboratory Confirmation</h4>
                        <p>Test choice depends on age, symptom duration, and local facilities:</p>
                        
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-bacteria"></i> Culture & PCR</h4>
                                <p><strong>When:</strong> Cough duration <21 days</p>
                                <p><strong>Sample:</strong> Nasopharyngeal aspirate/swab</p>
                                <p><strong>All age groups</strong></p>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-flask"></i> Serology</h4>
                                <p><strong>When:</strong> Cough >14 days, ≥1 year post-vaccination</p>
                                <p><strong>Age:</strong> >16 years</p>
                                <p><strong>Detects:</strong> Pertussis toxin antibodies</p>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-tint"></i> Oral Fluid Test</h4>
                                <p><strong>Age:</strong> 2-16 years</p>
                                <p><strong>When:</strong> >14 days cough, ≥1 year post-vaccine</p>
                                <p><strong>Tests:</strong> Anti-pertussis toxin IgG</p>
                            </div>
                        </div>

                        <div class="alert-box green">
                            <i class="fas fa-check-double"></i>
                            <div>
                                <strong>Confirmed by:</strong> Clinical features + positive culture/PCR OR IgG >70 IU/mL (serum) OR >70 aU (oral fluid)
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-question-circle"></i> Differential Diagnosis</h4>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-viruses"></i> Infectious Causes</h4>
                                <ul>
                                    <li>Bordetella parapertussis</li>
                                    <li>Mycoplasma pneumoniae</li>
                                    <li>Chlamydia trachomatis/pneumoniae</li>
                                    <li>Adenoviruses, RSV</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-lungs"></i> Non-Infectious</h4>
                                <ul>
                                    <li>Asthma, COPD</li>
                                    <li>Post-infectious cough</li>
                                    <li>Gastro-oesophageal reflux</li>
                                    <li>Upper-airway cough syndrome</li>
                                    <li>Lung malignancy</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="step-card fade-in" id="treatment">
                <div class="step-header treatment" onclick="toggleCard(this)">
                    <div class="step-title">
                        <i class="fas fa-pills step-icon"></i>
                        Treatment
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="step-content">
                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-ambulance"></i> Hospital Admission</h4>
                        <div class="alert-box red">
                            <i class="fas fa-exclamation-circle"></i>
                            <div>
                                <strong>Admit immediately if:</strong>
                                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                    <li>Significant breathing difficulties (apnoea, severe paroxysms, cyanosis)</li>
                                    <li>Significant complications (seizures, pneumonia)</li>
                                    <li>Infants ≤6 months (low threshold)</li>
                                </ul>
                                <p style="margin-top: 0.5rem;"><em>Inform hospital of isolation requirements before admission</em></p>
                            </div>
                        </div>
                        <span class="badge badge-red"><i class="fas fa-hospital"></i> Emergency Referral</span>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-prescription-bottle-alt"></i> Antibiotic Treatment</h4>
                        <p><strong>Time window:</strong> Within 14 days of cough onset (up to 21 days if high-risk contacts)</p>
                        
                        <div class="alert-box amber">
                            <i class="fas fa-clock"></i>
                            <div>
                                <strong>Antibiotics reduce infectivity but may not alter clinical course if started >7 days after symptom onset</strong>
                            </div>
                        </div>

                        <h5 style="margin: 1rem 0; color: #1a5276;">First-Line Macrolides:</h5>
                        
                        <div class="drug-card">
                            <div class="drug-name"><i class="fas fa-capsules"></i> Azithromycin</div>
                            <div class="drug-info">
                                <strong>Dosage:</strong> 10 mg/kg once daily (max 500 mg) for 3 days<br>
                                <strong>Age:</strong> Infants ≥1 month, children, adults<br>
                                <span class="badge badge-green"><i class="fas fa-check"></i> Preferred for children ≥1 month</span>
                            </div>
                        </div>

                        <div class="drug-card">
                            <div class="drug-name"><i class="fas fa-tablets"></i> Clarithromycin</div>
                            <div class="drug-info">
                                <strong>Dosage:</strong> 7.5 mg/kg twice daily (adjust by weight) for 7 days<br>
                                <strong>Age:</strong> Neonates, children, adults<br>
                                <span class="badge badge-amber"><i class="fas fa-baby"></i> Preferred for infants <1 month</span>
                            </div>
                        </div>

                        <div class="drug-card">
                            <div class="drug-name"><i class="fas fa-tablets"></i> Erythromycin</div>
                            <div class="drug-info">
                                <strong>Dosage:</strong> 500 mg 4 times daily for 7 days<br>
                                <strong>Indication:</strong> <span class="badge badge-amber"><i class="fas fa-female"></i> Pregnant women (first-line)</span><br>
                                <span class="badge badge-red"><i class="fas fa-ban"></i> Contraindicated in porphyria</span>
                            </div>
                        </div>

                        <h5 style="margin: 1rem 0; color: #1a5276;">Alternative:</h5>
                        <div class="drug-card">
                            <div class="drug-name"><i class="fas fa-pills"></i> Co-trimoxazole</div>
                            <div class="drug-info">
                                <strong>Use:</strong> If macrolides contraindicated/not tolerated<br>
                                <span class="badge badge-red"><i class="fas fa-ban"></i> NOT for pregnant women or infants <6 weeks</span>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-house-user"></i> Self-Care & Advice</h4>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-bed"></i> Supportive Care</h4>
                                <ul>
                                    <li>Rest and adequate fluid intake</li>
                                    <li>Paracetamol or ibuprofen for pain/fever</li>
                                    <li>Monitor for complications</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-clock"></i> Course Expectations</h4>
                                <ul>
                                    <li>Protracted cough likely even with antibiotics</li>
                                    <li>May take several weeks to resolve completely</li>
                                    <li>Milder if previously immunized</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-ban"></i> Exclusion Periods</h4>
                        <div class="alert-box amber">
                            <i class="fas fa-calendar-times"></i>
                            <div>
                                <strong>Children & General Staff:</strong> 48 hours of antibiotics OR 14 days from cough onset if untreated<br>
                                <strong>Staff with infant contact:</strong> 48 hours of antibiotics OR 21 days if untreated
                            </div>
                        </div>
                        <span class="badge badge-amber"><i class="fas fa-clock"></i> Infection Control</span>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-syringe"></i> Vaccination</h4>
                        <p>Arrange outstanding vaccinations after recovery:</p>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>Pregnant women:</strong> Vaccine at 16-32 weeks (up to 38 weeks)</li>
                            <li><strong>Children:</strong> 6-in-1 vaccine (8, 12, 16 weeks) + 4-in-1 pre-school booster</li>
                        </ul>
                        <span class="badge badge-green"><i class="fas fa-shield-alt"></i> Prevention</span>
                    </div>
                </div>
            </div>

            <!-- Follow-up & Contact Management Card -->
            <div class="step-card fade-in" id="followup">
                <div class="step-header followup" onclick="toggleCard(this)">
                    <div class="step-title">
                        <i class="fas fa-user-md step-icon"></i>
                        Follow-up & Contact Management
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                <div class="step-content">
                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-users-cog"></i> Prophylaxis for Close Contacts</h4>
                        <p><strong>Offer antibiotics when:</strong> Index case coughing started within 14 days AND contact is in priority group</p>
                        
                        <div class="contact-groups">
                            <div class="contact-group group-1">
                                <h5><i class="fas fa-exclamation-triangle"></i> Group 1: Vulnerable Individuals</h5>
                                <p><strong>At increased risk of severe complications:</strong></p>
                                <ul>
                                    <li>Unimmunized infants <2 months (born <32 weeks OR mother unvaccinated)</li>
                                    <li>Infants 2 months to <5 months (regardless of vaccination)</li>
                                    <li>Infants 5 months to <1 year with <3 pertussis vaccine doses</li>
                                </ul>
                                <span class="badge badge-red"><i class="fas fa-baby"></i> High Priority</span>
                            </div>
                            
                            <div class="contact-group group-2">
                                <h5><i class="fas fa-user-nurse"></i> Group 2: Transmission Risk to Vulnerable</h5>
                                <p><strong>At increased risk of transmitting to Group 1:</strong></p>
                                <ul>
                                    <li>Pregnant women ≥32 weeks gestation</li>
                                    <li>Healthcare workers with infant/pregnant women contact</li>
                                    <li>Household members of vulnerable infants</li>
                                    <li>Those with regular close/prolonged infant contact</li>
                                </ul>
                                <span class="badge badge-amber"><i class="fas fa-shield-alt"></i> Prophylaxis Required</span>
                            </div>
                        </div>

                        <div class="alert-box">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <strong>Close contacts defined as:</strong> Household members or institutional contacts with overnight stay in same room during infectious period
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-prescription-bottle-alt"></i> Prophylaxis Regimens</h4>
                        <p><strong>Same antibiotics and doses as treatment:</strong></p>
                        
                        <div class="drug-card">
                            <div class="drug-info">
                                <strong>Infants <1 month:</strong> Clarithromycin preferred<br>
                                <strong>Children ≥1 year & adults:</strong> Azithromycin or clarithromycin<br>
                                <strong>Pregnant women:</strong> Erythromycin<br>
                                <strong>Alternative:</strong> Co-trimoxazole (if macrolides contraindicated)
                            </div>
                        </div>
                        
                        <div class="alert-box green">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <strong>Asymptomatic contacts:</strong> Exclusion from work/school NOT required
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-syringe"></i> Post-Exposure Vaccination</h4>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-baby"></i> Unimmunized/Partially Immunized</h4>
                                <ul>
                                    <li>Complete childhood immunization schedule</li>
                                    <li>Up to 10 years of age</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-female"></i> Pregnant Contacts</h4>
                                <ul>
                                    <li>Vaccinate if ≥20 weeks gestation</li>
                                    <li>Crucial for infant protection</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-user-nurse"></i> Healthcare Workers</h4>
                                <ul>
                                    <li>Boost if no pertussis vaccine in previous 5 years</li>
                                    <li>If providing close personal care to infants/pregnant women</li>
                                </ul>
                            </div>
                        </div>
                        <span class="badge badge-green"><i class="fas fa-shield-alt"></i> Prevention Critical</span>
                    </div>

                    <div class="content-section">
                        <h4 class="section-title"><i class="fas fa-exclamation-circle"></i> Complications Monitoring</h4>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4><i class="fas fa-exclamation-triangle"></i> Serious Complications</h4>
                                <ul>
                                    <li>Apnoea, pneumonia (secondary bacterial)</li>
                                    <li>Seizures, cerebral hypoxia, brain damage</li>
                                    <li>Encephalopathy (rare in adults)</li>
                                </ul>
                                <span class="badge badge-red"><i class="fas fa-ambulance"></i> Emergency</span>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-band-aid"></i> Minor Complications</h4>
                                <ul>
                                    <li>Otitis media (children)</li>
                                    <li>Subconjunctival haemorrhage</li>
                                    <li>Epistaxis, facial oedema</li>
                                    <li>Tongue ulceration</li>
                                </ul>
                                <span class="badge badge-amber"><i class="fas fa-clinic-medical"></i> Manage Symptomatically</span>
                            </div>
                            <div class="info-card">
                                <h4><i class="fas fa-physical-therapy"></i> Mechanical Effects</h4>
                                <ul>
                                    <li>Pneumothorax, rib fractures</li>
                                    <li>Hernias (umbilical, inguinal)</li>
                                    <li>Rectal prolapse, urinary incontinence</li>
                                    <li>Dehydration from vomiting</li>
                                </ul>
                                <span class="badge badge-amber"><i class="fas fa-exclamation"></i> Monitor Closely</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Card toggle functionality
        function toggleCard(header) {
            const card = header.parentElement;
            const isExpanded = card.classList.contains('expanded');
            
            // Close all cards
            document.querySelectorAll('.step-card').forEach(c => {
                c.classList.remove('expanded');
            });
            
            // Open clicked card if it wasn't already expanded
            if (!isExpanded) {
                card.classList.add('expanded');
                
                // Scroll to card
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        // Progress sidebar functionality
        const progressItems = document.querySelectorAll('.progress-item');
        const cards = document.querySelectorAll('.step-card');

        // Intersection Observer for scroll progress
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const cardId = entry.target.id;
                    
                    // Update active progress item
                    progressItems.forEach(item => {
                        item.classList.remove('active');
                        if (item.dataset.step === cardId) {
                            item.classList.add('active');
                        }
                    });
                    
                    // Mark previous items as completed
                    progressItems.forEach(item => {
                        const itemIndex = Array.from(progressItems).indexOf(item);
                        const activeIndex = Array.from(progressItems).findIndex(p => p.dataset.step === cardId);
                        if (itemIndex < activeIndex) {
                            item.classList.add('completed');
                        } else if (itemIndex > activeIndex) {
                            item.classList.remove('completed');
                        }
                    });
                }
            });
        }, { threshold: 0.5 });

        // Observe all cards
        cards.forEach(card => observer.observe(card));

        // Progress item click handler
        progressItems.forEach(item => {
            item.addEventListener('click', () => {
                const targetStep = item.dataset.step;
                const targetCard = document.getElementById(targetStep);
                
                // Expand target card
                cards.forEach(card => card.classList.remove('expanded'));
                targetCard.classList.add('expanded');
                
                // Scroll to target
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            // Clear previous highlights
            document.querySelectorAll('.highlight').forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
            
            if (searchTerm.length > 2) {
                // Search and highlight
                const walker = document.createTreeWalker(
                    document.querySelector('.main-content'),
                    NodeFilter.SHOW_TEXT,
                    null,
                    false
                );
                
                const textNodes = [];
                let node;
                while (node = walker.nextNode()) {
                    if (node.nodeValue.toLowerCase().includes(searchTerm)) {
                        textNodes.push(node);
                    }
                }
                
                textNodes.forEach(node => {
                    const span = document.createElement('span');
                    const regex = new RegExp(`(${searchTerm})`, 'gi');
                    const parts = node.nodeValue.split(regex);
                    
                    parts.forEach((part, index) => {
                        if (part.toLowerCase() === searchTerm) {
                            const highlight = document.createElement('span');
                            highlight.className = 'highlight';
                            highlight.textContent = part;
                            span.appendChild(highlight);
                        } else {
                            span.appendChild(document.createTextNode(part));
                        }
                    });
                    
                    node.parentNode.replaceChild(span, node);
                });
                
                // Expand all cards with matches
                document.querySelectorAll('.step-card').forEach(card => {
                    if (card.textContent.toLowerCase().includes(searchTerm)) {
                        card.classList.add('expanded');
                    }
                });
            }
        });

        // Initialize with assessment expanded
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('assessment').classList.add('expanded');
            
            // Add fade-in animation to cards
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            });
            
            cards.forEach(card => observer.observe(card));
        });

        // Print functionality
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });

        // Add print button functionality
        const printButton = document.createElement('button');
        printButton.innerHTML = '<i class="fas fa-print"></i> Print Algorithm';
        printButton.style.cssText = `
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #1a5276 0%, #2c3e50 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-weight: 600;
            z-index: 1000;
        `;
        printButton.onclick = () => window.print();
        
        // Hover effect for print button
        printButton.addEventListener('mouseenter', () => {
            printButton.style.transform = 'translateY(-3px) scale(1.05)';
            printButton.style.boxShadow = '0 6px 20px rgba(0,0,0,0.25)';
        });
        
        printButton.addEventListener('mouseleave', () => {
            printButton.style.transform = 'translateY(0) scale(1)';
            printButton.style.boxShadow = '0 4px 15px rgba(0,0,0,0.2)';
        });
        
        document.body.appendChild(printButton);

        // Add pulse animation to critical alerts
        setInterval(() => {
            const criticalAlerts = document.querySelectorAll('.alert-box.red');
            criticalAlerts.forEach(alert => {
                alert.classList.add('pulse');
                setTimeout(() => alert.classList.remove('pulse'), 2000);
            });
        }, 10000);
    </script>
</body>
</html>