<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IM Clinical Companion | Infectious Mononucleosis</title>
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            
            /* Clinical Colors */
            --color-danger: #ef4444; /* Red Flags */
            --color-danger-bg: rgba(239, 68, 68, 0.1);
            --color-success: #10b981; /* Safe/Positive */
            --color-success-bg: rgba(16, 185, 129, 0.1);
            --color-info: #3b82f6; /* General Info */
            --color-info-bg: rgba(59, 130, 246, 0.1);
            --color-warning: #f59e0b; /* Precautions */
            
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- Animations --- */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Layout --- */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #334155;
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand {
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-primary);
        }

        nav {
            display: flex;
            gap: var(--spacing-md);
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            transition: var(--transition);
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--color-info-bg);
            color: var(--color-info);
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .section {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .section.active {
            display: block;
        }

        /* --- Hero Section --- */
        .hero-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .card {
            background: var(--bg-card);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid #334155;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--color-info);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid #334155;
            padding-bottom: var(--spacing-sm);
        }

        .card-header h3 {
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .icon-lg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* --- Specific Card Styles --- */
        .red-flag-card {
            border-left: 4px solid var(--color-danger);
            background: linear-gradient(to right, var(--color-danger-bg), var(--bg-card));
        }

        .red-flag-card:hover {
            animation: pulse-red 2s infinite;
        }

        .action-card {
            border-left: 4px solid var(--color-success);
        }

        .info-card {
            border-left: 4px solid var(--color-info);
        }

        /* --- Data Presentation --- */
        .triad-display {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: var(--spacing-md) 0;
        }

        .triad-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .triad-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--color-info-bg);
            color: var(--color-info);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* --- Tables --- */
        .clinical-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--spacing-sm);
            font-size: 0.9rem;
        }

        .clinical-table th, .clinical-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }

        .clinical-table th {
            color: var(--text-secondary);
            font-weight: 600;
        }

        .clinical-table tr:hover td {
            background: rgba(255,255,255,0.03);
        }

        /* --- Interactive Widget --- */
        .decision-widget {
            background: #111827;
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            border: 1px solid #4b5563;
        }

        .option-group {
            display: flex;
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
            flex-wrap: wrap;
        }

        .radio-btn {
            display: none;
        }

        .radio-label {
            padding: 10px 20px;
            background: #374151;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
            text-align: center;
            border: 2px solid transparent;
        }

        .radio-btn:checked + .radio-label {
            background: var(--color-info-bg);
            border-color: var(--color-info);
            color: var(--color-info);
            font-weight: bold;
        }

        .result-box {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            border-radius: 8px;
            display: none;
        }

        /* --- Timeline --- */
        .timeline {
            position: relative;
            padding-left: 20px;
            margin-top: var(--spacing-md);
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #475569;
        }

        .timeline-item {
            position: relative;
            margin-bottom: var(--spacing-lg);
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 5px;
            width: 12px;
            height: 12px;
            background: var(--color-success);
            border-radius: 50%;
            border: 2px solid var(--bg-dark);
        }

        .timeline-item.warning::before {
            background: var(--color-warning);
        }

        /* --- Utility Classes --- */
        .text-danger { color: var(--color-danger); }
        .text-success { color: var(--color-success); }
        .text-info { color: var(--color-info); }
        .text-secondary { color: var(--text-secondary); }
        .font-bold { font-weight: 700; }
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mt-2 { margin-top: 8px; }
        
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 8px;
        }
        .badge-red { background: var(--color-danger); color: white; }
        .badge-green { background: var(--color-success); color: white; }

        /* --- Mobile --- */
        @media (max-width: 768px) {
            header { flex-direction: column; gap: 10px; }
            .option-group { flex-direction: column; }
            .triad-display { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <svg class="icon-lg" viewBox="0 0 24 24" fill="var(--color-info)">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <span>IM Clinical Companion</span>
    </div>
    <nav>
        <button class="nav-btn active" onclick="switchTab('overview')">Overview</button>
        <button class="nav-btn" onclick="switchTab('diagnosis')">Diagnosis</button>
        <button class="nav-btn" onclick="switchTab('management')">Management</button>
    </nav>
</header>

<main>

    <!-- OVERVIEW TAB -->
    <div id="overview" class="section active">
        
        <!-- HERO: DEFINITION -->
        <div class="hero-grid">
            <div class="card info-card" style="grid-column: 1 / -1;">
                <div class="card-header">
                    <svg class="icon-lg text-info" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                    <h3>The Classic Triad</h3>
                </div>
                <div class="triad-display">
                    <div class="triad-item">
                        <div class="triad-circle">1</div>
                        <span class="font-bold">Fever</span>
                        <span class="text-secondary">37.8°C - 41.1°C</span>
                    </div>
                    <div class="triad-item">
                        <div class="triad-circle">2</div>
                        <span class="font-bold">Pharyngitis</span>
                        <span class="text-secondary">Exudative/Non-exudative</span>
                    </div>
                    <div class="triad-item">
                        <div class="triad-circle">3</div>
                        <span class="font-bold">Lymphadenopathy</span>
                        <span class="text-secondary">Cervical/Generalised</span>
                    </div>
                </div>
                <p class="text-secondary" style="text-align: center; margin-top: 10px;">Most commonly caused by Epstein-Barr Virus (EBV) in 80-90% of cases.</p>
            </div>
        </div>

        <!-- RED FLAGS -->
        <h2 class="text-danger mb-2" style="display: flex; align-items: center; gap: 8px;">
            <svg style="width:24px;height:24px;fill:currentColor" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
            Critical Complications (Action Required)
        </h2>
        <div class="hero-grid">
            <div class="card red-flag-card">
                <div class="card-header">
                    <h3>Airway Obstruction</h3>
                    <span class="badge badge-red">1-5%</span>
                </div>
                <p class="mb-2">Enlarged tonsils/nodes causing respiratory distress.</p>
                <strong class="text-danger">ACTION:</strong>
                <p class="text-sm">Admit. Corticosteroids. Consider intubation/tracheotomy.</p>
            </div>

            <div class="card red-flag-card">
                <div class="card-header">
                    <h3>Splenic Rupture</h3>
                    <span class="badge badge-red">0.1-0.5%</span>
                </div>
                <p class="mb-2">Massive lymphocyte infiltration. Peak risk ~14 days.</p>
                <strong class="text-danger">ACTION:</strong>
                <p class="text-sm">Abdominal CT. Surgical consult. Observation vs Splenectomy.</p>
            </div>

            <div class="card red-flag-card">
                <div class="card-header">
                    <h3>Fulminant Hepatitis</h3>
                </div>
                <p class="mb-2">Rare, usually immunocompromised. Can be fatal.</p>
                <strong class="text-danger">ACTION:</strong>
                <p class="text-sm">Admit. Monitor LFTs. Supportive care.</p>
            </div>
            
             <div class="card red-flag-card">
                <div class="card-header">
                    <h3>Haemolytic Anaemia</h3>
                    <span class="badge badge-red">1-3%</span>
                </div>
                <p class="mb-2">Antibody-mediated destruction of RBCs.</p>
                <strong class="text-danger">ACTION:</strong>
                <p class="text-sm">Systemic Corticosteroids.</p>
            </div>
        </div>
    </div>

    <!-- DIAGNOSIS TAB -->
    <div id="diagnosis" class="section">
        
        <div class="hero-grid">
            <!-- Investigation Table -->
            <div class="card" style="grid-column: span 2;">
                <div class="card-header">
                    <h3>Key Investigations</h3>
                </div>
                <table class="clinical-table">
                    <thead>
                        <tr>
                            <th>Test</th>
                            <th>Result / Interpretation</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-bold">FBC</td>
                            <td>
                                <span class="text-success">Lymphocytosis > 50%</span><br>
                                <span class="text-success">Atypical Lymphocytes > 10%</span>
                            </td>
                            <td>Peaks in 2nd-3rd week. Anaemia/Reticulocytosis indicates haemolysis.</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Heterophile (Monospot)</td>
                            <td><span class="text-info">Positive</span></td>
                            <td>Sensitivity 81-95%. False negatives common in week 1 (25%) & children <4 yrs.</td>
                        </tr>
                        <tr>
                            <td class="font-bold">EBV Antibodies</td>
                            <td>
                                <span class="text-info">VCA-IgM (+)</span><br>
                                <span class="text-info">VCA-IgG (+)</span><br>
                                <span class="text-info">EBNA (-)</span>
                            </td>
                            <td>Gold standard. VCA-IgM indicates acute infection. EBNA rules out acute.</td>
                        </tr>
                         <tr>
                            <td class="font-bold">LFTs</td>
                            <td><span class="text-warning">Elevated Transaminases</span></td>
                            <td>Usually mild (2-3x ULN). Present in >90% cases (often subclinical).</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Differential Diagnosis -->
            <div class="card">
                <div class="card-header">
                    <h3>Differentials</h3>
                </div>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #334155;">
                        <strong class="text-warning">Strep Pyogenes:</strong><br>
                        <span class="text-secondary text-sm">Culture positive, but 3-30% of IM patients are carriers. Avoid Ampicillin (causes rash).</span>
                    </li>
                    <li style="margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #334155;">
                        <strong class="text-warning">Acute HIV:</strong><br>
                        <span class="text-secondary text-sm">More rash, diarrhea, less pharyngitis. Check viral load.</span>
                    </li>
                    <li style="margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #334155;">
                        <strong class="text-warning">CMV:</strong><br>
                        <span class="text-secondary text-sm">Mononucleosis syndrome, but heterophile negative. Check CMV serology.</span>
                    </li>
                    <li style="margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #334155;">
                        <strong class="text-warning">Toxoplasmosis:</strong><br>
                        <span class="text-secondary text-sm">Similar presentation, check serology.</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- MANAGEMENT TAB -->
    <div id="management" class="section">
        
        <div class="hero-grid">
            <!-- Supportive Care -->
            <div class="card action-card">
                <div class="card-header">
                    <svg class="icon-lg text-success" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                    <h3>Routine Management</h3>
                </div>
                
                <div class="mb-2">
                    <strong>Analgesia/Antipyretics:</strong>
                    <p class="text-secondary text-sm">Paracetamol 10-15mg/kg q4-6h OR Ibuprofen 5-10mg/kg q6-8h.</p>
                </div>
                <div class="mb-2">
                    <strong>Hydration & Rest:</strong>
                    <p class="text-secondary text-sm">Maintain fluids. Rest efficacy is unproven but recommended.</p>
                </div>
                <div style="background: var(--color-info-bg); padding: 10px; border-radius: 6px; margin-top: 15px;">
                    <strong class="text-info">SPORTS RESTRICTION:</strong><br>
                    <span class="text-sm">No contact sports for <strong>3-4 weeks</strong> (up to 8 weeks) due to splenic rupture risk.</span>
                </div>
            </div>

            <!-- Severe Management -->
            <div class="card red-flag-card">
                <div class="card-header">
                    <svg class="icon-lg text-danger" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/></svg>
                    <h3>Severe Disease Treatment</h3>
                </div>
                <p class="text-secondary text-sm mb-2">Admit to hospital.</p>

                <div class="mb-2">
                    <strong class="text-danger">Indications:</strong>
                    <p class="text-sm">Airway obstruction, Thrombocytopaenia <20k, Haemolytic anaemia.</p>
                </div>
                <hr style="border: 0; border-top: 1px solid #334155; margin: 10px 0;">
                <div class="mb-2">
                    <strong>Regimen:</strong>
                    <p class="text-secondary text-sm">
                        <strong>Prednisolone:</strong> 1-2 mg/kg/day (children) or 30-60 mg/day (adults) for 5-7 days.<br>
                        <strong>OR:</strong> IV Methylprednisolone 30mg/kg for severe thrombocytopaenia.<br>
                        <strong>OR:</strong> IV Immunoglobulin (IVIG) if bleeding with thrombocytopaenia.
                    </p>
                </div>
            </div>
        </div>

        <!-- INTERACTIVE TOOL: Decision Support -->
        <h3 class="mt-2 mb-2">Clinical Decision Support</h3>
        <div class="decision-widget">
            <p class="text-secondary mb-2">Select the patient's current status to see recommended action.</p>
            
            <div class="option-group">
                <label>
                    <input type="radio" name="clinical-scenario" class="radio-btn" value="stable" onchange="updateDecision()">
                    <div class="radio-label">Fever, Sore Throat, Tiredness (Stable)</div>
                </label>
                <label>
                    <input type="radio" name="clinical-scenario" class="radio-btn" value="airway" onchange="updateDecision()">
                    <div class="radio-label">Difficulty Breathing / Stridor</div>
                </label>
                <label>
                    <input type="radio" name="clinical-scenario" class="radio-btn" value="rash" onchange="updateDecision()">
                    <div class="radio-label">Rash after Amoxicillin</div>
                </label>
                 <label>
                    <input type="radio" name="clinical-scenario" class="radio-btn" value="sport" onchange="updateDecision()">
                    <div class="radio-label">Athlete asking about sport</div>
                </label>
            </div>

            <div id="decision-result" class="result-box"></div>
        </div>

        <!-- Timeline -->
        <h3 class="mt-2 mb-2">Recovery Timeline</h3>
        <div class="timeline">
            <div class="timeline-item warning">
                <strong class="text-warning">Acute Phase (Days 1-7)</strong><br>
                <span class="text-secondary text-sm">Severe sore throat, high fever. Monospot may be negative.</span>
            </div>
            <div class="timeline-item">
                <strong class="text-info">Peak Phase (Week 2-3)</strong><br>
                <span class="text-secondary text-sm">Lymphadenopathy peaks. Splenomegaly risk peaks. Monospot usually positive. Fatigue worst.</span>
            </div>
            <div class="timeline-item">
                <strong class="text-success">Resolution (Weeks 4-8)</strong><br>
                <span class="text-secondary text-sm">Fever resolves. Spleen size normalizes. Fatigue may persist for months.</span>
            </div>
        </div>

    </div>

</main>

<script>
    function switchTab(tabId) {
        // Remove active class from buttons
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Add active class to clicked button (finding by onclick attribute for simplicity)
        const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(tabId));
        if(activeBtn) activeBtn.classList.add('active');

        // Hide all sections
        document.querySelectorAll('.section').forEach(sec => {
            sec.classList.remove('active');
        });

        // Show target section
        document.getElementById(tabId).classList.add('active');
    }

    function updateDecision() {
        const selected = document.querySelector('input[name="clinical-scenario"]:checked');
        const resultBox = document.getElementById('decision-result');
        
        if (!selected) {
            resultBox.style.display = 'none';
            return;
        }

        resultBox.style.display = 'block';
        let color = '';
        let html = '';

        switch (selected.value) {
            case 'stable':
                color = 'var(--color-success-bg)';
                html = `
                    <strong class="text-success">OUTPATIENT MANAGEMENT</strong><br>
                    1. Treat symptoms: Paracetamol/Ibuprofen + Hydration.<br>
                    2. No Ampicillin/Amoxicillin (risk of rash).<br>
                    3. Advise rest and avoid contact sports for at least 3-4 weeks.
                `;
                break;
            case 'airway':
                color = 'var(--color-danger-bg)';
                html = `
                    <strong class="text-danger">EMERGENCY ACTION</strong><br>
                    1. <span class="font-bold">ADMIT IMMEDIATELY.</span><br>
                    2. Assess airway severity.<br>
                    3. Administer Corticosteroids (Prednisolone 1-2mg/kg or IV equivalent).<br>
                    4. Prepare for possible intubation or tracheotomy.
                `;
                break;
            case 'rash':
                color = 'var(--color-warning)'; // Using warning color text
                html = `
                    <strong style="color: #d97706">EXPECTED REACTION</strong><br>
                    1. Stop Amoxicillin/Ampicillin.<br>
                    2. This is a "hypersensitivity" reaction to the beta-lactam in EBV patients, <span class="font-bold">not</span> necessarily a true penicillin allergy.<br>
                    3. Rash usually resolves in a few days after stopping the drug.
                `;
                break;
            case 'sport':
                color = 'var(--color-info-bg)';
                html = `
                    <strong class="text-info">RETURN TO SPORT PROTOCOL</strong><br>
                    1. <span class="font-bold">ABSOLUTE CONTRAINDICATION</span> to contact sports for 3-8 weeks due to splenic rupture risk.<br>
                    2. Consider abdominal Ultrasound to confirm spleen size before return.<br>
                    3. Gradual return to activity: Non-contact first, then contact only if spleen normal and symptoms resolved.
                `;
                break;
        }

        resultBox.style.backgroundColor = color;
        resultBox.style.color = selected.value === 'rash' ? '#fff' : 'inherit';
        resultBox.innerHTML = html;
    }
</script>

</body>
</html>