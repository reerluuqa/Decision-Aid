<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Parasomnias: Clinical Quick-Scan</title>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* Color Palette */
            --bg-body: #f4f6f9;
            --bg-card: #ffffff;
            
            --primary-blue: #0056b3;
            --light-blue: #e3f2fd;
            --border-blue: #90caf9;

            --danger-red: #d32f2f;
            --light-red: #ffebee;
            --border-red: #ef9a9a;

            --safe-green: #2e7d32;
            --light-green: #e8f5e9;
            --border-green: #a5d6a7;

            --text-main: #2c3e50;
            --text-muted: #607d8b;

            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.15);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
        }

        /* --- Header & Nav --- */
        header {
            background: linear-gradient(135deg, var(--primary-blue), #003d80);
            color: white;
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        header .meta {
            font-size: 0.85rem;
            opacity: 0.9;
            text-align: right;
        }

        nav {
            background: white;
            padding: 0.8rem 2rem;
            border-bottom: 1px solid #ddd;
            overflow-x: auto;
            white-space: nowrap;
        }

        nav button {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 20px;
            margin-right: 0.5rem;
            transition: all 0.2s;
            font-weight: 600;
        }

        nav button:hover {
            background-color: var(--light-blue);
            color: var(--primary-blue);
        }

        nav button.active {
            background-color: var(--primary-blue);
            color: white;
        }

        /* --- Main Layout --- */
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        /* --- Utility Classes for Visual Cues --- */
        .red-flag {
            border-left: 5px solid var(--danger-red);
            background-color: var(--light-red);
            color: #b71c1c;
        }
        
        .safe-action {
            border-left: 5px solid var(--safe-green);
            background-color: var(--light-green);
            color: #1b5e20;
        }

        .info-box {
            border-left: 5px solid var(--primary-blue);
            background-color: var(--light-blue);
            color: #0d47a1;
        }

        /* --- Cards --- */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }

        .card-header i {
            margin-right: 0.8rem;
            font-size: 1.2rem;
        }

        .card-header h3 {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .card-content {
            flex: 1;
        }

        h2 {
            grid-column: 1 / -1;
            font-size: 1.4rem;
            color: var(--text-main);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }
        
        h2 i { margin-right: 10px; }

        /* --- Section: Overview & Red Flags --- */
        .overview-section {
            grid-column: span 12;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .red-banner {
            grid-column: 1 / -1;
            background-color: #ffebee;
            border: 1px solid #ffcdd2;
            color: #b71c1c;
            padding: 1rem;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }

        /* --- Interactive Condition Selector --- */
        .condition-selector {
            grid-column: span 12;
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .condition-btn {
            flex: 1;
            min-width: 150px;
            padding: 1rem;
            border: 2px solid #ddd;
            background: white;
            border-radius: var(--radius);
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.2s;
        }

        .condition-btn:hover {
            border-color: var(--primary-blue);
        }

        .condition-btn.active {
            background-color: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .condition-details {
            grid-column: span 12;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Tables --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: #f8f9fa;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* --- Checklists --- */
        .checklist-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 0.8rem;
        }
        
        .checklist-item i {
            margin-right: 0.8rem;
            margin-top: 4px;
        }

        .checklist-item strong {
            display: block;
            margin-bottom: 0.2rem;
        }

        /* --- Diagnosis Flowchart Style --- */
        .diagnosis-flow {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .flow-step {
            background: #fff;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 50px;
            text-align: center;
            position: relative;
        }

        .flow-arrow {
            text-align: center;
            color: var(--text-muted);
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .condition-details {
                grid-template-columns: 1fr;
            }
            .overview-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<header>
    <div>
        <h1><i class="fa-solid fa-bed-pulse"></i> Pediatric Parasomnias</h1>
        <div style="font-size: 0.8rem; font-weight: 400; margin-top: 5px;">Clinical Reference Tool</div>
    </div>
    <div class="meta">
        <div>BMJ Best Practice Based</div>
        <div>Last Updated: Oct 08, 2025</div>
    </div>
</header>

<nav>
    <button onclick="scrollToSection('critical')" class="active"><i class="fa-solid fa-triangle-exclamation"></i> Critical</button>
    <button onclick="scrollToSection('types')"><i class="fa-solid fa-layer-group"></i> Conditions</button>
    <button onclick="scrollToSection('diagnosis')"><i class="fa-solid fa-stethoscope"></i> Diagnosis</button>
    <button onclick="scrollToSection('management')"><i class="fa-solid fa-user-doctor"></i> Management</button>
</nav>

<main>

    <!-- SECTION 1: CRITICAL & RED FLAGS -->
    <section id="critical">
        <h2><i class="fa-solid fa-triangle-exclamation" style="color: var(--danger-red);"></i> Immediate Actions & Red Flags</h2>
        
        <div class="red-banner">
            <i class="fa-solid fa-circle-exclamation" style="font-size: 2rem; margin-right: 1rem;"></i>
            <div>
                <strong>Safety First:</strong> Ensure environment is locked (doors/windows). Remove sharp objects. Use door alarms if sleepwalking is present.
            </div>
        </div>

        <div class="overview-section" style="margin-top: 1.5rem;">
            <!-- Red Flag Card -->
            <div class="card red-flag">
                <div class="card-header">
                    <i class="fa-solid fa-biohazard"></i>
                    <h3>Rule Out Seizure</h3>
                </div>
                <div class="card-content">
                    <p style="margin-bottom: 0.5rem;"><strong>Consider Nocturnal Epilepsy if:</strong></p>
                    <ul style="padding-left: 1.2rem;">
                        <li>Stereotypical, repetitive episodes.</li>
                        <li>Occurs during wakefulness AND sleep.</li>
                        <li>Presence of tongue biting, incontinence, or post-ictal confusion.</li>
                        <li>Frequency > 1x per week.</li>
                    </ul>
                    <div style="margin-top: 1rem; font-weight: 600;">
                        <i class="fa-solid fa-arrow-right"></i> Action: Order PSG with expanded video EEG.
                    </div>
                </div>
            </div>

            <!-- Red Flag Card 2 -->
            <div class="card red-flag">
                <div class="card-header">
                    <i class="fa-solid fa-user-injured"></i>
                    <h3>Injury Risk</h3>
                </div>
                <div class="card-content">
                    <p>Children may leave the bed or home. Case history #1 highlights potential for police/neighbor intervention due to screaming.</p>
                    <div style="margin-top: 1rem;">
                        <strong>Immediate Safety Measures:</strong>
                        <div class="checklist-item safe-action">
                            <i class="fa-solid fa-check" style="color: var(--safe-green);"></i>
                            <span>Lock doors & windows.</span>
                        </div>
                        <div class="checklist-item safe-action">
                            <i class="fa-solid fa-check" style="color: var(--safe-green);"></i>
                            <span>Install door alarms.</span>
                        </div>
                        <div class="checklist-item safe-action">
                            <i class="fa-solid fa-check" style="color: var(--safe-green);"></i>
                            <span>Sleep on ground floor if possible.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info Card -->
            <div class="card info-box">
                <div class="card-header">
                    <i class="fa-solid fa-circle-info"></i>
                    <h3>Triggers to Treat</h3>
                </div>
                <div class="card-content">
                    <p>Addressing these often resolves the parasomnia:</p>
                    <div class="checklist-item">
                        <i class="fa-solid fa-moon"></i>
                        <span><strong>Sleep Deprivation</strong><br>Ensure age-appropriate sleep hours (9-16h depending on age).</span>
                    </div>
                    <div class="checklist-item">
                        <i class="fa-solid fa-lungs"></i>
                        <span><strong>OSA (Obstructive Sleep Apnoea)</strong><br>Snoring/gasping? Treat to resolve arousals.</span>
                    </div>
                    <div class="checklist-item">
                        <i class="fa-solid fa-pills"></i>
                        <span><strong>Medications</strong><br>Antidepressants, sedatives, or caffeine/alcohol.</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: INTERACTIVE CONDITIONS -->
    <section id="types" style="margin-top: 3rem;">
        <h2><i class="fa-solid fa-layer-group" style="color: var(--primary-blue);"></i> Condition Quick-Scan</h2>
        <p style="margin-bottom: 1rem; color: var(--text-muted);">Select a condition to view specific clinical cues.</p>

        <div class="condition-selector">
            <button class="condition-btn active" onclick="selectCondition('nrem')">
                <i class="fa-solid fa-person-walking"></i> NREM (Arousal)
            </button>
            <button class="condition-btn" onclick="selectCondition('rem')">
                <i class="fa-solid fa-eye"></i> REM Parasomnias
            </button>
        </div>

        <div id="condition-content" class="condition-details">
            <!-- Content injected via JS -->
        </div>
    </section>

    <!-- SECTION 3: DIAGNOSIS -->
    <section id="diagnosis" style="margin-top: 3rem;">
        <h2><i class="fa-solid fa-stethoscope" style="color: var(--primary-blue);"></i> Diagnostic Approach</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
            <!-- Clinical History -->
            <div class="card" style="grid-column: span 2;">
                <div class="card-header">
                    <i class="fa-solid fa-clipboard-user"></i>
                    <h3>Key History Factors</h3>
                </div>
                <div class="card-content">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div>
                            <strong>Timing:</strong> First half vs. Second half of night?
                        </div>
                        <div>
                            <strong>Recall:</strong> Amnesia (NREM) vs. Vivid (REM/Nightmare)?
                        </div>
                        <div>
                            <strong>Behavior:</strong> Confused, Aggressive, or Frightened?
                        </div>
                        <div>
                            <strong>Family History:</strong> Parents sleepwalk? (Strong predictor).
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investigation Path -->
            <div class="card info-box">
                <div class="card-header">
                    <i class="fa-solid fa-microscope"></i>
                    <h3>Investigations</h3>
                </div>
                <div class="card-content">
                    <p><strong>Standard:</strong> None required (Clinical History).</p>
                    <p style="margin-top: 0.5rem;"><strong>Order PSG if:</strong></p>
                    <ul style="padding-left: 1.2rem; font-size: 0.9rem;">
                        <li>Suspected RBD (Required).</li>
                        <li>Atypical presentation / Seizure mimic.</li>
                        <li>Sleep-disordered breathing suspected.</li>
                        <li>Frequent injury.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Comparison Table -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header">
                <i class="fa-solid fa-scale-balanced"></i>
                <h3>NREM vs REM: Rapid Differentiation</h3>
            </div>
            <div class="card-content" style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th style="color: var(--primary-blue);">NREM (Sleep Terrors, Walking)</th>
                            <th style="color: #7b1fa2;">REM (Nightmares, RBD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Timing</strong></td>
                            <td>First 1/3 to 1/2 of night (Slow Wave Sleep)</td>
                            <td>Latter half of night / Morning</td>
                        </tr>
                        <tr>
                            <td><strong>Mental State</strong></td>
                            <td>Confused, disoriented, amnesia</td>
                            <td>Alert on waking (Nightmares), May recall dream</td>
                        </tr>
                        <tr>
                            <td><strong>Autonomic Signs</strong></td>
                            <td>High (Tachycardia, Screaming, Pupil dilation)</td>
                            <td>Low to Moderate (unless RBD)</td>
                        </tr>
                        <tr>
                            <td><strong>Consolability</strong></td>
                            <td>Difficult to console, may push away</td>
                            <td>Consolable (Nightmares)</td>
                        </tr>
                        <tr>
                            <td><strong>Motor Activity</strong></td>
                            <td>Sitting up, Walking, Running</td>
                            <td>Usually still (Nightmare), Violent thrashing (RBD)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- SECTION 4: MANAGEMENT -->
    <section id="management" style="margin-top: 3rem;">
        <h2><i class="fa-solid fa-user-doctor" style="color: var(--safe-green);"></i> Management Protocol</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
            
            <!-- Step 1 -->
            <div class="card safe-action">
                <div class="card-header">
                    <i class="fa-solid fa-1"></i>
                    <h3>Education & Reassurance</h3>
                </div>
                <div class="card-content">
                    <p>Benign nature of condition. Spontaneous resolution by adolescence is common.</p>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="card safe-action">
                <div class="card-header">
                    <i class="fa-solid fa-2"></i>
                    <h3>Sleep Hygiene</h3>
                </div>
                <div class="card-content">
                    <ul style="padding-left: 1.2rem;">
                        <li>Regular sleep-wake schedule.</li>
                        <li>Avoid sleep deprivation.</li>
                        <li>Avoid caffeine/alcohol (adolescents).</li>
                        <li>Limit screens before bed.</li>
                    </ul>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="card safe-action">
                <div class="card-header">
                    <i class="fa-solid fa-3"></i>
                    <h3>Timed Awakening</h3>
                </div>
                <div class="card-content">
                    <p>For frequent events (NREM): Gently wake child 15-30 mins before typical episode time for several nights.</p>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="card safe-action">
                <div class="card-header">
                    <i class="fa-solid fa-4"></i>
                    <h3>Treat Comorbidities</h3>
                </div>
                <div class="card-content">
                    <p>Treat OSA, RLS, or PLMD if present. This often resolves the parasomnia.</p>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 1.5rem; background-color: #fafafa; border: 1px dashed #ccc;">
            <div class="card-header">
                <i class="fa-solid fa-prescription-bottle-medical"></i>
                <h3>Pharmacotherapy (Rare)</h3>
            </div>
            <div class="card-content">
                <p><strong>Indication:</strong> Only if frequent, severe, risk of injury, or refractory to behavioral measures.</p>
                <p><strong>Options (Off-label/Caution):</strong> Low-dose Benzodiazepines (e.g., Clonazepam for RBD), Imipramine, or Melatonin.</p>
                <div class="red-banner" style="margin-top: 0.5rem; font-size: 0.9rem; padding: 0.5rem;">
                    Avoid in most children; prioritize safety and sleep hygiene.
                </div>
            </div>
        </div>
    </section>

</main>

<footer style="background-color: #333; color: #fff; padding: 2rem; text-align: center; margin-top: 3rem;">
    <p style="font-size: 0.9rem;">
        <strong>Disclaimer:</strong> This tool is for educational and reference purposes only based on BMJ Best Practice (Oct 2025). 
        It does not replace professional clinical judgment.
    </p>
    <p style="font-size: 0.8rem; color: #aaa; margin-top: 0.5rem;">&copy; 2025 Clinical Quick-Scan Tools</p>
</footer>

<script>
    // Data for conditions
    const conditionData = {
        nrem: {
            title: "NREM Arousal Disorders",
            desc: "Incomplete awakening from deep slow-wave sleep. Most common in childhood.",
            subtypes: [
                { name: "Confusional Arousals", details: "Mental confusion in bed. No terror or walking. Occurs mostly < 5 years." },
                { name: "Sleepwalking", details: "Leaving bed. Blank staring face. Unresponsive. Peak 10-13 years." },
                { name: "Sleep Terrors", details: "Abrupt terror, panicky scream, autonomic hyperactivity (sweating, tachycardia). Amnesia for event." }
            ],
            actions: [
                { icon: "fa-shield-halved", text: "Safety proof room (remove sharp objects)." },
                { icon: "fa-door-closed", text: "Lock doors/windows, use alarms." },
                { icon: "fa-moon", text: "Avoid sleep deprivation (major trigger)." },
                { icon: "fa-bell", text: "Consider scheduled awakenings." }
            ]
        },
        rem: {
            title: "REM Parasomnias",
            desc: "Occur during REM sleep (latter half of night). Muscle atonia is usually present (absent in RBD).",
            subtypes: [
                { name: "Nightmare Disorder", details: "Recall of vivid, distressing dreams. Rapidly becomes oriented on waking. Peak 10-14 years." },
                { name: "Sleep Paralysis", details: "Inability to move at sleep onset or waking. Often terrifying. Screen for Narcolepsy." },
                { name: "RBD (Rare)", details: "Loss of muscle atonia -> 'Acting out dreams'. Violent. VERY rare in kids; link to Narcolepsy/Antidepressants." }
            ],
            actions: [
                { icon: "fa-brain", text: "Screen for Narcolepsy (esp. if Sleep Paralysis/RBD)." },
                { icon: "fa-user-nurse", text: "Treat underlying psychopathology if nightmares." },
                { icon: "fa-file-medical", text: "PSG REQUIRED for RBD diagnosis." },
                { icon: "fa-pills", text: "Review meds (SSRIs can trigger)." }
            ]
        }
    };

    function renderCondition(type) {
        const data = conditionData[type];
        const container = document.getElementById('condition-content');
        const isNREM = type === 'nrem';
        const color = isNREM ? 'var(--primary-blue)' : '#7b1fa2';
        const bgColor = isNREM ? 'var(--light-blue)' : '#f3e5f5';

        let subtypesHtml = data.subtypes.map(sub => `
            <div style="padding: 10px; border-left: 3px solid ${color}; background: #fff; margin-bottom: 5px;">
                <strong>${sub.name}:</strong> ${sub.details}
            </div>
        `).join('');

        let actionsHtml = data.actions.map(act => `
            <div class="checklist-item">
                <i class="fa-solid ${act.icon}" style="color: ${color}"></i>
                <span>${act.text}</span>
            </div>
        `).join('');

        container.innerHTML = `
            <!-- Left: Details -->
            <div class="card" style="border-top: 4px solid ${color};">
                <div class="card-header">
                    <i class="fa-solid fa-${isNREM ? 'bed' : 'eye'}"></i>
                    <h3>${data.title}</h3>
                </div>
                <div class="card-content">
                    <p style="margin-bottom: 1rem;">${data.desc}</p>
                    <h4 style="margin-bottom: 0.5rem; color: ${color};">Clinical Variants:</h4>
                    <div>${subtypesHtml}</div>
                </div>
            </div>

            <!-- Right: Actions -->
            <div class="card safe-action">
                <div class="card-header">
                    <i class="fa-solid fa-list-check"></i>
                    <h3>Clinical Actions</h3>
                </div>
                <div class="card-content">
                    ${actionsHtml}
                </div>
            </div>
        `;
    }

    function selectCondition(type) {
        // Update buttons
        document.querySelectorAll('.condition-btn').forEach(btn => {
            btn.classList.remove('active');
            if(btn.textContent.toLowerCase().includes(type)) {
                btn.classList.add('active');
            }
        });
        
        // Render content
        renderCondition(type);
    }

    // Navigation Scroll
    function scrollToSection(id) {
        const el = document.getElementById(id);
        if(el) {
            // Offset for sticky header
            const headerOffset = 120;
            const elementPosition = el.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    
            window.scrollTo({
                top: offsetPosition,
                behavior: "smooth"
            });

            // Update nav active state
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        renderCondition('nrem');
    });

</script>

</body>
</html>