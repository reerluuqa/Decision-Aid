<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acute Childhood Limp - Clinical Quick Reference</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --red-urgent: #dc2626;
            --red-light: #fef2f2;
            --red-border: #fca5a5;
            --green-safe: #16a34a;
            --green-light: #f0fdf4;
            --green-border: #86efac;
            --blue-info: #2563eb;
            --blue-light: #eff6ff;
            --blue-border: #93c5fd;
            --amber-warning: #d97706;
            --amber-light: #fffbeb;
            --amber-border: #fcd34d;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.5;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-badge {
            background: rgba(255,255,255,0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .nav-pills {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-pill {
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
        }

        .nav-pill:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .nav-pill.active {
            background: white;
            color: var(--blue-info);
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Emergency Banner */
        .emergency-banner {
            background: linear-gradient(135deg, var(--red-urgent) 0%, #b91c1c 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            animation: pulse-border 2s infinite;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        @keyframes pulse-border {
            0%, 100% { box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(220, 38, 38, 0.5); }
        }

        .emergency-icon {
            font-size: 2rem;
            animation: shake 0.5s ease-in-out infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .emergency-text h2 {
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .emergency-text p {
            font-size: 0.875rem;
            opacity: 0.95;
        }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 1024px) {
            .two-col {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1rem 1.25rem;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .card-header-red {
            background: var(--red-light);
            color: var(--red-urgent);
            border-bottom-color: var(--red-border);
        }

        .card-header-green {
            background: var(--green-light);
            color: var(--green-safe);
            border-bottom-color: var(--green-border);
        }

        .card-header-blue {
            background: var(--blue-light);
            color: var(--blue-info);
            border-bottom-color: var(--blue-border);
        }

        .card-header-amber {
            background: var(--amber-light);
            color: var(--amber-warning);
            border-bottom-color: var(--amber-border);
        }

        .card-body {
            padding: 1rem 1.25rem;
        }

        /* Red Flags List */
        .red-flags-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        @media (max-width: 600px) {
            .red-flags-grid {
                grid-template-columns: 1fr;
            }
        }

        .red-flag-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            padding: 0.625rem;
            background: var(--red-light);
            border-left: 3px solid var(--red-urgent);
            border-radius: 0 0.375rem 0.375rem 0;
            font-size: 0.8125rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .red-flag-item:hover {
            background: #fee2e2;
            transform: translateX(3px);
        }

        .red-flag-item .icon {
            color: var(--red-urgent);
            font-size: 1rem;
            flex-shrink: 0;
        }

        .red-flag-item .suggests {
            color: var(--gray-600);
            font-size: 0.75rem;
            display: block;
            margin-top: 0.125rem;
        }

        /* Age Table */
        .age-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8125rem;
        }

        .age-table th {
            background: var(--blue-light);
            color: var(--blue-info);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--blue-border);
            position: sticky;
            top: 0;
        }

        .age-table td {
            padding: 0.625rem 0.75rem;
            border-bottom: 1px solid var(--gray-200);
            vertical-align: top;
        }

        .age-table tr {
            transition: background 0.2s ease;
        }

        .age-table tr:hover {
            background: var(--gray-50);
        }

        .age-badge {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            border-radius: 1rem;
            font-weight: 600;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        .age-badge-infant { background: #fce7f3; color: #be185d; }
        .age-badge-child { background: #dbeafe; color: #1d4ed8; }
        .age-badge-teen { background: #d1fae5; color: #047857; }
        .age-badge-any { background: var(--amber-light); color: var(--amber-warning); }

        .condition-tag {
            display: inline-block;
            padding: 0.125rem 0.5rem;
            background: var(--gray-100);
            border-radius: 0.25rem;
            margin: 0.125rem;
            font-size: 0.75rem;
        }

        .condition-tag.urgent {
            background: var(--red-light);
            color: var(--red-urgent);
            border: 1px solid var(--red-border);
        }

        /* Management Section */
        .management-flow {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .flow-step {
            display: flex;
            align-items: stretch;
            gap: 1rem;
        }

        .flow-number {
            width: 2rem;
            height: 2rem;
            background: var(--blue-info);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
            padding: 0.75rem 1rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
            border-left: 3px solid var(--blue-info);
        }

        .flow-content.urgent {
            background: var(--red-light);
            border-left-color: var(--red-urgent);
        }

        .flow-content.safe {
            background: var(--green-light);
            border-left-color: var(--green-safe);
        }

        .flow-title {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .flow-details {
            font-size: 0.8125rem;
            color: var(--gray-600);
        }

        /* Checklist */
        .checklist {
            list-style: none;
        }

        .checklist li {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--gray-100);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist li:hover {
            background: var(--gray-50);
            padding-left: 0.5rem;
            margin-left: -0.5rem;
            margin-right: -0.5rem;
            padding-right: 0.5rem;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .check-icon {
            color: var(--blue-info);
            font-size: 1rem;
        }

        .checklist li.checked .check-icon {
            color: var(--green-safe);
        }

        .checklist li.checked {
            color: var(--gray-600);
            text-decoration: line-through;
        }

        /* Quick Action Buttons */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            border-radius: 0.75rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .quick-action:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .quick-action-red {
            background: var(--red-light);
            border-color: var(--red-border);
            color: var(--red-urgent);
        }

        .quick-action-red:hover {
            background: #fee2e2;
        }

        .quick-action-green {
            background: var(--green-light);
            border-color: var(--green-border);
            color: var(--green-safe);
        }

        .quick-action-green:hover {
            background: #dcfce7;
        }

        .quick-action-blue {
            background: var(--blue-light);
            border-color: var(--blue-border);
            color: var(--blue-info);
        }

        .quick-action-blue:hover {
            background: #dbeafe;
        }

        .quick-action-amber {
            background: var(--amber-light);
            border-color: var(--amber-border);
            color: var(--amber-warning);
        }

        .quick-action-amber:hover {
            background: #fef3c7;
        }

        .quick-action-icon {
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .quick-action-label {
            font-weight: 600;
            font-size: 0.8125rem;
        }

        /* Collapsible Sections */
        .collapsible {
            cursor: pointer;
        }

        .collapsible::after {
            content: '‚ñº';
            float: right;
            font-size: 0.75rem;
            transition: transform 0.2s ease;
        }

        .collapsible.collapsed::after {
            transform: rotate(-90deg);
        }

        .collapse-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapse-content.collapsed {
            max-height: 0;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip-text {
            visibility: hidden;
            position: absolute;
            z-index: 10;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gray-800);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s ease;
            margin-bottom: 0.5rem;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid var(--gray-200);
            margin-bottom: 1rem;
            overflow-x: auto;
        }

        .tab {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--gray-600);
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            white-space: nowrap;
            transition: all 0.2s ease;
        }

        .tab:hover {
            color: var(--blue-info);
            background: var(--blue-light);
        }

        .tab.active {
            color: var(--blue-info);
            border-bottom-color: var(--blue-info);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Gait Types */
        .gait-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .gait-card {
            padding: 0.75rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
            border-left: 3px solid var(--blue-info);
            transition: all 0.2s ease;
        }

        .gait-card:hover {
            background: var(--blue-light);
            transform: translateX(3px);
        }

        .gait-name {
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--gray-800);
        }

        .gait-desc {
            font-size: 0.75rem;
            color: var(--gray-600);
            margin-top: 0.25rem;
        }

        /* Section Spacing */
        .section {
            margin-bottom: 1.5rem;
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-critical {
            background: var(--red-light);
            color: var(--red-urgent);
        }

        .status-warning {
            background: var(--amber-light);
            color: var(--amber-warning);
        }

        .status-ok {
            background: var(--green-light);
            color: var(--green-safe);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: var(--gray-600);
            font-size: 0.75rem;
            border-top: 1px solid var(--gray-200);
            margin-top: 2rem;
        }

        /* Print Styles */
        @media print {
            .header { position: static; }
            .nav-pills { display: none; }
            .card:hover { transform: none; box-shadow: none; }
        }

        /* Decision Box */
        .decision-box {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .decision-yes, .decision-no {
            flex: 1;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .decision-yes {
            background: var(--red-light);
            border: 2px solid var(--red-border);
        }

        .decision-no {
            background: var(--green-light);
            border: 2px solid var(--green-border);
        }

        .decision-title {
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .decision-action {
            font-size: 0.8125rem;
        }

        /* Info Box */
        .info-box {
            background: var(--blue-light);
            border: 1px solid var(--blue-border);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 0.8125rem;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .info-box-icon {
            color: var(--blue-info);
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>
                ü¶µ Acute Childhood Limp
                <span class="header-badge">Ages 0-18</span>
            </h1>
            <nav class="nav-pills">
                <button class="nav-pill active" onclick="scrollToSection('red-flags')">üö® Red Flags</button>
                <button class="nav-pill" onclick="scrollToSection('assessment')">üìã Assessment</button>
                <button class="nav-pill" onclick="scrollToSection('differentials')">üîç Differentials</button>
                <button class="nav-pill" onclick="scrollToSection('management')">üíä Management</button>
            </nav>
        </div>
    </header>

    <main class="main-container">
        <!-- Emergency Banner -->
        <div class="emergency-banner" id="red-flags">
            <div class="emergency-icon">‚ö†Ô∏è</div>
            <div class="emergency-text">
                <h2>URGENT REFERRAL REQUIRED if fever + any red flag, age &lt;3 years, or age &gt;9 with hip restriction</h2>
                <p>Septic arthritis can cause permanent joint destruction within 24 hours ‚Ä¢ Always exclude child maltreatment</p>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <div class="quick-action quick-action-red" onclick="showModal('urgent')">
                <div class="quick-action-icon">üöë</div>
                <div class="quick-action-label">Urgent Referral<br>Criteria</div>
            </div>
            <div class="quick-action quick-action-amber" onclick="showModal('age-guide')">
                <div class="quick-action-icon">üë∂</div>
                <div class="quick-action-label">Age-Based<br>Causes</div>
            </div>
            <div class="quick-action quick-action-green" onclick="showModal('primary-care')">
                <div class="quick-action-icon">üè•</div>
                <div class="quick-action-label">Primary Care<br>Management</div>
            </div>
            <div class="quick-action quick-action-blue" onclick="showModal('pgals')">
                <div class="quick-action-icon">üî¨</div>
                <div class="quick-action-label">pGALS<br>Examination</div>
            </div>
        </div>

        <!-- Red Flags Section -->
        <section class="section">
            <div class="card">
                <div class="card-header card-header-red collapsible" onclick="toggleCollapse(this)">
                    üö® RED FLAGS ‚Äî Arrange Urgent Specialist Assessment
                </div>
                <div class="card-body collapse-content">
                    <div class="red-flags-grid">
                        <div class="red-flag-item">
                            <span class="icon">üåô</span>
                            <div>
                                <strong>Night pain waking child</strong>
                                <span class="suggests">‚Üí Malignancy</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üî¥</span>
                            <div>
                                <strong>Joint redness/swelling/stiffness</strong>
                                <span class="suggests">‚Üí Infection / Inflammatory</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">ü§í</span>
                            <div>
                                <strong>Fever + red flag</strong>
                                <span class="suggests">‚Üí Septic arthritis / Osteomyelitis</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üìâ</span>
                            <div>
                                <strong>Weight loss / anorexia / night sweats</strong>
                                <span class="suggests">‚Üí Malignancy / Infection</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üîµ</span>
                            <div>
                                <strong>Unexplained rash or bruising</strong>
                                <span class="suggests">‚Üí Haematological / Maltreatment</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üåÖ</span>
                            <div>
                                <strong>Morning stiffness</strong>
                                <span class="suggests">‚Üí Inflammatory joint disease</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üö´</span>
                            <div>
                                <strong>Unable to bear weight</strong>
                                <span class="suggests">‚Üí Trauma / Infection</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üò∞</span>
                            <div>
                                <strong>Severe pain + agitation post-trauma</strong>
                                <span class="suggests">‚Üí Compartment syndrome</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üîò</span>
                            <div>
                                <strong>Palpable mass</strong>
                                <span class="suggests">‚Üí Malignancy / Infection</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üë∂</span>
                            <div>
                                <strong>Age &lt;3 years</strong>
                                <span class="suggests">‚Üí Transient synovitis rare; septic arthritis more common</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">üßí</span>
                            <div>
                                <strong>Age &gt;9 with painful/restricted hip</strong>
                                <span class="suggests">‚Üí Exclude SUFE</span>
                            </div>
                        </div>
                        <div class="red-flag-item">
                            <span class="icon">‚ö†Ô∏è</span>
                            <div>
                                <strong>Suspected maltreatment</strong>
                                <span class="suggests">‚Üí Safeguarding referral</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content - Two Columns -->
        <div class="two-col" id="assessment">
            <!-- Left Column: Assessment -->
            <div>
                <div class="card section">
                    <div class="card-header card-header-blue collapsible" onclick="toggleCollapse(this)">
                        üìã History Taking
                    </div>
                    <div class="card-body collapse-content">
                        <ul class="checklist" id="history-checklist">
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Duration & progression</strong> ‚Äî Acute onset ‚Üí trauma/infection</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Trauma history</strong> ‚Äî Consider toddler's fracture; check for maltreatment</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Preceding viral illness</strong> ‚Äî Suggests transient synovitis</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Pain characteristics</strong> ‚Äî Location, severity, timing, night pain</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Muscle weakness</strong> ‚Äî Suggests neuromuscular disease</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Birth & developmental Hx</strong> ‚Äî DDH risk factors; motor milestones</div>
                            </li>
                            <li onclick="toggleCheck(this)">
                                <span class="check-icon">‚òê</span>
                                <div><strong>Family history</strong> ‚Äî JIA, muscular dystrophy, bleeding disorders</div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card section">
                    <div class="card-header card-header-blue collapsible" onclick="toggleCollapse(this)">
                        ü©∫ Examination
                    </div>
                    <div class="card-body collapse-content">
                        <div class="tabs">
                            <div class="tab active" onclick="switchTab(event, 'general-exam')">General</div>
                            <div class="tab" onclick="switchTab(event, 'msk-exam')">MSK</div>
                            <div class="tab" onclick="switchTab(event, 'gait-types')">Gait Types</div>
                        </div>
                        
                        <div id="general-exam" class="tab-content active">
                            <ul class="checklist">
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Pyrexia/Tachycardia</strong> ‚Äî May indicate sepsis</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Pallor/Irritability/Lethargy</strong> ‚Äî Sepsis or systemic disease</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Unexplained rash/bruising</strong> ‚Äî Haematological or maltreatment</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Lymphadenopathy</strong> ‚Äî Infection or malignancy</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Height/Weight</strong> ‚Äî Compare to previous; poor growth = chronic disease</div>
                                </li>
                            </ul>
                        </div>

                        <div id="msk-exam" class="tab-content">
                            <ul class="checklist">
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Can child weight bear?</strong></div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Spine</strong> ‚Äî Scoliosis, sacral pit, hair tuft (spina bifida)</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Leg length discrepancy</strong></div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Compare limbs</strong> ‚Äî Asymmetry, erythema, swelling, deformity</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Calf hypertrophy</strong> ‚Äî Muscular dystrophy</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Focal bony tenderness</strong> ‚Äî Spine, pelvis, limbs</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Joint ROM</strong> ‚Äî Especially hip internal rotation</div>
                                </li>
                                <li onclick="toggleCheck(this)">
                                    <span class="check-icon">‚òê</span>
                                    <div><strong>Peripheral pulses & neuro</strong></div>
                                </li>
                            </ul>
                            <div class="info-box">
                                <span class="info-box-icon">üí°</span>
                                <div><strong>Key tip:</strong> Knee pain may be referred from hip. Always examine hip if knee pain present.</div>
                            </div>
                        </div>

                        <div id="gait-types" class="tab-content">
                            <div class="gait-grid">
                                <div class="gait-card">
                                    <div class="gait-name">Antalgic (80%)</div>
                                    <div class="gait-desc">Shortened stance phase, "hurrying off" painful leg ‚Üí Trauma, infection</div>
                                </div>
                                <div class="gait-card">
                                    <div class="gait-name">Trendelenburg</div>
                                    <div class="gait-desc">Pelvis drops to unaffected side ‚Üí DDH, Perthes', SUFE</div>
                                </div>
                                <div class="gait-card">
                                    <div class="gait-name">Steppage</div>
                                    <div class="gait-desc">Excessive hip/knee flexion, foot drop ‚Üí Cerebral palsy, neurological</div>
                                </div>
                                <div class="gait-card">
                                    <div class="gait-name">Vaulting/Circumduction</div>
                                    <div class="gait-desc">Hyperextended knee, vaulting over limb ‚Üí Limb length discrepancy</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Differentials -->
            <div id="differentials">
                <div class="card section">
                    <div class="card-header card-header-amber collapsible" onclick="toggleCollapse(this)">
                        üîç Differential Diagnosis by Age
                    </div>
                    <div class="card-body collapse-content" style="padding: 0;">
                        <table class="age-table">
                            <thead>
                                <tr>
                                    <th>Age Group</th>
                                    <th>Common Causes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="age-badge age-badge-infant">&lt;3 years</span></td>
                                    <td>
                                        <span class="condition-tag urgent">Septic arthritis</span>
                                        <span class="condition-tag">Toddler's fracture</span>
                                        <span class="condition-tag">DDH</span>
                                        <span class="condition-tag urgent">NAI</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><span class="age-badge age-badge-child">3-10 years</span></td>
                                    <td>
                                        <span class="condition-tag" style="background:#d1fae5; color:#047857;">Transient synovitis</span>
                                        <span class="condition-tag">Perthes' disease</span>
                                        <span class="condition-tag">Fracture</span>
                                        <span class="condition-tag urgent">Septic arthritis</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><span class="age-badge age-badge-teen">10-18 years</span></td>
                                    <td>
                                        <span class="condition-tag urgent">SUFE</span>
                                        <span class="condition-tag">Osgood-Schlatter</span>
                                        <span class="condition-tag">Sever's disease</span>
                                        <span class="condition-tag">Perthes'</span>
                                        <span class="condition-tag">OCD</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><span class="age-badge age-badge-any">Any Age</span></td>
                                    <td>
                                        <span class="condition-tag urgent">Septic arthritis</span>
                                        <span class="condition-tag urgent">Osteomyelitis</span>
                                        <span class="condition-tag urgent">Malignancy</span>
                                        <span class="condition-tag">JIA</span>
                                        <span class="condition-tag">Discitis</span>
                                        <span class="condition-tag">Sickle cell</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Kocher Criteria -->
                <div class="card section">
                    <div class="card-header card-header-red collapsible" onclick="toggleCollapse(this)">
                        ‚ö° Septic Arthritis vs Transient Synovitis
                    </div>
                    <div class="card-body collapse-content">
                        <p style="font-size: 0.8125rem; margin-bottom: 0.75rem; color: var(--gray-600);">
                            <strong>Kocher Criteria</strong> ‚Äî Independent predictors of septic arthritis:
                        </p>
                        <div class="red-flags-grid">
                            <div class="red-flag-item">
                                <span class="icon">üå°Ô∏è</span>
                                <div><strong>History of fever</strong></div>
                            </div>
                            <div class="red-flag-item">
                                <span class="icon">üö∂</span>
                                <div><strong>Non-weight bearing</strong></div>
                            </div>
                            <div class="red-flag-item">
                                <span class="icon">üìä</span>
                                <div><strong>ESR &gt;40 mm/h</strong></div>
                            </div>
                            <div class="red-flag-item">
                                <span class="icon">üî¨</span>
                                <div><strong>WBC &gt;12,000/mm¬≥</strong></div>
                            </div>
                        </div>
                        <div class="decision-box">
                            <div class="decision-yes">
                                <div class="decision-title" style="color: var(--red-urgent);">2+ Criteria</div>
                                <div class="decision-action">High probability<br><strong>Urgent referral</strong></div>
                            </div>
                            <div class="decision-no">
                                <div class="decision-title" style="color: var(--green-safe);">0-1 Criteria</div>
                                <div class="decision-action">Low probability<br>Consider transient synovitis</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Section -->
        <section class="section" id="management">
            <div class="two-col">
                <div class="card">
                    <div class="card-header card-header-red">
                        üöë When to Refer Urgently
                    </div>
                    <div class="card-body">
                        <div class="management-flow">
                            <div class="flow-step">
                                <div class="flow-number" style="background: var(--red-urgent);">!</div>
                                <div class="flow-content urgent">
                                    <div class="flow-title">Fever + ANY red flag</div>
                                    <div class="flow-details">Same-day paediatric/orthopaedic assessment</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number" style="background: var(--red-urgent);">!</div>
                                <div class="flow-content urgent">
                                    <div class="flow-title">Age &lt;3 years</div>
                                    <div class="flow-details">Transient synovitis rare; septic arthritis common</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number" style="background: var(--red-urgent);">!</div>
                                <div class="flow-content urgent">
                                    <div class="flow-title">Age &gt;9 + painful/restricted hip</div>
                                    <div class="flow-details">Exclude SUFE ‚Äî especially internal rotation</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number" style="background: var(--red-urgent);">!</div>
                                <div class="flow-content urgent">
                                    <div class="flow-title">Suspected child maltreatment</div>
                                    <div class="flow-details">Safeguarding referral</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number" style="background: var(--amber-warning);">?</div>
                                <div class="flow-content" style="background: var(--amber-light); border-left-color: var(--amber-warning);">
                                    <div class="flow-title">Uncertain diagnosis / Cannot manage in primary care</div>
                                    <div class="flow-details">Refer to paediatric orthopaedics ‚Äî urgency per clinical judgement</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header card-header-green">
                        ‚úÖ Primary Care Management ‚Äî Transient Synovitis
                    </div>
                    <div class="card-body">
                        <div style="background: var(--green-light); border: 2px solid var(--green-border); border-radius: 0.5rem; padding: 0.75rem; margin-bottom: 1rem;">
                            <strong style="color: var(--green-safe);">Criteria for primary care management:</strong>
                            <ul style="font-size: 0.8125rem; margin: 0.5rem 0 0 1.25rem; color: var(--gray-700);">
                                <li>Age <strong>3-9 years</strong></li>
                                <li>Well and <strong>afebrile</strong></li>
                                <li>Mobile but limping</li>
                                <li>Symptoms &lt;72h OR &gt;72h and <strong>improving</strong></li>
                            </ul>
                        </div>
                        
                        <div class="management-flow">
                            <div class="flow-step">
                                <div class="flow-number">1</div>
                                <div class="flow-content safe">
                                    <div class="flow-title">Rest + Simple Analgesia</div>
                                    <div class="flow-details">Paracetamol and/or Ibuprofen as needed</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number">2</div>
                                <div class="flow-content safe">
                                    <div class="flow-title">Safety Net Advice</div>
                                    <div class="flow-details">A&E immediately if: fever develops, symptoms worsen, child becomes unwell</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number">3</div>
                                <div class="flow-content safe">
                                    <div class="flow-title">Follow-up 48-72 hours</div>
                                    <div class="flow-details">If resolving, no investigations needed</div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-number">4</div>
                                <div class="flow-content safe">
                                    <div class="flow-title">Review at 1 week</div>
                                    <div class="flow-details">Confirm complete resolution. If not resolved ‚Üí Refer</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-box" style="background: var(--amber-light); border-color: var(--amber-border);">
                            <span class="info-box-icon" style="color: var(--amber-warning);">üì∑</span>
                            <div><strong>X-ray:</strong> Arrange same-day if trauma history or focal bony tenderness. Persistent limp with normal X-ray ‚Üí Refer.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Conditions Quick Reference -->
        <section class="section">
            <div class="card">
                <div class="card-header card-header-blue collapsible" onclick="toggleCollapse(this)">
                    üìö Key Conditions ‚Äî Quick Reference
                </div>
                <div class="card-body collapse-content">
                    <div class="tabs">
                        <div class="tab active" onclick="switchTab(event, 'cond-hip')">Hip Conditions</div>
                        <div class="tab" onclick="switchTab(event, 'cond-knee')">Knee/Lower Leg</div>
                        <div class="tab" onclick="switchTab(event, 'cond-infection')">Infections</div>
                        <div class="tab" onclick="switchTab(event, 'cond-other')">Other</div>
                    </div>

                    <div id="cond-hip" class="tab-content active">
                        <table class="age-table">
                            <tr>
                                <td style="width: 25%;"><strong>Transient Synovitis</strong><br><span class="age-badge age-badge-child">3-10y</span></td>
                                <td>Self-limiting hip inflammation. Male predominance. Post-viral. Mild-moderate pain, minimal ROM restriction. Afebrile, well. Diagnosis of exclusion.</td>
                            </tr>
                            <tr>
                                <td><strong>Perthes' Disease</strong><br><span class="age-badge age-badge-child">5-7y peak</span></td>
                                <td>Avascular necrosis of femoral head. 5:1 M:F. Insidious onset over weeks. Hip rotation limited. Referred pain to thigh/knee. Usually unilateral.</td>
                            </tr>
                            <tr>
                                <td><strong>SUFE</strong><br><span class="age-badge age-badge-teen">10-18y</span></td>
                                <td style="background: var(--red-light);">Femoral epiphysis displacement. Overweight adolescents. Pain (hip/thigh/knee), antalgic gait, out-toeing. <strong>Urgent diagnosis critical</strong> ‚Äî risk of AVN.</td>
                            </tr>
                            <tr>
                                <td><strong>DDH</strong><br><span class="age-badge age-badge-infant">&lt;3y</span></td>
                                <td>Congenital hip dysplasia. Risk: female, firstborn, breech, FHx. Asymmetric skin folds, limited hip abduction, leg shortening.</td>
                            </tr>
                        </table>
                    </div>

                    <div id="cond-knee" class="tab-content">
                        <table class="age-table">
                            <tr>
                                <td style="width: 25%;"><strong>Osgood-Schlatter</strong><br><span class="age-badge age-badge-teen">10-15y</span></td>
                                <td>Overuse injury at tibial tuberosity. Active adolescents. Anterior knee pain, worse with activity. Self-limiting.</td>
                            </tr>
                            <tr>
                                <td><strong>Sever's Disease</strong><br><span class="age-badge age-badge-teen">10-12y</span></td>
                                <td>Calcaneal apophysitis. Boys > girls. Active in sports. Heel pain. Usually resolves 2 weeks-2 months.</td>
                            </tr>
                            <tr>
                                <td><strong>OCD</strong><br><span class="age-badge age-badge-teen">10-19y</span></td>
                                <td>Subchondral bone separation. Most common cause of loose body in joint. Subtle findings; effusion, limited ROM. Locking suggests loose body.</td>
                            </tr>
                            <tr>
                                <td><strong>Toddler's Fracture</strong><br><span class="age-badge age-badge-infant">&lt;3y</span></td>
                                <td>Undisplaced spiral tibial fracture. Often unwitnessed fall. Refusal to weight bear. May not show on initial X-ray.</td>
                            </tr>
                        </table>
                    </div>

                    <div id="cond-infection" class="tab-content">
                        <table class="age-table">
                            <tr>
                                <td style="width: 25%; background: var(--red-light);"><strong>Septic Arthritis</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td style="background: var(--red-light);">Synovial infection. <strong>EMERGENCY</strong>. Fever, refusal to weight bear, joint inflammation. Can destroy joint within 24h. 4-5/100,000/year.</td>
                            </tr>
                            <tr>
                                <td style="background: var(--red-light);"><strong>Osteomyelitis</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td style="background: var(--red-light);">Bone infection. Pain with palpation, decreased limb use. Proximal femur can mimic septic arthritis. 9/100,000/year.</td>
                            </tr>
                            <tr>
                                <td><strong>Discitis</strong><br><span class="age-badge age-badge-infant">Young children</span></td>
                                <td>Disc space inflammation. Non-specific presentation. Refusal to walk, irritability. Pain on spine flexion (nappy changes). Limited spinal flexion.</td>
                            </tr>
                        </table>
                    </div>

                    <div id="cond-other" class="tab-content">
                        <table class="age-table">
                            <tr>
                                <td style="width: 25%;"><strong>JIA</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td>Joint pain, swelling, morning stiffness &gt;6 weeks. May be single or multiple joints. Uveitis common. Blood tests/X-rays often normal. FHx often negative.</td>
                            </tr>
                            <tr>
                                <td style="background: var(--red-light);"><strong>Malignancy</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td style="background: var(--red-light);">Osteosarcoma (peak &gt;10y), leukaemia, lymphoma. <strong>Night pain</strong>, weight loss, hepatosplenomegaly, lymphadenopathy, pathological fractures.</td>
                            </tr>
                            <tr>
                                <td><strong>Sickle Cell</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td>AVN of hip, increased infection risk, stroke (10% children). Sudden limp onset possible.</td>
                            </tr>
                            <tr>
                                <td><strong>NAI</strong><br><span class="age-badge age-badge-any">Any</span></td>
                                <td style="background: var(--amber-light);">Non-accidental injury. Unusual marks, multiple bruises of varying ages, recurrent injuries, delayed presentation, inconsistent history.</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Based on NICE CKS: Acute Childhood Limp (Last revised September 2025)</p>
            <p>For clinical decision support only. Always use clinical judgement. Source: cks.nice.org.uk</p>
        </footer>
    </main>

    <!-- Modal Overlay -->
    <div id="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 200; opacity: 0; transition: opacity 0.2s ease;" onclick="closeModal()">
        <div id="modal-content" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 1rem; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);" onclick="event.stopPropagation()">
            <div id="modal-header" style="padding: 1.25rem; border-bottom: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center;">
                <h3 id="modal-title" style="font-size: 1.125rem; font-weight: 600;"></h3>
                <button onclick="closeModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray-600);">&times;</button>
            </div>
            <div id="modal-body" style="padding: 1.25rem;"></div>
        </div>
    </div>

    <script>
        // Scroll to section
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Toggle collapse
        function toggleCollapse(header) {
            header.classList.toggle('collapsed');
            const content = header.nextElementSibling;
            content.classList.toggle('collapsed');
        }

        // Toggle checkbox
        function toggleCheck(li) {
            li.classList.toggle('checked');
            const icon = li.querySelector('.check-icon');
            icon.textContent = li.classList.contains('checked') ? '‚òë' : '‚òê';
        }

        // Switch tabs
        function switchTab(event, tabId) {
            const tabContainer = event.target.closest('.card-body');
            tabContainer.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tabContainer.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            tabContainer.querySelector('#' + tabId).classList.add('active');
        }

        // Modal content
        const modalData = {
            'urgent': {
                title: 'üöë Urgent Referral Criteria',
                content: `
                    <div style="background: var(--red-light); padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--red-urgent); margin-bottom: 1rem;">
                        <strong style="color: var(--red-urgent);">Arrange SAME-DAY specialist assessment if:</strong>
                    </div>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.75rem; border-bottom: 1px solid var(--gray-200);">‚úì Fever AND any red flag</li>
                        <li style="padding: 0.75rem; border-bottom: 1px solid var(--gray-200);">‚úì Child <strong>&lt;3 years old</strong></li>
                        <li style="padding: 0.75rem; border-bottom: 1px solid var(--gray-200);">‚úì Child <strong>&gt;9 years</strong> with painful or restricted hip (especially internal rotation)</li>
                        <li style="padding: 0.75rem; border-bottom: 1px solid var(--gray-200);">‚úì Suspected <strong>child maltreatment</strong></li>
                        <li style="padding: 0.75rem; border-bottom: 1px solid var(--gray-200);">‚úì Signs of <strong>compartment syndrome</strong></li>
                        <li style="padding: 0.75rem;">‚úì <strong>Unable to weight bear</strong></li>
                    </ul>
                `
            },
            'age-guide': {
                title: 'üë∂ Age-Based Differential Guide',
                content: `
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.875rem;">
                        <tr style="background: #fce7f3;">
                            <td style="padding: 0.75rem; font-weight: 600; width: 30%;">&lt;3 years</td>
                            <td style="padding: 0.75rem;">
                                <strong>Think:</strong> Toddler's fracture, DDH, Septic arthritis, NAI<br>
                                <span style="color: var(--red-urgent); font-weight: 600;">‚ö†Ô∏è Transient synovitis RARE in this age group</span>
                            </td>
                        </tr>
                        <tr style="background: #dbeafe;">
                            <td style="padding: 0.75rem; font-weight: 600;">3-10 years</td>
                            <td style="padding: 0.75rem;">
                                <strong>Most common:</strong> Transient synovitis<br>
                                <strong>Also consider:</strong> Perthes' (5-7y peak), Fractures
                            </td>
                        </tr>
                        <tr style="background: #d1fae5;">
                            <td style="padding: 0.75rem; font-weight: 600;">10-18 years</td>
                            <td style="padding: 0.75rem;">
                                <strong>Think:</strong> SUFE (urgent!), Osgood-Schlatter, Sever's, Stress fractures<br>
                                <span style="color: var(--red-urgent); font-weight: 600;">‚ö†Ô∏è Always exclude SUFE if hip symptoms</span>
                            </td>
                        </tr>
                        <tr style="background: var(--amber-light);">
                            <td style="padding: 0.75rem; font-weight: 600;">Any age</td>
                            <td style="padding: 0.75rem;">
                                <strong>Always consider:</strong> Septic arthritis, Osteomyelitis, Malignancy, JIA
                            </td>
                        </tr>
                    </table>
                `
            },
            'primary-care': {
                title: 'üè• Primary Care Management',
                content: `
                    <div style="background: var(--green-light); padding: 1rem; border-radius: 0.5rem; border-left: 4px solid var(--green-safe); margin-bottom: 1rem;">
                        <strong style="color: var(--green-safe);">Safe to manage in primary care if ALL criteria met:</strong>
                    </div>
                    <ul style="margin-bottom: 1rem; padding-left: 1.25rem;">
                        <li>Age 3-9 years</li>
                        <li>Well appearing and afebrile</li>
                        <li>Mobile (but limping)</li>
                        <li>Symptoms &lt;72h OR &gt;72h and improving</li>
                    </ul>
                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Management Plan:</h4>
                    <ol style="padding-left: 1.25rem;">
                        <li style="margin-bottom: 0.5rem;"><strong>Rest + Analgesia</strong> (Paracetamol/Ibuprofen)</li>
                        <li style="margin-bottom: 0.5rem;"><strong>Safety net:</strong> A&E immediately if fever, worsening, or unwell</li>
                        <li style="margin-bottom: 0.5rem;"><strong>Review 48-72 hours</strong> ‚Äî if improving, no investigations needed</li>
                        <li><strong>Final review 1 week</strong> ‚Äî confirm complete resolution or refer</li>
                    </ol>
                `
            },
            'pgals': {
                title: 'üî¨ pGALS Screening Examination',
                content: `
                    <p style="margin-bottom: 1rem;"><strong>p</strong>aediatric <strong>G</strong>ait, <strong>A</strong>rms, <strong>L</strong>egs, <strong>S</strong>pine</p>
                    <div style="background: var(--blue-light); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                        <strong>Key Components:</strong>
                    </div>
                    <ul style="padding-left: 1.25rem; margin-bottom: 1rem;">
                        <li style="margin-bottom: 0.5rem;"><strong>GAIT:</strong> Walk normally, on heels, on tiptoes, running</li>
                        <li style="margin-bottom: 0.5rem;"><strong>ARMS:</strong> Hands behind head, elbows back; make fist; turn hands over; touch fingers to thumb</li>
                        <li style="margin-bottom: 0.5rem;"><strong>LEGS:</strong> Flex hip & knee; internal rotation hip; squeeze across metatarsals</li>
                        <li><strong>SPINE:</strong> Lateral flexion; forward flexion; look for scoliosis</li>
                    </ul>
                    <div style="background: var(--amber-light); padding: 0.75rem; border-radius: 0.5rem; font-size: 0.875rem;">
                        üí° <strong>Tip:</strong> Always examine hip if presenting with knee pain (referred pain common)
                    </div>
                `
            }
        };

        function showModal(type) {
            const overlay = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            title.textContent = modalData[type].title;
            body.innerHTML = modalData[type].content;
            
            overlay.style.display = 'block';
            setTimeout(() => overlay.style.opacity = '1', 10);
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            overlay.style.opacity = '0';
            setTimeout(() => overlay.style.display = 'none', 200);
        }

        // Update nav pills on scroll
        window.addEventListener('scroll', () => {
            const sections = ['red-flags', 'assessment', 'differentials', 'management'];
            const pills = document.querySelectorAll('.nav-pill');
            
            let current = '';
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element && window.scrollY >= element.offsetTop - 150) {
                    current = section;
                }
            });
            
            pills.forEach((pill, index) => {
                pill.classList.toggle('active', sections[index] === current);
            });
        });

        // Keyboard accessibility for modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>