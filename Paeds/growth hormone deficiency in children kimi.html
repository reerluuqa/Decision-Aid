<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Growth Hormone Deficiency in Children - Interactive Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Progress Sidebar */
        .progress-sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 25px;
            text-align: center;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 15px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #f7fafc;
            border-left: 4px solid transparent;
        }

        .progress-item:hover {
            transform: translateX(5px);
            background: #edf2f7;
        }

        .progress-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-left-color: #2d3748;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .progress-icon {
            width: 36px;
            height: 36px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 18px;
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-text {
            flex: 1;
        }

        .progress-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .progress-subtitle {
            font-size: 11px;
            opacity: 0.8;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            max-width: 1200px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }

        .header h1 {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            font-size: 1.1em;
            color: #718096;
            margin-bottom: 15px;
        }

        .header .last-updated {
            font-size: 0.9em;
            color: #a0aec0;
            font-style: italic;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            padding: 25px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .card-header:hover::before {
            left: 100%;
        }

        .assessment-card .card-header {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
        }

        .diagnosis-card .card-header {
            background: linear-gradient(135deg, #9f7aea, #805ad5);
            color: white;
        }

        .treatment-card .card-header {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .followup-card .card-header {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            color: white;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            margin-right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 24px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
        }

        .card-title {
            flex: 1;
        }

        .card-title h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .card-title p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .expand-icon {
            font-size: 24px;
            transition: transform 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.expanded .card-content {
            max-height: 3000px;
        }

        .card-body {
            padding: 30px;
        }

        /* Accordion Items */
        .accordion-item {
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        .accordion-item:hover {
            border-color: #cbd5e0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .accordion-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            background: white;
        }

        .accordion-header:hover {
            background: #f7fafc;
        }

        .accordion-title {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #2d3748;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .accordion-item.expanded .accordion-content {
            max-height: 1000px;
        }

        .accordion-body {
            padding: 0 20px 20px;
            color: #4a5568;
        }

        .accordion-body ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .accordion-body li {
            margin-bottom: 8px;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .badge-urgent {
            background: linear-gradient(135deg, #e53e3e, #c53030);
            color: white;
        }

        .badge-caution {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            color: white;
        }

        .badge-stable {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .badge-info {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
        }

        /* Test Items */
        .test-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4299e1;
            transition: all 0.3s ease;
        }

        .test-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .test-item strong {
            color: #2d3748;
            display: block;
            margin-bottom: 5px;
        }

        .test-item small {
            color: #718096;
            font-size: 0.85em;
        }

        /* Differential Grid */
        .differential-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .differential-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .differential-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            border-color: #cbd5e0;
        }

        .differential-item h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .differential-item p {
            font-size: 0.9em;
            color: #4a5568;
            margin-bottom: 8px;
        }

        .differential-item strong {
            color: #2d3748;
        }

        /* Treatment Options */
        .treatment-option {
            background: linear-gradient(135deg, #f0fff4, #e6fffa);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid #c6f6d5;
            transition: all 0.3s ease;
        }

        .treatment-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(72, 187, 120, 0.2);
        }

        .treatment-option h4 {
            color: #276749;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .treatment-option h4::before {
            content: 'üíâ';
            margin-right: 10px;
            font-size: 20px;
        }

        /* Risk Factors */
        .risk-factors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .risk-category {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .risk-category:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .risk-category h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .risk-category.strong h4 {
            color: #e53e3e;
        }

        .risk-category.weak h4 {
            color: #ed8936;
        }

        .risk-category ul {
            list-style: none;
        }

        .risk-category li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            font-size: 0.9em;
        }

        .risk-category li::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            left: 0;
            top: 8px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .progress-sidebar {
                width: 250px;
            }
            .main-content {
                margin-left: 250px;
            }
        }

        @media (max-width: 768px) {
            .progress-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 20px;
            }
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            .header h1 {
                font-size: 2em;
            }
            .differential-grid,
            .risk-factors {
                grid-template-columns: 1fr;
            }
        }

        /* Animation for badges */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .badge-urgent {
            animation: pulse 2s infinite;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Loading animation */
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Sidebar -->
        <div class="progress-sidebar">
            <div class="sidebar-title">Algorithm Progress</div>
            
            <div class="progress-item active" data-card="assessment">
                <div class="progress-icon">üìè</div>
                <div class="progress-text">
                    <div class="progress-title">Assessment</div>
                    <div class="progress-subtitle">Clinical evaluation</div>
                </div>
            </div>

            <div class="progress-item" data-card="diagnosis">
                <div class="progress-icon">üî¨</div>
                <div class="progress-text">
                    <div class="progress-title">Diagnosis</div>
                    <div class="progress-subtitle">Investigations & tests</div>
                </div>
            </div>

            <div class="progress-item" data-card="treatment">
                <div class="progress-icon">üíä</div>
                <div class="progress-text">
                    <div class="progress-title">Treatment</div>
                    <div class="progress-subtitle">Management plan</div>
                </div>
            </div>

            <div class="progress-item" data-card="followup">
                <div class="progress-icon">üìä</div>
                <div class="progress-text">
                    <div class="progress-title">Follow-up</div>
                    <div class="progress-subtitle">Monitoring & prognosis</div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: #f7fafc; border-radius: 12px; font-size: 0.85em; color: #4a5568;">
                <strong>Guide:</strong><br>
                <span class="badge badge-urgent">Urgent</span> Immediate action required<br>
                <span class="badge badge-caution">Caution</span> Monitor closely<br>
                <span class="badge badge-stable">Stable</span> Routine management
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header fade-in">
                <h1>Growth Hormone Deficiency in Children</h1>
                <p class="subtitle">Interactive Clinical Decision Support Algorithm</p>
                <p class="last-updated">Based on BMJ Best Practice Guidelines (Apr 2025)</p>
            </div>

            <!-- Assessment Card -->
            <div class="card assessment-card fade-in" id="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üìè</div>
                    <div class="card-title">
                        <h2>Assessment</h2>
                        <p>Initial clinical evaluation and risk assessment</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>ü©∫ Key Diagnostic Factors</span>
                                    <span class="badge badge-caution">Core Assessment</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <ul style="list-style: none; padding: 0;">
                                        <li style="padding: 8px 0; border-bottom: 1px solid #edf2f7;">
                                            <strong>Short stature</strong> <span class="badge badge-caution">Common</span>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                <li>Height >3 SDS below mean OR >2 SDS with poor growth velocity</li>
                                                <li>Height >1.5 SDS below target height (parental height)</li>
                                            </ul>
                                        </li>
                                        <li style="padding: 8px 0; border-bottom: 1px solid #edf2f7;">
                                            <strong>Poor growth velocity</strong> <span class="badge badge-caution">Common</span>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                <li>>2 SDS below mean over 1 year OR >1.5 SDS over 2 years</li>
                                                <li>Height SDS decrease >0.5 over 1 year (age >2 years)</li>
                                            </ul>
                                        </li>
                                        <li style="padding: 8px 0; border-bottom: 1px solid #edf2f7;">
                                            <strong>Abnormal puberty</strong> <span class="badge badge-caution">Common</span>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                <li>Absent pubertal growth spurt despite normal puberty onset</li>
                                                <li>Delayed or arrested puberty (if gonadotrophin deficiency)</li>
                                            </ul>
                                        </li>
                                        <li style="padding: 8px 0; border-bottom: 1px solid #edf2f7;">
                                            <strong>Characteristic facial features</strong> <span class="badge badge-stable">Uncommon</span>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                <li>Mid-facial hypoplasia, delayed dentition, frontal bossing</li>
                                                <li>Reduced lean body mass, increased body fat</li>
                                            </ul>
                                        </li>
                                        <li style="padding: 8px 0;">
                                            <strong>CNS tumour symptoms</strong> <span class="badge badge-urgent">Urgent</span>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                <li>Headache, vomiting, visual impairment (especially with craniopharyngioma)</li>
                                                <li>Hydrocephalus, focal neurological deficits</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>‚ö†Ô∏è Risk Factors</span>
                                    <span class="badge badge-caution">Stratify Risk</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="risk-factors">
                    <div class="risk-category strong">
                        <h4>üî¥ Strong Risk Factors</h4>
                        <ul>
                            <li>Family history of GHD (5-30% familial)</li>
                            <li>Other pituitary hormone deficiencies</li>
                            <li>CNS tumours/cysts (craniopharyngioma, etc.)</li>
                            <li>Radiotherapy to hypothalamo-pituitary region</li>
                            <li>Midline abnormalities (septo-optic dysplasia, holoprosencephaly)</li>
                            <li>Perinatal complications (prematurity, asphyxia)</li>
                        </ul>
                    </div>
                    <div class="risk-category weak">
                        <h4>üü° Weak Risk Factors</h4>
                        <ul>
                            <li>CNS infiltrative disorders (Langerhans cell histiocytosis)</li>
                            <li>Traumatic brain injury</li>
                            <li>Iron overload disorders (thalassemia)</li>
                            <li>Chronic child abuse/neglect (reversible GHD)</li>
                            <li>CNS infections (meningitis, tuberculosis)</li>
                        </ul>
                    </div>
                </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üìä Growth Assessment</span>
                                    <span class="badge badge-stable">Essential</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>Measurement Requirements:</strong></p>
                                    <ul style="margin-left: 20px;">
                                        <li>Serial measurements plotted on growth charts (minimum 6-month intervals)</li>
                                        <li>Proper technique: Harpenden stadiometer, same measurer</li>
                                        <li>Supine length until age 2 years, then standing height</li>
                                        <li>Head circumference for children <3 years</li>
                                    </ul>
                                    <p style="margin-top: 15px;"><strong>Target Height Calculation:</strong></p>
                                    <ul style="margin-left: 20px;">
                                        <li><strong>Girls:</strong> (Mother's height + Father's height) √∑ 2 - 6.5 cm</li>
                                        <li><strong>Boys:</strong> (Mother's height + Father's height) √∑ 2 + 6.5 cm</li>
                                    </ul>
                                    <p style="margin-top: 15px;"><strong>Red Flags for Referral:</strong></p>
                                    <ul style="margin-left: 20px;">
                                        <li>Severe short stature (>3 SDS below mean)</li>
                                        <li>Height >2 SDS below mean + poor growth velocity</li>
                                        <li>Height >1.5 SDS below target height</li>
                                        <li>Intracranial lesion on imaging</li>
                                        <li>Post-cranial irradiation</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card diagnosis-card fade-in" id="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üî¨</div>
                    <div class="card-title">
                        <h2>Diagnosis</h2>
                        <p>Investigations and confirmatory tests</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üß™ Initial Investigations</span>
                                    <span class="badge badge-caution">First Line</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="test-item">
                                        <strong>Bone Age X-ray</strong> <span class="badge badge-stable">Essential</span>
                                        <small>Left wrist/hand (Greulich & Pyle method). Delayed bone maturation typical in GHD.</small>
                                    </div>
                                    <div class="test-item">
                                        <strong>Thyroid Function Tests</strong> <span class="badge badge-caution">Rule out hypothyroidism</span>
                                        <small>Free T4 and TSH. Required before GH provocation testing.</small>
                                    </div>
                                    <div class="test-item">
                                        <strong>IGF-1 and IGFBP-3</strong> <span class="badge badge-caution">Screening</span>
                                        <small>Values <-2 SDS suggest GHD, but normal levels don't exclude diagnosis (especially post-irradiation).</small>
                                    </div>
                                    <div class="test-item">
                                        <strong>Baseline Pituitary Function</strong> <span class="badge badge-caution">CPHD Screening</span>
                                        <small>8am cortisol, ACTH, LH, FSH, testosterone/oestradiol, prolactin.</small>
                                    </div>
                                    <div class="test-item">
                                        <strong>Basic Screening</strong> <span class="badge badge-stable">Exclusion</span>
                                        <small>FBC, renal/liver function, bone profile, electrolytes, coeliac screen, inflammatory markers.</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>‚ö° GH Provocation Tests</span>
                                    <span class="badge badge-caution">Gold Standard</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>Diagnostic Criteria:</strong> Peak GH <7 ¬µg/L on two separate tests (UK standard)</p>
                                    <ul style="margin-left: 20px; margin-top: 15px;">
                                        <li><strong>Insulin tolerance test:</strong> Gold standard, assesses GH and adrenal axis</li>
                                        <li><strong>Glucagon test:</strong> Safer alternative, especially in younger children</li>
                                        <li><strong>Arginine & Clonidine:</strong> Additional provocative agents</li>
                                        <li><strong>Contraindicated:</strong> Children under 1 year</li>
                                        <li><strong>Priming:</strong> Consider in peripubertal children (boys >10y, girls >9y)</li>
                                    </ul>
                                    <p style="margin-top: 15px; padding: 15px; background: #fff5f5; border-radius: 8px; border-left: 4px solid #e53e3e;">
                                        <strong>‚ö†Ô∏è Important:</strong> Exclude hypothyroidism before testing. Know adrenal status prior to testing.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üß† Neuroimaging</span>
                                    <span class="badge badge-caution">Essential</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>MRI Brain (Pituitary Protocol):</strong></p>
                                    <ul style="margin-left: 20px;">
                                        <li><strong>Congenital:</strong> Pituitary hypoplasia, stalk abnormalities, ectopic posterior pituitary, midline forebrain defects</li>
                                        <li><strong>Acquired:</strong> Craniopharyngioma, optic glioma, Rathke's cleft cyst, arachnoid cyst</li>
                                        <li><strong>Inflammatory:</strong> Pituitary stalk thickening (Langerhans cell histiocytosis)</li>
                                    </ul>
                                    <p style="margin-top: 15px;"><strong>CT/Skull X-ray:</strong> Detect calcification (craniopharyngioma), bony abnormalities</p>
                                    <p style="margin-top: 15px; padding: 15px; background: #fff5f5; border-radius: 8px; border-left: 4px solid #e53e3e;">
                                        <strong>üî¥ Urgent:</strong> Any child with neurological symptoms or signs of intracranial pressure needs immediate MRI.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üß¨ Genetic Studies</span>
                                    <span class="badge badge-stable">Specialist</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p>Consider genetic testing when:</p>
                                    <ul style="margin-left: 20px;">
                                        <li>Parental consanguinity</li>
                                        <li>Positive family history</li>
                                        <li>Craniofacial/midline abnormalities</li>
                                        <li>Syndromic features</li>
                                        <li>Multiple pituitary hormone deficiencies</li>
                                    </ul>
                                    <p style="margin-top: 15px;"><strong>Common Genes:</strong> GH1, GHRHR, PROP1, POU1F1, HESX1, LHX3, LHX4, SOX3, OTX2, RNPC3</p>
                                    <p style="margin-top: 15px;"><strong>Benefits:</strong> Confirms diagnosis, predicts evolving hormone deficiencies, guides family counseling</p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üéØ Differential Diagnosis</span>
                                    <span class="badge badge-caution">Essential</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="differential-grid">
                                        <div class="differential-item">
                                            <h4>Idiopathic Short Stature</h4>
                                            <p>No organic cause, normal GH tests, normal MRI</p>
                                            <p><strong>Key:</strong> Exclude other causes</p>
                                        </div>
                                        <div class="differential-item">
                                            <h4>Constitutional Delay</h4>
                                            <p>Delayed bone age, normal labs, "late bloomer" pattern</p>
                                            <p><strong>Key:</strong> Family history common</p>
                                        </div>
                                        <div class="differential-item">
                                            <h4>Familial Short Stature</h4>
                                            <p>Consistent growth below 5th percentile, normal bone age</p>
                                            <p><strong>Key:</strong> Matches parental heights</p>
                                        </div>
                                        <div class="differential-item">
                                            <h4>Hypothyroidism</h4>
                                            <p>Low FT4, elevated TSH (primary) or low/normal TSH (central)</p>
                                            <p><strong>Key:</strong> Always test TFTs first</p>
                                        </div>
                                        <div class="differential-item">
                                            <h4>Turner Syndrome</h4>
                                            <p>45,XO karyotype, characteristic features</p>
                                            <p><strong>Key:</strong> Girls only, screen all short girls</p>
                                        </div>
                                        <div class="differential-item">
                                            <h4>Psychosocial Dwarfism</h4>
                                            <p>Reversible GHD with abuse/neglect, abnormal behavior</p>
                                            <p><strong>Key:</strong> Improves with removal from environment</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card treatment-card fade-in" id="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üíä</div>
                    <div class="card-title">
                        <h2>Treatment</h2>
                        <p>Management strategies and therapeutic options</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üíâ Recombinant Human GH (rhGH)</span>
                                    <span class="badge badge-urgent">Primary Treatment</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>Dosing & Administration</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Route:</strong> Subcutaneous injection at bedtime</li>
                                            <li><strong>Start dose:</strong> Brand-specific, titrated to IGF-1 levels</li>
                                            <li><strong>Monitoring:</strong> IGF-1 every 3 months initially</li>
                                            <li><strong>Duration:</strong> Until final height or epiphyseal closure</li>
                                            <li><strong>Response predictor:</strong> First-year height gain</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Pubertal Dosing</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Standard:</strong> Continue pre-pubertal dose</li>
                                            <li><strong>Higher doses:</strong> Not routinely recommended (may increase hyperinsulinemia)</li>
                                            <li><strong>Expected gain:</strong> 4.6-5.7 cm with higher doses (modest benefit)</li>
                                            <li><strong>Adjunct therapy:</strong> GnRH agonists may add modest height gain</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Long-acting Formulations</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Somatrogon:</strong> Once-weekly (approved ‚â•3 years)</li>
                                            <li><strong>Lonapegsomatropin:</strong> Once-weekly (approved ‚â•1 year US, ‚â•3 years EU)</li>
                                            <li><strong>Somapacitan:</strong> Once-weekly (approved ‚â•2.5 years US, ‚â•3 years EU)</li>
                                        </ul>
                                    </div>
                                    <p style="margin-top: 20px; padding: 15px; background: #f0fff4; border-radius: 8px; border-left: 4px solid #48bb78;">
                                        <strong>Benefits:</strong> Normalizes growth, improves body composition, bone density, quality of life
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üß© Other Pituitary Hormone Deficiencies</span>
                                    <span class="badge badge-caution">CPHD Management</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>TSH Deficiency</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Treatment:</strong> Levothyroxine replacement</li>
                                            <li><strong>Monitoring:</strong> Regular TFTs (GH unmasks central hypothyroidism)</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>ACTH Deficiency</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Treatment:</strong> Glucocorticoid replacement (hydrocortisone)</li>
                                            <li><strong>Note:</strong> No mineralocorticoid needed (RAAS intact)</li>
                                            <li><strong>Caution:</strong> Glucocorticoids may unmask diabetes insipidus</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Gonadotrophin Deficiency</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Pubertal induction:</strong> 
                                                <ul style="margin-left: 20px;">
                                                    <li>Girls: Oestrogen ‚Üí add progesterone</li>
                                                    <li>Boys: Testosterone</li>
                                                </ul>
                                            </li>
                                            <li><strong>Timing:</strong> Delay 6 months after starting GH to optimize height</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>AVP Deficiency (DI)</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Treatment:</strong> Desmopressin therapy</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Central Precocious Puberty</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Treatment:</strong> GnRH analogues</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üéØ Treat Underlying Cause</span>
                                    <span class="badge badge-urgent">Critical</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>CNS Tumours</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Urgent referral:</strong> Neurosurgery and oncology</li>
                                            <li><strong>Tumour markers:</strong> Prolactin, AFP, Œ≤-hCG before treatment</li>
                                            <li><strong>GH timing:</strong> Wait 12 months post-treatment (except craniopharyngioma/optic glioma)</li>
                                            <li><strong>Contraindicated:</strong> Active malignancy</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Iron Overload</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Management:</strong> Optimize transfusion/chelation therapy</li>
                                            <li><strong>Note:</strong> GHD often not reversible</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Psychosocial Causes</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Intervention:</strong> Social services, psychology</li>
                                            <li><strong>GH therapy:</strong> Not effective if primary cause not addressed</li>
                                        </ul>
                                    </div>
                                    <p style="margin-top: 20px; padding: 15px; background: #fff5f5; border-radius: 8px; border-left: 4px solid #e53e3e;">
                                        <strong>üî¥ Urgent:</strong> Any child with signs of intracranial pressure requires immediate neurosurgical evaluation.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üîÑ Transition to Adult Care</span>
                                    <span class="badge badge-caution">Long-term</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <ul style="margin-left: 20px;">
                                        <li><strong>Planning:</strong> Start counseling early (age 14-16 years)</li>
                                        <li><strong>Retesting:</strong> Idiopathic GHD and <3 hormone deficits need re-evaluation after growth completion</li>
                                        <li><strong>Adult GHD:</strong> 25-75% of children with idiopathic GHD have normal GH response as adults</li>
                                        <li><strong>Continued therapy:</strong> Persistent GHD requires lifelong GH for metabolic benefits (bone health, QoL, body composition)</li>
                                        <li><strong>Monitoring:</strong> Regular pituitary function tests (deficiencies can evolve)</li>
                                    </ul>
                                    <p style="margin-top: 15px; padding: 15px; background: #f0fff4; border-radius: 8px; border-left: 4px solid #48bb78;">
                                        <strong>Goal:</strong> Seamless transfer to adult endocrine services to prevent disengagement from care.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üìã Treatment Algorithm Summary</span>
                                    <span class="badge badge-info">Quick Reference</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                        <div style="padding: 15px; background: #fff5f5; border-radius: 8px; border-left: 4px solid #e53e3e;">
                                            <strong>1. Confirm Diagnosis</strong>
                                            <p style="font-size: 0.9em; margin-top: 5px;">Clinical features + investigations + imaging</p>
                                        </div>
                                        <div style="padding: 15px; background: #fffaf0; border-radius: 8px; border-left: 4px solid #ed8936;">
                                            <strong>2. Screen CPHD</strong>
                                            <p style="font-size: 0.9em; margin-top: 5px;">Full pituitary function tests</p>
                                        </div>
                                        <div style="padding: 15px; background: #f0fff4; border-radius: 8px; border-left: 4px solid #48bb78;">
                                            <strong>3. Start rhGH</strong>
                                            <p style="font-size: 0.9em; margin-top: 5px;">Subcutaneous, bedtime dosing</p>
                                        </div>
                                        <div style="padding: 15px; background: #f0f8ff; border-radius: 8px; border-left: 4px solid #4299e1;">
                                            <strong>4. Monitor & Adjust</strong>
                                            <p style="font-size: 0.9em; margin-top: 5px;">IGF-1, growth, other hormones</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card followup-card fade-in" id="followup">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-icon">üìä</div>
                    <div class="card-title">
                        <h2>Follow-up</h2>
                        <p>Monitoring, complications and prognosis</p>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üìà Monitoring Protocol</span>
                                    <span class="badge badge-caution">Essential</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>Growth Monitoring</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Frequency:</strong> Every 3-6 months during treatment</li>
                                            <li><strong>Charts:</strong> Age and sex-appropriate growth charts</li>
                                            <li><strong>Measurements:</strong> Height, weight, BMI, pubertal staging</li>
                                            <li><strong>Target:</strong> Normal growth velocity, catch-up growth</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Hormonal Monitoring</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>IGF-1:</strong> Every 3 months initially, then 6-12 months</li>
                                            <li><strong>TFTs:</strong> Regular monitoring (GH unmasks central hypothyroidism)</li>
                                            <li><strong>Cortisol:</strong> Monitor for adrenal insufficiency</li>
                                            <li><strong>Glucose:</strong> Watch for hyperinsulinemia/diabetes risk</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Imaging & Other Tests</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>MRI:</strong> Monitor tumour progression/recurrence if applicable</li>
                                            <li><strong>Bone age:</strong> Periodically to assess maturation</li>
                                            <li><strong>DEXA:</strong> Bone mineral density monitoring</li>
                                            <li><strong>QoL:</strong> Quality of life assessments</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>‚ö†Ô∏è Potential Complications</span>
                                    <span class="badge badge-caution">Monitor</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>GH Treatment-Related</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Benign intracranial hypertension:</strong> Rare, monitor headaches/visual changes</li>
                                            <li><strong>Scoliosis progression:</strong> Monitor spinal examination</li>
                                            <li><strong>Slipped capital femoral epiphysis:</strong> Hip/knee pain assessment</li>
                                            <li><strong>Acute pancreatitis:</strong> Abdominal pain monitoring</li>
                                            <li><strong>Glucose intolerance:</strong> Annual fasting glucose/HbA1c</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Long-term Consequences of Untreated GHD</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Short final height:</strong> SDS -4 to -6 if untreated</li>
                                            <li><strong>Reduced bone mineral density:</strong> Osteoporosis risk</li>
                                            <li><strong>Cardiovascular risk:</strong> Increased fat mass, dyslipidemia</li>
                                            <li><strong>Poor quality of life:</strong> Reduced energy, mood, social function</li>
                                            <li><strong>Metabolic syndrome:</strong> Insulin resistance, obesity</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Malignancy Risk</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>No increased risk:</strong> Standard doses in patients without risk factors</li>
                                            <li><strong>Secondary tumours:</strong> Slightly higher in childhood cancer survivors (especially post-irradiation)</li>
                                            <li><strong>Monitoring:</strong> No additional surveillance needed beyond standard care</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üîÆ Prognosis</span>
                                    <span class="badge badge-stable">Long-term Outlook</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div class="treatment-option">
                                        <h4>Growth Outcomes</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Early treatment:</strong> Normal final height achievable in most cases</li>
                                            <li><strong>Good predictors:</strong> Younger age at start, first-year response, pre-pubertal growth</li>
                                            <li><strong>Untreated:</strong> Final height SDS -4 to -6 (severe short stature)</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Evolution of Pituitary Deficiencies</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Idiopathic IGHD:</strong> 25-75% have normal GH response after growth completion</li>
                                            <li><strong>CPHD (‚â•3 deficits):</strong> Likely permanent GHD requiring lifelong treatment</li>
                                            <li><strong>Structural abnormalities:</strong> Ectopic posterior pituitary, absent stalk ‚Üí high risk of evolving CPHD</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Adult Outcomes</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Metabolic health:</strong> Continued GH improves lipid profile, body composition</li>
                                            <li><strong>Bone health:</strong> Continuous treatment improves bone mineral density</li>
                                            <li><strong>Quality of life:</strong> GH replacement improves energy, mood, social functioning</li>
                                            <li><strong>Cardiovascular:</strong> May reduce cardiovascular risk (fat mass, lipid improvements)</li>
                                        </ul>
                                    </div>
                                    <div class="treatment-option">
                                        <h4>Factors Associated with Permanent GHD</h4>
                                        <ul style="margin-left: 20px;">
                                            <li>Acquired hypothalamo-pituitary damage (tumour, surgery, radiation)</li>
                                            <li>Known genetic mutations causing hypopituitarism</li>
                                            <li>Midline structural brain defects</li>
                                            <li>‚â•3 other pituitary hormone deficiencies</li>
                                            <li>Ectopic posterior pituitary on MRI (specific marker)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">
                                    <span>üìÖ Follow-up Schedule</span>
                                    <span class="badge badge-info">Recommended</span>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                        <div style="padding: 15px; background: #f0f8ff; border-radius: 8px;">
                                            <strong>First Year</strong>
                                            <ul style="margin-left: 20px; margin-top: 10px; font-size: 0.9em;">
                                                <li>Every 3 months: Height, weight, IGF-1</li>
                                                <li>Every 6 months: TFTs, glucose</li>
                                                <li>Annual: Bone age, DEXA</li>
                                            </ul>
                                        </div>
                                        <div style="padding: 15px; background: #f0fff4; border-radius: 8px;">
                                            <strong>Subsequent Years</strong>
                                            <ul style="margin-left: 20px; margin-top: 10px; font-size: 0.9em;">
                                                <li>Every 3-6 months: Growth monitoring</li>
                                                <li>Every 6 months: IGF-1</li>
                                                <li>Annual: TFTs, glucose, pituitary function</li>
                                            </ul>
                                        </div>
                                        <div style="padding: 15px; background: #fffaf0; border-radius: 8px;">
                                            <strong>Post-Growth Completion</strong>
                                            <ul style="margin-left: 20px; margin-top: 10px; font-size: 0.9em;">
                                                <li>Retest GH axis (if idiopathic IGHD)</li>
                                                <li>Assess need for adult GH therapy</li>
                                                <li>Transition to adult endocrinology</li>
                                            </ul>
                                        </div>
                                        <div style="padding: 15px; background: #fff5f5; border-radius: 8px;">
                                            <strong>Cancer Survivors</strong>
                                            <ul style="margin-left: 20px; margin-top: 10px; font-size: 0.9em;">
                                                <li>Tumour surveillance per oncology protocol</li>
                                                <li>Monitor for secondary malignancies</li>
                                                <li>Annual MRI (if residual tumour risk)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Card toggle functionality
        function toggleCard(header) {
            const card = header.parentElement;
            const isExpanded = card.classList.contains('expanded');
            
            // Close all cards
            document.querySelectorAll('.card').forEach(c => {
                c.classList.remove('expanded');
            });
            
            // Open clicked card if it wasn't already expanded
            if (!isExpanded) {
                card.classList.add('expanded');
            }
            
            // Update progress indicators
            updateProgressIndicators();
            
            // Scroll to card
            setTimeout(() => {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // Accordion toggle functionality
        function toggleAccordion(header) {
            const item = header.parentElement;
            const isExpanded = item.classList.contains('expanded');
            
            // Close all accordions in the same card
            const card = item.closest('.card');
            card.querySelectorAll('.accordion-item').forEach(i => {
                i.classList.remove('expanded');
            });
            
            // Open clicked accordion if it wasn't already expanded
            if (!isExpanded) {
                item.classList.add('expanded');
            }
        }

        // Progress sidebar functionality
        function updateProgressIndicators() {
            const cards = document.querySelectorAll('.card');
            const progressItems = document.querySelectorAll('.progress-item');
            
            cards.forEach((card, index) => {
                const isInView = card.classList.contains('expanded');
                if (isInView) {
                    progressItems.forEach(item => item.classList.remove('active'));
                    if (progressItems[index]) {
                        progressItems[index].classList.add('active');
                    }
                }
            });
        }

        // Scroll spy for progress indicators
        function handleScroll() {
            const cards = document.querySelectorAll('.card');
            const scrollPosition = window.scrollY + 100;
            
            cards.forEach((card, index) => {
                const cardTop = card.offsetTop;
                const cardBottom = cardTop + card.offsetHeight;
                
                if (scrollPosition >= cardTop && scrollPosition < cardBottom) {
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    const progressItems = document.querySelectorAll('.progress-item');
                    if (progressItems[index]) {
                        progressItems[index].classList.add('active');
                    }
                }
            });
        }

        // Progress item click navigation
        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', function() {
                const targetCard = this.dataset.card;
                const cardElement = document.getElementById(targetCard);
                
                if (cardElement) {
                // Expand the target card
                document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
                cardElement.classList.add('expanded');
                
                // Scroll to card
                cardElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Update active progress item
                updateProgressIndicators();
                }
            });
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // Add fade-in animation to cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200);
            });
            
            // Expand first card by default
            const firstCard = document.querySelector('.card');
            if (firstCard) {
                firstCard.classList.add('expanded');
            }
            
            // Add scroll listener
            window.addEventListener('scroll', handleScroll);
            
            // Add hover effects to cards
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('expanded')) {
                        this.style.transform = 'translateY(0)';
                    }
                });
            });
            
            // Add pulse animation to urgent badges
            const urgentBadges = document.querySelectorAll('.badge-urgent');
            urgentBadges.forEach((badge, index) => {
                setTimeout(() => {
                    badge.style.animation = 'pulse 2s infinite';
                }, index * 500);
            });
        });

        // Smooth expand/collapse animations
        function animateHeight(element, startHeight, endHeight) {
            element.style.height = startHeight + 'px';
            element.style.transition = 'height 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
            setTimeout(() => {
                element.style.height = endHeight + 'px';
            }, 10);
        }

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            const activeCard = document.querySelector('.card.expanded');
            const cards = Array.from(document.querySelectorAll('.card'));
            const currentIndex = cards.indexOf(activeCard);
            
            if (e.key === 'ArrowDown' && currentIndex < cards.length - 1) {
                e.preventDefault();
                cards[currentIndex + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
                cards[currentIndex].classList.remove('expanded');
                cards[currentIndex + 1].classList.add('expanded');
            } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                e.preventDefault();
                cards[currentIndex - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
                cards[currentIndex].classList.remove('expanded');
                cards[currentIndex - 1].classList.add('expanded');
            }
        });

        // Print functionality
        function printAlgorithm() {
            window.print();
        }

        // Add print button
        const printButton = document.createElement('button');
        printButton.innerHTML = 'üñ®Ô∏è Print Algorithm';
        printButton.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 24px;
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(66, 153, 225, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        `;
        printButton.addEventListener('click', printAlgorithm);
        printButton.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-2px)';
            this.style.boxShadow = '0 6px 20px rgba(66, 153, 225, 0.6)';
        });
        printButton.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(66, 153, 225, 0.4)';
        });
        document.body.appendChild(printButton);

        // Add print styles
        const printStyles = document.createElement('style');
        printStyles.innerHTML = `
            @media print {
                body { background: white; }
                .progress-sidebar, .print-button { display: none; }
                .main-content { margin-left: 0; padding: 20px; }
                .card { page-break-inside: avoid; box-shadow: none; border: 1px solid #ddd; }
                .card-content { max-height: none !important; }
                .accordion-content { max-height: none !important; }
            }
        `;
        document.head.appendChild(printStyles);
    </script>
</body>
</html>