<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faltering Growth - Interactive Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #2c3e50;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 40px 20px;
            margin-right: 280px;
        }

        .header {
            background: linear-gradient(135deg, #1a3a5f 0%, #2c3e50 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(255,255,255,0.1) 0%, transparent 40%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.85;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .card {
            background: white;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .card-header {
            padding: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card-header::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255,255,255,0.3);
        }

        .card-header.assessment {
            background: linear-gradient(135deg, #3498db 0%, #2c80c5 100%);
            color: white;
        }

        .card-header.diagnosis {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }

        .card-header.treatment {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }

        .card-header.followup {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            color: white;
        }

        .card-header:hover {
            filter: brightness(1.05);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.6em;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .card-title .icon {
            font-size: 1.4em;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            z-index: 1;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background: #fcfdff;
        }

        .card.expanded .card-content {
            max-height: 5000px;
        }

        .card-body {
            padding: 30px;
        }

        .subsection {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eef2f7;
            position: relative;
        }

        .subsection:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .subsection h3 {
            color: #1a3a5f;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            padding-left: 15px;
        }

        .subsection h3::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 24px;
            background: currentColor;
            border-radius: 3px;
            opacity: 0.3;
        }

        .badges-container {
            display: flex;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .badge.urgent {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .badge.caution {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .badge.stable {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }

        .badge.info {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .checklist {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            box-shadow: 0 4px 8px rgba(0,0,0,0.03);
            transition: all 0.3s ease;
        }

        .checklist:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.08);
        }

        .checklist h4 {
            color: #1a3a5f;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checklist ul {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
            border-bottom: 1px dashed #eef2f7;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checklist li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #2ecc71;
            font-weight: bold;
            font-size: 1.2em;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .alert-box {
            background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
            border: 1px solid #ffe69c;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.03);
            transition: all 0.3s ease;
        }

        .alert-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.08);
        }

        .alert-box .alert-icon {
            font-size: 1.5em;
            flex-shrink: 0;
            color: #f39c12;
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .criteria-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.03);
        }

        .criteria-item:hover {
            transform: translateY(-3px);
            border-color: #3498db;
            box-shadow: 0 6px 12px rgba(0,0,0,0.08);
        }

        .criteria-item h5 {
            color: #1a3a5f;
            margin-bottom: 12px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, #1a3a5f 0%, #2c3e50 100%);
            padding: 30px 20px;
            overflow-y: auto;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .sidebar h3 {
            color: white;
            margin-bottom: 25px;
            font-size: 1.4em;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .sidebar h3::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .progress-item {
            padding: 18px 15px;
            margin-bottom: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255,255,255,0.08);
            color: rgba(255,255,255,0.7);
        }

        .progress-item:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(-5px);
        }

        .progress-item.active {
            background: rgba(255,255,255,0.2);
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .progress-item.completed {
            background: rgba(46, 204, 113, 0.25);
            color: white;
        }

        .progress-icon {
            width: 24px;
            height: 24px;
            font-size: 1.2em;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-item.completed .progress-icon::after {
            content: "‚úì";
            font-size: 1em;
            color: #2ecc71;
            background: rgba(255,255,255,0.2);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-text {
            flex: 1;
            font-weight: 500;
        }

        .floating-alert {
            position: fixed;
            bottom: 30px;
            right: 320px;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 18px 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 200;
            animation: slideInUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 400px;
        }

        .floating-alert.show {
            display: flex;
        }

        @keyframes slideInUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .floating-alert .close-btn {
            margin-left: auto;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .floating-alert .close-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        .scroll-indicator {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 58, 95, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            animation: bounce 2s infinite;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-8px); }
            60% { transform: translateX(-50%) translateY(-4px); }
        }

        .scroll-indicator:hover {
            background: rgba(26, 58, 95, 1);
            transform: translateX(-50%) translateY(-3px);
        }

        @media (max-width: 1200px) {
            .main-content {
                margin-right: 0;
            }
            .sidebar {
                transform: translateX(100%);
                transition: transform 0.4s ease;
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .floating-alert {
                right: 30px;
            }
        }

        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1a3a5f 0%, #2c3e50 100%);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 200;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle:hover {
            transform: scale(1.05);
        }

        @media (max-width: 1200px) {
            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 5px;
        }

        li::marker {
            color: #3498db;
            font-weight: bold;
        }

        strong {
            color: #1a3a5f;
        }

        p {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
    
    <div class="container">
        <main class="main-content">
            <div class="header">
                <h1>üçº Faltering Growth Management</h1>
                <p>Evidence-based clinical algorithm for primary care assessment and management of children with faltering growth (NICE CKS, September 2023)</p>
                <div class="scroll-indicator" onclick="scrollToNext()">Scroll to Start ‚Üì</div>
            </div>

            <!-- Assessment Card -->
            <div class="card fade-in" id="assessment-card">
                <div class="card-header assessment" onclick="toggleCard('assessment')">
                    <div class="card-title">
                        <span class="icon">üîç</span>
                        Assessment
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="subsection">
                            <h3>When to Suspect Faltering Growth</h3>
                            
                            <div class="criteria-grid">
                                <div class="criteria-item">
                                    <h5><span class="badge urgent">Early Days</span> Birth to 3 weeks</h5>
                                    <ul>
                                        <li>Weight loss >10% of birth weight</li>
                                        <li>Weight not regained by 3 weeks of age</li>
                                    </ul>
                                </div>
                                <div class="criteria-item">
                                    <h5><span class="badge caution">After Early Days</span> >3 weeks to 18 years</h5>
                                    <ul>
                                        <li>Fall across ‚â•1 centile space if birthweight <9th centile</li>
                                        <li>Fall across ‚â•2 centile spaces if birthweight 9th-91st centile</li>
                                        <li>Fall across ‚â•3 centile spaces if birthweight >91st centile</li>
                                        <li>Current weight <2nd centile regardless of birth weight</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="alert-box">
                                <span class="alert-icon">‚ö†Ô∏è</span>
                                <div>
                                    <strong>Growth Chart Interpretation:</strong> Use UK WHO growth charts. Plot weight, length/height, and head circumference. Calculate BMI for children >2 years. BMI <0.4th centile suggests probable undernutrition.
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Detailed History Taking</h3>
                            
                            <div class="checklist">
                                <h4>Feeding/Eating History</h4>
                                <ul>
                                    <li>What, how much, and how often is eaten</li>
                                    <li>Food diary may help assessment</li>
                                    <li>Fluid intake review (excessive fluids cause satiety)</li>
                                    <li>Direct observation of feeding/mealtimes</li>
                                    <li>Feeding aversion behaviors</li>
                                    <li>Mealtime environment and routines</li>
                                </ul>
                            </div>

                            <div class="checklist">
                                <h4>Risk Factor Assessment</h4>
                                <ul>
                                    <li>Personal/family medical history (constipation, reflux, coeliac disease)</li>
                                    <li>Social/environmental factors (restricted diets, mental health, food access)</li>
                                    <li>Maternal pregnancy history (substance use, medications, illness)</li>
                                    <li>Preterm birth or neurodevelopmental concerns</li>
                                    <li>Maternal postnatal depression/anxiety</li>
                                    <li>Family stressors (divorce, housing, finances)</li>
                                </ul>
                            </div>

                            <div class="checklist">
                                <h4>Symptom Review</h4>
                                <ul>
                                    <li>Fever, pain, respiratory symptoms</li>
                                    <li>Dysphagia, vomiting, diarrhea</li>
                                    <li>Signs of dehydration or acute illness</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Physical Examination</h3>
                            <div class="badges-container">
                                <span class="badge urgent">Vitals: Temperature, HR, RR, capillary refill</span>
                                <span class="badge caution">General examination for underlying conditions</span>
                                <span class="badge info">Assess for dehydration</span>
                                <span class="badge urgent">Assess for child maltreatment signs</span>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Initial Investigations</h3>
                            <p><strong>Targeted investigations based on clinical assessment:</strong></p>
                            <ul>
                                <li>Urinary tract infection (if indicated)</li>
                                <li>Coeliac disease (if gluten-containing diet)</li>
                                <li>Further investigations only if history/examination indicates</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card fade-in" id="diagnosis-card">
                <div class="card-header diagnosis" onclick="toggleCard('diagnosis')">
                    <div class="card-title">
                        <span class="icon">üß†</span>
                        Diagnosis
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="subsection">
                            <h3>Diagnostic Interpretation</h3>
                            
                            <div class="criteria-grid">
                                <div class="criteria-item">
                                    <h5><span class="badge stable">Normal Variants</span></h5>
                                    <ul>
                                        <li><strong>Constitutional smallness:</strong> Genetic potential, consistent growth trajectory</li>
                                        <li><strong>Mid-parental height:</strong> If child's height >2 centile spaces below mid-parental centile, consider undernutrition or growth disorder</li>
                                    </ul>
                                </div>
                                <div class="criteria-item">
                                    <h5><span class="badge caution">Pathological Causes</span></h5>
                                    <ul>
                                        <li><strong>Prematurity:</strong> Use corrected age and appropriate charts</li>
                                        <li><strong>Compromised in-utero growth:</strong> May have poor postnatal growth</li>
                                        <li><strong>Constitutional delay:</strong> Late growth spurt, family history</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Differentiating Faltering Growth from Normal Variation</h3>
                            
                            <div class="alert-box">
                                <span class="alert-icon">üí°</span>
                                <div>
                                    <strong>Key Indicators:</strong> Past medical history, feeding behavior, developmental progress, physical examination findings, and response to feeding recommendations help distinguish between small but healthy children and true faltering growth.
                                </div>
                            </div>

                            <div class="checklist">
                                <h4>Clinical Clues for True Faltering Growth</h4>
                                <ul>
                                    <li>Crossing down centiles on growth chart</li>
                                    <li>Inadequate weight gain for age</li>
                                    <li>Associated feeding difficulties</li>
                                    <li>Developmental concerns</li>
                                    <li>Abnormal examination findings</li>
                                    <li>Poor response to nutritional interventions</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>BMI Assessment in Children >2 Years</h3>
                            <div class="badges-container">
                                <span class="badge info">BMI <2nd centile: May reflect undernutrition or small build</span>
                                <span class="badge urgent">BMI <0.4th centile: Suggests probable undernutrition</span>
                                <span class="badge caution">Calculate using BMI centile calculator</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card fade-in" id="treatment-card">
                <div class="card-header treatment" onclick="toggleCard('treatment')">
                    <div class="card-title">
                        <span class="icon">üíä</span>
                        Treatment
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="subsection">
                            <h3>Early Days Management (Birth to 3 weeks)</h3>
                            
                            <div class="criteria-grid">
                                <div class="criteria-item">
                                    <h5><span class="badge stable">Weight Loss <10%</span> Reassurance</h5>
                                    <ul>
                                        <li>Explain normal weight loss physiology</li>
                                        <li>Reassure about feeding establishment</li>
                                        <li>Expected regain by 3 weeks</li>
                                    </ul>
                                </div>
                                <div class="criteria-item">
                                    <h5><span class="badge caution">Weight Loss >10% or Not Regained by 3 weeks</span> Intervention</h5>
                                    <ul>
                                        <li>Detailed assessment</li>
                                        <li>Feeding observation by trained professional</li>
                                        <li>Consider formula supplementation</li>
                                        <li>Support breastfeeding continuation</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="alert-box">
                                <span class="alert-icon">ü§±</span>
                                <div>
                                    <strong>Breastfeeding Support:</strong> If supplementing with formula, advise expressing breast milk, feeding breast milk first, and supporting mother to continue breastfeeding. Refer to breastfeeding specialists and NICE Postnatal Care guidelines.
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Management After Early Days (>3 weeks to 18 years)</h3>
                            
                            <div class="checklist">
                                <h4>Establish Management Plan with Specific Goals</h4>
                                <ul>
                                    <li>Collaborative plan with parents/carers</li>
                                    <li>Include assessments, interventions, and monitoring</li>
                                    <li>Set realistic, measurable targets</li>
                                    <li>Review regularly and adjust as needed</li>
                                </ul>
                            </div>

                            <div class="checklist">
                                <h4>Feeding and Nutritional Interventions</h4>
                                <ul>
                                    <li>Nutrient-rich, age-appropriate foods</li>
                                    <li>Appropriate quantity, type, and texture</li>
                                    <li>Avoid excessive energy-dense drinks</li>
                                    <li>Regular eating schedule (3 meals, 2-3 snacks)</li>
                                    <li>Family mealtimes together</li>
                                    <li>Relaxed, enjoyable mealtime environment</li>
                                    <li>20-30 minute meal duration</li>
                                    <li>Encourage self-feeding and messy eating</li>
                                    <li>Set reasonable boundaries, avoid punitive approaches</li>
                                </ul>
                            </div>

                            <div class="alert-box">
                                <span class="alert-icon">ü•¶</span>
                                <div>
                                    <strong>Nutritional Supplements:</strong> Consider referral to paediatric dietitian for oral liquid nutritional supplements if faltering growth persists despite other interventions.
                                </div>
                            </div>

                            <div class="checklist">
                                <h4>Parent/Carer Education & Support</h4>
                                <ul>
                                    <li>Explain faltering growth concept</li>
                                    <li>Address specific concerns</li>
                                    <li>Provide written information</li>
                                    <li>Signpost to support groups (UK Breastfeeding Network, NHS guides)</li>
                                    <li>Regular follow-up appointments</li>
                                    <li>Access to trained professionals (health visitors, midwives)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Specialist Referrals</h3>
                            <div class="badges-container">
                                <span class="badge info">Paediatric dietitian for persistent issues</span>
                                <span class="badge info">Infant feeding specialist for breastfeeding problems</span>
                                <span class="badge info">Speech & language therapist for feeding difficulties</span>
                                <span class="badge info">Clinical psychologist for behavioral issues</span>
                                <span class="badge info">Occupational therapist for feeding skills</span>
                                <span class="badge info">Social services if social factors identified</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card fade-in" id="followup-card">
                <div class="card-header followup" onclick="toggleCard('followup')">
                    <div class="card-title">
                        <span class="icon">üìà</span>
                        Follow-up & Referral
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="subsection">
                            <h3>Growth Monitoring Intervals</h3>
                            
                            <div class="criteria-grid">
                                <div class="criteria-item">
                                    <h5><span class="badge info">Weight Checks</span></h5>
                                    <ul>
                                        <li><strong><1 month:</strong> No more than daily</li>
                                        <li><strong>1-6 months:</strong> Weekly</li>
                                        <li><strong>6-12 months:</strong> Fortnightly</li>
                                        <li><strong>>1 year:</strong> Monthly</li>
                                    </ul>
                                </div>
                                <div class="criteria-item">
                                    <h5><span class="badge info">Length/Height</span></h5>
                                    <ul>
                                        <li><strong>All ages:</strong> No more than every 3 months</li>
                                        <li>Too frequent measurements can be misleading</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="alert-box">
                                <span class="alert-icon">üìä</span>
                                <div>
                                    <strong>Documentation:</strong> All measurements must be recorded in the Personal Child Health Record (parent/carer-held) for continuity of care.
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Urgent Referral Criteria</h3>
                            
                            <div class="badges-container">
                                <span class="badge urgent">Symptoms/signs of underlying condition</span>
                                <span class="badge urgent">Rapid weight loss</span>
                                <span class="badge urgent">Severe undernutrition</span>
                                <span class="badge urgent">Slow linear growth or unexplained short stature</span>
                                <span class="badge urgent">Safeguarding concerns</span>
                                <span class="badge urgent">No response to primary care management</span>
                                <span class="badge urgent">New symptoms after initial assessment</span>
                            </div>

                            <div class="alert-box">
                                <span class="alert-icon">üè•</span>
                                <div>
                                    <strong>Hospital Admission:</strong> Only if acutely unwell or specific indication (e.g., planned tube feeding). Most cases can be managed in primary care/community.
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Multidisciplinary Team Referral Options</h3>
                            
                            <div class="criteria-grid">
                                <div class="criteria-item">
                                    <h5><span class="badge info">Immediate Referral</span></h5>
                                    <ul>
                                        <li>Paediatrics (urgent if red flags)</li>
                                        <li>Social services (safeguarding)</li>
                                        <li>Hospital (acute illness)</li>
                                    </ul>
                                </div>
                                <div class="criteria-item">
                                    <h5><span class="badge caution">Consider Referral</span></h5>
                                    <ul>
                                        <li>Paediatric dietitian (persistent faltering)</li>
                                        <li>Infant feeding specialist</li>
                                        <li>Speech & language therapy (feeding difficulties)</li>
                                        <li>Clinical psychology (behavioral issues)</li>
                                        <li>Occupational therapy (feeding skills)</li>
                                        <li>School nurse (school-aged children)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Follow-up Actions</h3>
                            
                            <div class="checklist">
                                <h4>At Each Visit</h4>
                                <ul>
                                    <li>Re-weigh and re-measure</li>
                                    <li>Plot on growth chart</li>
                                    <li>Assess feeding progress</li>
                                    <li>Review management plan adherence</li>
                                    <li>Identify barriers to implementation</li>
                                    <li>Adjust plan as needed</li>
                                </ul>
                            </div>

                            <div class="checklist">
                                <h4>Long-term Monitoring</h4>
                                <ul>
                                    <li>Assess developmental progress</li>
                                    <li>Monitor for complications (stunting, cognitive delay)</li>
                                    <li>Support parents/carers continuously</li>
                                    <li>Re-assess need for specialist input</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Quality Standards Checklist</h3>
                            <div class="alert-box">
                                <span class="alert-icon">‚úÖ</span>
                                <div>
                                    <strong>NICE Quality Standard QS197:</strong> Ensure measurements plotted on growth charts, detailed feeding history taken, management plan with goals established, and breastfeeding supported if supplementing with formula.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="sidebar" id="sidebar">
            <h3>Algorithm Progress</h3>
            <div class="progress-item active" onclick="scrollToCard('assessment-card')" data-card="assessment-card">
                <span class="progress-icon">üîç</span>
                <span class="progress-text">Assessment</span>
            </div>
            <div class="progress-item" onclick="scrollToCard('diagnosis-card')" data-card="diagnosis-card">
                <span class="progress-icon">üß†</span>
                <span class="progress-text">Diagnosis</span>
            </div>
            <div class="progress-item" onclick="scrollToCard('treatment-card')" data-card="treatment-card">
                <span class="progress-icon">üíä</span>
                <span class="progress-text">Treatment</span>
            </div>
            <div class="progress-item" onclick="scrollToCard('followup-card')" data-card="followup-card">
                <span class="progress-icon">üìà</span>
                <span class="progress-text">Follow-up</span>
            </div>
            <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                <p style="color: rgba(255,255,255,0.7); font-size: 0.9em; line-height: 1.5;">
                    <strong style="color: white;">Key Reminder:</strong> Always involve parents/carers in decision-making and document all measurements in the Personal Child Health Record.
                </p>
            </div>
        </aside>
    </div>

    <div class="floating-alert" id="urgent-alert">
        <span>üö®</span>
        <div>
            <strong>Urgent Referral Indicated:</strong> This patient meets criteria for urgent paediatric referral. Please review red flag indicators.
        </div>
        <button class="close-btn" onclick="closeAlert()">√ó</button>
    </div>

    <script>
        // Track which cards have been viewed
        const viewedCards = new Set();
        let currentCard = 'assessment-card';

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-expand assessment card on load
            document.getElementById('assessment-card').classList.add('expanded');
            viewedCards.add('assessment-card');
            
            // Add scroll listener for progress tracking
            window.addEventListener('scroll', updateProgress);
            
            // Add scroll listener for fade-in animations
            window.addEventListener('scroll', handleScrollAnimations);
            
            // Initial fade-in animation check
            setTimeout(handleScrollAnimations, 100);
            
            // Scroll to top button
            createScrollToTopButton();
        });

        // Toggle card expansion
        function toggleCard(cardId) {
            const card = document.getElementById(cardId + '-card');
            const isExpanded = card.classList.contains('expanded');
            
            // Close all other cards
            document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
            
            // Toggle current card
            if (!isExpanded) {
                card.classList.add('expanded');
                viewedCards.add(cardId + '-card');
                currentCard = cardId + '-card';
                
                // Auto-scroll to card if on mobile
                if (window.innerWidth <= 1200) {
                    setTimeout(() => {
                        card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                }
            }
            
            updateProgress();
        }

        // Scroll to specific card
        function scrollToCard(cardId) {
            const card = document.getElementById(cardId);
            if (card) {
                card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    document.querySelectorAll('.card').forEach(c => c.classList.remove('expanded'));
                    card.classList.add('expanded');
                    viewedCards.add(cardId);
                    currentCard = cardId;
                    updateProgress();
                }, 500);
            }
        }

        // Update progress sidebar
        function updateProgress() {
            const cards = ['assessment-card', 'diagnosis-card', 'treatment-card', 'followup-card'];
            const scrollPosition = window.scrollY + 100;
            
            cards.forEach(cardId => {
                const card = document.getElementById(cardId);
                const progressItem = document.querySelector(`[data-card="${cardId}"]`);
                
                if (!card || !progressItem) return;
                
                const cardTop = card.offsetTop;
                const cardBottom = cardTop + card.offsetHeight;
                
                // Remove all state classes
                progressItem.classList.remove('active', 'completed');
                
                // Determine current state
                if (scrollPosition >= cardTop && scrollPosition < cardBottom) {
                    progressItem.classList.add('active');
                    currentCard = cardId;
                } else if (viewedCards.has(cardId) || scrollPosition > cardBottom) {
                    progressItem.classList.add('completed');
                }
            });
        }

        // Handle scroll animations
        function handleScrollAnimations() {
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementBottom = element.getBoundingClientRect().bottom;
                
                if (elementTop < window.innerHeight - 50 && elementBottom > 0) {
                    element.classList.add('visible');
                }
            });
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        // Show urgent alert
        function showUrgentAlert() {
            const alert = document.getElementById('urgent-alert');
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 8000);
        }

        // Close alert
        function closeAlert() {
            document.getElementById('urgent-alert').classList.remove('show');
        }

        // Scroll to next section
        function scrollToNext() {
            document.querySelector('.card').scrollIntoView({ behavior: 'smooth' });
        }

        // Create scroll to top button
        function createScrollToTopButton() {
            const btn = document.createElement('button');
            btn.innerHTML = '‚Üë';
            btn.style.cssText = `
                position: fixed;
                bottom: 30px;
                right: 320px;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: linear-gradient(135deg, #1a3a5f 0%, #2c3e50 100%);
                color: white;
                border: none;
                cursor: pointer;
                font-size: 24px;
                display: none;
                z-index: 150;
                transition: all 0.3s ease;
                box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            `;
            
            btn.onmouseover = () => btn.style.transform = 'scale(1.1)';
            btn.onmouseout = () => btn.style.transform = 'scale(1)';
            
            btn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    btn.style.display = 'flex';
                    btn.style.alignItems = 'center';
                    btn.style.justifyContent = 'center';
                } else {
                    btn.style.display = 'none';
                }
            });
            
            document.body.appendChild(btn);
            
            // Adjust position on mobile
            if (window.innerWidth <= 1200) {
                btn.style.right = '30px';
            }
            
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 1200) {
                    btn.style.right = '30px';
                } else {
                    btn.style.right = '320px';
                }
            });
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const cards = ['assessment-card', 'diagnosis-card', 'treatment-card', 'followup-card'];
            const currentIndex = cards.indexOf(currentCard);
            
            if (e.key === 'ArrowDown' && currentIndex < cards.length - 1) {
                scrollToCard(cards[currentIndex + 1]);
            } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                scrollToCard(cards[currentIndex - 1]);
            } else if (e.key === 'Enter' && currentCard) {
                const card = document.getElementById(currentCard);
                const cardId = currentCard.replace('-card', '');
                toggleCard(cardId);
            } else if (e.key === 'Escape') {
                closeAlert();
            }
        });

        // Track urgent badge clicks
        document.querySelectorAll('.badge.urgent').forEach(badge => {
            badge.addEventListener('click', function() {
                showUrgentAlert();
            });
        });

        // Auto-close mobile sidebar when clicking outside
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            
            if (window.innerWidth <= 1200 && 
                !sidebar.contains(e.target) && 
                !toggle.contains(e.target) && 
                sidebar.classList.contains('show')) {
                sidebar.classList.remove('show');
            }
        });

        // Add smooth scrolling for all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Initialize tooltips for badges
        const tooltipTexts = {
            'urgent': 'Urgent referral or action required',
            'caution': 'Requires careful monitoring or caution',
            'stable': 'Stable or reassuring finding',
            'info': 'Information or guidance'
        };

        document.querySelectorAll('.badge').forEach(badge => {
            badge.setAttribute('title', tooltipTexts[badge.classList[1]] || 'Clinical indicator');
        });
    </script>
</body>
</html>