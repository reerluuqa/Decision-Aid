<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constipation in Children - QuickScan Reference</title>
    <style>
        :root {
            /* Color Palette */
            --primary: #2563eb;       /* Blue - General Info */
            --primary-light: #eff6ff;
            --danger: #dc2626;        /* Red - Red Flags */
            --danger-light: #fef2f2;
            --warning: #d97706;        /* Amber - Caution/Referral */
            --warning-light: #fffbeb;
            --success: #059669;       /* Green - Safe/Action */
            --success-light: #ecfdf5;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-body: #f3f4f6;
            --card-bg: #ffffff;
            --border: #e5e7eb;
            
            /* Spacing & Radius */
            --radius: 8px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-dark);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Layout & Typography --- */
        header {
            background: var(--card-bg);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .brand {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .brand span {
            color: var(--primary);
        }

        .search-container {
            position: relative;
        }

        .search-input {
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--border);
            background: var(--bg-body);
            font-size: 0.9rem;
            width: 250px;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 0.9rem;
        }

        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            gap: 1.5rem;
        }

        h2 {
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* --- Cards & Grid --- */
        .section-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid transparent;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* --- Card Modifiers --- */
        .card.danger {
            border-left: 5px solid var(--danger);
            background: linear-gradient(to right, var(--danger-light), #fff 40%);
        }

        .card.warning {
            border-left: 5px solid var(--warning);
            background: linear-gradient(to right, var(--warning-light), #fff 40%);
        }

        .card.success {
            border-left: 5px solid var(--success);
            background: linear-gradient(to right, var(--success-light), #fff 40%);
        }

        .card.info {
            border-left: 5px solid var(--primary);
            background: linear-gradient(to right, var(--primary-light), #fff 40%);
        }

        /* --- Grid Spans --- */
        .col-span-12 { grid-column: span 12; }
        .col-span-8 { grid-column: span 8; }
        .col-span-6 { grid-column: span 6; }
        .col-span-4 { grid-column: span 4; }

        @media (max-width: 900px) {
            .col-span-8, .col-span-6, .col-span-4 { grid-column: span 12; }
            .search-input { width: 180px; }
        }

        /* --- Content Elements --- */
        .action-box {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .action-box.danger { background: var(--danger); color: white; }
        .action-box.warning { background: var(--warning); color: white; }
        .action-box.success { background: var(--success); color: white; }
        .action-box.info { background: var(--primary); color: white; }

        ul.checklist {
            list-style: none;
        }

        ul.checklist li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        ul.checklist li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: bold;
            font-size: 1.2em;
            line-height: 1.2rem;
        }

        .card.danger ul.checklist li::before { color: var(--danger); }
        .card.warning ul.checklist li::before { color: var(--warning); }
        .card.success ul.checklist li::before { color: var(--success); }

        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-right: 0.5rem;
        }

        .tag.danger { background: var(--danger); color: white; }
        .tag.success { background: var(--success); color: white; }

        /* --- Tables --- */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table th, .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background-color: #f9fafb;
            font-weight: 600;
            color: var(--text-light);
        }

        .data-table tr:hover {
            background-color: #f9fafb;
        }

        /* --- Steps & Timeline --- */
        .step {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .step-number {
            flex-shrink: 0;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .step-content h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .step-content p {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
            font-size: 0.8rem;
            border-top: 1px solid var(--border);
            margin-top: 2rem;
        }

        /* --- Highlight Utility --- */
        .highlight {
            background-color: #fde047;
            color: black;
            padding: 0 2px;
            border-radius: 2px;
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--danger);">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>
        <span>QuickScan</span> Clinical
    </div>
    <div class="search-container">
        <span class="search-icon">üîç</span>
        <input type="text" class="search-input" id="searchInput" placeholder="Find keyword..." onkeyup="highlightText()">
    </div>
</header>

<main>

    <!-- Section 1: Triage & Red Flags (Top Priority) -->
    <section class="col-span-12">
        <h2><span style="color:var(--danger)">‚óè</span> Immediate Triage: Red & Amber Flags</h2>
        <div class="section-grid">
            
            <!-- Red Flags Column -->
            <div class="card danger col-span-6">
                <h3 style="color: var(--danger); margin-bottom: 0.5rem; display:flex; justify-content:space-between; align-items:center;">
                    RED FLAGS 
                    <span class="tag danger">URGENT</span>
                </h3>
                <p style="margin-bottom: 1rem; font-size: 0.9rem;">Do NOT treat for constipation. Refer URGENTLY.</p>
                <ul class="checklist">
                    <li>Symptoms from birth or first few weeks (Suspect Hirschsprung's)</li>
                    <li>Meconium delayed > 48 hours (Term baby)</li>
                    <li>Family history of Hirschsprung's disease</li>
                    <li>Abdominal distension <strong>with</strong> vomiting</li>
                    <li>Gross abdominal distension</li>
                    <li>Ribbon stool pattern (Anal stenosis)</li>
                    <li>Leg weakness or motor delay (Spinal abnormality)</li>
                    <li>Abnormal anus (fistulae, fissures, patulous, anteriorly placed, no anal wink)</li>
                    <li>Abnormal lumbosacral/gluteal region (sinus, hairy patch, naevi)</li>
                </ul>
                <div class="action-box danger">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                    DO NOT TREAT. REFER URGENTLY.
                </div>
            </div>

            <!-- Amber Flags Column -->
            <div class="card warning col-span-6">
                <h3 style="color: var(--warning); margin-bottom: 0.5rem;">AMBER FLAGS</h3>
                <p style="margin-bottom: 1rem; font-size: 0.9rem;">Refer for specialist assessment, but treatment can start in primary care.</p>
                <ul class="checklist">
                    <li>Faltering growth</li>
                    <li>Developmental delay</li>
                    <li>Constipation triggered by introduction of cow's milk</li>
                    <li>Concern of possible child maltreatment</li>
                </ul>
                <div class="action-box warning">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    REFER & TREAT CONCURRENTLY
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Diagnosis -->
    <section class="col-span-12">
        <h2><span style="color:var(--primary)">‚óè</span> Diagnosis Criteria (Idiopathic)</h2>
        <div class="card info">
            <p style="margin-bottom: 0.5rem; font-weight: 600;">Diagnose if <strong>2 or more</strong> of the following are present:</p>
            <div class="section-grid">
                <div class="col-span-4">
                    <h4 style="font-size:0.9rem; color:var(--text-light); text-transform:uppercase;">Stool Patterns</h4>
                    <ul class="checklist">
                        <li><strong>Less than 3</strong> complete stools/week</li>
                        <li>Hard, large stool (blocks toilet)</li>
                        <li>'Rabbit droppings' (Type 1)</li>
                        <li>Overflow soiling (loose/smelly, without sensation)</li>
                    </ul>
                </div>
                <div class="col-span-4">
                    <h4 style="font-size:0.9rem; color:var(--text-light); text-transform:uppercase;">Associated Symptoms (Any Age)</h4>
                    <ul class="checklist">
                        <li>Distress or pain on passing stool</li>
                        <li>Bleeding associated with hard stool</li>
                        <li>Straining</li>
                    </ul>
                </div>
                <div class="col-span-4">
                    <h4 style="font-size:0.9rem; color:var(--text-light); text-transform:uppercase;">Associated Symptoms (>1 yr)</h4>
                    <ul class="checklist">
                        <li>Poor appetite improving after stool</li>
                        <li>Waxing/waning abdominal pain</li>
                        <li>Retentive posturing (legs straight, tiptoes, arched back)</li>
                        <li>Anal pain / Past history of constipation</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Management -->
    <section class="col-span-12">
        <h2><span style="color:var(--success)">‚óè</span> Management Protocol</h2>
        <div class="section-grid">
            
            <!-- Step 1: Disimpaction -->
            <div class="card success col-span-6">
                <h3 style="color: var(--success); margin-bottom: 1rem;">1. Faecal Disimpaction</h3>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;">If impaction is present (history of severe symptoms, overflow soiling, palpable mass).</p>
                
                <div class="action-box success" style="margin-bottom: 1rem;">
                    <strong>Use Macrogols (Polyethylene Glycol)</strong>
                </div>

                <div class="step">
                    <div class="step-number" style="background:var(--text-dark)">i</div>
                    <div class="step-content">
                        <h4>Dose Adjustment</h4>
                        <p>Use higher doses for disimpaction. Dose varies by age and product (see SPC).</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number" style="background:var(--text-dark)">ii</div>
                    <div class="step-content">
                        <h4>Duration</h4>
                        <p>Usually for up to 7 days to clear the rectum.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number" style="background:var(--text-dark)">iii</div>
                    <div class="step-content">
                        <h4>Review</h4>
                        <p>Review treatment within <strong>1 week</strong> of starting.</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: Maintenance -->
            <div class="card success col-span-6">
                <h3 style="color: var(--success); margin-bottom: 1rem;">2. Maintenance Treatment</h3>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;">Start if no impaction, or after successful disimpaction.</p>

                <div class="action-box success" style="margin-bottom: 1rem;">
                    <strong>Oral Macrogols are First-Line</strong>
                </div>

                <ul class="checklist">
                    <li>Adjust dose to produce soft, formed stool (Type 3-4).</li>
                    <li>Continue for several months after regular bowel habits established.</li>
                    <li>Do not stop abruptly; titrate down slowly.</li>
                </ul>

                <div style="margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.5); border-radius: 4px;">
                    <h4 style="font-size: 0.9rem;">Behavioural Interventions</h4>
                    <p style="font-size: 0.85rem; margin-top: 0.5rem;">Scheduled toileting, bowel diary, encouragement/reward systems.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Diet & Fluids -->
    <section class="col-span-12">
        <h2><span style="color:var(--primary)">‚óè</span> Diet & Lifestyle Support</h2>
        <div class="section-grid">
            <div class="card info col-span-4">
                <h3>General Advice</h3>
                <ul class="checklist">
                    <li><strong>Fibre:</strong> Fruit, veg, high-fibre bread, baked beans. (Avoid unprocessed bran).</li>
                    <li><strong>Fluids:</strong> Encourage intake. See table for recommended amounts.</li>
                    <li><strong>Activity:</strong> Normal daily physical activity tailored to ability.</li>
                    <li><strong>Education:</strong> Explain that laxatives are safe and may be needed long-term.</li>
                </ul>
            </div>

            <div class="card info col-span-8">
                <h3>Recommended Fluid Intake (Per Day)</h3>
                <p style="font-size: 0.8rem; color: var(--text-light); margin-bottom: 0.5rem;">Includes water from food and drinks. Active/obese children need more.</p>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Age Group</th>
                            <th>Total Water Intake</th>
                            <th>From Drinks</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>0‚Äì6 months</td><td>~700 mL</td><td>(Assumed milk)</td></tr>
                        <tr><td>7‚Äì12 months</td><td>~800 mL</td><td>~600 mL</td></tr>
                        <tr><td>1‚Äì3 years</td><td>~1300 mL</td><td>~900 mL</td></tr>
                        <tr><td>4‚Äì8 years</td><td>~1700 mL</td><td>~1200 mL</td></tr>
                        <tr><td>9‚Äì13 years (Boys)</td><td>~2400 mL</td><td>~1800 mL</td></tr>
                        <tr><td>9‚Äì13 years (Girls)</td><td>~2100 mL</td><td>~1600 mL</td></tr>
                        <tr><td>14‚Äì18 years (Boys)</td><td>~3300 mL</td><td>~2600 mL</td></tr>
                        <tr><td>14‚Äì18 years (Girls)</td><td>~2300 mL</td><td>~1800 mL</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

</main>

<footer>
    <p>Based on NICE CKS guidance (Last revised Aug 2025). For use by UK Healthcare Professionals.</p>
</footer>

<script>
    function highlightText() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toUpperCase();
        
        // Remove previous highlights
        const highlightedElements = document.querySelectorAll('.highlight');
        highlightedElements.forEach(el => {
            const parent = el.parentNode;
            parent.replaceChild(document.createTextNode(el.textContent), el);
            parent.normalize(); // Merge text nodes
        });

        if (filter.length < 2) return;

        // Simple traverse of text nodes in cards
        const cards = document.querySelectorAll('.card');
        
        cards.forEach(card => {
            const walker = document.createTreeWalker(card, NodeFilter.SHOW_TEXT, null, false);
            const textNodes = [];
            
            while(walker.nextNode()) {
                textNodes.push(walker.currentNode);
            }

            textNodes.forEach(node => {
                const text = node.textContent;
                if (text.toUpperCase().includes(filter)) {
                    const regex = new RegExp(`(${filter})`, 'gi');
                    const fragment = document.createDocumentFragment();
                    let lastIdx = 0;
                    let match;

                    while ((match = regex.exec(text)) !== null) {
                        // Text before match
                        fragment.appendChild(document.createTextNode(text.slice(lastIdx, match.index)));
                        // The matched text
                        const mark = document.createElement('span');
                        mark.className = 'highlight';
                        mark.textContent = match[0];
                        fragment.appendChild(mark);
                        lastIdx = regex.lastIndex;
                    }
                    // Remaining text
                    fragment.appendChild(document.createTextNode(text.slice(lastIdx)));
                    
                    node.parentNode.replaceChild(fragment, node);
                }
            });
        });
    }
</script>

</body>
</html>