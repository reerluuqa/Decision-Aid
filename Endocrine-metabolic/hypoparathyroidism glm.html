<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hypoparathyroidism: Clinical Quick-Scan</title>
    <style>
        :root {
            /* Color Palette */
            --color-bg: #f4f7f6;
            --color-card-bg: #ffffff;
            --color-text-main: #2c3e50;
            --color-text-muted: #607d8b;
            
            /* Semantics */
            --color-emergency: #d32f2f;      /* Red for Flags */
            --color-emergency-bg: #ffebee;
            --color-action: #1976d2;         /* Blue for Info/Process */
            --color-action-bg: #e3f2fd;
            --color-success: #388e3c;        /* Green for Safe/Positive */
            --color-success-bg: #e8f5e9;
            --color-warning: #f57c00;        /* Orange for Caution */
            
            /* Spacing & UI */
            --radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--color-bg);
            color: var(--color-text-main);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* App-like feel */
        }

        /* --- Header & Nav --- */
        header {
            background: white;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }

        .brand {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand span {
            color: var(--color-emergency);
        }

        nav {
            display: flex;
            gap: 0.5rem;
            background: #f0f0f0;
            padding: 4px;
            border-radius: 50px;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 0.5rem 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--color-text-muted);
            transition: all 0.2s ease;
        }

        .nav-btn:hover {
            color: var(--color-text-main);
        }

        .nav-btn.active {
            background: white;
            color: var(--color-action);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* --- Main Layout --- */
        main {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            position: relative;
        }

        .view-section {
            display: none; /* Hidden by default */
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.3s ease-out;
        }

        .view-section.active {
            display: grid;
            gap: 1.5rem;
            /* Grid layout depends on specific section content */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Components --- */
        
        /* Cards */
        .card {
            background: var(--color-card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.25rem;
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid transparent;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Card Variants */
        .card.danger {
            border-left-color: var(--color-emergency);
            background: linear-gradient(to right, var(--color-emergency-bg), white);
        }
        .card.danger .card-title { color: var(--color-emergency); }

        .card.info {
            border-left-color: var(--color-action);
            background: linear-gradient(to right, var(--color-action-bg), white);
        }
        .card.info .card-title { color: var(--color-action); }

        .card.safe {
            border-left-color: var(--color-success);
            background: linear-gradient(to right, var(--color-success-bg), white);
        }
        .card.safe .card-title { color: var(--color-success); }

        /* --- Specific Views --- */

        /* 1. DASHBOARD VIEW */
        #view-dashboard {
            grid-template-columns: 2fr 1fr;
            grid-template-rows: auto auto;
        }
        
        .hero-banner {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            padding: 2rem;
            border-radius: var(--radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .critical-alert-box {
            background: var(--color-emergency);
            color: white;
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(211, 47, 47, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* 2. EMERGENCY VIEW */
        #view-emergency {
            grid-template-columns: 1fr;
        }

        .emergency-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .action-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .step-num {
            background: var(--color-emergency);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* 3. DIAGNOSIS VIEW */
        #view-diagnosis {
            grid-template-columns: 1fr 1fr;
        }

        .lab-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .lab-table th, .lab-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .lab-table th { color: var(--color-text-muted); font-weight: 600; }
        .lab-row-low { color: var(--color-emergency); font-weight: 600; }
        .lab-row-high { color: var(--color-warning); font-weight: 600; }
        .lab-row-norm { color: var(--color-success); }

        .sign-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin-right: 8px;
        }

        /* 4. MANAGEMENT VIEW */
        #view-management {
            grid-template-columns: 1fr 1fr;
        }

        /* 5. TOOLS VIEW */
        #view-tools {
            grid-template-columns: 1fr;
            max-width: 600px;
            margin: 0 auto;
        }

        .calc-container {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--color-text-muted);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .calc-btn {
            background: var(--color-action);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
        }

        .calc-btn:hover { background: #1565c0; }

        .calc-result {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--color-bg);
            border-radius: 4px;
            text-align: center;
            display: none;
        }

        .calc-result.visible { display: block; animation: fadeIn 0.3s; }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-text-main);
        }

        .result-label {
            color: var(--color-text-muted);
            font-size: 0.9rem;
        }

        /* Utility: Chip Tags */
        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .tag.red { background: #ffebee; color: var(--color-emergency); }
        .tag.green { background: #e8f5e9; color: var(--color-success); }
        .tag.blue { background: #e3f2fd; color: var(--color-action); }

        /* Footer */
        footer {
            text-align: center;
            padding: 1rem;
            font-size: 0.8rem;
            color: var(--color-text-muted);
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            header { flex-direction: column; gap: 1rem; align-items: stretch; }
            nav { justify-content: space-between; }
            .nav-btn { padding: 0.5rem; font-size: 0.8rem; }
            #view-dashboard, #view-diagnosis, #view-management { grid-template-columns: 1fr; }
            .hero-banner { flex-direction: column; text-align: center; gap: 1rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-activity"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
            Hypo<span>Ref</span>
        </div>
        <nav>
            <button class="nav-btn active" onclick="switchView('dashboard')">Overview</button>
            <button class="nav-btn" onclick="switchView('emergency')">Emergency</button>
            <button class="nav-btn" onclick="switchView('diagnosis')">Diagnosis</button>
            <button class="nav-btn" onclick="switchView('management')">Management</button>
            <button class="nav-btn" onclick="switchView('tools')">Tools</button>
        </nav>
    </header>

    <main>
        <!-- DASHBOARD VIEW -->
        <section id="view-dashboard" class="view-section active">
            <div class="hero-banner">
                <div>
                    <h2 style="margin-bottom: 0.5rem;">Hypoparathyroidism Quick-Scan</h2>
                    <p style="opacity: 0.9;">Last updated: Nov 15, 2024 | BMJ Best Practice Source</p>
                </div>
                <div class="critical-alert-box">
                    ALERT: Ca < 1.88 mmol/L (<7.5 mg/dL)
                </div>
            </div>

            <!-- Key Stats Row -->
            <div class="card info">
                <div class="card-title">Key Fact</div>
                <p style="font-size: 1.1rem;"><strong>75%</strong> of cases are post-surgical (Thyroid/Parathyroid). Majority occur in women (4th/5th decade).</p>
            </div>

            <div class="card danger">
                <div class="card-title">Red Flags (Severe Symptoms)</div>
                <ul style="list-style: none;">
                    <li style="margin-bottom: 0.5rem;">⚠️ Tetany, muscle cramps, laryngospasm, stridor</li>
                    <li style="margin-bottom: 0.5rem;">⚠️ Seizures, altered mental status</li>
                    <li style="margin-bottom: 0.5rem;">⚠️ Prolonged QT interval, arrhythmias</li>
                </ul>
            </div>

            <div class="card safe">
                <div class="card-title">Common Physical Signs</div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 120px;">
                        <strong>Chvostek's Sign</strong><br>
                        <span class="tag blue">Uncommon</span>
                        <p style="font-size: 0.85rem; margin-top: 5px;">Ipsilateral facial muscle contraction tapping facial nerve.</p>
                    </div>
                    <div style="flex: 1; min-width: 120px;">
                        <strong>Trousseau's Sign</strong><br>
                        <span class="tag blue">Uncommon</span>
                        <p style="font-size: 0.85rem; margin-top: 5px;">Painful hand clasping after BP cuff inflation.</p>
                    </div>
                </div>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Aetiology Overview</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div>
                        <strong>Surgical (75%)</strong>
                        <p style="font-size: 0.9rem; color: #555;">Inadvertent removal/devascularisation during thyroid/parathyroid surgery.</p>
                    </div>
                    <div>
                        <strong>Autoimmune</strong>
                        <p style="font-size: 0.9rem; color: #555;">Isolated or APS1 (with candidiasis/adrenal insufficiency).</p>
                    </div>
                    <div>
                        <strong>Genetic</strong>
                        <p style="font-size: 0.9rem; color: #555;">DiGeorge, CASR mutations, GATA3, GCM2.</p>
                    </div>
                    <div>
                        <strong>Functional</strong>
                        <p style="font-size: 0.9rem; color: #555;">Hypo/Hyper-magnesemia, "Hungry Bone Syndrome".</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- EMERGENCY VIEW -->
        <section id="view-emergency" class="view-section">
            <div class="card danger" style="margin-bottom: 1.5rem;">
                <div class="card-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    EMERGENCY PROTOCOL: Severe Symptomatic Hypocalcaemia
                </div>
                <p><strong>Trigger:</strong> Albumin-corrected Ca < 1.88 mmol/L (<7.5 mg/dL) OR presence of Tetany, Seizures, Stridor, Arrhythmia.</p>
            </div>

            <div class="emergency-flow">
                <div class="card">
                    <div class="card-title">Immediate Action</div>
                    <div class="action-step">
                        <div class="step-num">1</div>
                        <div>
                            <strong>IV Calcium Replacement</strong>
                            <p style="font-size: 0.9rem;">Administer slowly via large-bore IV (Central preferred). Avoid extravasation.</p>
                        </div>
                    </div>
                    <div class="action-step">
                        <div class="step-num">2</div>
                        <div>
                            <strong>Cardiac Monitoring</strong>
                            <p style="font-size: 0.9rem;">Continuous ECG monitoring required. Watch for prolonged QT.</p>
                        </div>
                    </div>
                    <div class="action-step">
                        <div class="step-num">3</div>
                        <div>
                            <strong>Re-check Labs</strong>
                            <p style="font-size: 0.9rem;">Frequent checks of Ionised Calcium, Mg, Phos, and ABG (rule out alkalosis).</p>
                        </div>
                    </div>
                </div>

                <div class="card info">
                    <div class="card-title">Adjuncts</div>
                    <ul style="list-style: none; margin-top: 0.5rem;">
                        <li style="margin-bottom: 0.8rem; border-left: 2px solid var(--color-action); padding-left: 10px;">
                            <strong>If Hypomagnesemia:</strong> Give Parenteral Magnesium (Mg levels suppress PTH).
                        </li>
                        <li style="margin-bottom: 0.8rem; border-left: 2px solid var(--color-action); padding-left: 10px;">
                            <strong>If Respiratory Alkalosis:</strong> Treat underlying cause (pain, anxiety, hyperventilation) to correct ionized Ca fraction.
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- DIAGNOSIS VIEW -->
        <section id="view-diagnosis" class="view-section">
            <div class="card">
                <div class="card-title">Confirmatory Labs</div>
                <p style="margin-bottom: 1rem; color: var(--color-text-muted);">Diagnosis: Low ionised/corrected Ca + Low/Inappropriately Normal PTH (on 2 occasions > 2 weeks apart).</p>
                <table class="lab-table">
                    <thead>
                        <tr>
                            <th>Investigation</th>
                            <th>Expected Result in Hypopara</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Serum Calcium</td>
                            <td class="lab-row-low">Low</td>
                            <td>Severe: <1.88 mmol/L. Check Albumin.</td>
                        </tr>
                        <tr>
                            <td>Ionised Calcium</td>
                            <td class="lab-row-low">Low</td>
                            <td>Preferred in acute/critically ill.</td>
                        </tr>
                        <tr>
                            <td>Intact PTH</td>
                            <td class="lab-row-low">Low or Inappropriately Normal</td>
                            <td>Distinguishes from Pseudohypopara (High PTH).</td>
                        </tr>
                        <tr>
                            <td>Serum Phosphorus</td>
                            <td class="lab-row-high">High</td>
                            <td>Lack of PTH renal action.</td>
                        </tr>
                        <tr>
                            <td>Serum Magnesium</td>
                            <td class="lab-row-norm">Normal</td>
                            <td>Check Mg to rule out functional cause.</td>
                        </tr>
                        <tr>
                            <td>25-OH Vitamin D</td>
                            <td class="lab-row-norm">Normal</td>
                            <td>Must be normal to confirm diagnosis.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-title">Differential Diagnosis</div>
                <div style="margin-bottom: 1rem;">
                    <strong>Hypomagnesemia</strong>
                    <p style="font-size: 0.9rem;">Symptoms disproportionate to hypocalcaemia. Low Mg. Reversed by Mg repletion.</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>Pseudohypoparathyroidism</strong>
                    <p style="font-size: 0.9rem;">PTH resistance. Albright's hereditary osteodystrophy. High PTH.</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>Vitamin D Deficiency</strong>
                    <p style="font-size: 0.9rem;">Elevated PTH (secondary hyperparathyroidism). Low 25-OH Vitamin D.</p>
                </div>
            </div>
        </section>

        <!-- MANAGEMENT VIEW -->
        <section id="view-management" class="view-section">
            <div class="card danger">
                <div class="card-title">Acute Management</div>
                <p><strong>IV Calcium Gluconate (10%)</strong> is standard. Slow infusion. Central line preferred to avoid tissue necrosis.</p>
                <div style="margin-top: 1rem;">
                    <span class="tag red">Stridor</span>
                    <span class="tag red">Seizures</span>
                    <span class="tag red">Tetany</span>
                </div>
            </div>

            <div class="card safe">
                <div class="card-title">Chronic Management</div>
                <div style="margin-bottom: 1rem;">
                    <strong>First Line:</strong>
                    <p>Oral Calcium + <strong>Calcitriol (1,25-dihydroxyvitamin D)</strong>.</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>Why Calcitriol?</strong>
                    <p style="font-size: 0.9rem;">Rapid onset, short half-life. Lower risk of chronic intoxication compared to Vit D2/D3.</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>Adjuncts:</strong>
                    <p style="font-size: 0.9rem;">Thiazide diuretics (to reduce Ca excretion), Mg supplements (if low), Low salt diet.</p>
                </div>
            </div>

            <div class="card info" style="grid-column: 1 / -1;">
                <div class="card-title">Recombinant PTH (1-84)</div>
                <p>Considered if unsatisfactory response to standard therapy. Daily injectable. Note: FDA recall in US (2019), but available via special programme/elsewhere.</p>
            </div>
        </section>

        <!-- TOOLS VIEW -->
        <section id="view-tools" class="view-section">
            <div class="calc-container">
                <div class="card-title" style="justify-content: center; margin-bottom: 1.5rem;">Corrected Calcium Calculator</div>
                
                <div class="form-group">
                    <label for="unitSystem">Unit System</label>
                    <select id="unitSystem" onchange="toggleUnits()">
                        <option value="mgdl">mg/dL (US Conventional)</option>
                        <option value="mmol">mmol/L (SI)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="measuredCa">Measured Serum Calcium</label>
                    <input type="number" id="measuredCa" step="0.1" placeholder="e.g. 8.0">
                </div>

                <div class="form-group">
                    <label for="albumin">Serum Albumin</label>
                    <input type="number" id="albumin" step="0.1" placeholder="e.g. 4.0">
                    <small style="color: #888; display: block; margin-top: 4px;" id="normAlbuminLabel">Normal Albumin: 4.0 g/dL</small>
                </div>

                <button class="calc-btn" onclick="calculateCorrectedCa()">Calculate Corrected Calcium</button>

                <div id="calcResult" class="calc-result">
                    <div class="result-label">Corrected Calcium</div>
                    <div class="result-value" id="resultValue">--</div>
                    <div id="resultInterpretation" style="margin-top: 5px; font-weight: 600;"></div>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <div class="card-title">Formulas Used</div>
                <p style="font-family: monospace; background: #f5f5f5; padding: 0.5rem; border-radius: 4px;">
                    mg/dL: 0.8 × (4.0 - Patient Albumin) + Measured Ca<br>
                    mmol/L: 0.02 × (40 - Patient Albumin) + Measured Ca
                </p>
                <p style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;">Formulae are approximations. Ionised calcium is preferred for critically ill patients.</p>
            </div>
        </section>

    </main>

    <footer>
        <p>Disclaimer: This tool is for educational and quick-reference purposes only. Always verify with clinical guidelines and patient context.</p>
    </footer>

    <script>
        // --- Navigation Logic ---
        function switchView(viewId) {
            // Update Tab Styling
            const navBtns = document.querySelectorAll('.nav-btn');
            navBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all sections
            const sections = document.querySelectorAll('.view-section');
            sections.forEach(sec => sec.classList.remove('active'));

            // Show target section
            document.getElementById('view-' + viewId).classList.add('active');
            
            // Scroll to top
            document.querySelector('main').scrollTop = 0;
        }

        // --- Calculator Logic ---
        function toggleUnits() {
            const system = document.getElementById('unitSystem').value;
            const label = document.getElementById('normAlbuminLabel');
            const caInput = document.getElementById('measuredCa');
            const albInput = document.getElementById('albumin');

            // Reset inputs
            caInput.value = '';
            albInput.value = '';
            document.getElementById('calcResult').classList.remove('visible');

            if (system === 'mgdl') {
                label.textContent = 'Normal Albumin: 4.0 g/dL';
                caInput.placeholder = 'e.g. 8.0 mg/dL';
                albInput.placeholder = 'e.g. 4.0 g/dL';
            } else {
                label.textContent = 'Normal Albumin: 40 g/L';
                caInput.placeholder = 'e.g. 2.00 mmol/L';
                albInput.placeholder = 'e.g. 40 g/L';
            }
        }

        function calculateCorrectedCa() {
            const system = document.getElementById('unitSystem').value;
            const ca = parseFloat(document.getElementById('measuredCa').value);
            const alb = parseFloat(document.getElementById('albumin').value);
            const resultBox = document.getElementById('calcResult');
            const resultVal = document.getElementById('resultValue');
            const interp = document.getElementById('resultInterpretation');

            if (isNaN(ca) || isNaN(alb)) {
                resultBox.style.background = '#fff3cd'; // warning yellow
                resultVal.textContent = "Invalid Input";
                interp.textContent = "Please enter valid numbers.";
                interp.style.color = "#856404";
                resultBox.classList.add('visible');
                return;
            }

            let correctedCa;
            
            if (system === 'mgdl') {
                // Formula: 0.8 * (4.0 - patient_albumin) + measured_Ca
                correctedCa = 0.8 * (4.0 - alb) + ca;
            } else {
                // Formula: 0.02 * (40 - patient_albumin) + measured_Ca
                correctedCa = 0.02 * (40 - alb) + ca;
            }

            // Display result
            correctedCa = Math.round(correctedCa * 100) / 100; // 2 decimal places
            resultVal.textContent = correctedCa + " " + (system === 'mgdl' ? 'mg/dL' : 'mmol/L');
            
            // Interpretation based on text thresholds
            let isLow = false;
            let isSevere = false;

            if (system === 'mgdl') {
                if (correctedCa < 7.5) isSevere = true;
                else if (correctedCa < 8.5) isLow = true;
            } else {
                if (correctedCa < 1.88) isSevere = true;
                else if (correctedCa < 2.13) isLow = true;
            }

            if (isSevere) {
                resultBox.style.background = '#ffebee';
                interp.textContent = "⚠️ SEVERE HYPOCALCAEMIA - Immediate Action Required";
                interp.style.color = "#c62828";
            } else if (isLow) {
                resultBox.style.background = '#e8f5e9'; // Light green, but still treat
                interp.textContent = "⚠️ HYPOCALCAEMIA - Assess Symptoms";
                interp.style.color = "#2e7d32";
            } else {
                resultBox.style.background = '#e8f5e9';
                interp.textContent = "✓ Normal Range";
                interp.style.color = "#2e7d32";
            }

            resultBox.classList.add('visible');
        }

        // Initialize tooltips or hover effects if needed (CSS handles most)
        console.log("HypoParathyroidism Quick-Scan App Loaded.");
    </script>
</body>
</html>