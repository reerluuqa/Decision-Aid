

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Head Injury: Rapid Clinical Reference</title>
    <style>
        :root {
            /* Color Palette */
            --primary-blue: #0d47a1;
            --light-blue: #e3f2fd;
            --alert-red: #d32f2f;
            --alert-bg: #ffebee;
            --safe-green: #2e7d32;
            --safe-bg: #e8f5e9;
            --neutral-gray: #f5f5f5;
            --text-dark: #212121;
            --text-light: #757575;
            --border-color: #e0e0e0;
            --card-shadow: 0 2px 4px rgba(0,0,0,0.05), 0 4px 8px rgba(0,0,0,0.05);
            --hover-shadow: 0 4px 8px rgba(0,0,0,0.1), 0 8px 16px rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--neutral-gray);
            color: var(--text-dark);
            line-height: 1.5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* App-like feel */
        }

        /* --- Header --- */
        header {
            background-color: white;
            padding: 0.75rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-blue);
        }

        .meta-badge {
            font-size: 0.75rem;
            background: var(--light-blue);
            color: var(--primary-blue);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        /* --- Main Layout --- */
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Sidebar Navigation */
        aside {
            width: 200px;
            background: white;
            border-right: 1px solid var(--border-color);
            padding: 1rem 0;
            display: flex;
            flex-direction: column;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 0.75rem 1.25rem;
            text-align: left;
            font-size: 0.95rem;
            color: var(--text-dark);
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background-color: var(--neutral-gray);
        }

        .nav-btn.active {
            background-color: var(--light-blue);
            color: var(--primary-blue);
            border-left-color: var(--primary-blue);
            font-weight: 600;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            position: relative;
        }

        /* --- Views & Animations --- */
        .view-section {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .view-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Dashboard Grid --- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr; /* 2/3 Triage, 1/3 Tools */
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 900px) {
            .dashboard-grid { grid-template-columns: 1fr; }
            aside { display: none; } /* Mobile nav would go here, simplified for this demo */
            body { overflow: auto; }
            main { flex-direction: column; overflow: visible; }
            .content-area { overflow: visible; }
            /* Add a simple bottom nav for mobile if needed, or stack layout */
        }

        /* --- Cards --- */
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid transparent;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--hover-shadow);
        }

        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-bottom: 2px solid var(--neutral-gray);
            padding-bottom: 0.5rem;
        }

        /* --- Dynamic Status Banner --- */
        #status-banner {
            text-align: center;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: background-color 0.3s, color 0.3s;
        }

        .status-safe {
            background-color: var(--safe-bg);
            color: var(--safe-green);
            border: 2px solid var(--safe-green);
        }

        .status-danger {
            background-color: var(--alert-bg);
            color: var(--alert-red);
            border: 2px solid var(--alert-red);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }

        /* --- Red Flag Checklist --- */
        .checklist-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .checkbox-label {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 0.75rem;
            background: #fff;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .checkbox-label:hover {
            background: var(--neutral-gray);
        }

        .checkbox-label input[type="checkbox"] {
            margin-top: 4px;
            width: 18px;
            height: 18px;
            accent-color: var(--alert-red);
        }

        .checkbox-label.checked {
            background-color: var(--alert-bg);
            border-color: var(--alert-red);
        }

        /* --- GCS Calculator --- */
        .gcs-row {
            margin-bottom: 1rem;
        }
        
        .gcs-label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 0.25rem;
            display: block;
        }

        select.gcs-select {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-size: 1rem;
            background-color: white;
        }

        .gcs-total {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-top: 1rem;
            color: var(--primary-blue);
        }

        .gcs-desc {
            text-align: center;
            color: var(--text-light);
            font-size: 0.9rem;
            margin-top: -0.5rem;
            margin-bottom: 1rem;
        }

        /* --- Info Tables --- */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .info-table th, .info-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .info-table th {
            background-color: var(--neutral-gray);
            font-weight: 600;
            color: var(--text-light);
        }

        .highlight-row {
            background-color: rgba(255, 235, 238, 0.5);
        }

        /* --- Tags --- */
        .tag {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 5px;
        }
        .tag-red { background: var(--alert-bg); color: var(--alert-red); }
        .tag-blue { background: var(--light-blue); color: var(--primary-blue); }

        /* Icons */
        .icon { width: 20px; height: 20px; }
        .icon-lg { width: 32px; height: 32px; }

    </style>
</head>
<body>

<header>
    <div class="brand">
        <!-- Simple SVG Brain Icon -->
        <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--primary-blue);">
            <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
            <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
        </svg>
        <h1>Head Injury Rapid Assessment</h1>
    </div>
    <div class="meta-badge">NICE CKS Based</div>
</header>

<main>
    <aside>
        <button class="nav-btn active" onclick="switchView('dashboard', this)">
            <span class="tag tag-blue">Tool</span> Triage & Assess
        </button>
        <button class="nav-btn" onclick="switchView('discharge', this)">
            <span class="tag tag-blue">Info</span> Discharge Advice
        </button>
        <button class="nav-btn" onclick="switchView('background', this)">
            <span class="tag tag-blue">Ref</span> Background
        </button>
    </aside>

    <div class="content-area">

        <!-- VIEW 1: DASHBOARD & TRIAGE -->
        <div id="dashboard" class="view-section active">
            
            <!-- Dynamic Decision Banner -->
            <div id="status-banner" class="status-safe">
                ASSESSMENT REQUIRED
            </div>

            <div class="dashboard-grid">
                <!-- Left Col: Risk Factors -->
                <div class="col-left">
                    <div class="card" style="border-left: 5px solid var(--alert-red);">
                        <h2>
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                            Red Flags (Immediate Referral)
                        </h2>
                        <p style="margin-bottom: 1rem; font-size: 0.9rem; color: #666;">Select all that apply. Any checked item triggers immediate referral action.</p>
                        
                        <div class="checklist-group">
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>GCS < 15 on initial assessment</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Suspected skull fracture</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Any loss of consciousness</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Focal neurological deficit</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Any vomiting episodes</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Seizure</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Amnesia > 5 mins</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Persistent headache</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Coagulopathy / Anticoagulants</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>High-energy mechanism</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Age > 65 (Specific caution)</span>
                            </label>
                            <label class="checkbox-label" onclick="updateStatus(this)">
                                <input type="checkbox" class="risk-factor">
                                <span>Drug/Alcohol intoxication</span>
                            </label>
                        </div>
                    </div>

                    <div class="card" style="border-left: 5px solid var(--primary-blue);">
                        <h2>
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            Clinical Examination
                        </h2>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <strong>Inspect:</strong>
                                <ul style="padding-left: 1.2rem; font-size: 0.9rem; color: #444;">
                                    <li>Visible scalp trauma</li>
                                    <li>Battle's sign (bruising behind ear)</li>
                                    <li>Raccoon eyes (periorbital)</li>
                                    <li>CSF leak (ear/nose)</li>
                                </ul>
                            </div>
                            <div>
                                <strong>Assess:</strong>
                                <ul style="padding-left: 1.2rem; font-size: 0.9rem; color: #444;">
                                    <li>Cervical spine tenderness</li>
                                    <li>Pupil size/reactivity</li>
                                    <li>Limb power/reflexes</li>
                                    <li>Walking balance</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Col: Tools -->
                <div class="col-right">
                    <!-- GCS Calculator -->
                    <div class="card" style="border-top: 4px solid var(--primary-blue);">
                        <h2>GCS Calculator</h2>
                        <div style="margin-bottom: 10px;">
                            <label class="gcs-label">Eyes</label>
                            <select id="gcs-eye" class="gcs-select" onchange="calcGCS()">
                                <option value="4">4 - Spontaneous</option>
                                <option value="3">3 - To Sound</option>
                                <option value="2">2 - To Pressure</option>
                                <option value="1">1 - None</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label class="gcs-label">Verbal</label>
                            <select id="gcs-verbal" class="gcs-select" onchange="calcGCS()">
                                <option value="5">5 - Oriented</option>
                                <option value="4">4 - Confused</option>
                                <option value="3">3 - Words</option>
                                <option value="2">2 - Sounds</option>
                                <option value="1">1 - None</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label class="gcs-label">Motor</label>
                            <select id="gcs-motor" class="gcs-select" onchange="calcGCS()">
                                <option value="6">6 - Obeys</option>
                                <option value="5">5 - Localizing</option>
                                <option value="4">4 - Normal Flexion</option>
                                <option value="3">3 - Abnormal Flexion</option>
                                <option value="2">2 - Extension</option>
                                <option value="1">1 - None</option>
                            </select>
                        </div>
                        
                        <div class="gcs-total" id="gcs-total-display">15</div>
                        <div class="gcs-desc" id="gcs-text-display">Normal / Mild Injury</div>
                    </div>

                    <!-- Mechanism Guide -->
                    <div class="card">
                        <h2>
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg>
                            High Energy Mechanism
                        </h2>
                        <ul style="font-size: 0.9rem; padding-left: 1.2rem; color: #444;">
                            <li>Fall > 1 metre / 5 stairs</li>
                            <li>High-speed RTA</li>
                            <li>Ejection from vehicle</li>
                            <li>Diving accident</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW 2: DISCHARGE ADVICE -->
        <div id="discharge" class="view-section">
            <div class="dashboard-grid">
                <div class="card" style="border-left: 5px solid var(--safe-green);">
                    <h2 style="color: var(--safe-green);">Safe Discharge Criteria</h2>
                    <p style="margin-bottom: 1rem;">Ensure ALL of the following are met before considering discharge:</p>
                    <table class="info-table">
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>GCS is 15/15.</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>No red flags present (refer to Triage).</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>No clinical suspicion of non-accidental injury.</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>Responsible adult available to stay with patient for 24h.</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>Verbal and written advice provided.</td>
                        </tr>
                    </table>
                </div>

                <div class="card">
                    <h2>Warning Signs for Carer</h2>
                    <p style="margin-bottom: 0.5rem; font-weight: 700; color: var(--alert-red);">Return to ED immediately if:</p>
                    <ul style="font-size: 0.9rem; padding-left: 1.2rem;">
                        <li>Confusion or drowsiness increases.</li>
                        <li>Vomiting occurs.</li>
                        <li>Difficulty waking up.</li>
                        <li>Seizure/fit.</li>
                        <li>Weakness in limbs/face.</li>
                        <li>Headache worsens.</li>
                    </ul>
                </div>
            </div>
            
            <div class="card">
                <h2>Patient Information Sources</h2>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <a href="https://www.headway.org.uk/" target="_blank" class="nav-btn" style="border: 1px solid var(--border-color);">Headway - Brain Injury Assoc.</a>
                    <a href="https://www.brainandspine.org.uk/" target="_blank" class="nav-btn" style="border: 1px solid var(--border-color);">Brain & Spine Foundation</a>
                    <a href="https://www.nhs.uk/conditions/concussion/" target="_blank" class="nav-btn" style="border: 1px solid var(--border-color);">NHS Concussion Advice</a>
                </div>
            </div>
        </div>

        <!-- VIEW 3: BACKGROUND -->
        <div id="background" class="view-section">
            <div class="card">
                <h2>Definition</h2>
                <p style="margin-bottom: 1rem;"><strong>Head Injury:</strong> Any trauma to the head other than superficial injuries to the face.</p>
                <p><strong>Traumatic Brain Injury (TBI):</strong> Head injury resulting in disturbance of normal brain function. Categorized as mild (concussion), moderate, or severe.</p>
            </div>

            <div class="card">
                <h2>Complications to Monitor</h2>
                <table class="info-table">
                    <thead>
                        <tr>
                            <th>Complication</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td> Intracranial Haemorrhage </td>
                            <td> Increased risk if on anticoagulants (Warfarin, DOACs). </td>
                        </tr>
                        <tr>
                            <td> Post-traumatic Seizures </td>
                            <td> Can occur immediately or later. </td>
                        </tr>
                        <tr>
                            <td> Hypopituitarism </td>
                            <td> Particularly after moderate/severe injury. Symptoms non-specific. </td>
                        </tr>
                        <tr>
                            <td> Post-concussion Syndrome </td>
                            <td> Symptoms > 3 months (headache, dizziness, cognitive issues). </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>Return to Play (Sports)</h2>
                <div class="highlight-row" style="padding: 1rem; border-radius: 4px; border-left: 4px solid var(--alert-red);">
                    <strong>CRITICAL:</strong> Continuing to play with concussion increases risk of severe injury, worsened severity, and delayed recovery.
                </div>
                <p style="margin-top: 1rem; font-size: 0.9rem;">Refer to specific guidelines (e.g., England Rugby, FA) regarding graduated return to play protocols.</p>
            </div>
        </div>

    </div>
</main>

<script>
    // --- View Switcher ---
    function switchView(viewId, btn) {
        // Hide all sections
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        // Show selected
        document.getElementById(viewId).classList.add('active');
        
        // Update buttons
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        if(btn) btn.classList.add('active');
    }

    // --- Red Flag Logic ---
    function updateStatus(label) {
        const checkbox = label.querySelector('input');
        // Toggle styling class
        if (checkbox.checked) {
            label.classList.add('checked');
        } else {
            label.classList.remove('checked');
        }

        evaluateRisk();
    }

    function evaluateRisk() {
        const checkboxes = document.querySelectorAll('.risk-factor');
        const banner = document.getElementById('status-banner');
        let hasRisk = false;

        checkboxes.forEach(box => {
            if (box.checked) hasRisk = true;
        });

        if (hasRisk) {
            banner.className = 'status-danger';
            banner.innerHTML = `
                <span style="display:block; font-size: 0.8em; font-weight:400; margin-bottom:5px;">RED FLAG DETECTED</span>
                REFER TO EMERGENCY DEPT
            `;
        } else {
            banner.className = 'status-safe';
            banner.innerHTML = `
                <span style="display:block; font-size: 0.8em; font-weight:400; margin-bottom:5px;">NO RED FLAGS</span>
                CONSIDER DISCHARGE
            `;
        }
    }

    // --- GCS Calculator ---
    function calcGCS() {
        const eye = parseInt(document.getElementById('gcs-eye').value);
        const verbal = parseInt(document.getElementById('gcs-verbal').value);
        const motor = parseInt(document.getElementById('gcs-motor').value);
        
        const total = eye + verbal + motor;
        const display = document.getElementById('gcs-total-display');
        const text = document.getElementById('gcs-text-display');
        
        display.innerText = total;

        if (total < 9) {
            display.style.color = '#d32f2f'; // Red
            text.innerText = "Severe Head Injury";
            text.style.color = '#d32f2f';
            text.style.fontWeight = 'bold';
        } else if (total < 13) {
            display.style.color = '#f57c00'; // Orange
            text.innerText = "Moderate Disability";
            text.style.color = '#f57c00';
            text.style.fontWeight = 'bold';
        } else if (total < 15) {
            display.style.color = '#1976d2'; // Blue
            text.innerText = "Mild Injury";
            text.style.color = '#1976d2';
            text.style.fontWeight = 'normal';
        } else {
            display.style.color = '#2e7d32'; // Green
            text.innerText = "Normal";
            text.style.color = '#2e7d32';
            text.style.fontWeight = 'normal';
        }
        
        // Auto-check Red Flag if GCS < 15
        const gcsCheckbox = document.querySelector('.risk-factor'); // Assuming first one is GCS
        if(total < 15) {
            if(!gcsCheckbox.checked) {
                // We don't auto-check the box programmatically to avoid UX confusion, 
                // but we could highlight the relevant red flag.
                gcsCheckbox.parentElement.style.borderColor = '#d32f2f';
                gcsCheckbox.parentElement.style.backgroundColor = '#ffebee';
            }
        } else {
             gcsCheckbox.parentElement.style.borderColor = '#e0e0e0';
             gcsCheckbox.parentElement.style.backgroundColor = '#fff';
        }
    }

    // Initialize
    calcGCS();

</script>

</body>
</html>
