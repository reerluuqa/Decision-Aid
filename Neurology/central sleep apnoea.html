<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA: Quick-Scan Clinical Reference</title>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0d6efd;
            --primary-dark: #0a58ca;
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #6c757d;
            
            /* Semantic Colors */
            --danger: #dc3545;
            --danger-bg: #ffebee;
            --success: #198754;
            --success-bg: #d1e7dd;
            --warning: #fd7e14;
            --warning-bg: #fff3cd;
            --info: #0dcaf0;
            --info-bg: #cff4fc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
        }

        /* --- Header & Nav --- */
        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-blue));
            color: white;
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-container {
            position: relative;
            min-width: 300px;
        }

        .search-container input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border-radius: 50px;
            border: none;
            outline: none;
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* --- Layout Grid --- */
        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1.5rem;
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(12, 1fr);
        }

        section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* --- Card System --- */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 5px solid transparent;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .card h2, .card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            color: var(--text-main);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-content p {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        /* --- Color Coding (Visual Cues) --- */
        .card.critical { border-left-color: var(--danger); background: linear-gradient(to right, #fff, var(--danger-bg)); }
        .card.action { border-left-color: var(--success); background: linear-gradient(to right, #fff, var(--success-bg)); }
        .card.info { border-left-color: var(--primary-blue); }
        .card.warning { border-left-color: var(--warning); background: linear-gradient(to right, #fff, var(--warning-bg)); }

        .badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-weight: 700;
            text-transform: uppercase;
        }
        .badge-red { background: var(--danger); color: white; }
        .badge-green { background: var(--success); color: white; }
        .badge-blue { background: var(--primary-blue); color: white; }

        /* --- Specific Dashboard Areas --- */
        .dashboard-alert {
            grid-column: span 12;
            display: flex;
            gap: 1.5rem;
            align-items: stretch;
        }

        .quick-fact-grid {
            grid-column: span 8;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .action-list {
            grid-column: span 4;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .risk-grid {
            grid-column: span 12;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .risk-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        .risk-item.strong { border-top: 4px solid var(--danger); }
        .risk-item.weak { border-top: 4px solid var(--warning); }

        .comparison-section {
            grid-column: span 12;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        /* --- Tables & Lists --- */
        .clean-list {
            list-style: none;
        }
        .clean-list li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        .clean-list li::before {
            content: "•";
            color: var(--primary-blue);
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        .clean-list.red-bullets li::before { color: var(--danger); }
        .clean-list.green-bullets li::before { color: var(--success); }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        th {
            background-color: #f8f9fa;
            color: var(--text-muted);
            font-weight: 600;
        }
        tr:hover { background-color: #f1f3f5; }

        /* --- Accordion --- */
        .accordion {
            grid-column: span 12;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .accordion-header {
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        .accordion-content {
            padding: 1.5rem;
            display: none;
            border-top: 1px solid #eee;
        }
        .accordion.active .accordion-content { display: block; }
        .accordion-header i { transition: transform 0.3s; }
        .accordion.active .accordion-header i { transform: rotate(180deg); }

        /* --- Animations --- */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }
        .pulse-alert {
            animation: pulse-red 2s infinite;
        }

        @media (max-width: 992px) {
            .dashboard-alert { flex-direction: column; }
            .quick-fact-grid { grid-column: span 12; }
            .action-list { grid-column: span 12; }
            .comparison-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<header>
    <div class="header-title">
        <h1><i class="fa-solid fa-lungs"></i> CSA Reference</h1>
    </div>
    <div class="search-container">
        <i class="fa-solid fa-search"></i>
        <input type="text" id="searchInput" placeholder="Search symptoms, drugs, or guidelines..." onkeyup="filterContent()">
    </div>
</header>

<main>

    <!-- CRITICAL ALERTS SECTION -->
    <section class="dashboard-alert">
        <div class="card critical pulse-alert" style="flex: 1;">
            <h2><i class="fa-solid fa-triangle-exclamation" style="color: var(--danger)"></i> Red Flag: Heart Failure</h2>
            <div class="card-content">
                <p><strong>CHF + CSA = Poor Prognosis</strong></p>
                <p>CSA occurs in 25%–40% of CHF patients with low LVEF. Presence indicates higher morbidity/mortality.</p>
                <div style="margin-top: 10px;">
                    <span class="badge badge-red">Urgent Screen</span>
                    <span class="badge badge-red">Optimize CHF Meds</span>
                </div>
            </div>
        </div>
        <div class="card critical pulse-alert" style="flex: 1;">
            <h2><i class="fa-solid fa-ban" style="color: var(--danger)"></i> Contraindication</h2>
            <div class="card-content">
                <p><strong>DO NOT USE Adaptive Servo-Ventilation (ASV)</strong></p>
                <p>Contraindicated in symptomatic heart failure with LVEF ≤ 45% (based on SERVE-HF data showing increased mortality).</p>
            </div>
        </div>
    </section>

    <!-- QUICK DEFINITION & RISK GRID -->
    <section class="quick-fact-grid">
        <div class="card info">
            <h2>Definition <span class="badge badge-blue">Core</span></h2>
            <div class="card-content">
                <ul class="clean-list">
                    <li>Repetitive apnoeas/hypopnoeas with <strong>absent or diminished respiratory effort</strong>.</li>
                    <li>Occurs ≥ 5 times/hour.</li>
                    <li>Differentiate from OSA: No paradoxical chest/abdominal movement.</li>
                    <li>Non-hypercapnic (high loop gain) vs Hypercapnic (reduced drive).</li>
                </ul>
            </div>
        </div>
        
        <div class="card action">
            <h2>Immediate Action <span class="badge badge-green">Do First</span></h2>
            <div class="card-content">
                <ul class="clean-list green-bullets">
                    <li><strong>Polysomnography (PSG)</strong> is required for diagnosis.</li>
                    <li>Optimize medical management of underlying condition (CHF, Renal, Stroke).</li>
                    <li>Review meds: Stop/reduce opioids if possible.</li>
                    <li>Assess driving safety (Excessive daytime sleepiness).</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- RISK FACTORS VISUALIZATION -->
    <section>
        <h3 style="grid-column: span 12; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem;">Aetiology & Risk Factors</h3>
        <div class="risk-grid">
            <div class="risk-item strong">
                <i class="fa-solid fa-heart-pulse fa-2x" style="color: var(--danger); margin-bottom: 0.5rem;"></i>
                <h4>Heart Failure</h4>
                <p style="font-size: 0.8rem; color: #666;">Especially LVEF < 40% or Atrial Fibrillation</p>
            </div>
            <div class="risk-item strong">
                <i class="fa-solid fa-brain fa-2x" style="color: var(--danger); margin-bottom: 0.5rem;"></i>
                <h4>Stroke</h4>
                <p style="font-size: 0.8rem; color: #666;">1.4% - 19% prevalence post-stroke</p>
            </div>
            <div class="risk-item strong">
                <i class="fa-solid fa-tablets fa-2x" style="color: var(--danger); margin-bottom: 0.5rem;"></i>
                <h4>Opioid Use</h4>
                <p style="font-size: 0.8rem; color: #666;">Ataxic breathing; dose-dependent</p>
            </div>
            <div class="risk-item strong">
                <i class="fa-solid fa-kidneys fa-2x" style="color: var(--danger); margin-bottom: 0.5rem;"></i>
                <h4>Renal Failure</h4>
                <p style="font-size: 0.8rem; color: #666;">Uraemia & metabolic acidosis</p>
            </div>
            <div class="risk-item weak">
                <i class="fa-solid fa-person-falling fa-2x" style="color: var(--warning); margin-bottom: 0.5rem;"></i>
                <h4>Altitude</h4>
                <p style="font-size: 0.8rem; color: #666;">Hypobaric hypoxia > 2500m</p>
            </div>
            <div class="risk-item weak">
                <i class="fa-solid fa-venus-mars fa-2x" style="color: var(--warning); margin-bottom: 0.5rem;"></i>
                <h4>Demographics</h4>
                <p style="font-size: 0.8rem; color: #666;">Male, Age > 60</p>
            </div>
        </div>
    </section>

    <!-- DIAGNOSIS VS MANAGEMENT SPLIT -->
    <section class="comparison-section">
        <!-- Diagnosis Column -->
        <div class="card info">
            <h2><i class="fa-solid fa-stethoscope"></i> Diagnosis Approach</h2>
            
            <h4 style="color: var(--primary-blue); margin-top:1rem;">History Clues</h4>
            <ul class="clean-list">
                <li><strong>Insomnia:</strong> Especially sleep-maintenance (difficulty returning to sleep).</li>
                <li><strong>Witnessed:</strong> Partner sees periodic breathing or apnoea.</li>
                <li><strong>Wakefulness:</strong> Periodic breathing while awake (rare, specific).</li>
                <li><strong>Context:</strong> Recent altitude ascent or opioid start.</li>
            </ul>

            <h4 style="color: var(--primary-blue); margin-top:1rem;">Investigations</h4>
            <table>
                <tr>
                    <th>Test</th>
                    <th>Key Finding</th>
                </tr>
                <tr>
                    <td><strong>Polysomnogram</strong></td>
                    <td>≥5 central events/hr; >50% of events central. Cheyne-Stokes pattern (crescendo-decrescendo).</td>
                </tr>
                <tr>
                    <td><strong>ECG</strong></td>
                    <td>Atrial fibrillation, Ischaemia, Cardiomyopathy.</td>
                </tr>
                <tr>
                    <td><strong>Echocardiogram</strong></td>
                    <td>LVEF ≤40% (Rules out ASV). Diastolic dysfunction.</td>
                </tr>
                <tr>
                    <td><strong>TSH / Creatinine / IGF-1</strong></td>
                    <td>Screen for Hypothyroidism, Renal failure, Acromegaly.</td>
                </tr>
            </table>
        </div>

        <!-- Management Column -->
        <div class="card action">
            <h2><i class="fa-solid fa-notes-medical"></i> Management Algorithm</h2>
            
            <div style="margin-bottom: 1.5rem; border-bottom: 1px solid #eee; padding-bottom: 1rem;">
                <h4 style="color: var(--success);"><i class="fa-solid fa-heart"></i> CSA with Cheyne-Stokes (CHF)</h4>
                <ul class="clean-list green-bullets">
                    <li><strong>Step 1:</strong> Optimize heart failure therapy (Fluids, Meds).</li>
                    <li><strong>Step 2:</strong> CPAP (Improves cardiac function, quality of life).</li>
                    <li><strong>Contraindication:</strong> ASV if LVEF ≤45% (Increased mortality).</li>
                </ul>
            </div>

            <div style="margin-bottom: 1.5rem; border-bottom: 1px solid #eee; padding-bottom: 1rem;">
                <h4 style="color: var(--success);"><i class="fa-solid fa-user-doctor"></i> Primary / Idiopathic CSA</h4>
                <ul class="clean-list green-bullets">
                    <li><strong>Trial:</strong> CPAP first.</li>
                    <li><strong>Alternative:</strong> ASV (more consistent control than CPAP).</li>
                    <li><strong>Refractory:</strong> Consider Acetazolamide (off-label) or Zolpidem.</li>
                </ul>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--success);"><i class="fa-solid fa-capsules"></i> Opioid-Induced CSA</h4>
                <ul class="clean-list green-bullets">
                    <li><strong>Primary:</strong> Reduce opioid dose if possible.</li>
                    <li><strong>Therapy:</strong> PAP therapy or Bilevel PAP with backup rate.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- DETAILED CRITERIA (Collapsible) -->
    <div class="accordion" id="criteriaAccordion">
        <div class="accordion-header" onclick="toggleAccordion()">
            <span><i class="fa-solid fa-list-check"></i> Detailed Diagnostic Criteria (ICSD-3)</span>
            <i class="fa-solid fa-chevron-down"></i>
        </div>
        <div class="accordion-content">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                
                <div>
                    <h4 style="margin-bottom:0.5rem; color:var(--text-main);">Primary CSA</h4>
                    <ul class="clean-list">
                        <li>≥5 central events/hour (>50% of total events).</li>
                        <li>No Cheyne-Stokes pattern.</li>
                        <li>No evidence of hypoventilation.</li>
                        <li>No better explained by other disorder/meds.</li>
                    </ul>
                </div>

                <div>
                    <h4 style="margin-bottom:0.5rem; color:var(--text-main);">CSA with Cheyne-Stokes</h4>
                    <ul class="clean-list">
                        <li>Crescendo-decrescendo tidal volume.</li>
                        <li>Cycle length ≥ 40 seconds.</li>
                        <li>Associated with CHF, Stroke, or Renal Failure.</li>
                    </ul>
                </div>

                <div>
                    <h4 style="margin-bottom:0.5rem; color:var(--text-main);">High-Altitude Periodic Breathing</h4>
                    <ul class="clean-list">
                        <li>Recent ascent (>2500m or 1500m in susceptible).</li>
                        <li>Recurrent central apnoeas alternating with hyperpnoea.</li>
                        <li>Cycle length 12–34 seconds.</li>
                    </ul>
                </div>

                <div>
                    <h4 style="margin-bottom:0.5rem; color:var(--text-main);">Treatment-Emergent CSA</h4>
                    <ul class="clean-list">
                        <li>Diagnosis: Predominantly obstructive events.</li>
                        <li>On PAP therapy: Obstructive resolve, Central emerge/persist (≥5/hr).</li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <!-- DIFFERENTIALS (Table) -->
    <section style="grid-column: span 12;">
        <div class="card">
            <h2>Differentials</h2>
            <table>
                <thead>
                    <tr>
                        <th style="width: 20%;">Condition</th>
                        <th style="width: 40%;">Differentiating Signs</th>
                        <th style="width: 40%;">Key Test Differentiator</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Obstructive Sleep Apnoea (OSA)</strong></td>
                        <td>Snoring, High BMI, Crowded oropharynx, Short neck. (Note: Can co-exist)</td>
                        <td>PSG: Paradoxical chest/abdominal movements during apnoea.</td>
                    </tr>
                    <tr>
                        <td><strong>Sleep Hypoventilation</strong></td>
                        <td>Obesity hypoventilation, Neuromuscular disorder.</td>
                        <td>ABGs: Shows Hypercapnia (CSA usually hypocapnic/eucapnic).</td>
                    </tr>
                    <tr>
                        <td><strong>Depression</strong></td>
                        <td>Early morning awakening, Anhedonia.</td>
                        <td>Standardized depression scales (Beck, PHQ-9).</td>
                    </tr>
                    <tr>
                        <td><strong>Paroxysmal Nocturnal Dyspnoea (CHF)</strong></td>
                        <td>Orthopnoea often present.</td>
                        <td>Optimize CHF meds. If symptoms persist -> PSG.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

</main>

<footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.85rem; border-top: 1px solid #e0e0e0; margin-top: 2rem;">
    <p>Based on BMJ Best Practice topic: Central sleep apnoea (Last updated: Dec 24, 2024).</p>
    <p>Disclaimer: This tool is for reference only. Clinical decisions should be based on professional judgment and patient context.</p>
</footer>

<script>
    // Filter function for the search bar
    function filterContent() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toLowerCase();
        const cards = document.querySelectorAll('.card, .risk-item');

        cards.forEach(card => {
            const text = card.textContent || card.innerText;
            if (text.toLowerCase().indexOf(filter) > -1) {
                card.style.display = "";
            } else {
                card.style.display = "none";
            }
        });

        // Also show section headers if any child is visible (simple logic)
        // For this simple app, hiding cards is usually sufficient
    }

    // Accordion Toggle
    function toggleAccordion() {
        const acc = document.getElementById('criteriaAccordion');
        acc.classList.toggle('active');
    }

    // Add subtle entrance animations
    document.addEventListener("DOMContentLoaded", () => {
        const cards = document.querySelectorAll('.card, .risk-item');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
                card.style.transition = 'opacity 0.5s ease, transform 0.5s ease, box-shadow 0.2s';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 50);
        });
    });
</script>

</body>
</html>