<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vestibular Neuronitis | Clinical Quick-Scan Tool</title>
    <style>
        :root {
            /* Clinical Color Palette */
            --color-danger: #d32f2f;
            --color-danger-bg: #ffebee;
            --color-warning: #ed6c02;
            --color-warning-bg: #fff3e0;
            --color-success: #2e7d32;
            --color-success-bg: #e8f5e9;
            --color-primary: #0288d1;
            --color-primary-bg: #e1f5fe;
            --color-neutral: #455a64;
            --color-bg: #f4f6f8;
            --color-card-bg: #ffffff;
            --color-border: #cfd8dc;
            
            /* Typography */
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --shadow-card: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
            --shadow-hover: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
            --radius-md: 8px;
            --radius-lg: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--color-bg);
            color: var(--color-neutral);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Header --- */
        header {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand h1 {
            font-size: 1.25rem;
            color: var(--color-neutral);
            font-weight: 700;
        }

        .badge-topic {
            background: var(--color-primary-bg);
            color: var(--color-primary);
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* --- Layout --- */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            display: grid;
            gap: 1.5rem;
            /* Default single column mobile, handled by media queries below */
        }

        /* --- Section Components --- */
        section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-neutral);
            margin-bottom: 0.5rem;
            border-left: 4px solid transparent;
            padding-left: 12px;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .card {
            background: var(--color-card-bg);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-card);
            border: 1px solid transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* --- Visual Cues --- */
        .border-danger { border-left-color: var(--color-danger); }
        .border-success { border-left-color: var(--color-success); }
        .border-info { border-left-color: var(--color-primary); }

        .bg-danger-light { background-color: var(--color-danger-bg); border-color: var(--color-danger) !important; }
        .bg-success-light { background-color: var(--color-success-bg); border-color: var(--color-success) !important; }
        .bg-info-light { background-color: var(--color-primary-bg); border-color: var(--color-primary) !important; }

        /* --- Red Flags / Urgent --- */
        .urgent-alert {
            background-color: #ffebee;
            border: 1px solid #ffcdd2;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }

        .urgent-icon {
            background: var(--color-danger);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .urgent-content h2 {
            color: var(--color-danger);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .urgent-list {
            list-style: none;
        }

        .urgent-list li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            color: #b71c1c;
            font-weight: 500;
        }

        .urgent-list li::before {
            content: "⚠️";
            position: absolute;
            left: 0;
            top: 2px;
            font-size: 0.9rem;
        }

        /* --- Key Features (Diagnostic) --- */
        .feature-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid #eee;
        }
        .feature-row:last-child { border-bottom: none; }
        
        .feature-label { font-weight: 600; color: var(--color-neutral); }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 700;
        }
        .status-present { background: var(--color-danger-bg); color: var(--color-danger); }
        .status-absent { background: var(--color-success-bg); color: var(--color-success); }

        /* --- Head Impulse Interactive Tool --- */
        .interactive-demo {
            background: #263238;
            color: #eceff1;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            text-align: center;
        }
        
        .canvas-container {
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-bottom: 1rem;
        }

        .face-graphic {
            width: 80px;
            height: 80px;
            background: #fff;
            border-radius: 50%;
            position: relative;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 4px solid #0288d1;
        }

        .eye {
            width: 12px;
            height: 12px;
            background: #000;
            border-radius: 50%;
            position: absolute;
            top: 30px;
            transition: transform 0.1s;
        }
        .eye.left { left: 20px; }
        .eye.right { right: 20px; }

        .btn-action {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s;
        }
        .btn-action:hover { background: #0277bd; }
        
        .demo-text {
            font-size: 0.9rem;
            min-height: 2.5em;
        }

        /* --- Medication Tabs --- */
        .tabs {
            display: flex;
            gap: 1rem;
            border-bottom: 1px solid var(--color-border);
            margin-bottom: 1.5rem;
            overflow-x: auto;
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--color-neutral);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .med-card {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .med-card.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dose-highlight {
            background: var(--color-primary-bg);
            padding: 12px;
            border-radius: var(--radius-md);
            font-weight: 700;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .warning-box {
            font-size: 0.85rem;
            color: #d32f2f;
            background: #ffebee;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* --- Timeline / Management --- */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        .timeline-item {
            display: flex;
            gap: 1rem;
            padding-bottom: 1.5rem;
            position: relative;
        }
        
        .timeline-line {
            position: absolute;
            left: 14px;
            top: 30px;
            bottom: 0;
            width: 2px;
            background: #ddd;
        }
        .timeline-item:last-child .timeline-line { display: none; }

        .timeline-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--color-neutral);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
            z-index: 1;
            flex-shrink: 0;
        }

        .timeline-content {
            background: #fff;
            padding: 1rem;
            border-radius: var(--radius-md);
            border: 1px solid #eee;
            flex-grow: 1;
        }

        .timeline-time {
            font-size: 0.8rem;
            color: #78909c;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        /* --- Footer --- */
        footer {
            margin-top: 2rem;
            text-align: center;
            padding: 2rem;
            color: #90a4ae;
            font-size: 0.8rem;
            border-top: 1px solid var(--color-border);
        }

        /* --- Responsive Tweaks --- */
        @media (min-width: 768px) {
            .layout-split {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 1.5rem;
                align-items: start;
            }
            main {
                display: block; /* Reset to block for custom grids */
            }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#0288d1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 12h5l2 9 6-17 4 10h3"></path> <!-- Heartbeat/Activity icon -->
        </svg>
        <h1>Vestibular Neuronitis</h1>
        <span class="badge-topic">CKS Reference</span>
    </div>
    <div style="font-size: 0.85rem; color: #78909c;">Last Rev: Jan 2023</div>
</header>

<main>
    
    <!-- RED FLAGS: IMMEDIATE VISIBILITY -->
    <section id="red-flags">
        <div class="urgent-alert">
            <div class="urgent-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </div>
            <div class="urgent-content">
                <h2>Immediate Action / Red Flags</h2>
                <ul class="urgent-list">
                    <li><strong>Admit</strong> if severe nausea/vomiting prevents oral fluid intake.</li>
                    <li><strong>Urgent Refer</strong> if neurological deficits present (diplopia, dysarthria, weakness) - suspect Stroke/Central cause.</li>
                    <li><strong>Stop Driving:</strong> DVLA requires cessation if "sudden unprovoked disabling dizziness". Inform patient.</li>
                    <li><strong>Worsening symptoms:</strong> Consider alternative diagnosis (e.g., BPPV, Meniere's).</li>
                </ul>
            </div>
        </div>
    </section>

    <div class="layout-split">
        
        <!-- LEFT COLUMN: DIAGNOSIS & EXAM -->
        <div class="col-main">
            <section>
                <div class="section-header border-info">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
                    <span>Clinical Diagnosis (Quick Scan)</span>
                </div>
                
                <div class="card-grid">
                    <!-- Definition Card -->
                    <div class="card">
                        <h3 style="margin-bottom:1rem; color:var(--color-primary);">Presentation</h3>
                        <div class="feature-row">
                            <span class="feature-label">Vertigo</span>
                            <span class="status-badge status-present">Spontaneous, Rotational</span>
                        </div>
                        <div class="feature-row">
                            <span class="feature-label">Hearing Loss</span>
                            <span class="status-badge status-absent">ABSENT (Key)</span>
                        </div>
                        <div class="feature-row">
                            <span class="feature-label">Tinnitus</span>
                            <span class="status-badge status-absent">ABSENT</span>
                        </div>
                        <div class="feature-row">
                            <span class="feature-label">Neuro Deficits</span>
                            <span class="status-badge status-absent">ABSENT</span>
                        </div>
                        <div class="feature-row">
                            <span class="feature-label">Duration</span>
                            <span class="status-badge" style="background:#eee; color:#333;">Days to Weeks</span>
                        </div>
                    </div>

                    <!-- Interactive Head Impulse Test -->
                    <div class="card interactive-demo">
                        <h3 style="color:#fff; margin-bottom:0.5rem; text-align:left;">Head Impulse Test (HIT)</h3>
                        <div class="canvas-container">
                            <div class="face-graphic" id="hitFace">
                                <div class="eye left" id="eyeLeft"></div>
                                <div class="eye right" id="eyeRight"></div>
                            </div>
                        </div>
                        <p class="demo-text" id="hitResult">Click "Simulate" to see Positive (Peripheral) vs Normal response.</p>
                        <div style="display:flex; gap:10px; justify-content:center; margin-top:1rem;">
                            <button class="btn-action" onclick="simulateHIT('positive')">Simulate Positive</button>
                            <button class="btn-action" style="background:#78909c;" onclick="simulateHIT('normal')">Simulate Normal</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MANAGEMENT TIMELINE -->
            <section>
                <div class="section-header border-success">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>
                    <span>Management Pathway</span>
                </div>
                <div class="card">
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-icon" style="background:var(--color-danger);">1</div>
                            <div class="timeline-line"></div>
                            <div class="timeline-content">
                                <div class="timeline-time">Acute Phase (0-3 Days)</div>
                                <p><strong>Severe Symptoms?</strong> Bed rest initially. Resume activity ASAP as tolerated.</p>
                                <p><strong>Medication:</strong> Buccal/IM Prochlorperazine or IM Cyclizine for severe vomiting. Oral for milder symptoms. Limit to <strong>3 days</strong> max to prevent delaying central compensation.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-icon" style="background:var(--color-warning);">2</div>
                            <div class="timeline-line"></div>
                            <div class="timeline-content">
                                <div class="timeline-time">Sub-acute (3 Days - 1 Week)</div>
                                <p><strong>Stop Vestibular Suppressants.</strong> Encourage normal head movements.</p>
                                <p><strong>Review:</strong> If no improvement after 1 week -> <strong>Urgent Referral</strong> to ENT/Audiovestibular Physician.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-icon" style="background:var(--color-success);">3</div>
                            <div class="timeline-content">
                                <div class="timeline-time">Recovery (6 Weeks+)</div>
                                <p>Most recover by 6 weeks. If symptoms persist >6 weeks -> Refer for <strong>Vestibular Rehabilitation</strong>.</p>
                                <p><strong>Safety:</strong> Warn regarding falls risk and driving restrictions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- RIGHT COLUMN: MEDS & REFERRAL -->
        <div class="col-sidebar">
            <section>
                <div class="section-header border-neutral" style="border-left-color:#455a64;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="6" width="20" height="12" rx="2"></rect><circle cx="12" cy="12" r="2"></circle><path d="M6 12h.01M18 12h.01"></path></svg>
                    <span>Prescribing</span>
                </div>
                
                <div class="card">
                    <!-- Tab Navigation -->
                    <div class="tabs">
                        <button class="tab-btn active" onclick="openTab(event, 'proc')">Prochlorperazine</button>
                        <button class="tab-btn" onclick="openTab(event, 'cinn')">Cinnarizine</button>
                        <button class="tab-btn" onclick="openTab(event, 'cycl')">Cyclizine</button>
                    </div>

                    <!-- Prochlorperazine Content -->
                    <div id="proc" class="med-card active">
                        <div class="dose-highlight">5mg TDS (Oral)</div>
                        <p><strong>Alternative:</strong> Buccal 3-6mg (up to 2x daily) or IM (deep).</p>
                        <hr style="margin:1rem 0; border:0; border-top:1px solid #eee;">
                        <ul style="padding-left:20px; font-size:0.9rem;">
                            <li><strong>Caution:</strong> Parkinsonism, Elderly.</li>
                            <li><strong>Interaction:</strong> Potentiates QT prolongation.</li>
                            <li><strong>Warning:</strong> May cause drowsiness. Do not drive.</li>
                        </ul>
                    </div>

                    <!-- Cinnarizine Content -->
                    <div id="cinn" class="med-card">
                        <div class="dose-highlight">30mg TDS (Oral)</div>
                        <hr style="margin:1rem 0; border:0; border-top:1px solid #eee;">
                        <ul style="padding-left:20px; font-size:0.9rem;">
                            <li><strong>Caution:</strong> Parkinson's, Porphyria, Liver Disease.</li>
                            <li><strong>Warning:</strong> Can cause weight gain & dyspepsia.</li>
                        </ul>
                    </div>

                    <!-- Cyclizine Content -->
                    <div id="cycl" class="med-card">
                        <div class="dose-highlight">50mg TDS (Oral/IM)</div>
                        <hr style="margin:1rem 0; border:0; border-top:1px solid #eee;">
                        <ul style="padding-left:20px; font-size:0.9rem;">
                            <li><strong>Caution:</strong> Severe Heart Failure, MI, Phaeochromocytoma.</li>
                            <li><strong>Warning:</strong> Monitor if concurrent Ototoxic drugs (masks signs).</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        <span><strong>Note:</strong> Treatment > 3 days delays recovery.</span>
                    </div>
                </div>
            </section>

            <section>
                <div class="section-header border-neutral" style="border-left-color:#455a64;">
                    <span>Referral Criteria</span>
                </div>
                <div class="card bg-success-light">
                    <ul style="padding-left:20px; font-size:0.9rem;">
                        <li style="margin-bottom:8px;"><strong>Urgent (1 Week):</strong> No improvement with treatment or atypical symptoms.</li>
                        <li style="margin-bottom:8px;"><strong>Routine (>6 Weeks):</strong> Persistent symptoms for Vestibular Rehab.</li>
                        <li><strong>Specialist:</strong> Audiovestibular Physician or Neurologist.</li>
                    </ul>
                </div>
            </section>
            
            <!-- Prognosis Mini Card -->
            <section>
                <div class="card" style="background:#eceff1; border:none;">
                    <h4 style="color:#455a64; margin-bottom:4px;">Prognosis</h4>
                    <p style="font-size:0.9rem;">Good. Majority recover in 6 weeks via central compensation.</p>
                    <p style="font-size:0.8rem; color:#78909c; margin-top:4px;">Complications: PPPD (25%), BPPV (10-15%).</p>
                </div>
            </section>

        </div>
    </div>

</main>

<footer>
    <p><strong>Clinical Disclaimer:</strong> This tool is for reference purposes only based on NICE CKS data (Jan 2023). <br>Always use clinical judgment and consult current guidelines.</p>
    <p>&copy; 2023 Clarity Informatics / NICE Adaptation</p>
</footer>

<script>
    // --- Tab Logic for Medications ---
    function openTab(evt, medId) {
        var i, medCards, tabBtns;
        
        // Hide all cards
        medCards = document.getElementsByClassName("med-card");
        for (i = 0; i < medCards.length; i++) {
            medCards[i].classList.remove("active");
            medCards[i].style.display = "none";
        }

        // Deactivate all buttons
        tabBtns = document.getElementsByClassName("tab-btn");
        for (i = 0; i < tabBtns.length; i++) {
            tabBtns[i].classList.remove("active");
        }

        // Show current card and activate button
        document.getElementById(medId).style.display = "block";
        // Small timeout to allow display:block to apply before adding class for animation
        setTimeout(() => {
            document.getElementById(medId).classList.add("active");
        }, 10);
        evt.currentTarget.classList.add("active");
    }

    // --- Head Impulse Test Interactive Simulation ---
    function simulateHIT(type) {
        const face = document.getElementById('hitFace');
        const eyeLeft = document.getElementById('eyeLeft');
        const eyeRight = document.getElementById('eyeRight');
        const resultText = document.getElementById('hitResult');

        // Reset
        face.style.transform = 'translateX(0) rotate(0deg)';
        eyeLeft.style.transform = 'translateX(0)';
        eyeRight.style.transform = 'translateX(0)';
        resultText.textContent = "Simulating...";
        resultText.style.color = "#eceff1";

        setTimeout(() => {
            if (type === 'positive') {
                // Move Head LEFT rapidly
                face.style.transform = 'translateX(-30px) rotate(-10deg)';
                
                // Eyes stay fixed on target (dragged off, then saccade back)
                // In a simple CSS demo, we simulate the "catch-up" saccade
                eyeLeft.style.transform = 'translateX(15px)'; // Eyes look right (stay on examiner)
                eyeRight.style.transform = 'translateX(15px)';
                
                setTimeout(() => {
                    // Corrective Saccade
                    eyeLeft.style.transition = "transform 0.1s";
                    eyeRight.style.transition = "transform 0.1s";
                    eyeLeft.style.transform = 'translateX(0)';
                    eyeRight.style.transform = 'translateX(0)';
                    
                    resultText.innerHTML = "<span style='color:#ef5350'>POSITIVE:</span> Eyes dragged off target, then corrective saccade.<br>Suggests Peripheral Vestibular Deficit.";
                }, 400);

            } else {
                // Normal
                face.style.transform = 'translateX(-30px) rotate(-10deg)';
                
                // Eyes move WITH head (VOR working)
                eyeLeft.style.transform = 'translateX(-15px)';
                eyeRight.style.transform = 'translateX(-15px)';

                setTimeout(() => {
                    resultText.innerHTML = "<span style='color:#66bb6a'>NEGATIVE:</span> Eyes move smoothly with head.<br>VOR intact (or Central lesion).";
                }, 400);
            }
        }, 100);
    }
</script>

</body>
</html>