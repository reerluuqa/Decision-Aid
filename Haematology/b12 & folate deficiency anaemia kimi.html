<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B12 & Folate Deficiency - Clinical Algorithm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #2d3748;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 25px;
        }

        .main-content {
            flex: 1;
            padding-right: 280px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 6px solid #e53e3e;
        }

        .header h1 {
            font-size: 2.2em;
            color: #2d3748;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header .subtitle {
            color: #718096;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .header .meta {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            font-size: 0.9em;
            color: #718096;
        }

        .meta span {
            background: #f7fafc;
            padding: 5px 12px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
        }

        .card {
            background: white;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 6px solid;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s forwards;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card:nth-child(2) { animation-delay: 0.1s; border-left-color: #3182ce; }
        .card:nth-child(3) { animation-delay: 0.2s; border-left-color: #805ad5; }
        .card:nth-child(4) { animation-delay: 0.3s; border-left-color: #38a169; }
        .card:nth-child(5) { animation-delay: 0.4s; border-left-color: #dd6b20; }

        .card-header {
            padding: 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            transition: all 0.3s ease;
        }

        .card-header:hover {
            background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.4em;
            font-weight: 600;
            color: #2d3748;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
        }

        .card:nth-child(2) .card-icon { background: #3182ce; }
        .card:nth-child(3) .card-icon { background: #805ad5; }
        .card:nth-child(4) .card-icon { background: #38a169; }
        .card:nth-child(5) .card-icon { background: #dd6b20; }

        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
            color: #718096;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.expanded .card-content {
            max-height: 2000px;
        }

        .card-body {
            padding: 25px;
        }

        .section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section ul {
            list-style: none;
            padding-left: 0;
        }

        .section li {
            background: #f7fafc;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid #cbd5e0;
            transition: all 0.2s ease;
        }

        .section li:hover {
            background: #edf2f7;
            transform: translateX(5px);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-left: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .badge-red {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: white;
        }

        .badge-amber {
            background: linear-gradient(135deg, #dd6b20 0%, #c05621 100%);
            color: white;
        }

        .badge-green {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            color: white;
        }

        .sidebar {
            position: fixed;
            right: 20px;
            top: 20px;
            width: 250px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            height: calc(100vh - 40px);
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .sidebar h3 {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .progress-item:hover {
            background: #f7fafc;
        }

        .progress-item.active {
            background: linear-gradient(135deg, #3182ce 0%, #805ad5 100%);
            color: white;
            border-left-color: #2b6cb0;
        }

        .progress-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            background: #e2e8f0;
            transition: all 0.3s ease;
        }

        .progress-item.active .progress-icon {
            background: rgba(255,255,255,0.2);
        }

        .progress-text {
            flex: 1;
            font-size: 0.9em;
        }

        .progress-bar {
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3182ce 0%, #38a169 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        .important-box {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border: 1px solid #feb2b2;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .important-box.urgent {
            background: linear-gradient(135deg, #c53030 0%, #e53e3e 100%);
            color: white;
            border-color: #c53030;
        }

        .important-box.info {
            background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
            border-color: #90cdf4;
        }

        .important-box.success {
            background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
            border-color: #9ae6b4;
        }

        .dose-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .dose-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                padding: 15px;
            }

            .main-content {
                padding-right: 0;
            }

            .sidebar {
                position: relative;
                right: auto;
                top: auto;
                width: 100%;
                height: auto;
                margin-bottom: 25px;
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .print-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #3182ce 0%, #805ad5 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .print-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        @media print {
            body { background: white; }
            .sidebar, .print-button { display: none; }
            .main-content { padding-right: 0; }
            .card { box-shadow: none; border: 1px solid #ddd; }
        }
    </style>
</head>
<body>
    <div class="container">
        <main class="main-content">
            <div class="header">
                <h1>
                    <span>ü©∏</span>
                    B12 & Folate Deficiency Anemia
                </h1>
                <div class="subtitle">Interactive Clinical Algorithm - NICE CKS (March 2024)</div>
                <div class="meta">
                    <span>üìÖ March 2024</span>
                    <span>üë• Adults 16+ years</span>
                    <span>üá¨üáß NHS Primary Care</span>
                    <span>üìä Macrocytic Anemia</span>
                </div>
            </div>

            <!-- Assessment Card -->
            <div class="card" id="assessment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">ü©∫</div>
                        <span>Assessment</span>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="section">
                            <h3>üìã History</h3>
                            <ul>
                                <li><strong>Symptoms:</strong> Fatigue, dyspnea, palpitations, headache, cognitive changes, visual disturbance</li>
                                <li><strong>Diet:</strong> Vegan/vegetarian status</li>
                                <li><strong>Autoimmune:</strong> Personal/family history of autoimmune disease</li>
                                <li><strong>Drug history:</strong> Metformin, PPIs, H2-blockers, anticonvulsants</li>
                                <li><strong>GI symptoms:</strong> Malabsorption, surgery, IBD</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>üîç Examination</h3>
                            <ul>
                                <li><strong>General:</strong> Pallor, lemon-yellow jaundice, weight loss</li>
                                <li><strong>Mucosal:</strong> Glossitis (smooth, shiny tongue), angular cheilosis</li>
                                <li><strong>Cardiac:</strong> Tachycardia, heart murmurs, angina/heart failure (elderly)</li>
                                <li><strong>Neurological:</strong> Paresthesia, ataxia, loss of sensation, weakness</li>
                                <li><strong>Skin:</strong> Brown pigmentation of nail beds/creases</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>üß™ Initial Investigations</h3>
                            <div class="important-box info">
                                <strong>Do not delay B12 treatment</strong> if neurological symptoms present while awaiting results
                            </div>
                            <ul>
                                <li><strong>FBC:</strong> MCV, hemoglobin, hematocrit, blood film</li>
                                <li><strong>B12 level:</strong> Total (serum cobalamin) OR active (holotranscobalamin)</li>
                                <li><strong>Folate level:</strong> Serum folate (check B12 first)</li>
                                <li><strong>Additional:</strong> LFTs, thyroid function (if indicated)</li>
                                <li><strong>Ask about:</strong> OTC B12 supplements (type & dose)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Card -->
            <div class="card" id="diagnosis">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üî¨</div>
                        <span>Diagnosis</span>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="section">
                            <h3>üìä Interpreting Results</h3>
                            <div class="dose-box">
                                <div class="dose-title">üéØ B12 Thresholds (NICE)</div>
                                <ul>
                                    <li><strong>Confirmed deficiency:</strong> &lt;180 ng/L (&lt;133 pmol/L) <span class="badge badge-red">Treat</span></li>
                                    <li><strong>Possible deficiency:</strong> 180-350 ng/L (133-258 pmol/L)</li>
                                    <li><strong>Unlikely deficiency:</strong> &gt;350 ng/L (&gt;258 pmol/L)</li>
                                    <li><strong>Active B12:</strong> &lt;25 pmol/L = deficient</li>
                                </ul>
                            </div>
                            <ul>
                                <li><strong>MCV:</strong> &gt;100 fL indicates macrocytosis <span class="badge badge-amber">Note: May be normal with iron deficiency</span></li>
                                <li><strong>Blood film:</strong> Hypersegmented neutrophils (&gt;5% with ‚â•5 lobes), oval macrocytes</li>
                                <li><strong>Folate:</strong> &lt;7 nmol/L (3 Œºg/L) suggests deficiency</li>
                                <li><strong>Red cell folate:</strong> &lt;340 nmol/L if serum folate normal</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>üîç Confirm Underlying Cause</h3>
                            <ul>
                                <li><strong>Anti-IF antibodies:</strong> If autoimmune gastritis suspected <span class="badge badge-amber">50-70% sensitivity</span></li>
                                <li><strong>Coeliac screen:</strong> If malabsorption suspected (anti-tTG/EMA antibodies)</li>
                                <li><strong>Pregnancy:</strong> Use active B12 test; treat without waiting for results if autoimmune suspected</li>
                                <li><strong>Nitrous oxide:</strong> Use MMA/plasma homocysteine (secondary care)</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>‚ùì Differential Diagnosis</h3>
                            <div class="important-box">
                                <strong>Other causes of macrocytosis:</strong> Alcohol, drugs (hydroxycarbamide, methotrexate), liver disease, hypothyroidism, pregnancy, smoking, myelodysplasia
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Card -->
            <div class="card" id="treatment">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üíä</div>
                        <span>Treatment</span>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="section">
                            <h3>üö® With Neurological Involvement <span class="badge badge-red">URGENT</span></h3>
                            <div class="important-box urgent">
                                <strong>Seek urgent specialist advice</strong> from neurologist/haematologist
                            </div>
                            <div class="dose-box">
                                <div class="dose-title">üíâ Hydroxocobalamin Regimen</div>
                                <ul>
                                    <li><strong>Initial:</strong> 1 mg IM alternate days until no further improvement</li>
                                    <li><strong>Maintenance:</strong> 1 mg IM every 2 months for life</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3>üíä B12 Deficiency (No Neurology)</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #3182ce; margin-bottom: 10px;">üé® If Diet-Related</h4>
                                <ul>
                                    <li><strong>Option 1:</strong> Oral cyanocobalamin 50-150 Œºg daily between meals</li>
                                    <li><strong>Option 2:</strong> Hydroxocobalamin 1 mg IM twice yearly</li>
                                    <li><strong>Vegans:</strong> Lifelong treatment likely <span class="badge badge-green">Reversible if diet corrected</span></li>
                                </ul>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #dd6b20; margin-bottom: 10px;">üíä If Medication-Induced</h4>
                                <ul>
                                    <li><strong>Continue B12 replacement</strong> while medication needed</li>
                                    <li>Review if medication can be stopped/changed</li>
                                    <li>Re-assess if symptoms resolve after stopping causative drug</li>
                                </ul>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #e53e3e; margin-bottom: 10px;">üéà Nitrous Oxide Use</h4>
                                <ul>
                                    <li><strong>Advise cessation</strong> of recreational use <span class="badge badge-amber">Essential</span></li>
                                    <li>Oral or IM B12 replacement based on preference</li>
                                    <li>Review need if use stopped and symptoms resolved</li>
                                </ul>
                            </div>

                            <div class="dose-box">
                                <div class="dose-title">üìã Standard IM Regimen (Unknown Cause)</div>
                                <ul>
                                    <li><strong>Loading:</strong> 1 mg IM 3x weekly for 2 weeks</li>
                                    <li><strong>Maintenance (non-diet):</strong> 1 mg IM every 2-3 months for life</li>
                                    <li><strong>Alternative:</strong> Oral 500-1000 Œºg daily</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3>üçÉ Folate Deficiency</h3>
                            <div class="important-box info">
                                <strong>Always check B12 BEFORE starting folic acid</strong> - can mask B12 deficiency and cause neurological progression
                            </div>
                            <div class="dose-box">
                                <div class="dose-title">üíä Folic Acid Prescribing</div>
                                <ul>
                                    <li><strong>Dose:</strong> 5 mg oral daily</li>
                                    <li><strong>Duration:</strong> 4 months (or lifelong if cause persistent)</li>
                                    <li><strong>Dietary advice:</strong> Asparagus, broccoli, brown rice, Brussels sprouts, chickpeas, peas</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <h3>üì§ Referral Criteria</h3>
                            <ul>
                                <li><strong>Urgent haematology:</strong> Neurological symptoms, pregnancy, suspected malignancy <span class="badge badge-red">2-week referral</span></li>
                                <li><strong>Haematology:</strong> Uncertain cause, no treatment response, persistent MCV &gt;105 fL</li>
                                <li><strong>Gastroenterology:</strong> Malabsorption, IBD suspected, pernicious anemia with GI symptoms <span class="badge badge-amber">Gastric cancer risk 2-3%</span></li>
                                <li><strong>Dietician:</strong> Dietary deficiency suspected <span class="badge badge-green">Lifestyle management</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Follow-up Card -->
            <div class="card" id="followup">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <div class="card-icon">üìä</div>
                        <span>Follow-up & Monitoring</span>
                    </div>
                    <div class="expand-icon">‚ñº</div>
                </div>
                <div class="card-content">
                    <div class="card-body">
                        <div class="section">
                            <h3>üìÖ Monitoring Schedule</h3>
                            <ul>
                                <li><strong>7-10 days:</strong> FBC and reticulocyte count
                                    <br><em>‚ÜëHb and ‚Üëreticulocytes = positive response</em></li>
                                <li><strong>8 weeks:</strong> FBC, MCV, iron and folate levels
                                    <br><em>Should normalize; check for masked deficiencies</em></li>
                                <li><strong>Completion:</strong> Confirm response to folic acid</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>üîÑ Ongoing Assessment</h3>
                            <ul>
                                <li><strong>Symptom review:</strong> At each appointment - improved/worsened/new symptoms</li>
                                <li><strong>Neurological recovery:</strong> Begins within 1 week; complete resolution 6 weeks to 3 months</li>
                                <li><strong>Oral B12:</strong> Check dosage adherence; increase to max licensed dose or switch to IM if inadequate response</li>
                                <li><strong>IM B12:</strong> Increase frequency if symptoms persist; consider alternative diagnoses</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>üõë Stopping Treatment</h3>
                            <div class="important-box success">
                                <strong>Only stop if:</strong> Symptoms resolved AND cause addressed (e.g., diet improved, causative drug stopped)
                            </div>
                            <ul>
                                <li><strong>Reversible cause resolved:</strong> Can consider stopping/reducing IM injections</li>
                                <li><strong>Irreversible cause:</strong> LifIM injections continue even if asymptomatic</li>
                                <li><strong>Unknown cause:</strong> Continue treatment and review regularly</li>
                                <li><strong>Patient advice:</strong> Return if symptoms worsen, reappear, or new symptoms develop</li>
                            </ul>
                        </div>

                        <div class="section">
                            <h3>‚ö†Ô∏è Red Flags for Reassessment</h3>
                            <ul>
                                <li>No hematological response by 8 weeks <span class="badge badge-amber">Check adherence</span></li>
                                <li>Neurological symptoms worsen or don't improve by 3 months <span class="badge badge-red">Re-refer</span></li>
                                <li>New symptoms develop <span class="badge badge-amber">Consider alternative diagnosis</span></li>
                                <li>Recurrent anemia <span class="badge badge-amber">Re-investigate cause</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="sidebar">
            <h3>üìç Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="progress-item active" data-target="assessment" onclick="scrollToSection('assessment')">
                <div class="progress-icon">1</div>
                <div class="progress-text">Assessment</div>
            </div>
            
            <div class="progress-item" data-target="diagnosis" onclick="scrollToSection('diagnosis')">
                <div class="progress-icon">2</div>
                <div class="progress-text">Diagnosis</div>
            </div>
            
            <div class="progress-item" data-target="treatment" onclick="scrollToSection('treatment')">
                <div class="progress-icon">3</div>
                <div class="progress-text">Treatment</div>
            </div>
            
            <div class="progress-item" data-target="followup" onclick="scrollToSection('followup')">
                <div class="progress-icon">4</div>
                <div class="progress-text">Follow-up</div>
            </div>

            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                <h3 style="font-size: 1em; margin-bottom: 15px;">üîó Quick Links</h3>
                <ul style="list-style: none; font-size: 0.85em;">
                    <li style="margin-bottom: 8px;"><a href="#investigations" style="color: #3182ce; text-decoration: none;">‚Üí Investigation thresholds</a></li>
                    <li style="margin-bottom: 8px;"><a href="#treatment-doses" style="color: #3182ce; text-decoration: none;">‚Üí Treatment protocols</a></li>
                    <li style="margin-bottom: 8px;"><a href="#referral" style="color: #3182ce; text-decoration: none;">‚Üí Referral criteria</a></li>
                    <li style="margin-bottom: 8px;"><a href="#monitoring" style="color: #3182ce; text-decoration: none;">‚Üí Monitoring schedule</a></li>
                </ul>
            </div>
        </aside>
    </div>

    <button class="print-button" onclick="window.print()">üñ®Ô∏è Print Algorithm</button>

    <script>
        function toggleCard(header) {
            const card = header.parentElement;
            card.classList.toggle('expanded');
            
            // Update progress tracking
            updateProgress();
        }

        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Expand the target card
            const card = element;
            if (!card.classList.contains('expanded')) {
                card.classList.add('expanded');
            }
            
            // Update active progress item
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.target === sectionId) {
                    item.classList.add('active');
                }
            });
            
            updateProgress();
        }

        function updateProgress() {
            const cards = document.querySelectorAll('.card');
            const progressItems = document.querySelectorAll('.progress-item');
            const progressFill = document.getElementById('progressFill');
            
            let expandedCount = 0;
            cards.forEach((card, index) => {
                if (card.classList.contains('expanded')) {
                    expandedCount++;
                }
            });
            
            const percentage = (expandedCount / cards.length) * 100;
            progressFill.style.width = percentage + '%';
        }

        // Auto-expand first card on load
        document.addEventListener('DOMContentLoaded', function() {
            const firstCard = document.querySelector('.card');
            setTimeout(() => {
                firstCard.classList.add('expanded');
                updateProgress();
            }, 500);
        });

        // Track scroll position for progress bar
        window.addEventListener('scroll', function() {
            const cards = document.querySelectorAll('.card');
            const scrollPosition = window.scrollY + 100;
            
            cards.forEach((card, index) => {
                const cardTop = card.offsetTop;
                const cardBottom = cardTop + card.offsetHeight;
                
                if (scrollPosition >= cardTop && scrollPosition <= cardBottom) {
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    const activeItem = document.querySelector(`[data-target="${card.id}"]`);
                    if (activeItem) {
                        activeItem.classList.add('active');
                    }
                }
            });
        });

        // Add smooth reveal animations for content
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        // Observe all sections
        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>